(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PT = require('./presentation_time.js');

var Controllers = function () {
  function Controllers(videoContainerElement) {
    _classCallCheck(this, Controllers);

    this.videoContainerElement = videoContainerElement;
    this.showingStats = false;
  }

  _createClass(Controllers, [{
    key: 'render',
    value: function render() {
      this.videoContainerElement.className = "eyevinn-player-container";

      var controlBarElement = document.createElement('div');
      controlBarElement.className = "eyevinn-player-controls-wrapper eyevinn-player-controls-hide";
      var controlBarControls = document.createElement('div');
      controlBarControls.className = "eyevinn-player-controls";
      controlBarElement.appendChild(controlBarControls);
      this.controlBarElement = controlBarElement;

      var controlBarLogo = document.createElement('div');
      controlBarLogo.className = "eyevinn-player-logo";
      controlBarElement.appendChild(controlBarLogo);

      // Play/Pause button
      var controlBarPlayPause = document.createElement('div');
      controlBarPlayPause.className = "eyevinn-player-controls-playpause controls-playing";
      controlBarControls.appendChild(controlBarPlayPause);
      this.controlBarPlayPause = controlBarPlayPause;

      // Mute/Unmute button
      var controlBarMuteUnmute = document.createElement('div');
      controlBarMuteUnmute.className = "eyevinn-player-controls-muteunmute controls-muted";
      controlBarControls.appendChild(controlBarMuteUnmute);
      this.controlBarMuteUnmute = controlBarMuteUnmute;

      // Show stats button
      var controlBarStats = document.createElement('div');
      controlBarStats.className = "eyevinn-player-controls-stats";
      controlBarControls.appendChild(controlBarStats);
      this.controlBarStats = controlBarStats;

      this.videoContainerElement.appendChild(controlBarElement);

      var statsElement = document.createElement('div');
      statsElement.className = "eyevinn-player-stats-wrapper eyevinn-player-stats-hide";
      this.statsElement = statsElement;

      this.videoContainerElement.appendChild(statsElement);
    }
  }, {
    key: 'renderStats',
    value: function renderStats() {
      var shakaStats = this.shakaPlayer.getStats();

      var statsHtml = "<p>";
      statsHtml += new PT(this.videoElement.currentTime).toHHMMSS();
      if (!isNaN(shakaStats.decodedFrames)) {
        statsHtml += " (" + shakaStats.decodedFrames + " decoded / " + shakaStats.droppedFrames + " dropped)";
      }
      statsHtml += "</p>";
      statsHtml += "<p>";
      statsHtml += shakaStats.width + "x" + shakaStats.height;
      statsHtml += " (" + Math.floor(shakaStats.streamBandwidth / 1000) + " kbps / " + Math.floor(shakaStats.estimatedBandwidth / 1000) + " kbps estimated bw)";
      statsHtml += "</p>";

      this.statsElement.innerHTML = statsHtml;
    }
  }, {
    key: 'initInteractionHandlers',
    value: function initInteractionHandlers(videoElement) {
      var _this = this;

      this.videoElement = videoElement;

      this.videoContainerElement.addEventListener("mouseover", function () {
        _this.controlBarElement.className = "eyevinn-player-controls-wrapper eyevinn-player-controls-show";
      });
      this.videoContainerElement.addEventListener("mouseout", function () {
        _this.controlBarElement.className = "eyevinn-player-controls-wrapper eyevinn-player-controls-hide";
      });

      this.controlBarPlayPause.addEventListener("click", function () {
        if (_this.videoElement.paused) {
          _this.videoElement.play();
        } else {
          _this.videoElement.pause();
        }
      });

      this.controlBarMuteUnmute.addEventListener("click", function () {
        if (_this.videoElement.muted) {
          _this.videoElement.muted = false;
        } else {
          _this.videoElement.muted = true;
        }
      });

      this.controlBarStats.addEventListener("click", function () {
        _this.showingStats = !_this.showingStats;
        if (!_this.showingStats) {
          _this.statsElement.className = "eyevinn-player-stats-wrapper eyevinn-player-stats-hide";
        } else {
          _this.statsElement.className = "eyevinn-player-stats-wrapper eyevinn-player-stats-show";
        }
      });
    }
  }, {
    key: 'initRenderEvents',
    value: function initRenderEvents(videoElement) {
      var _this2 = this;

      this.videoElement.addEventListener("playing", function () {
        _this2.controlBarPlayPause.className = "eyevinn-player-controls-playpause controls-playing";
      });
      this.videoElement.addEventListener("pause", function () {
        _this2.controlBarPlayPause.className = "eyevinn-player-controls-playpause controls-paused";
      });
      this.videoElement.addEventListener("volumechange", function () {
        if (_this2.videoElement.muted) {
          _this2.controlBarMuteUnmute.className = "eyevinn-player-controls-muteunmute controls-muted";
        } else {
          _this2.controlBarMuteUnmute.className = "eyevinn-player-controls-muteunmute controls-unmuted";
        }
      });
    }
  }, {
    key: 'initRenderStats',
    value: function initRenderStats(videoElement, shakaPlayer) {
      var _this3 = this;

      this.shakaPlayer = shakaPlayer;

      this.videoElement.addEventListener("timeupdate", function () {
        _this3.renderStats();
      });
    }
  }]);

  return Controllers;
}();

;

module.exports = Controllers;

},{"./presentation_time.js":5}],2:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var shaka = require('./lib/shaka-player.compiled.js');
var Controllers = require('./controllers.js');

var EyevinnPlayer = function () {
  function EyevinnPlayer(playerElement, videoSource) {
    _classCallCheck(this, EyevinnPlayer);

    this.playerElement = playerElement;
    this.videoSource = videoSource;
  }

  _createClass(EyevinnPlayer, [{
    key: 'init',
    value: function init() {
      var _this = this;

      this.videoElement = document.createElement('video');
      this.videoElement.className = 'eyevinn-player';
      this.playerElement.appendChild(this.videoElement);
      this.shakaPlayer = new shaka.Player(this.videoElement);

      this.shakaPlayer.configure({
        streaming: {
          jumpLargeGaps: true
        },
        manifest: {
          dash: { clockSyncUri: this.videoSource }
        }
      });
      this.shakaPlayer.load(this.videoSource).then(function (ev) {
        _this.videoControllers = new Controllers(_this.playerElement);
        _this.videoControllers.render();
        _this.videoControllers.initInteractionHandlers(_this.videoElement);
        _this.videoControllers.initRenderEvents(_this.videoElement);
        _this.videoControllers.initRenderStats(_this.videoElement, _this.shakaPlayer);

        _this.videoElement.muted = true;
        _this.videoElement.play();
      });
    }
  }]);

  return EyevinnPlayer;
}();

;

module.exports = EyevinnPlayer;

},{"./controllers.js":1,"./lib/shaka-player.compiled.js":4}],3:[function(require,module,exports){
'use strict';

window.EyevinnPlayer = require('./eyevinn_player.js');

},{"./eyevinn_player.js":2}],4:[function(require,module,exports){
(function(){var g={};
(function(window){var k,aa=this;aa.ue=!0;function m(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function ba(a){var b=p;function c(){}c.prototype=b.prototype;a.ze=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.we=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ca(a){this.c=Math.exp(Math.log(.5)/a);this.b=this.a=0}function da(a,b,c){var d=Math.pow(a.c,b);c=c*(1-d)+d*a.a;isNaN(c)||(a.a=c,a.b+=b)}function ea(a){return a.a/(1-Math.pow(a.c,a.b))};function fa(){this.c=new ca(2);this.f=new ca(5);this.a=0;this.b=5E5}fa.prototype.setDefaultEstimate=function(a){this.b=a};fa.prototype.getBandwidthEstimate=function(){return 128E3>this.a?this.b:Math.min(ea(this.c),ea(this.f))};function ga(){};function t(a,b,c,d){this.severity=a;this.category=b;this.code=c;this.data=Array.prototype.slice.call(arguments,3)}m("shaka.util.Error",t);t.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};t.Severity={RECOVERABLE:1,CRITICAL:2};t.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
t.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,
MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,
DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,
HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,
OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7E3,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008};var ha=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ia(a){var b;a instanceof ia?(ja(this,a.aa),this.Aa=a.Aa,this.ca=a.ca,ka(this,a.Ia),this.W=a.W,la(this,ma(a.a)),this.ta=a.ta):a&&(b=String(a).match(ha))?(ja(this,b[1]||"",!0),this.Aa=na(b[2]||""),this.ca=na(b[3]||"",!0),ka(this,b[4]),this.W=na(b[5]||"",!0),la(this,b[6]||"",!0),this.ta=na(b[7]||"")):this.a=new oa(null)}k=ia.prototype;k.aa="";k.Aa="";k.ca="";k.Ia=null;k.W="";k.ta="";
k.toString=function(){var a=[],b=this.aa;b&&a.push(qa(b,ra,!0),":");if(b=this.ca){a.push("//");var c=this.Aa;c&&a.push(qa(c,ra,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.Ia;null!=b&&a.push(":",String(b))}if(b=this.W)this.ca&&"/"!=b.charAt(0)&&a.push("/"),a.push(qa(b,"/"==b.charAt(0)?sa:ta,!0));(b=this.a.toString())&&a.push("?",b);(b=this.ta)&&a.push("#",qa(b,ua));return a.join("")};
k.resolve=function(a){var b=new ia(this);"data"===b.aa&&(b=new ia);var c=!!a.aa;c?ja(b,a.aa):c=!!a.Aa;c?b.Aa=a.Aa:c=!!a.ca;c?b.ca=a.ca:c=null!=a.Ia;var d=a.W;if(c)ka(b,a.Ia);else if(c=!!a.W){if("/"!=d.charAt(0))if(this.ca&&!this.W)d="/"+d;else{var e=b.W.lastIndexOf("/");-1!=e&&(d=b.W.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=!d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<
f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.W=d:c=""!==a.a.toString();c?la(b,ma(a.a)):c=!!a.ta;c&&(b.ta=a.ta);return b};function ja(a,b,c){a.aa=c?na(b,!0):b;a.aa&&(a.aa=a.aa.replace(/:$/,""))}function ka(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ia=b}else a.Ia=null}function la(a,b,c){b instanceof oa?a.a=b:(c||(b=qa(b,va)),a.a=new oa(b))}
function na(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function qa(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,wa),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wa(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ra=/[#\/\?@]/g,ta=/[\#\?:]/g,sa=/[\#\?]/g,va=/[\#\?@]/g,ua=/#/g;function oa(a){this.b=a||null}oa.prototype.a=null;oa.prototype.c=null;
oa.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.b=a.join("&")};function ma(a){var b=new oa;b.b=a.b;if(a.a){var c={},d;for(d in a.a)c[d]=a.a[d].concat();b.a=c;b.c=a.c}return b};function xa(a,b){return a.reduce(function(a,b,e){return b["catch"](a.bind(null,e))}.bind(null,b),Promise.reject())}function x(a,b){return a.concat(b)}function y(){}function ya(a){return null!=a}function za(a){return function(b){return b!=a}}function Aa(a,b,c){return c.indexOf(a)==b};function z(a,b){if(!b.length)return a;var c=b.map(function(a){return new ia(a)});return a.map(function(a){return new ia(a)}).map(function(a){return c.map(a.resolve.bind(a))}).reduce(x,[]).map(function(a){return a.toString()})}function Ba(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[],keyIds:[]}};function Ca(a,b,c,d,e){var f=e in d,g;for(g in b){var h=e+"."+g,l=f?d[e]:c[g],n=!!{".abr.manager":!0}[h]||!!{serverCertificate:!0}[g];if(f||g in a)void 0===b[g]?void 0===l||f?delete a[g]:a[g]=l:n?a[g]=b[g]:"object"==typeof a[g]&&"object"==typeof b[g]?Ca(a[g],b[g],l,d,h):typeof b[g]==typeof l&&(a[g]=b[g])}}function Da(a){return JSON.parse(JSON.stringify(a))};function A(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function B(a){this.f=!1;this.a=[];this.b=[];this.c=[];this.h=a||null}m("shaka.net.NetworkingEngine",B);B.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};var Ea={};B.registerScheme=function(a,b){Ea[a]=b};B.unregisterScheme=function(a){delete Ea[a]};B.prototype.Jd=function(a){this.b.push(a)};B.prototype.registerRequestFilter=B.prototype.Jd;B.prototype.me=function(a){var b=this.b;a=b.indexOf(a);0<=a&&b.splice(a,1)};B.prototype.unregisterRequestFilter=B.prototype.me;
B.prototype.Gc=function(){this.b=[]};B.prototype.clearAllRequestFilters=B.prototype.Gc;B.prototype.Kd=function(a){this.c.push(a)};B.prototype.registerResponseFilter=B.prototype.Kd;B.prototype.ne=function(a){var b=this.c;a=b.indexOf(a);0<=a&&b.splice(a,1)};B.prototype.unregisterResponseFilter=B.prototype.ne;B.prototype.Hc=function(){this.c=[]};B.prototype.clearAllResponseFilters=B.prototype.Hc;function Fa(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}}
function C(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b}}B.prototype.m=function(){this.f=!0;this.b=[];this.c=[];for(var a=[],b=0;b<this.a.length;++b)a.push(this.a[b]["catch"](y));return Promise.all(a)};B.prototype.destroy=B.prototype.m;
B.prototype.request=function(a,b){if(this.f)return Promise.reject();b.method=b.method||"GET";b.headers=b.headers||{};b.retryParameters=b.retryParameters?Da(b.retryParameters):Fa();b.uris=Da(b.uris);var c=Date.now(),d=Promise.resolve();this.b.forEach(function(c){d=d.then(c.bind(null,a,b))});d=d["catch"](function(a){throw new t(2,1,1006,a);});d=d.then(function(){for(var d=Date.now()-c,f=b.retryParameters||{},g=f.maxAttempts||1,h=f.backoffFactor||2,f=null==f.baseDelay?1E3:f.baseDelay,l=this.g(a,b,0,
d),n=1;n<g;n++)l=l["catch"](function(c,e,f){if(f&&1==f.severity){f=new A;var g=b.retryParameters||{};window.setTimeout(f.resolve,c*(1+(2*Math.random()-1)*(null==g.fuzzFactor?.5:g.fuzzFactor)));return f.then(this.g.bind(this,a,b,e,d))}throw f;}.bind(this,f,n%b.uris.length)),f*=h;return l}.bind(this));this.a.push(d);return d.then(function(b){0<=this.a.indexOf(d)&&this.a.splice(this.a.indexOf(d),1);this.h&&!b.fromCache&&1==a&&this.h(b.timeMs,b.data.byteLength);return b}.bind(this))["catch"](function(a){a&&
(a.severity=2);0<=this.a.indexOf(d)&&this.a.splice(this.a.indexOf(d),1);return Promise.reject(a)}.bind(this))};B.prototype.request=B.prototype.request;
B.prototype.g=function(a,b,c,d){if(this.f)return Promise.reject();var e=new ia(b.uris[c]),f=e.aa;f||(f=location.protocol,f=f.slice(0,-1),ja(e,f),b.uris[c]=e.toString());f=Ea[f];if(!f)return Promise.reject(new t(2,1,1E3,e));var g=Date.now();return f(b.uris[c],b,a).then(function(b){void 0==b.timeMs&&(b.timeMs=Date.now()-g);var c=Date.now(),e=Promise.resolve();this.c.forEach(function(c){e=e.then(function(){return Promise.resolve(c(a,b))}.bind(this))});e=e["catch"](function(a){var b=2;a instanceof t&&
(b=a.severity);throw new t(b,1,1007,a);});return e.then(function(){b.timeMs+=Date.now()-c;b.timeMs+=d;return b})}.bind(this))};function Ga(a,b){for(var c=[],d=0;d<a.length;++d){for(var e=!1,f=0;f<c.length&&!(e=b?b(a[d],c[f]):a[d]===c[f]);++f);e||c.push(a[d])}return c}function Ha(a,b,c){for(var d=0;d<a.length;++d)if(c(a[d],b))return d;return-1};function Ia(){this.a={}}Ia.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};Ia.prototype.get=function(a){return(a=this.a[a])?a.slice():null};Ia.prototype.remove=function(a,b){var c=this.a[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};function D(){this.a=new Ia}D.prototype.m=function(){Ja(this);this.a=null;return Promise.resolve()};function E(a,b,c,d){a.a&&(b=new Ka(b,c,d),a.a.push(c,b))}function La(a,b,c,d){E(a,b,c,function(a){this.ha(b,c);d(a)}.bind(a))}D.prototype.ha=function(a,b){if(this.a)for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.ha(),this.a.remove(b,e))}};function Ja(a){if(a.a){var b=a.a,c=[],d;for(d in b.a)c.push.apply(c,b.a[d]);for(b=0;b<c.length;++b)c[b].ha();a.a.a={}}}
function Ka(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}Ka.prototype.ha=function(){this.target.removeEventListener(this.type,this.a,!1);this.a=this.target=null};function Ma(a){return!a||!Object.keys(a).length}function Na(a){return Object.keys(a).map(function(b){return a[b]})}function Oa(a,b){return Object.keys(a).reduce(function(c,d){c[d]=b(a[d],d);return c},{})}function Pa(a,b){return Object.keys(a).every(function(c){return b(c,a[c])})}function Qa(a,b){Object.keys(a).forEach(function(c){b(c,a[c])})};function F(a){if(!a)return"";a=new Uint8Array(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=escape(Ra(a));try{return decodeURIComponent(a)}catch(b){throw new t(2,2,2004);}}m("shaka.util.StringUtils.fromUTF8",F);
function Sa(a,b,c){if(!a)return"";if(!c&&a.byteLength%2)throw new t(2,2,2004);if(a instanceof ArrayBuffer)var d=a;else c=new Uint8Array(a.byteLength),c.set(new Uint8Array(a)),d=c.buffer;a=Math.floor(a.byteLength/2);c=new Uint16Array(a);d=new DataView(d);for(var e=0;e<a;e++)c[e]=d.getUint16(2*e,b);return Ra(c)}m("shaka.util.StringUtils.fromUTF16",Sa);
function Ta(a){var b=new Uint8Array(a);if(239==b[0]&&187==b[1]&&191==b[2])return F(b);if(254==b[0]&&255==b[1])return Sa(b.subarray(2),!1);if(255==b[0]&&254==b[1])return Sa(b.subarray(2),!0);var c=function(a,b){return a.byteLength<=b||32<=a[b]&&126>=a[b]}.bind(null,b);if(b[0]||b[2]){if(!b[1]&&!b[3])return Sa(a,!0);if(c(0)&&c(1)&&c(2)&&c(3))return F(a)}else return Sa(a,!1);throw new t(2,2,2003);}m("shaka.util.StringUtils.fromBytesAutoDetect",Ta);
function Ua(a){a=unescape(encodeURIComponent(a));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b.buffer}m("shaka.util.StringUtils.toUTF8",Ua);function Ra(a){for(var b="",c=0;c<a.length;c+=16E3)b+=String.fromCharCode.apply(null,a.subarray(c,c+16E3));return b};function Va(a){this.a=null;this.b=function(){this.a=null;a()}.bind(this)}Va.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)};function Wa(a){a.cancel();a.a=setTimeout(a.b,500)};function Xa(a,b){var c=void 0==b?!0:b,d=window.btoa(String.fromCharCode.apply(null,a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")}m("shaka.util.Uint8ArrayUtils.toBase64",Xa);function Ya(a){a=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}m("shaka.util.Uint8ArrayUtils.fromBase64",Ya);
function Za(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b}m("shaka.util.Uint8ArrayUtils.fromHex",Za);function $a(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}m("shaka.util.Uint8ArrayUtils.toHex",$a);function ab(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}m("shaka.util.Uint8ArrayUtils.equal",ab);
m("shaka.util.Uint8ArrayUtils.concat",function(a){for(var b=0,c=0;c<arguments.length;++c)b+=arguments[c].length;for(var b=new Uint8Array(b),d=0,c=0;c<arguments.length;++c)b.set(arguments[c],d),d+=arguments[c].length;return b});function bb(a,b,c,d){this.j=this.i=this.v=null;this.J=!1;this.b=null;this.f=new D;this.a=[];this.o=[];this.l=new A;this.ka=a;this.h=null;this.g=function(a){this.l.reject(a);b(a)}.bind(this);this.A={};this.Ba=c;this.la=d;this.B=new Va(this.Id.bind(this));this.ja=this.c=!1;this.G=[];this.ia=!1;this.P=setInterval(this.Hd.bind(this),1E3);this.l["catch"](function(){})}k=bb.prototype;
k.m=function(){this.c=!0;var a=this.a.map(function(a){return(a.ba.close()||Promise.resolve())["catch"](y)});this.l.reject();this.f&&a.push(this.f.m());this.j&&a.push(this.j.setMediaKeys(null)["catch"](y));this.P&&(clearInterval(this.P),this.P=null);this.B&&this.B.cancel();this.f=this.j=this.i=this.v=this.b=this.B=null;this.a=[];this.o=[];this.la=this.g=this.h=this.ka=null;return Promise.all(a)};k.configure=function(a){this.h=a};
k.init=function(a,b){var c={},d=[];this.ja=b;this.o=a.offlineSessionIds;cb(this,a,b||0<a.offlineSessionIds.length,c,d);return d.length?db(this,c,d):(this.J=!0,Promise.resolve())};
function eb(a,b){if(!a.i)return La(a.f,b,"encrypted",function(){this.g(new t(2,6,6010))}.bind(a)),Promise.resolve();a.j=b;La(a.f,a.j,"play",a.od.bind(a));var c=a.j.setMediaKeys(a.i),c=c["catch"](function(a){return Promise.reject(new t(2,6,6003,a.message))}),d=null;a.b.serverCertificate&&(d=a.i.setServerCertificate(a.b.serverCertificate).then(function(){})["catch"](function(a){return Promise.reject(new t(2,6,6004,a.message))}));return Promise.all([c,d]).then(function(){if(this.c)return Promise.reject();
fb(this);this.b.initData.length||this.o.length||E(this.f,this.j,"encrypted",this.dd.bind(this))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():Promise.reject(a)}.bind(a))}function gb(a,b){return Promise.all(b.map(function(a){return hb(this,a).then(function(a){if(a){for(var b=new A,c=0;c<this.a.length;c++)if(this.a[c].ba==a){this.a[c].ib=b;break}return Promise.all([a.remove(),b])}}.bind(this))}.bind(a)))}
function fb(a){var b=a.b?a.b.initData:[];b.forEach(function(a){ib(this,a.initDataType,a.initData)}.bind(a));a.o.forEach(function(a){hb(this,a)}.bind(a));b.length||a.o.length||a.l.resolve();return a.l}k.keySystem=function(){return this.b?this.b.keySystem:""};function jb(a){return a.a.map(function(a){return a.ba.sessionId})}k.ab=function(){var a=this.a.map(function(a){a=a.ba.expiration;return isNaN(a)?Infinity:a});return Math.min.apply(Math,a)};
function cb(a,b,c,d,e){var f=kb(a);b.periods.forEach(function(a){a.variants.forEach(function(a){f&&(a.drmInfos=[f]);a.drmInfos.forEach(function(b){lb(this,b);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==b.keySystem&&(b.keySystem="com.chromecast.playready");var f=d[b.keySystem];f||(f={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:c?"required":"optional",sessionTypes:[c?"persistent-license":"temporary"],label:b.keySystem,drmInfos:[]},
d[b.keySystem]=f,e.push(b.keySystem));f.drmInfos.push(b);b.distinctiveIdentifierRequired&&(f.distinctiveIdentifier="required");b.persistentStateRequired&&(f.persistentState="required");var g=[];a.video&&g.push(a.video);a.audio&&g.push(a.audio);g.forEach(function(a){var c="video"==a.type?f.videoCapabilities:f.audioCapabilities,d=("video"==a.type?b.videoRobustness:b.audioRobustness)||"",e=a.mimeType;a.codecs&&(e+='; codecs="'+a.codecs+'"');c.push({robustness:d,contentType:e})}.bind(this))}.bind(this))}.bind(this))}.bind(a))}
function db(a,b,c){if(1==c.length&&""==c[0])return Promise.reject(new t(2,6,6E3));var d=new A,e=d;[!0,!1].forEach(function(a){c.forEach(function(c){var d=b[c];d.drmInfos.some(function(a){return!!a.licenseServerUri})==a&&(d.audioCapabilities.length||delete d.audioCapabilities,d.videoCapabilities.length||delete d.videoCapabilities,e=e["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(c,[d])}.bind(this)))}.bind(this))}.bind(a));e=e["catch"](function(){return Promise.reject(new t(2,
6,6001))});e=e.then(function(a){if(this.c)return Promise.reject();var c=0<=navigator.userAgent.indexOf("Edge/"),d=a.getConfiguration();this.v=(d.audioCapabilities||[]).concat(d.videoCapabilities||[]).map(function(a){return a.contentType});c&&(this.v=null);c=b[a.keySystem];mb(this,a.keySystem,c,c.drmInfos);return this.b.licenseServerUri?a.createMediaKeys():Promise.reject(new t(2,6,6012))}.bind(a)).then(function(a){if(this.c)return Promise.reject();this.i=a;this.J=!0}.bind(a))["catch"](function(a){if(this.c)return Promise.resolve();
this.v=this.b=null;return a instanceof t?Promise.reject(a):Promise.reject(new t(2,6,6002,a.message))}.bind(a));d.reject();return e}
function lb(a,b){var c=b.keySystem;if(c){if(!b.licenseServerUri){var d=a.h.servers[c];d&&(b.licenseServerUri=d)}b.keyIds||(b.keyIds=[]);if(c=a.h.advanced[c])b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=c.persistentStateRequired),b.videoRobustness||(b.videoRobustness=c.videoRobustness),b.audioRobustness||(b.audioRobustness=c.audioRobustness),b.serverCertificate||(b.serverCertificate=c.serverCertificate)}}
function kb(a){if(Ma(a.h.clearKeys))return null;var b=[],c=[],d;for(d in a.h.clearKeys){var e=a.h.clearKeys[d],f=Za(d),e=Za(e),f={kty:"oct",kid:Xa(f,!1),k:Xa(e,!1)};b.push(f);c.push(f.kid)}a=JSON.stringify({keys:b});c=JSON.stringify({kids:c});c=[{initData:new Uint8Array(Ua(c)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,
initData:c,keyIds:[]}}function mb(a,b,c,d){var e=[],f=[],g=[],h=[];nb(d,e,f,g,h);a.b={keySystem:b,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==c.distinctiveIdentifier,persistentStateRequired:"required"==c.persistentState,audioRobustness:c.audioCapabilities?c.audioCapabilities[0].robustness:"",videoRobustness:c.videoCapabilities?c.videoCapabilities[0].robustness:"",serverCertificate:f[0],initData:g,keyIds:h}}
function nb(a,b,c,d,e){function f(a,b){return a.keyId&&a.keyId==b.keyId?!0:a.initDataType==b.initDataType&&ab(a.initData,b.initData)}a.forEach(function(a){-1==b.indexOf(a.licenseServerUri)&&b.push(a.licenseServerUri);a.serverCertificate&&-1==Ha(c,a.serverCertificate,ab)&&c.push(a.serverCertificate);a.initData&&a.initData.forEach(function(a){-1==Ha(d,a,f)&&d.push(a)});if(a.keyIds)for(var g=0;g<a.keyIds.length;++g)-1==e.indexOf(a.keyIds[g])&&e.push(a.keyIds[g])})}
k.dd=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.a.length;++c)if(ab(b,this.a[c].initData))return;ib(this,a.initDataType,b)};
function hb(a,b){try{var c=a.i.createSession("persistent-license")}catch(f){var d=new t(2,6,6005,f.message);a.g(d);return Promise.reject(d)}E(a.f,c,"message",a.ic.bind(a));E(a.f,c,"keystatuseschange",a.cc.bind(a));var e={initData:null,ba:c,loaded:!1,xb:Infinity,ib:null};a.a.push(e);return c.load(b).then(function(a){if(!this.c){if(a)return e.loaded=!0,this.a.every(function(a){return a.loaded})&&this.l.resolve(),c;this.a.splice(this.a.indexOf(e),1);this.g(new t(2,6,6013))}}.bind(a),function(a){this.c||
(this.a.splice(this.a.indexOf(e),1),this.g(new t(2,6,6005,a.message)))}.bind(a))}
function ib(a,b,c){try{var d=a.ja?a.i.createSession("persistent-license"):a.i.createSession()}catch(e){a.g(new t(2,6,6005,e.message));return}E(a.f,d,"message",a.ic.bind(a));E(a.f,d,"keystatuseschange",a.cc.bind(a));a.a.push({initData:c,ba:d,loaded:!1,xb:Infinity,ib:null});d.generateRequest(b,c.buffer)["catch"](function(a){if(!this.c){for(var b=0;b<this.a.length;++b)if(this.a[b].ba==d){this.a.splice(b,1);break}this.g(new t(2,6,6006,a.message))}}.bind(a))}
k.ic=function(a){this.h.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ia?this.G.push(a):ob(this,a)};
function ob(a,b){for(var c=b.target,d,e=0;e<a.a.length;e++)if(a.a[e].ba==c){d=a.a[e].ib;break}e=C([a.b.licenseServerUri],a.h.retryParameters);e.body=b.message;e.method="POST";"com.microsoft.playready"==a.b.keySystem&&pb(e);a.ka.request(2,e).then(function(a){return this.c?Promise.reject():c.update(a.data).then(function(){d&&d.resolve()})}.bind(a),function(a){if(this.c)return Promise.resolve();a=new t(2,6,6007,a);this.g(a);d&&d.reject(a)}.bind(a))["catch"](function(a){if(this.c)return Promise.resolve();
a=new t(2,6,6008,a.message);this.g(a);d&&d.reject(a)}.bind(a))}function pb(a){var b=Sa(a.body,!0,!0);if(-1==b.indexOf("PlayReadyKeyMessage"))a.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var b=(new DOMParser).parseFromString(b,"application/xml"),c=b.getElementsByTagName("HttpHeader"),d=0;d<c.length;++d)a.headers[c[d].querySelector("name").textContent]=c[d].querySelector("value").textContent;a.body=Ya(b.querySelector("Challenge").textContent).buffer}}
k.cc=function(a){a=a.target;var b;for(b=0;b<this.a.length&&this.a[b].ba!=a;++b);if(b!=this.a.length){var c=!1;a.keyStatuses.forEach(function(a,d){if("string"==typeof d){var e=d;d=a;a=e}if("com.microsoft.playready"==this.b.keySystem&&16==d.byteLength){var e=new DataView(d),f=e.getUint32(0,!0),l=e.getUint16(4,!0),n=e.getUint16(6,!0);e.setUint32(0,f,!1);e.setUint16(4,l,!1);e.setUint16(6,n,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==a&&(a="usable");"status-pending"!=a&&(this.a[b].loaded=
!0,this.a.every(function(a){return a.loaded})&&this.l.resolve());"expired"==a&&(c=!0);e=$a(new Uint8Array(d));this.A[e]=a}.bind(this));var d=a.expiration-Date.now();(0>d||c&&1E3>d)&&!this.a[b].ib&&(this.a.splice(b,1),a.close());Wa(this.B)}};k.Id=function(){function a(a,c){return"expired"==c}!Ma(this.A)&&Pa(this.A,a)&&this.g(new t(2,6,6014));this.Ba(this.A)};
function qb(){var a=[],b=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:b}],d={};"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(b){var e=navigator.requestMediaKeySystemAccess(b,c).then(function(a){var c=a.getConfiguration().sessionTypes;d[b]=
{persistentState:c?0<=c.indexOf("persistent-license"):!1};return a.createMediaKeys()})["catch"](function(){d[b]=null});a.push(e)});return Promise.all(a).then(function(){return d})}k.od=function(){for(var a=0;a<this.G.length;a++)ob(this,this.G[a]);this.ia=!0;this.G=[]};function rb(a,b){var c=a.keySystem();return!b.drmInfos.length||b.drmInfos.some(function(a){return a.keySystem==c})}
function sb(a,b){if(!a.length)return b;if(!b.length)return a;for(var c=[],d=0;d<a.length;d++)for(var e=0;e<b.length;e++)if(a[d].keySystem==b[e].keySystem){var f=a[d],e=b[e],g=[],g=g.concat(f.initData||[]),g=g.concat(e.initData||[]),h=[],h=h.concat(f.keyIds),h=h.concat(e.keyIds);c.push({keySystem:f.keySystem,licenseServerUri:f.licenseServerUri||e.licenseServerUri,distinctiveIdentifierRequired:f.distinctiveIdentifierRequired||e.distinctiveIdentifierRequired,persistentStateRequired:f.persistentStateRequired||
e.persistentStateRequired,videoRobustness:f.videoRobustness||e.videoRobustness,audioRobustness:f.audioRobustness||e.audioRobustness,serverCertificate:f.serverCertificate||e.serverCertificate,initData:g,keyIds:h});break}return c}k.Hd=function(){this.a.forEach(function(a){var b=a.xb,c=a.ba.expiration;isNaN(c)&&(c=Infinity);c!=b&&(this.la(a.ba.sessionId,c),a.xb=c)}.bind(this))};function tb(a){this.f=null;this.c=a;this.h=0;this.g=Infinity;this.a=this.b=null}var ub={};function vb(a,b){ub[a]=b.length?wb.bind(null,b):b}m("shaka.media.TextEngine.registerParser",vb);m("shaka.media.TextEngine.unregisterParser",function(a){delete ub[a]});function xb(a,b,c){return a>=b?null:new VTTCue(a,b,c)}m("shaka.media.TextEngine.makeCue",xb);tb.prototype.m=function(){this.c&&yb(this,function(){return!0});this.c=this.f=null;return Promise.resolve()};
function zb(a,b,c,d){return Promise.resolve().then(function(){if(this.c)if(null==c||null==d)this.f.parseInit(b);else{for(var a=this.f.parseMedia(b,{periodStart:this.h,segmentStart:c,segmentEnd:d}),f=0;f<a.length&&!(a[f].startTime>=this.g);++f)this.c.addCue(a[f]);null==this.b&&(this.b=c);this.a=Math.min(d,this.g)}}.bind(a))}
tb.prototype.remove=function(a,b){return Promise.resolve().then(function(){this.c&&(yb(this,function(c){return c.startTime>=b||c.endTime<=a?!1:!0}),null==this.b||b<=this.b||a>=this.a||(a<=this.b&&b>=this.a?this.b=this.a=null:a<=this.b&&b<this.a?this.b=b:a>this.b&&b>=this.a&&(this.a=a)))}.bind(this))};function yb(a,b){for(var c=a.c.cues,d=[],e=0;e<c.length;++e)b(c[e])&&d.push(c[e]);for(e=0;e<d.length;++e)a.c.removeCue(d[e])}function wb(a){this.Na=a}
wb.prototype.parseInit=function(a){this.Na(a,0,null,null)};wb.prototype.parseMedia=function(a,b){return this.Na(a,b.periodStart,b.segmentStart,b.segmentEnd)};function Ab(a){return!a||1==a.length&&1E-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null}function Bb(a,b){return!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0)?!1:b>=a.start(0)&&b<=a.end(a.length-1)}function Cb(a,b){if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return 0;for(var c=0,d=a.length-1;0<=d&&a.end(d)>b;--d)c+=a.end(d)-Math.max(a.start(d),b);return c};function Db(a,b,c){this.f=a;this.N=b;this.i=c;this.c={};this.a=null;this.b={};this.g=new D;this.h=!1}
function Eb(){var a={};'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(b){a[b]=!!ub[b]||
MediaSource.isTypeSupported(b);var c=b.split(";")[0];a[c]=a[c]||a[b]});return a}k=Db.prototype;k.m=function(){this.h=!0;var a=[],b;for(b in this.b){var c=this.b[b],d=c[0];this.b[b]=c.slice(0,1);d&&a.push(d.p["catch"](y));for(d=1;d<c.length;++d)c[d].p["catch"](y),c[d].p.reject()}this.a&&a.push(this.a.m());return Promise.all(a).then(function(){this.g.m();this.a=this.i=this.N=this.f=this.g=null;this.c={};this.b={}}.bind(this))};
k.init=function(a){for(var b in a){var c=a[b];"text"==b?Fb(this,c):(c=this.N.addSourceBuffer(c),E(this.g,c,"error",this.he.bind(this,b)),E(this.g,c,"updateend",this.Ha.bind(this,b)),this.c[b]=c,this.b[b]=[])}};function Fb(a,b){a.a||(a.a=new tb(a.i));a.a.f=new ub[b]}function Gb(a,b){if("text"==b)var c=a.a.b;else c=Ib(a,b),c=!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:1==c.length&&0>c.start(0)?0:c.length?c.start(0):null;return c}function Ib(a,b){try{return a.c[b].buffered}catch(c){return null}}
function Jb(a,b,c,d,e){return"text"==b?zb(a.a,c,d,e):Kb(a,b,a.ge.bind(a,b,c))}k.remove=function(a,b,c){return"text"==a?this.a.remove(b,c):Kb(this,a,this.oc.bind(this,a,b,c))};function Lb(a,b){return"text"==b?a.a.remove(0,Infinity):Kb(a,b,a.oc.bind(a,b,0,a.N.duration))}function Mb(a,b,c,d){if("text"==b)return a.a.h=c,null!=d&&(a.a.g=d),Promise.resolve();null==d&&(d=Infinity);return Promise.all([Kb(a,b,a.Cc.bind(a,b)),Kb(a,b,a.Xd.bind(a,b,c)),Kb(a,b,a.Vd.bind(a,b,d))])}
k.endOfStream=function(a){return Nb(this,function(){a?this.N.endOfStream(a):this.N.endOfStream()}.bind(this))};k.pa=function(a){return Nb(this,function(){this.N.duration=a}.bind(this))};k.Y=function(){return this.N.duration};k.ge=function(a,b){this.c[a].appendBuffer(b)};k.oc=function(a,b,c){c<=b?this.Ha(a):this.c[a].remove(b,c)};k.Cc=function(a){var b=this.c[a].appendWindowEnd;this.c[a].abort();this.c[a].appendWindowEnd=b;this.Ha(a)};k.Mc=function(a){this.f.currentTime-=.001;this.Ha(a)};
k.Xd=function(a,b){this.c[a].timestampOffset=b;this.Ha(a)};k.Vd=function(a,b){this.c[a].appendWindowEnd=b+.04;this.Ha(a)};k.he=function(a){this.b[a][0].p.reject(new t(2,3,3014,this.f.error?this.f.error.code:0))};k.Ha=function(a){var b=this.b[a][0];b&&(b.p.resolve(),Ob(this,a))};
function Kb(a,b,c){if(a.h)return Promise.reject();c={start:c,p:new A};a.b[b].push(c);if(1==a.b[b].length)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new t(2,3,3017,b)):c.p.reject(new t(2,3,3015,d)),Ob(a,b)}return c.p}
function Nb(a,b){if(a.h)return Promise.reject();var c=[],d;for(d in a.c){var e=new A,f={start:function(a){a.resolve()}.bind(null,e),p:e};a.b[d].push(f);c.push(e);1==a.b[d].length&&f.start()}return Promise.all(c).then(function(){var a;try{b()}catch(l){var c=Promise.reject(new t(2,3,3015,l))}for(a in this.c)Ob(this,a);return c}.bind(a),function(){return Promise.reject()}.bind(a))}function Ob(a,b){a.b[b].shift();var c=a.b[b][0];if(c)try{c.start()}catch(d){c.p.reject(new t(2,3,3015,d)),Ob(a,b)}};function Pb(a,b,c){return c==b||a>=Qb&&c==b.split("-")[0]||a>=Rb&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Qb=1,Rb=2;function Sb(a){a=a.toLowerCase().split("-");var b=Tb[a[0]];b&&(a[0]=b);return a.join("-")}
var Tb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Ub(a,b,c){var d=a.video;return d&&(d.width<b.minWidth||d.width>b.maxWidth||d.width>c.width||d.height<b.minHeight||d.height>b.maxHeight||d.height>c.height||d.width*d.height<b.minPixels||d.width*d.height>b.maxPixels)||a.bandwidth<b.minBandwidth||a.bandwidth>b.maxBandwidth?!1:!0}function Vb(a,b,c){var d=!1;a.variants.forEach(function(a){var e=a.allowedByApplication;a.allowedByApplication=Ub(a,b,c);e!=a.allowedByApplication&&(d=!0)});return d}
function Wb(a,b,c){var d=b.video,e=b.audio;for(b=0;b<c.variants.length;++b){var f=c.variants[b],g=a,h=e,l=d;(g&&g.J&&!rb(g,f)?0:Xb(f.audio,g,h)&&Xb(f.video,g,l))||(c.variants.splice(b,1),--b)}for(b=0;b<c.textStreams.length;++b)a=c.textStreams[b],ub[Yb(a.mimeType,a.codecs)]||(c.textStreams.splice(b,1),--b)}
function Xb(a,b,c){if(!a)return!0;var d=null;b&&b.J&&(d=b.v);b=Yb(a.mimeType,a.codecs);return!ub[b]&&!MediaSource.isTypeSupported(b)||d&&a.encrypted&&0>d.indexOf(b)||c&&(a.mimeType!=c.mimeType||a.codecs.split(".")[0]!=c.codecs.split(".")[0])?!1:!0}
function Zb(a,b,c){var d=null;return $b(a.variants).map(function(a){var e;a.video&&a.audio?e=c==a.video.id&&b==a.audio.id:e=a.video&&c==a.video.id||a.audio&&b==a.audio.id;var g="";a.video&&(g+=a.video.codecs);a.audio&&(""!=g&&(g+=", "),g+=a.audio.codecs,d=a.audio.label);var h=a.audio?a.audio.codecs:null,l=a.video?a.video.codecs:null,n=null;a.video?n=a.video.mimeType:a.audio&&(n=a.audio.mimeType);var q=null;a.audio?q=a.audio.kind:a.video&&(q=a.video.kind);var r=Ga((a.audio?a.audio.roles:[]).concat(a.video?
a.video.roles:[]));return{id:a.id,active:e,type:"variant",bandwidth:a.bandwidth,language:a.language,label:d,kind:q||null,width:a.video?a.video.width:null,height:a.video?a.video.height:null,frameRate:a.video?a.video.frameRate:void 0,mimeType:n,codecs:g,audioCodec:h,videoCodec:l,primary:a.primary,roles:r,videoId:a.video?a.video.id:null,audioId:a.audio?a.audio.id:null}})}
function ac(a,b){return a.textStreams.map(function(a){return{id:a.id,active:b==a.id,type:"text",language:a.language,label:a.label,kind:a.kind,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles}})}function bc(a,b){for(var c=0;c<a.variants.length;c++)if(a.variants[c].id==b.id)return a.variants[c];return null}function cc(a,b){for(var c=0;c<a.textStreams.length;c++)if(a.textStreams[c].id==b.id)return a.textStreams[c];return null}
function $b(a){return a.filter(function(a){return a.allowedByApplication&&a.allowedByKeySystem})}function dc(a,b,c){var d=$b(a.variants),e=d.filter(function(a){return a.language==d[0].language});a=d.filter(function(a){return a.primary});a.length&&(e=a);if(b){var f=Sb(b);[Rb,Qb,0].forEach(function(a){var b=!1;d.forEach(function(d){f=Sb(f);var g=Sb(d.language);Pb(a,f,g)&&(b?e.push(d):(e=[d],b=!0),c&&(c.audio=!0))})})}return e}
function ec(a,b,c){var d=a.textStreams,e=d;a=d.filter(function(a){return a.primary});a.length&&(e=a);if(b){var f=Sb(b);[Rb,Qb,0].forEach(function(a){var b=!1;d.forEach(function(d){var g=Sb(d.language);Pb(a,f,g)&&(b?e.push(d):(e=[d],b=!0),c&&(c.text=!0))})})}return e}function fc(a,b,c){for(var d=0;d<c.length;d++)if(c[d].audio==a&&c[d].video==b)return c[d];return null}
function gc(a,b,c){function d(a,b){return null==a?null==b:b.id==a}for(var e=0;e<c.length;e++)if(d(a,c[e].audio)&&d(b,c[e].video))return c[e];return null}function Yb(a,b){var c=a;b&&(c+='; codecs="'+b+'"');return c}function hc(a,b){for(var c=a.periods.length-1;0<c;--c)if(b>=a.periods[c].startTime)return c;return 0}
function ic(a,b){for(var c=0;c<a.periods.length;++c){var d=a.periods[c];if("text"==b.type)for(var e=0;e<d.textStreams.length;++e){if(d.textStreams[e]==b)return c}else for(e=0;e<d.variants.length;++e){var f=d.variants[e];if(f.audio==b||f.video==b||f.video&&f.video.trickModeVideo==b)return c}}return-1};function H(){this.f=null;this.b=!1;this.a=new fa;this.h=[];this.g=[];this.j=!1;this.c=null;this.i={minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minBandwidth:0,maxBandwidth:Infinity}}m("shaka.abr.SimpleAbrManager",H);H.prototype.stop=function(){this.f=null;this.b=!1;this.h=[];this.g=[];this.c=null};H.prototype.stop=H.prototype.stop;H.prototype.init=function(a){this.f=a};H.prototype.init=H.prototype.init;
H.prototype.chooseStreams=function(a){var b={};if(-1<a.indexOf("audio")||-1<a.indexOf("video")){var c=this.h;var d=jc(this.i,c);var e=this.a.getBandwidthEstimate();if(c.length&&!d.length)throw new t(2,4,4012);for(var c=d[0],f=0;f<d.length;++f){var g=d[f],h=(d[f+1]||{bandwidth:Infinity}).bandwidth/.85;e>=g.bandwidth/.95&&e<=h&&(c=g)}(d=c)&&d.video&&(b.video=d.video);d&&d.audio&&(b.audio=d.audio)}-1<a.indexOf("text")&&(b.text=this.g[0]);this.c=Date.now();return b};H.prototype.chooseStreams=H.prototype.chooseStreams;
H.prototype.enable=function(){this.b=!0};H.prototype.enable=H.prototype.enable;H.prototype.disable=function(){this.b=!1};H.prototype.disable=H.prototype.disable;H.prototype.segmentDownloaded=function(a,b){var c=this.a;if(!(16E3>b)){var d=8E3*b/a,e=a/1E3;c.a+=b;da(c.c,e,d);da(c.f,e,d)}if(null!=this.c&&this.b)a:{if(!this.j){if(!(128E3<=this.a.a))break a;this.j=!0}else if(8E3>Date.now()-this.c)break a;c=this.chooseStreams(["audio","video"]);this.a.getBandwidthEstimate();this.f(c)}};
H.prototype.segmentDownloaded=H.prototype.segmentDownloaded;H.prototype.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate()};H.prototype.getBandwidthEstimate=H.prototype.getBandwidthEstimate;H.prototype.setDefaultEstimate=function(a){this.a.setDefaultEstimate(a)};H.prototype.setDefaultEstimate=H.prototype.setDefaultEstimate;H.prototype.setRestrictions=function(a){this.i=a};H.prototype.setRestrictions=H.prototype.setRestrictions;H.prototype.setVariants=function(a){this.h=a};
H.prototype.setVariants=H.prototype.setVariants;H.prototype.setTextStreams=function(a){this.g=a};H.prototype.setTextStreams=H.prototype.setTextStreams;function jc(a,b){return b.filter(function(b){return Ub(b,a,{width:Infinity,height:Infinity})}).sort(function(a,b){return a.bandwidth-b.bandwidth})};function I(a,b){var c=b||{},d;for(d in c)this[d]=c[d];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}I.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};I.prototype.stopImmediatePropagation=function(){this.a=!0};I.prototype.stopPropagation=function(){};var kc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),lc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),mc=["loop","playbackRate"],nc=["pause","play"],oc="adaptation buffering emsg error loading unloading texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged".split(" "),pc="drmInfo getAudioLanguages getConfiguration getExpiration getManifestUri getPlaybackRate getPlayheadTimeAsDate getTextLanguages getTextTracks getTracks getStats getVariantTracks isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),
qc=[["getConfiguration","configure"]],rc=[["isTextTrackVisible","setTextTrackVisibility"]],sc="addTextTrack cancelTrickPlay configure resetConfiguration selectAudioLanguage selectTextLanguage selectTextTrack selectTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),uc=["load","unload"];
function vc(a){return JSON.stringify(a,function(a,c){if("manager"!=a&&"function"!=typeof c){if(c instanceof Event||c instanceof I){var b={},e;for(e in c){var f=c[e];f&&"object"==typeof f||e in Event||(b[e]=f)}return b}if(c instanceof TimeRanges)for(b={__type__:"TimeRanges",length:c.length,start:[],end:[]},e=0;e<c.length;++e)b.start.push(c.start(e)),b.end.push(c.end(e));else b="number"==typeof c?isNaN(c)?"NaN":isFinite(c)?c:0>c?"-Infinity":"Infinity":c;return b}})}
function wc(a){return JSON.parse(a,function(a,c){return"NaN"==c?NaN:"-Infinity"==c?-Infinity:"Infinity"==c?Infinity:c&&"object"==typeof c&&"TimeRanges"==c.__type__?xc(c):c})}function xc(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}};function yc(a,b,c,d,e){this.J=a;this.l=b;this.B=c;this.G=d;this.v=e;this.c=this.j=this.h=!1;this.A="";this.a=this.i=null;this.b={video:{},player:{}};this.o=0;this.f={};this.g=null}k=yc.prototype;k.m=function(){zc(this);this.a&&(this.a.leave(function(){},function(){}),this.a=null);this.G=this.B=this.l=null;this.c=this.j=this.h=!1;this.g=this.f=this.b=this.i=null;return Promise.resolve()};k.V=function(){return this.c};k.Db=function(){return this.A};
k.init=function(){if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){delete window.__onGCastApiAvailable;this.h=!0;this.l();var a=new chrome.cast.SessionRequest(this.J),a=new chrome.cast.ApiConfig(a,this.ed.bind(this),this.qd.bind(this),"origin_scoped");chrome.cast.initialize(a,function(){},function(){})}else window.__onGCastApiAvailable=function(a){a&&this.init()}.bind(this)};k.Gb=function(a){this.i=a;this.c&&Ac(this,{type:"appData",appData:this.i})};
k.cast=function(a){if(!this.h)return Promise.reject(new t(1,8,8E3));if(!this.j)return Promise.reject(new t(1,8,8001));if(this.c)return Promise.reject(new t(1,8,8002));this.g=new A;chrome.cast.requestSession(this.zb.bind(this,a),this.ac.bind(this));return this.g};k.$a=function(){this.c&&(zc(this),this.a&&(this.a.stop(function(){},function(){}),this.a=null))};
k.get=function(a,b){if("video"==a){if(0<=nc.indexOf(b))return this.nc.bind(this,a,b)}else if("player"==a){if(0<=sc.indexOf(b))return this.nc.bind(this,a,b);if(0<=uc.indexOf(b))return this.Md.bind(this,a,b);if(0<=pc.indexOf(b))return this.jc.bind(this,a,b)}return this.jc(a,b)};k.set=function(a,b,c){this.b[a][b]=c;Ac(this,{type:"set",targetName:a,property:b,value:c})};
k.zb=function(a,b){this.a=b;this.a.addUpdateListener(this.bc.bind(this));this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.kd.bind(this));this.bc();Ac(this,{type:"init",initState:a,appData:this.i});this.g.resolve()};k.ac=function(a){var b=8003;switch(a.code){case "cancel":b=8004;break;case "timeout":b=8005;break;case "receiver_unavailable":b=8006}this.g.reject(new t(2,8,b,a))};k.jc=function(a,b){return this.b[a][b]};
k.nc=function(a,b){Ac(this,{type:"call",targetName:a,methodName:b,args:Array.prototype.slice.call(arguments,2)})};k.Md=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=new A,e=this.o.toString();this.o++;this.f[e]=d;Ac(this,{type:"asyncCall",targetName:a,methodName:b,args:c,id:e});return d};k.ed=function(a){var b=this.v();this.g=new A;this.zb(b,a)};k.qd=function(a){this.j="available"==a;this.l()};
k.bc=function(){var a=this.a?"connected"==this.a.status:!1;if(this.c&&!a){this.G();for(var b in this.b)this.b[b]={};zc(this)}this.A=(this.c=a)?this.a.receiver.friendlyName:"";this.l()};function zc(a){for(var b in a.f){var c=a.f[b];delete a.f[b];c.reject(new t(1,7,7E3))}}
k.kd=function(a,b){var c=wc(b);switch(c.type){case "event":var d=c.targetName,e=c.event;this.B(d,new I(e.type,e));break;case "update":e=c.update;for(d in e){var c=this.b[d]||{};for(f in e[d])c[f]=e[d][f]}break;case "asyncComplete":d=c.id;var f=c.error;c=this.f[d];delete this.f[d];if(c)if(f){d=new t(f.severity,f.category,f.code);for(e in f)d[e]=f[e];c.reject(d)}else c.resolve()}};function Ac(a,b){var c=vc(b);a.a.sendMessage("urn:x-cast:com.google.shaka.v2",c,function(){},ga)};function p(){this.lb=new Ia;this.Ta=this}p.prototype.addEventListener=function(a,b){this.lb.push(a,b)};p.prototype.removeEventListener=function(a,b){this.lb.remove(a,b)};p.prototype.dispatchEvent=function(a){for(var b=this.lb.get(a.type)||[],c=0;c<b.length;++c){a.target=this.Ta;a.currentTarget=this.Ta;var d=b[c];try{d.handleEvent?d.handleEvent(a):d.call(this,a)}catch(e){}if(a.a)break}return a.defaultPrevented};function J(a,b,c){p.call(this);this.c=a;this.b=b;this.h=this.f=this.g=this.i=this.j=null;this.a=new yc(c,this.ce.bind(this),this.de.bind(this),this.ee.bind(this),this.Tb.bind(this));Bc(this)}ba(J);m("shaka.cast.CastProxy",J);J.prototype.m=function(a){a&&this.a&&this.a.$a();a=[this.h?this.h.m():null,this.b?this.b.m():null,this.a?this.a.m():null];this.a=this.h=this.i=this.j=this.b=this.c=null;return Promise.all(a)};J.prototype.destroy=J.prototype.m;J.prototype.Xc=function(){return this.j};
J.prototype.getVideo=J.prototype.Xc;J.prototype.Rc=function(){return this.i};J.prototype.getPlayer=J.prototype.Rc;J.prototype.Dc=function(){return this.a?this.a.h&&this.a.j:!1};J.prototype.canCast=J.prototype.Dc;J.prototype.V=function(){return this.a?this.a.V():!1};J.prototype.isCasting=J.prototype.V;J.prototype.Db=function(){return this.a?this.a.Db():""};J.prototype.receiverName=J.prototype.Db;J.prototype.cast=function(){var a=this.Tb();return this.a.cast(a).then(function(){return this.b.hb()}.bind(this))};
J.prototype.cast=J.prototype.cast;J.prototype.Gb=function(a){this.a.Gb(a)};J.prototype.setAppData=J.prototype.Gb;J.prototype.ke=function(){var a=this.a;if(a.c){var b=a.v();chrome.cast.requestSession(a.zb.bind(a,b),a.ac.bind(a))}};J.prototype.suggestDisconnect=J.prototype.ke;J.prototype.$a=function(){this.a.$a()};J.prototype.forceDisconnect=J.prototype.$a;
function Bc(a){a.a.init();a.h=new D;kc.forEach(function(a){E(this.h,this.c,a,this.re.bind(this))}.bind(a));oc.forEach(function(a){E(this.h,this.b,a,this.Gd.bind(this))}.bind(a));a.j={};for(var b in a.c)Object.defineProperty(a.j,b,{configurable:!1,enumerable:!0,get:a.qe.bind(a,b),set:a.se.bind(a,b)});a.i={};for(b in a.b)Object.defineProperty(a.i,b,{configurable:!1,enumerable:!0,get:a.Fd.bind(a,b)});a.g=new p;a.g.Ta=a.j;a.f=new p;a.f.Ta=a.i}k=J.prototype;
k.Tb=function(){var a={video:{},player:{},playerAfterLoad:{},manifest:this.b.Ya,startTime:null};this.c.pause();mc.forEach(function(b){a.video[b]=this.c[b]}.bind(this));this.c.ended||(a.startTime=this.c.currentTime);qc.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.player[c]=b}.bind(this));rc.forEach(function(b){var c=b[1];b=this.b[b[0]]();a.playerAfterLoad[c]=b}.bind(this));return a};k.ce=function(){this.dispatchEvent(new I("caststatuschanged"))};
k.ee=function(){qc.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));var a=this.a.get("player","getManifestUri")(),b=this.a.get("video","ended"),c=Promise.resolve(),d=this.c.autoplay,e=null;b||(e=this.a.get("video","currentTime"));a&&(this.c.autoplay=!1,c=this.b.load(a,e),c["catch"](function(a){this.b.dispatchEvent(new I("error",{detail:a}))}.bind(this)));var f={};mc.forEach(function(a){f[a]=this.a.get("video",a)}.bind(this));c.then(function(){mc.forEach(function(a){this.c[a]=
f[a]}.bind(this));rc.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])();this.b[b](a)}.bind(this));this.c.autoplay=d;a&&this.c.play()}.bind(this))};
k.qe=function(a){if("addEventListener"==a)return this.g.addEventListener.bind(this.g);if("removeEventListener"==a)return this.g.removeEventListener.bind(this.g);if(this.a.V()&&!Object.keys(this.a.b.video).length){var b=this.c[a];if("function"!=typeof b)return b}return this.a.V()?this.a.get("video",a):(b=this.c[a],"function"==typeof b&&(b=b.bind(this.c)),b)};k.se=function(a,b){this.a.V()?this.a.set("video",a,b):this.c[a]=b};k.re=function(a){this.a.V()||this.g.dispatchEvent(new I(a.type,a))};
k.Fd=function(a){return"addEventListener"==a?this.f.addEventListener.bind(this.f):"removeEventListener"==a?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==a?this.b.Ub.bind(this.b):this.a.V()&&!Object.keys(this.a.b.video).length&&0<=pc.indexOf(a)||!this.a.V()?(a=this.b[a],a.bind(this.b)):this.a.get("player",a)};k.Gd=function(a){this.a.V()||this.f.dispatchEvent(a)};k.de=function(a,b){this.a.V()&&("video"==a?this.g.dispatchEvent(b):"player"==a&&this.f.dispatchEvent(b))};function K(a,b,c,d){p.call(this);this.a=a;this.b=b;this.j={video:a,player:b};this.l=c||function(){};this.o=d||function(a){return a};this.i=!1;this.f=!0;this.h=this.g=this.c=null;Cc(this)}ba(K);m("shaka.cast.CastReceiver",K);K.prototype.isConnected=function(){return this.i};K.prototype.isConnected=K.prototype.isConnected;K.prototype.Zc=function(){return this.f};K.prototype.isIdle=K.prototype.Zc;
K.prototype.m=function(){var a=this.b?this.b.m():Promise.resolve();null!=this.h&&window.clearTimeout(this.h);this.l=this.j=this.b=this.a=null;this.i=!1;this.f=!0;this.h=this.g=this.c=null;return a.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})};K.prototype.destroy=K.prototype.m;
function Cc(a){var b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=a.hc.bind(a);b.onSenderDisconnected=a.hc.bind(a);b.onSystemVolumeChanged=a.Kc.bind(a);a.g=b.getCastMessageBus("urn:x-cast:com.google.cast.media");a.g.onMessage=a.fd.bind(a);a.c=b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");a.c.onMessage=a.td.bind(a);b.start();kc.forEach(function(a){this.a.addEventListener(a,this.kc.bind(this,"video"))}.bind(a));oc.forEach(function(a){this.b.addEventListener(a,this.kc.bind(this,
"player"))}.bind(a));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?a.b.Hb(3840,2160):a.b.Hb(1920,1080);a.b.addEventListener("loading",function(){this.f=!1;Dc(this)}.bind(a));a.a.addEventListener("playing",function(){this.f=!1;Dc(this)}.bind(a));a.a.addEventListener("pause",function(){Dc(this)}.bind(a));a.b.addEventListener("unloading",function(){this.f=!0;Dc(this)}.bind(a));a.a.addEventListener("ended",function(){window.setTimeout(function(){this.a&&
this.a.ended&&(this.f=!0,Dc(this))}.bind(this),5E3)}.bind(a))}k=K.prototype;k.hc=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length;Dc(this)};function Dc(a){Promise.resolve().then(function(){this.dispatchEvent(new I("caststatuschanged"));L(this,0)}.bind(a))}
function Ec(a,b,c){for(var d in b.player)a.b[d](b.player[d]);a.l(c);c=Promise.resolve();var e=a.a.autoplay;b.manifest&&(a.a.autoplay=!1,c=a.b.load(b.manifest,b.startTime),c["catch"](function(a){this.b.dispatchEvent(new I("error",{detail:a}))}.bind(a)));c.then(function(){var a;for(a in b.video){var c=b.video[a];this.a[a]=c}for(a in b.playerAfterLoad)c=b.playerAfterLoad[a],this.b[a](c);this.a.autoplay=e;b.manifest&&(this.a.play(),L(this,0))}.bind(a))}
k.kc=function(a,b){this.Ab();Fc(this,{type:"event",targetName:a,event:b},this.c)};k.Ab=function(){null!=this.h&&window.clearTimeout(this.h);this.h=window.setTimeout(this.Ab.bind(this),500);var a={video:{},player:{}};lc.forEach(function(b){a.video[b]=this.a[b]}.bind(this));pc.forEach(function(b){a.player[b]=this.b[b]()}.bind(this));var b=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();b&&(a.video.volume=b.level,a.video.muted=b.muted);Fc(this,{type:"update",update:a},this.c)};
k.Kc=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&Fc(this,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},this.c);Fc(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)};
k.td=function(a){var b=wc(a.data);switch(b.type){case "init":Ec(this,b.initState,b.appData);this.Ab();break;case "appData":this.l(b.appData);break;case "set":var c=b.targetName,d=b.property,e=b.value;if("video"==c)if(b=cast.receiver.CastReceiverManager.getInstance(),"volume"==d){b.setSystemVolumeLevel(e);break}else if("muted"==d){b.setSystemVolumeMuted(e);break}this.j[c][d]=e;break;case "call":c=b.targetName;d=b.methodName;e=b.args;c=this.j[c];c[d].apply(c,e);break;case "asyncCall":c=b.targetName,
d=b.methodName,e=b.args,b=b.id,a=a.senderId,c=this.j[c],c[d].apply(c,e).then(this.tc.bind(this,a,b,null),this.tc.bind(this,a,b))}};
k.fd=function(a){var b=wc(a.data);switch(b.type){case "PLAY":this.a.play();L(this,0);break;case "PAUSE":this.a.pause();L(this,0);break;case "SEEK":a=b.currentTime;var c=b.resumeState;null!=a&&(this.a.currentTime=Number(a));c&&"PLAYBACK_START"==c?(this.a.play(),L(this,0)):c&&"PLAYBACK_PAUSE"==c&&(this.a.pause(),L(this,0));break;case "STOP":this.b.hb().then(function(){L(this,0)}.bind(this));break;case "GET_STATUS":L(this,Number(b.requestId));break;case "VOLUME":c=b.volume;a=c.level;var c=c.muted,d=
this.a.volume,e=this.a.muted;null!=a&&(this.a.volume=Number(a));null!=c&&(this.a.muted=c);d==this.a.volume&&e==this.a.muted||L(this,0);break;case "LOAD":c=b.media.contentId;a=b.currentTime;var f=this.o(c);this.a.autoplay=!0;this.b.load(f,a).then(function(){L(this,0,{contentId:f,streamType:this.b.$()?"LIVE":"BUFFERED",contentType:""})}.bind(this))["catch"](function(a){var c="LOAD_FAILED";7==a.category&&7E3==a.code&&(c="LOAD_CANCELLED");Fc(this,{requestId:Number(b.requestId),type:c},this.g)}.bind(this));
break;default:Fc(this,{requestId:Number(b.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}};k.tc=function(a,b,c){Fc(this,{type:"asyncComplete",id:b,error:c},this.c,a)};function Fc(a,b,c,d){a.i&&(a=vc(b),d?c.getCastChannel(d).send(a):c.broadcast(a))}
function L(a,b,c){var d=Gc,d={mediaSessionId:0,playbackRate:a.a.playbackRate,playerState:a.f?d.IDLE:a.b.ka?d.yc:a.a.paused?d.zc:d.Ac,currentTime:a.a.currentTime,supportedMediaCommands:15,volume:{level:a.a.volume,muted:a.a.muted}};c&&(d.media=c);Fc(a,{requestId:b,type:"MEDIA_STATUS",status:[d]},a.g)}var Gc={IDLE:"IDLE",Ac:"PLAYING",yc:"BUFFERING",zc:"PAUSED"};function Hc(a,b){var c=M(a,b);return 1!=c.length?null:c[0]}function M(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return a.tagName==b})}function Ic(a){var b=a.firstChild;return b&&b.nodeType==Node.TEXT_NODE?a.textContent.trim():null}function N(a,b,c,d){var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?void 0!=d?d:null:e}function Jc(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function Kc(a){if(!a)return null;a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!a)return null;a=31536E3*Number(a[1]||null)+2592E3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null);return isFinite(a)?a:null}function Lc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null}
function Mc(a){a=Number(a);return a%1?null:a}function Nc(a){a=Number(a);return!(a%1)&&0<a?a:null}function Oc(a){a=Number(a);return!(a%1)&&0<=a?a:null}function Pc(a){var b;a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1]/b[2]):Number(a);return isNaN(a)?null:a};var Qc={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};
function Rc(a,b,c){a=Sc(a);var d=null,e=null,f=[],g=[],h=a.map(function(a){return a.keyId}).filter(ya);if(0<h.length&&(e=h[0],h.some(za(e))))throw new t(2,4,4010);c||(g=a.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"==a.qc?(d=a.init||d,!1):!0}),0<g.length&&(f=Tc(d,b,g),f.length||(f=[Ba("",d)])));0<a.length&&(c||!g.length)&&(f=Na(Qc).map(function(a){return Ba(a,d)}));e&&f.forEach(function(a){a.initData.forEach(function(a){a.keyId=e})});return{Qb:e,xe:d,drmInfos:f,Sb:!0}}
function Uc(a,b,c,d){var e=Rc(a,b,d);if(c.Sb){a=1==c.drmInfos.length&&!c.drmInfos[0].keySystem;b=!e.drmInfos.length;if(!c.drmInfos.length||a&&!b)c.drmInfos=e.drmInfos;c.Sb=!1}else if(0<e.drmInfos.length&&(c.drmInfos=c.drmInfos.filter(function(a){return e.drmInfos.some(function(b){return b.keySystem==a.keySystem})}),!c.drmInfos.length))throw new t(2,4,4008);return e.Qb||c.Qb}function Tc(a,b,c){return c.map(function(c){var d=Qc[c.qc];return d?[Ba(d,c.init||a)]:b(c.node)||[]}).reduce(x,[])}
function Sc(a){return a.map(function(a){var b=a.getAttribute("schemeIdUri"),d=a.getAttribute("cenc:default_KID"),e=M(a,"cenc:pssh").map(Ic);if(!b)return null;b=b.toLowerCase();if(d&&(d=d.replace(/-/g,"").toLowerCase(),0<=d.indexOf(" ")))throw new t(2,4,4009);var f=[];try{f=e.map(function(a){return{initDataType:"cenc",initData:Ya(a),keyId:null}})}catch(g){throw new t(2,4,4007);}return{node:a,qc:b,keyId:d,init:0<f.length?f:null}}).filter(ya)};function Vc(a,b,c,d,e){null!=e&&(e=Math.round(e));var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;return Array(Math.max(0,c-a.length)+1).join("0")+a})}
function Wc(a,b){var c=Xc(a,b,"timescale"),d=1;c&&(d=Nc(c)||1);c=Xc(a,b,"duration");(c=Nc(c||""))&&(c/=d);var e=Xc(a,b,"startNumber"),f=Xc(a,b,"presentationTimeOffset"),g=Oc(e||"");if(null==e||null==g)g=1;var h=Yc(a,b,"SegmentTimeline"),e=null;if(h){for(var e=d,l=Number(f),n=a.R.duration||Infinity,h=M(h,"S"),q=[],r=0,v=0;v<h.length;++v){var u=h[v],w=N(u,"t",Oc),G=N(u,"d",Oc),u=N(u,"r",Mc);null!=w&&(w-=l);if(!G)break;w=null!=w?w:r;u=u||0;if(0>u)if(v+1<h.length){u=N(h[v+1],"t",Oc);if(null==u)break;
else if(w>=u)break;u=Math.ceil((u-w)/G)-1}else{if(Infinity==n)break;else if(w/e>=n)break;u=Math.ceil((n*e-w)/G)-1}0<q.length&&w!=r&&(q[q.length-1].end=w/e);for(var pa=0;pa<=u;++pa)r=w+G,q.push({start:w/e,end:r/e,oe:w}),w=r}e=q}return{timescale:d,O:c,ya:g,presentationTimeOffset:Number(f)/d||0,Nb:Number(f),F:e}}function Xc(a,b,c){return[b(a.w),b(a.S),b(a.T)].filter(ya).map(function(a){return a.getAttribute(c)}).reduce(function(a,b){return a||b})}
function Yc(a,b,c){return[b(a.w),b(a.S),b(a.T)].filter(ya).map(function(a){return Hc(a,c)}).reduce(function(a,b){return a||b})};function Zc(a,b,c){this.a=a;this.X=b;this.M=c}m("shaka.media.InitSegmentReference",Zc);function O(a,b,c,d,e,f){this.position=a;this.startTime=b;this.endTime=c;this.a=d;this.X=e;this.M=f}m("shaka.media.SegmentReference",O);function P(a,b){this.H=a;this.a=b==$c;this.u=0}m("shaka.util.DataViewReader",P);var $c=1;P.Endianness={te:0,ve:$c};P.prototype.Z=function(){return this.u<this.H.byteLength};P.prototype.hasMoreData=P.prototype.Z;P.prototype.Tc=function(){return this.u};P.prototype.getPosition=P.prototype.Tc;P.prototype.Oc=function(){return this.H.byteLength};P.prototype.getLength=P.prototype.Oc;P.prototype.Cb=function(){try{var a=this.H.getUint8(this.u)}catch(b){ad()}this.u+=1;return a};P.prototype.readUint8=P.prototype.Cb;
P.prototype.mc=function(){try{var a=this.H.getUint16(this.u,this.a)}catch(b){ad()}this.u+=2;return a};P.prototype.readUint16=P.prototype.mc;P.prototype.D=function(){try{var a=this.H.getUint32(this.u,this.a)}catch(b){ad()}this.u+=4;return a};P.prototype.readUint32=P.prototype.D;P.prototype.lc=function(){try{var a=this.H.getInt32(this.u,this.a)}catch(b){ad()}this.u+=4;return a};P.prototype.readInt32=P.prototype.lc;
P.prototype.Pa=function(){try{if(this.a){var a=this.H.getUint32(this.u,!0);var b=this.H.getUint32(this.u+4,!0)}else b=this.H.getUint32(this.u,!1),a=this.H.getUint32(this.u+4,!1)}catch(c){ad()}if(2097151<b)throw new t(2,3,3001);this.u+=8;return b*Math.pow(2,32)+a};P.prototype.readUint64=P.prototype.Pa;P.prototype.Ja=function(a){this.u+a>this.H.byteLength&&ad();var b=this.H.buffer.slice(this.u,this.u+a);this.u+=a;return new Uint8Array(b)};P.prototype.readBytes=P.prototype.Ja;
P.prototype.I=function(a){this.u+a>this.H.byteLength&&ad();this.u+=a};P.prototype.skip=P.prototype.I;P.prototype.Bb=function(){for(var a=this.u;this.Z()&&this.H.getUint8(this.u);)this.u+=1;a=this.H.buffer.slice(a,this.u);this.u+=1;return F(a)};P.prototype.readTerminatedString=P.prototype.Bb;function ad(){throw new t(2,3,3E3);};function Q(){this.b=[];this.a=[]}m("shaka.util.Mp4Parser",Q);Q.prototype.C=function(a,b){var c=bd(a);this.b[c]=0;this.a[c]=b;return this};Q.prototype.box=Q.prototype.C;Q.prototype.da=function(a,b){var c=bd(a);this.b[c]=1;this.a[c]=b;return this};Q.prototype.fullBox=Q.prototype.da;Q.prototype.parse=function(a){for(a=new P(new DataView(a),0);a.Z();)this.eb(0,a)};Q.prototype.parse=Q.prototype.parse;
Q.prototype.eb=function(a,b){var c=b.u,d=b.D(),e=b.D();switch(d){case 0:d=b.H.byteLength-c;break;case 1:d=b.Pa()}var f=this.a[e];if(f){var g=null,h=null;1==this.b[e]&&(h=b.D(),g=h>>>24,h&=16777215);e=c+d-b.u;e=0<e?b.Ja(e).buffer:new ArrayBuffer(0);e=new P(new DataView(e),0);f({Na:this,version:g,Lc:h,s:e,size:d,start:c+a})}else b.I(c+d-b.u)};Q.prototype.parseNext=Q.prototype.eb;function R(a){for(;a.s.Z();)a.Na.eb(a.start,a.s)}Q.children=R;
function cd(a){for(var b=a.s.D();0<b;--b)a.Na.eb(a.start,a.s)}Q.sampleDescription=cd;function dd(a){return function(b){a(b.s.Ja(b.s.H.byteLength-b.s.u))}}Q.allData=dd;function bd(a){for(var b=0,c=0;c<a.length;c++)b=b<<8|a.charCodeAt(c);return b};function ed(a,b,c,d){var e,f=(new Q).da("sidx",function(a){e=fd(b,d,c,a)});a&&f.parse(a);if(e)return e;throw new t(2,3,3004);}
function fd(a,b,c,d){var e=[];d.s.I(4);var f=d.s.D();if(!f)throw new t(2,3,3005);if(d.version){var g=d.s.Pa();var h=d.s.Pa()}else g=d.s.D(),h=d.s.D();d.s.I(2);var l=d.s.mc();b=g-b;a=a+d.size+h;for(h=0;h<l;h++){var n=d.s.D();g=(n&2147483648)>>>31;var n=n&2147483647,q=d.s.D();d.s.I(4);if(1==g)throw new t(2,3,3006);e.push(new O(e.length,b/f,(b+q)/f,function(){return c},a,a+n-1));b+=q;a+=n}return e};function S(a){this.a=a}m("shaka.media.SegmentIndex",S);S.prototype.m=function(){this.a=null;return Promise.resolve()};S.prototype.destroy=S.prototype.m;S.prototype.find=function(a){for(var b=this.a.length-1;0<=b;--b){var c=this.a[b];if(a>=c.startTime&&a<c.endTime)return c.position}return this.a.length&&a<this.a[0].startTime?this.a[0].position:null};S.prototype.find=S.prototype.find;S.prototype.get=function(a){if(!this.a.length)return null;a-=this.a[0].position;return 0>a||a>=this.a.length?null:this.a[a]};
S.prototype.get=S.prototype.get;S.prototype.vb=function(a){for(var b,c,d=[],e=c=0;c<this.a.length&&e<a.length;){var f=this.a[c];b=a[e];f.startTime<b.startTime?(d.push(f),c++):(f.startTime>b.startTime||(.1<Math.abs(f.endTime-b.endTime)?d.push(b):d.push(f),c++),e++)}for(;c<this.a.length;)d.push(this.a[c++]);if(d.length)for(c=d[d.length-1].position+1;e<a.length;)b=a[e++],b=new O(c++,b.startTime,b.endTime,b.a,b.X,b.M),d.push(b);else d=a;this.a=d};S.prototype.merge=S.prototype.vb;
S.prototype.ob=function(a){for(var b=0;b<this.a.length&&!(this.a[b].endTime>a);++b);this.a.splice(0,b)};S.prototype.evict=S.prototype.ob;function gd(a,b){if(a.a.length){var c=a.a[a.a.length-1];c.startTime>b||(a.a[a.a.length-1]=new O(c.position,c.startTime,b,c.a,c.X,c.M))}};function hd(a){this.b=a;this.a=new P(a,0);id||(id=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var id;hd.prototype.Z=function(){return this.a.Z()};
function jd(a){var b=kd(a);if(7<b.length)throw new t(2,3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=kd(a);a:{for(d=0;d<id.length;d++)if(ab(c,id[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.u;else{if(8==c.length&&c[1]&224)throw new t(2,3,3001);for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.u+c<=a.b.byteLength?c:a.b.byteLength-a.a.u;d=new DataView(a.b.buffer,a.b.byteOffset+a.a.u,c);a.a.I(c);return new ld(b,d)}
function kd(a){var b=a.a.Cb(),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new t(2,3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=a.a.Cb();return d}function ld(a,b){this.id=a;this.a=b}function md(a){if(8<a.a.byteLength)throw new t(2,3,3002);if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new t(2,3,3001);for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function nd(){}
nd.prototype.parse=function(a,b,c,d){var e;b=new hd(new DataView(b));if(440786851!=jd(b).id)throw new t(2,3,3008);var f=jd(b);if(408125543!=f.id)throw new t(2,3,3009);b=f.a.byteOffset;f=new hd(f.a);for(e=null;f.Z();){var g=jd(f);if(357149030==g.id){e=g;break}}if(!e)throw new t(2,3,3010);f=new hd(e.a);e=1E6;for(g=null;f.Z();){var h=jd(f);if(2807729==h.id)e=md(h);else if(17545==h.id)if(g=h,4==g.a.byteLength)g=g.a.getFloat32(0);else if(8==g.a.byteLength)g=g.a.getFloat64(0);else throw new t(2,3,3003);
}if(null==g)throw new t(2,3,3011);f=e/1E9;e=g*f;a=jd(new hd(new DataView(a)));if(475249515!=a.id)throw new t(2,3,3007);return od(a,b,f,e,c,d)};function od(a,b,c,d,e,f){function g(){return e}var h=[];a=new hd(a.a);for(var l=-1,n=-1;a.Z();){var q=jd(a);if(187==q.id){var r=pd(q);r&&(q=c*(r.pe-f),r=b+r.Ld,0<=l&&h.push(new O(h.length,l,q,g,n,r-1)),l=q,n=r)}}0<=l&&h.push(new O(h.length,l,d,g,n,null));return h}
function pd(a){var b=new hd(a.a);a=jd(b);if(179!=a.id)throw new t(2,3,3013);a=md(a);b=jd(b);if(183!=b.id)throw new t(2,3,3012);for(var b=new hd(b.a),c=0;b.Z();){var d=jd(b);if(241==d.id){c=md(d);break}}return{pe:a,Ld:c}};function qd(a,b){var c=Yc(a,b,"Initialization");if(!c)return null;var d=a.w.U,e=c.getAttribute("sourceURL");e&&(d=z(a.w.U,[e]));var e=0,f=null;if(c=N(c,"range",Lc))e=c.start,f=c.end;return new Zc(function(){return d},e,f)}
function rd(a,b){var c=Xc(a,sd,"presentationTimeOffset"),d=qd(a,sd);var e=Number(c);var f=a.w.contentType,g=a.w.mimeType.split("/")[1];if("text"!=f&&"mp4"!=g&&"webm"!=g)throw new t(2,4,4006);if("webm"==g&&!d)throw new t(2,4,4005);var f=Yc(a,sd,"RepresentationIndex"),h=Xc(a,sd,"indexRange"),l=a.w.U,h=Lc(h||"");if(f){var n=f.getAttribute("sourceURL");n&&(l=z(a.w.U,[n]));h=N(f,"range",Lc,h)}if(!h)throw new t(2,4,4002);e=td(a,b,d,l,h.start,h.end,g,e);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,
getSegmentReference:e.getSegmentReference,initSegmentReference:d,presentationTimeOffset:Number(c)||0}}
function td(a,b,c,d,e,f,g,h){var l=a.presentationTimeline,n=!a.Ca||!a.R.sb,q=a.R.duration,r=b,v=null;return{createSegmentIndex:function(){var a=[r(d,e,f),"webm"==g?r(c.a(),c.X,c.M):null];r=null;return Promise.all(a).then(function(a){var b=a[0];a=a[1]||null;b="mp4"==g?ed(b,e,d,h):(new nd).parse(b,a,d,h);l.Ga(0,b);v=new S(b);n&&gd(v,q)})},findSegmentPosition:function(a){return v.find(a)},getSegmentReference:function(a){return v.get(a)}}}function sd(a){return a.Qa};function ud(a,b){var c=qd(a,vd);var d=wd(a);var e=Wc(a,vd),f=e.ya;f||(f=1);var g=0;e.O?g=e.O*(f-1):e.F&&0<e.F.length&&(g=e.F[0].start);d={O:e.O,startTime:g,ya:f,presentationTimeOffset:e.presentationTimeOffset,F:e.F,Fa:d};if(!d.O&&!d.F&&1<d.Fa.length)throw new t(2,4,4002);if(!d.O&&!a.R.duration&&!d.F&&1==d.Fa.length)throw new t(2,4,4002);if(d.F&&!d.F.length)throw new t(2,4,4002);f=e=null;a.T.id&&a.w.id&&(f=a.T.id+","+a.w.id,e=b[f]);g=xd(a.R.duration,d.ya,a.w.U,d);e?(e.vb(g),e.ob(a.presentationTimeline.ma()-
a.R.start)):(a.presentationTimeline.Ga(0,g),e=new S(g),f&&a.Ca&&(b[f]=e));a.Ca&&a.R.sb||gd(e,a.R.duration);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:c,presentationTimeOffset:d.presentationTimeOffset}}function vd(a){return a.oa}
function xd(a,b,c,d){var e=d.Fa.length;d.F&&d.F.length!=d.Fa.length&&(e=Math.min(d.F.length,d.Fa.length));for(var f=[],g=d.startTime,h=0;h<e;h++){var l=d.Fa[h],n=z(c,[l.ad]);var q=null!=d.O?g+d.O:d.F?d.F[h].end:g+a;f.push(new O(h+b,g,q,function(a){return a}.bind(null,n),l.start,l.end));g=q}return f}
function wd(a){return[a.w.oa,a.S.oa,a.T.oa].filter(ya).map(function(a){return M(a,"SegmentURL")}).reduce(function(a,c){return 0<a.length?a:c}).map(function(b){b.getAttribute("indexRange")&&!a.Yb&&(a.Yb=!0);var c=b.getAttribute("media");b=N(b,"mediaRange",Lc,{start:0,end:null});return{ad:c,start:b.start,end:b.end}})};function yd(a,b,c,d){var e=zd(a);var f=Wc(a,Ad);var g=Xc(a,Ad,"media"),h=Xc(a,Ad,"index");f={O:f.O,timescale:f.timescale,ya:f.ya,presentationTimeOffset:f.presentationTimeOffset,Nb:f.Nb,F:f.F,ub:g,La:h};g=0+(f.La?1:0);g+=f.F?1:0;g+=f.O?1:0;if(!g)throw new t(2,4,4002);1!=g&&(f.La&&(f.F=null),f.O=null);if(!f.La&&!f.ub)throw new t(2,4,4002);if(f.La){c=a.w.mimeType.split("/")[1];if("mp4"!=c&&"webm"!=c)throw new t(2,4,4006);if("webm"==c&&!e)throw new t(2,4,4005);d=Vc(f.La,a.w.id,null,a.bandwidth||null,
null);d=z(a.w.U,[d]);a=td(a,b,e,d,0,null,c,f.presentationTimeOffset)}else f.O?(d||a.presentationTimeline.wb(f.O),a=Bd(a,f)):(d=b=null,a.T.id&&a.w.id&&(d=a.T.id+","+a.w.id,b=c[d]),g=Cd(a,f),b?(b.vb(g),b.ob(a.presentationTimeline.ma()-a.R.start)):(a.presentationTimeline.Ga(0,g),b=new S(g),d&&a.Ca&&(c[d]=b)),a.Ca&&a.R.sb||gd(b,a.R.duration),a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b)});return{createSegmentIndex:a.createSegmentIndex,
findSegmentPosition:a.findSegmentPosition,getSegmentReference:a.getSegmentReference,initSegmentReference:e,presentationTimeOffset:f.presentationTimeOffset}}function Ad(a){return a.Ra}
function Bd(a,b){var c=a.R.duration,d=b.O,e=b.ya,f=b.timescale,g=b.ub,h=a.bandwidth||null,l=a.w.id,n=a.w.U;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0>a||c&&a>=c?null:Math.floor(a/d)},getSegmentReference:function(a){var b=a*d;return 0>b||c&&b>=c?null:new O(a,b,b+d,function(){var c=Vc(g,l,a+e,h,b*f);return z(n,[c])},0,null)}}}
function Cd(a,b){for(var c=[],d=0;d<b.F.length;d++){var e=d+b.ya;c.push(new O(e,b.F[d].start,b.F[d].end,function(a,b,c,d,e,q){a=Vc(a,b,e,c,q);return z(d,[a]).map(function(a){return a.toString()})}.bind(null,b.ub,a.w.id,a.bandwidth||null,a.w.U,e,b.F[d].oe+b.Nb),0,null))}return c}function zd(a){var b=Xc(a,Ad,"initialization");if(!b)return null;var c=a.w.id,d=a.bandwidth||null,e=a.w.U;return new Zc(function(){var a=Vc(b,c,null,d,null);return z(e,[a])},0,null)};var Dd={},Ed={};m("shaka.media.ManifestParser.registerParserByExtension",function(a,b){Ed[a]=b});m("shaka.media.ManifestParser.registerParserByMime",function(a,b){Dd[a]=b});function Fd(){var a={},b;for(b in Dd)a[b]=!0;for(b in Ed)a[b]=!0;["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(b){a[b]=!!Dd[b]});["mpd","m3u8","ism"].forEach(function(b){a[b]=!!Ed[b]});return a}
function Gd(a,b,c,d){var e=d;e||(d=(new ia(a)).W.split("/").pop().split("."),1<d.length&&(d=d.pop().toLowerCase(),e=Ed[d]));if(e)return Promise.resolve(e);c=C([a],c);c.method="HEAD";return b.request(0,c).then(function(b){(b=b.headers["content-type"])&&(b=b.toLowerCase());return(e=Dd[b])?e:Promise.reject(new t(2,4,4E3,a))},function(a){a.severity=2;return Promise.reject(a)})};function T(a,b){this.f=a;this.i=b;this.c=this.a=Infinity;this.b=1;this.h=0;this.g=!0}m("shaka.media.PresentationTimeline",T);T.prototype.Y=function(){return this.a};T.prototype.getDuration=T.prototype.Y;T.prototype.pa=function(a){this.a=a};T.prototype.setDuration=T.prototype.pa;T.prototype.Uc=function(){return this.f};T.prototype.getPresentationStartTime=T.prototype.Uc;T.prototype.uc=function(a){this.h=a};T.prototype.setClockOffset=T.prototype.uc;T.prototype.wc=function(a){this.g=a};
T.prototype.setStatic=T.prototype.wc;T.prototype.Vc=function(){return this.c};T.prototype.getSegmentAvailabilityDuration=T.prototype.Vc;T.prototype.vc=function(a){this.c=a};T.prototype.setSegmentAvailabilityDuration=T.prototype.vc;T.prototype.Ga=function(a,b){b.length&&(this.b=b.reduce(function(a,b){return Math.max(a,b.endTime-b.startTime)},this.b))};T.prototype.notifySegments=T.prototype.Ga;T.prototype.wb=function(a){this.b=Math.max(this.b,a)};T.prototype.notifyMaxSegmentDuration=T.prototype.wb;
T.prototype.$=function(){return Infinity==this.a&&!this.g};T.prototype.isLive=T.prototype.$;T.prototype.va=function(){return Infinity!=this.a&&!this.g};T.prototype.isInProgress=T.prototype.va;T.prototype.ma=function(){return this.Da(0)};T.prototype.getSegmentAvailabilityStart=T.prototype.ma;T.prototype.Da=function(a){if(Infinity==this.c)return 0;var b=this.ua();return Math.max(0,Math.min(b-this.c+a,b))};T.prototype.getSafeAvailabilityStart=T.prototype.Da;
T.prototype.ua=function(){return this.$()||this.va()?Math.min(Math.max(0,(Date.now()+this.h)/1E3-this.b-this.f),this.a):this.a};T.prototype.getSegmentAvailabilityEnd=T.prototype.ua;T.prototype.bb=function(){return Math.max(0,this.ua()-(this.$()||this.va()?this.i:0))};T.prototype.getSeekRangeEnd=T.prototype.bb;function Hd(){this.a=this.b=null;this.g=[];this.c=null;this.i=[];this.h=1;this.j={};this.l=0;this.f=null}m("shaka.dash.DashParser",Hd);k=Hd.prototype;k.configure=function(a){this.b=a};k.start=function(a,b){this.g=[a];this.a=b;return Id(this).then(function(){this.a&&Jd(this,0);return this.c}.bind(this))};k.stop=function(){this.b=this.a=null;this.g=[];this.c=null;this.i=[];this.j={};null!=this.f&&(window.clearTimeout(this.f),this.f=null);return Promise.resolve()};k.update=function(){Id(this)["catch"](function(a){if(this.a)this.a.onError(a)}.bind(this))};
k.onExpirationUpdated=function(){};function Id(a){return a.a.networkingEngine.request(0,C(a.g,a.b.retryParameters)).then(function(a){if(this.a)return Kd(this,a.data,a.uri)}.bind(a))}
function Kd(a,b,c){var d=F(b),e=new DOMParser,f=null;b=null;try{f=e.parseFromString(d,"text/xml")}catch(v){}f&&"MPD"==f.documentElement.tagName&&(b=f.documentElement);b&&0<b.getElementsByTagName("parsererror").length&&(b=null);if(!b)throw new t(2,4,4001);c=[c];d=M(b,"Location").map(Ic).filter(ya);0<d.length&&(c=a.g=d);d=M(b,"BaseURL").map(Ic);c=z(c,d);var g=N(b,"minBufferTime",Kc);a.l=N(b,"minimumUpdatePeriod",Kc,-1);var h=N(b,"availabilityStartTime",Jc),d=N(b,"timeShiftBufferDepth",Kc),l=N(b,"suggestedPresentationDelay",
Kc),e=N(b,"maxSegmentDuration",Kc),f=b.getAttribute("type")||"static";if(a.c)var n=a.c.presentationTimeline;else{var q=Math.max(10,1.5*g);n=new T(h,null!=l?l:q)}var h=Ld(a,{Ca:"static"!=f,presentationTimeline:n,T:null,R:null,S:null,w:null,bandwidth:void 0,Yb:!1},c,b),l=h.duration,r=h.periods;n.wc("static"==f);n.pa(l||Infinity);n.vc(null!=d?d:Infinity);n.wb(e||1);if(a.c)return Promise.resolve();b=M(b,"UTCTiming");return Md(a,c,b,n.$()).then(function(a){this.a&&(n.uc(a),this.c={presentationTimeline:n,
periods:r,offlineSessionIds:[],minBufferTime:g||0})}.bind(a))}
function Ld(a,b,c,d){var e=N(d,"mediaPresentationDuration",Kc),f=[],g=0;d=M(d,"Period");for(var h=0;h<d.length;h++){var l=d[h],g=N(l,"start",Kc,g),n=N(l,"duration",Kc),q=null;if(h!=d.length-1){var r=N(d[h+1],"start",Kc);null!=r&&(q=r-g)}else null!=e&&(q=e-g);null==q&&(q=n);l=Nd(a,b,c,{start:g,duration:q,node:l,sb:null==q||h==d.length-1});f.push(l);n=b.T.id;a.i.every(za(n))&&(a.a.filterPeriod(l),a.i.push(n),a.c&&a.c.periods.push(l));if(null==q){g=null;break}g+=q}return null!=e?{periods:f,duration:e}:
{periods:f,duration:g}}
function Nd(a,b,c,d){b.T=Od(d.node,null,c);b.R=d;b.T.id||(b.T.id="__shaka_period_"+d.start);M(d.node,"EventStream").forEach(a.Dd.bind(a,d.start,d.duration));c=M(d.node,"AdaptationSet").map(a.Bd.bind(a,b)).filter(ya);var e=c.map(function(a){return a.Nd}).reduce(x,[]),f=e.filter(Aa);if(b.Ca&&e.length!=f.length)throw new t(2,4,4018);var g=c.filter(function(a){return!a.Mb});c.filter(function(a){return a.Mb}).forEach(function(a){var b=a.streams[0],c=a.Mb;g.forEach(function(a){a.id==c&&a.streams.forEach(function(a){a.trickModeVideo=
b})})});e=Pd(g,"video");f=Pd(g,"audio");if(!e.length&&!f.length)throw new t(2,4,4004);f.length||(f=[null]);e.length||(e=[null]);b=[];for(c=0;c<f.length;c++)for(var h=0;h<e.length;h++)Qd(a,f[c],e[h],b);a=Pd(g,"text");e=[];for(c=0;c<a.length;c++)e.push.apply(e,a[c].streams);return{startTime:d.start,textStreams:e,variants:b}}function Pd(a,b){return a.filter(function(a){return a.contentType==b})}
function Qd(a,b,c,d){if(b||c)if(b&&c){var e=b.drmInfos;var f=c.drmInfos;if(e.length&&f.length?0<sb(e,f).length:1)for(var g=sb(b.drmInfos,c.drmInfos),e=0;e<b.streams.length;e++)for(var h=0;h<c.streams.length;h++)f=c.streams[h].bandwidth+b.streams[e].bandwidth,f={id:a.h++,language:b.language,primary:b.tb||c.tb,audio:b.streams[e],video:c.streams[h],bandwidth:f,drmInfos:g,allowedByApplication:!0,allowedByKeySystem:!0},d.push(f)}else for(g=b||c,e=0;e<g.streams.length;e++)f=g.streams[e].bandwidth,f={id:a.h++,
language:g.language||"und",primary:g.tb,audio:b?g.streams[e]:null,video:c?g.streams[e]:null,bandwidth:f,drmInfos:g.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},d.push(f)}
k.Bd=function(a,b){a.S=Od(b,a.T,null);var c=!1,d=M(b,"Role"),e=d.map(function(a){return a.getAttribute("value")}).filter(ya),f=void 0;"text"==a.S.contentType&&(f="subtitle");for(var g=0;g<d.length;g++){var h=d[g].getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(h=d[g].getAttribute("value"),h){case "main":c=!0;break;case "caption":case "subtitle":f=h}}var l=null,n=!1;M(b,"EssentialProperty").forEach(function(a){"http://dashif.org/guidelines/trickmode"==a.getAttribute("schemeIdUri")?
l=a.getAttribute("value"):n=!0});if(n)return null;var d=M(b,"ContentProtection"),q=Rc(d,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),d=Sb(b.getAttribute("lang")||"und"),h=b.getAttribute("label"),g=M(b,"Representation"),e=g.map(this.Ed.bind(this,a,q,f,d,h,c,e)).filter(function(a){return!!a});if(!e.length)throw new t(2,4,4003);a.S.contentType||(a.S.contentType=Rd(e[0].mimeType,e[0].codecs),e.forEach(function(b){b.type=a.S.contentType}));e.forEach(function(a){q.drmInfos.forEach(function(b){a.keyId&&
b.keyIds.push(a.keyId)})});f=g.map(function(a){return a.getAttribute("id")}).filter(ya);return{id:a.S.id||"__fake__"+this.h++,contentType:a.S.contentType,language:d,tb:c,streams:e,drmInfos:q.drmInfos,Mb:l,Nd:f}};
k.Ed=function(a,b,c,d,e,f,g,h){a.w=Od(h,a.S,null);if(!Sd(a.w))return null;a.bandwidth=N(h,"bandwidth",Nc)||void 0;var l=this.Od.bind(this);if(a.w.Qa)l=rd(a,l);else if(a.w.oa)l=ud(a,this.j);else if(a.w.Ra)l=yd(a,l,this.j,!!this.c);else{var n=a.w.U,q=a.R.duration||0;l={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0<=a&&a<q?1:null},getSegmentReference:function(a){return 1!=a?null:new O(1,0,q,function(){return n},0,null)},initSegmentReference:null,presentationTimeOffset:0}}h=
M(h,"ContentProtection");h=Uc(h,this.b.dash.customScheme,b,this.b.dash.ignoreDrmInfo);return{id:this.h++,createSegmentIndex:l.createSegmentIndex,findSegmentPosition:l.findSegmentPosition,getSegmentReference:l.getSegmentReference,initSegmentReference:l.initSegmentReference,presentationTimeOffset:l.presentationTimeOffset,mimeType:a.w.mimeType,codecs:a.w.codecs,frameRate:a.w.frameRate,bandwidth:a.bandwidth,width:a.w.width,height:a.w.height,kind:c,encrypted:0<b.drmInfos.length,keyId:h,language:d,label:e,
type:a.S.contentType,primary:f,trickModeVideo:null,containsEmsgBoxes:a.w.containsEmsgBoxes,roles:g}};k.fe=function(){this.f=null;var a=Date.now();Id(this).then(function(){this.a&&Jd(this,(Date.now()-a)/1E3)}.bind(this))["catch"](function(a){this.a&&(a.severity=1,this.a.onError(a),Jd(this,0))}.bind(this))};function Jd(a,b){0>a.l||(a.f=window.setTimeout(a.fe.bind(a),1E3*Math.max(Math.max(3,a.l)-b,0)))}
function Od(a,b,c){b=b||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0};c=c||b.U;var d=M(a,"BaseURL").map(Ic),e=a.getAttribute("contentType")||b.contentType,f=a.getAttribute("mimeType")||b.mimeType,g=a.getAttribute("codecs")||b.codecs,h=N(a,"frameRate",Pc)||b.frameRate,l=!!M(a,"InbandEventStream").length;e||(e=Rd(f,g));return{U:z(c,d),Qa:Hc(a,"SegmentBase")||b.Qa,oa:Hc(a,"SegmentList")||b.oa,Ra:Hc(a,"SegmentTemplate")||b.Ra,width:N(a,"width",Oc)||b.width,height:N(a,"height",
Oc)||b.height,contentType:e,mimeType:f,codecs:g,frameRate:h,containsEmsgBoxes:l||b.containsEmsgBoxes,id:a.getAttribute("id")}}function Sd(a){var b=0+(a.Qa?1:0);b+=a.oa?1:0;b+=a.Ra?1:0;if(!b)return"text"==a.contentType||"application"==a.contentType?!0:!1;1!=b&&(a.Qa&&(a.oa=null),a.Ra=null);return!0}
function Td(a,b,c,d){b=z(b,[c]);b=C(b,a.b.retryParameters);b.method=d;return a.a.networkingEngine.request(0,b).then(function(a){if("HEAD"==d){if(!a.headers||!a.headers.date)return 0;a=a.headers.date}else a=F(a.data);a=Date.parse(a);return isNaN(a)?0:a-Date.now()})}
function Md(a,b,c,d){c=c.map(function(a){return{scheme:a.getAttribute("schemeIdUri"),value:a.getAttribute("value")}});var e=a.b.dash.clockSyncUri;d&&!c.length&&e&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e});return xa(c,function(a){var c=a.value;switch(a.scheme){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return Td(this,b,c,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return Td(this,
b,c,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return a=Date.parse(c),isNaN(a)?0:a-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(a))["catch"](function(){return 0})}
k.Dd=function(a,b,c){var d=c.getAttribute("schemeIdUri")||"",e=c.getAttribute("value")||"",f=N(c,"timescale",Oc)||1;M(c,"Event").forEach(function(c){var g=N(c,"presentationTime",Oc)||0,l=N(c,"duration",Oc)||0,g=g/f+a,l=g+l/f;null!=b&&(g=Math.min(g,a+b),l=Math.min(l,a+b));c={schemeIdUri:d,value:e,startTime:g,endTime:l,id:c.getAttribute("id")||"",eventElement:c};this.a.onTimelineRegionAdded(c)}.bind(this))};
k.Od=function(a,b,c){a=C(a,this.b.retryParameters);null!=b&&(a.headers.Range="bytes="+b+"-"+(null!=c?c:""));return this.a.networkingEngine.request(1,a).then(function(a){return a.data})};function Rd(a,b){return ub[Yb(a,b)]?"text":a.split("/")[0]}Ed.mpd=Hd;Dd["application/dash+xml"]=Hd;function Ud(a,b,c,d){this.uri=a;this.type=b;this.ga=c;this.segments=d||null}function Vd(a,b,c,d){this.id=a;this.name=b;this.a=c;this.value=d||null}Vd.prototype.toString=function(){function a(a){return a.name+'="'+a.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(a).join(","):"#"+this.name};function Wd(a,b){this.name=a;this.value=b}Vd.prototype.getAttribute=function(a){var b=this.a.filter(function(b){return b.name==a});return b.length?b[0]:null};
function Xd(a,b,c){c=c||null;return(a=a.getAttribute(b))?a.value:c}function Yd(a,b){this.ga=b;this.uri=a};function Zd(a,b){return a.filter(function(a){return a.name==b})}function $d(a,b){var c=Zd(a,b);return c.length?c[0]:null}function ae(a,b,c){return a.filter(function(a){var d=a.getAttribute("TYPE");a=a.getAttribute("GROUP-ID");return d.value==b&&a.value==c})};function be(a){this.b=a;this.a=0}function ce(a,b){b.lastIndex=a.a;var c=(c=b.exec(a.b))?{position:c.index,length:c[0].length,Qd:c}:null;if(a.a==a.b.length||!c||c.position!=a.a)return null;a.a+=c.length;return c.Qd}function de(a){return a.a==a.b.length?null:(a=ce(a,/[^ \t\n]*/gm))?a[0]:null};function ee(){this.a=0}
function fe(a,b,c){b=F(b);b=b.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var d=b.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(d[0]))throw new t(2,4,4015);b=0;for(var e=[],f=1;f<d.length;)if(/^#(?!EXT)/m.test(d[f]))f+=1;else{var g=d[f];g=ge(a.a++,g);if(0<=he.indexOf(g.name))b=1;else if(0<=ie.indexOf(g.name)){if(1!=b)throw new t(2,4,4017);d=d.splice(f,d.length-f);a=je(a,d);return new Ud(c,b,e,a)}e.push(g);f+=1;"EXT-X-STREAM-INF"==g.name&&(g.a.push(new Wd("URI",d[f])),f+=1)}return new Ud(c,b,e)}
function je(a,b){var c=[],d=[];b.forEach(function(a){/^(#EXT)/.test(a)?(a=ge(this.a++,a),d.push(a)):/^#(?!EXT)/m.test(a)||(c.push(new Yd(a.trim(),d)),d=[])}.bind(a));return c}function ge(a,b){var c=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!c)throw new t(2,4,4016);var d=c[1],e=c[2],c=[];if(e&&0<=e.indexOf("="))for(var e=new be(e),f,g=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;f=ce(e,g);)c.push(new Wd(f[1],f[2]||f[3]));else if(e)return new Vd(a,d,c,e);return new Vd(a,d,c)}
var he="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY".split(" "),ie="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function ke(a){return new Promise(function(b){var c=ke.parse(a);b({uri:a,data:c.data,headers:{"content-type":c.contentType}})})}m("shaka.net.DataUriPlugin",ke);
ke.parse=function(a){var b=a.split(":");if(2>b.length||"data"!=b[0])throw new t(2,1,1004,a);b=b.slice(1).join(":").split(",");if(2>b.length)throw new t(2,1,1004,a);var c=b[0],b=window.decodeURIComponent(b.slice(1).join(",")),c=c.split(";"),d=null;1<c.length&&(d=c[1]);if("base64"==d)a=Ya(b).buffer;else{if(d)throw new t(2,1,1005,a);a=Ua(b)}return{data:a,contentType:c[0]}};Ea.data=ke;function le(){this.b=this.c=null;this.i=1;this.g={};this.f={};this.a=null;this.j="";this.h=new ee}m("shaka.hls.HlsParser",le);k=le.prototype;k.configure=function(a){this.b=a};k.start=function(a,b){this.c=b;this.j=a;return this.c.networkingEngine.request(0,C([a],this.b.retryParameters)).then(function(b){return ne(this,b.data,a)}.bind(this))};k.stop=function(){this.b=this.c=null;this.g={};return Promise.resolve()};k.update=function(){};k.onExpirationUpdated=function(){};
function ne(a,b,c){b=fe(a.h,b,c);if(0!=b.type)throw new t(2,4,4022);a.a=new T(null,0);return oe(a,b).then(function(a){this.c.filterPeriod(a);return{presentationTimeline:this.a,periods:[a],offlineSessionIds:[],minBufferTime:0}}.bind(a))}
function oe(a,b){var c=Zd(b.ga,"EXT-X-STREAM-INF").map(function(a){return pe(this,a,b)}.bind(a)),d=Zd(b.ga,"EXT-X-MEDIA").filter(function(a){return"SUBTITLES"==U(a,"TYPE")}.bind(a)).map(function(a){return qe(this,a,b)}.bind(a));return Promise.all(c).then(function(a){return Promise.all(d).then(function(b){var c=a.reduce(x,[]);re(this,c);return{startTime:0,variants:c,textStreams:b}}.bind(this))}.bind(a))}
function pe(a,b,c){var d=Number(U(b,"BANDWIDTH")),e=Xd(b,"CODECS","avc1.42E01E,mp4a.40.2").split(","),f=b.getAttribute("RESOLUTION"),g=null,h=null,l=Xd(b,"FRAME-RATE");if(f)var n=f.value.split("x"),g=n[0],h=n[1];var q=se(a,c);c=Zd(c.ga,"EXT-X-MEDIA");var r=Xd(b,"AUDIO"),v=Xd(b,"VIDEO");r?c=ae(c,"AUDIO",r):v&&(c=ae(c,"VIDEO",v));c=c.map(function(a){return te(this,a,e,q)}.bind(a));var u=[],w=[];return Promise.all(c).then(function(a){r?u=a:v&&(w=a);if(u.length||w.length)var c=u.length?"video":"audio";
else 1==e.length?c=f||l?"video":"audio":(c="video",e=[e.join(",")]);a=e;var d=U(b,"URI");return ve(this,d,a,c,q,"und",!1,null)}.bind(a)).then(function(a){"audio"==a.stream.type?u=[a]:w=[a];return we(this,u,w,d,g,h,l)}.bind(a))}
function we(a,b,c,d,e,f,g){c.forEach(function(a){if(a=a.stream)a.width=Number(e)||void 0,a.height=Number(f)||void 0,a.frameRate=Number(g)||void 0}.bind(a));b.length||(b=[null]);c.length||(c=[null]);for(var h=[],l=0;l<b.length;l++)for(var n=0;n<c.length;n++){var q=b[l]?b[l].stream:null,r=c[n]?c[n].stream:null,v=b[l]?b[l].drmInfos:null,u=c[n]?c[n].drmInfos:null;if(q&&r)if(v.length&&u.length?0<sb(v,u).length:1)var w=sb(v,u);else continue;else q?w=v:r&&(w=u);h.push(xe(a,q,r,d,w))}return h}
function xe(a,b,c,d,e){return{id:a.i++,language:b?b.language:"und",primary:!!b&&b.primary||!!c&&c.primary,audio:b,video:c,bandwidth:d,drmInfos:e,allowedByApplication:!0,allowedByKeySystem:!0}}function qe(a,b,c){U(b,"TYPE");c=se(a,c);return te(a,b,[],c).then(function(a){return a.stream})}
function te(a,b,c,d){if(a.g[b.id])return Promise.resolve().then(function(){return this.g[b.id]}.bind(a));var e=U(b,"TYPE").toLowerCase();"subtitles"==e&&(e="text");var f=Sb(Xd(b,"LANGUAGE","und")),g=Xd(b,"NAME"),h=b.getAttribute("DEFAULT"),l=b.getAttribute("AUTOSELECT"),n=U(b,"URI");return ve(a,n,c,e,d,f,!!h||!!l,g).then(function(a){return this.g[b.id]=a}.bind(a))}
function ve(a,b,c,d,e,f,g,h){b=z([a.j],[b])[0];return a.c.networkingEngine.request(0,C([b],a.b.retryParameters)).then(function(a){a=fe(this.h,a.data,a.uri);if(1!=a.type)throw new t(2,4,4017);e=se(this,a)||e;var b=null;"text"!=d&&(b=ye(a));var l=$d(a.ga,"EXT-X-MEDIA-SEQUENCE"),l=ze(this,a,l?Number(l.value):0);this.a.Ga(0,l);var r=l[l.length-1].endTime-l[0].startTime,v=this.a.Y();(Infinity==v||v<r)&&this.a.pa(r);var u=Ae(d,c),w=void 0;"text"==d&&(w="subtitle");var G=new S(l),pa=[];a.segments.forEach(function(a){a=
Zd(a.ga,"EXT-X-KEY");pa.push.apply(pa,a)});var Hb=!1,tc=[],me=null;pa.forEach(function(a){if("NONE"!=U(a,"METHOD")){Hb=!0;var b=U(a,"KEYFORMAT");if(a=(b=Be[b])?b(a):null)a.keyIds.length&&(me=a.keyIds[0]),tc.push(a)}});if(Hb&&!tc.length)throw new t(2,4,4026);return Ce(this,d,l[0].a()[0]).then(function(a){a={id:this.i++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:G.find.bind(G),getSegmentReference:G.get.bind(G),initSegmentReference:b,presentationTimeOffset:e||0,mimeType:a,codecs:u,
kind:w,encrypted:Hb,keyId:me,language:f,label:h||null,type:d,primary:g,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[]};this.f[a.id]=G;return{stream:a,ye:G,drmInfos:tc}}.bind(this))}.bind(a))}
function ye(a){var b=Zd(a.ga,"EXT-X-MAP");if(!b.length)return null;if(1<b.length)throw new t(2,4,4020);var b=b[0],c=U(b,"URI"),d=z([a.uri],[c])[0];a=0;c=null;if(b=Xd(b,"BYTERANGE"))a=b.split("@"),b=Number(a[0]),a=Number(a[1]),c=a+b-1;return new Zc(function(){return[d]},a,c)}
function ze(a,b,c){var d=b.segments,e=[];d.forEach(function(a){var f=a.ga,h=z([b.uri],[a.uri])[0],l=De(f).value.split(","),l=Number(l[0]),n;(a=d.indexOf(a))?n=e[a-1].endTime:n=0;var l=n+l,q=0,r=null;if(f=$d(f,"EXT-X-BYTERANGE"))f=f.value.split("@"),r=Number(f[0]),f[1]?q=Number(f[1]):q=e[a-1].M,r=q+r-1,a==d.length-1&&(r=null);e.push(new O(c+a,n,l,function(){return[h]},q,r))}.bind(a));return e}
function re(a,b){b.forEach(function(a){var b=this.a.Y(),c=a.video;a=a.audio;c&&this.f[c.id]&&gd(this.f[c.id],b);a&&this.f[a.id]&&gd(this.f[a.id],b)}.bind(a))}function Ae(a,b){if(1==b.length)return b[0];if("text"==a)return"";var c=Ee;"audio"==a&&(c=Fe);for(var d=0;d<c.length;d++)for(var e=0;e<b.length;e++)if(c[d].test(b[e].trim()))return b[e].trim();throw new t(2,4,4025,b);}
function Ce(a,b,c){var d=c.split("."),e=d[d.length-1];if("text"==b)return Promise.resolve("text/vtt");d=Ge;"video"==b&&(d=He);if(b=d[e])return Promise.resolve(b);c=C([c],a.b.retryParameters);c.method="HEAD";return a.c.networkingEngine.request(1,c).then(function(a){a=a.headers["content-type"];if(!a)throw new t(2,4,4021,e);return a})}function se(a,b){var c=$d(b.ga,"EXT-X-START");return c?Number(U(c,"TIME-OFFSET")):a.b.hls.defaultTimeOffset}
function U(a,b){var c=a.getAttribute(b);if(!c)throw new t(2,4,4023,b);return c.value}function De(a){a=$d(a,"EXTINF");if(!a)throw new t(2,4,4024,"EXTINF");return a}
var Ee=[/^(avc)/,/^(hvc)/,/^(vp[8-9])$/,/^(av1)$/,/^(mp4v)/],Fe=[/^(vorbis)/,/^(opus)/,/^(mp4a)/,/^(ac-3)$/,/^(ec-3)$/],Ge={mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},He={mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},Be={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){if("SAMPLE-AES-CENC"!=U(a,"METHOD"))return null;var b=U(a,"URI"),b=ke.parse(b),b=new Uint8Array(b.data),b=Ba("com.widevine.alpha",[{initDataType:"cenc",
initData:b}]);if(a=Xd(a,"KEYID"))b.keyIds=[a.substr(2).toLowerCase()];return b}};Ed.m3u8=le;Dd["application/x-mpegurl"]=le;Dd["application/vnd.apple.mpegurl"]=le;function Ie(){}Ie.prototype.parseInit=function(){};
Ie.prototype.parseMedia=function(a,b){var c=F(a),d=[],e=new DOMParser,f=null;try{f=e.parseFromString(c,"text/xml")}catch(Hb){throw new t(2,2,2005);}if(f){var g=f.getElementsByTagName("tt")[0];if(g){e=g.getAttribute("ttp:frameRate");f=g.getAttribute("ttp:subFrameRate");var h=g.getAttribute("ttp:frameRateMultiplier");var l=g.getAttribute("ttp:tickRate");c=g.getAttribute("xml:space")||"default"}else throw new t(2,2,2005);if("default"!=c&&"preserve"!=c)throw new t(2,2,2005);c="default"==c;e=new Je(e,
f,h,l);f=Ke(g.getElementsByTagName("styling")[0]);h=Ke(g.getElementsByTagName("layout")[0]);g=Ke(g.getElementsByTagName("body")[0]);for(l=0;l<g.length;l++){var n=g[l],q=b.periodStart,r=e;var v=f;var u=h,w=c;if(n.hasAttribute("begin")||n.hasAttribute("end")||!/^\s*$/.test(n.textContent)){Le(n,w);var w=Me(n.getAttribute("begin"),r),G=Me(n.getAttribute("end"),r),r=Me(n.getAttribute("dur"),r),pa=n.textContent;null==G&&null!=r&&(G=w+r);if(null==w||null==G)throw new t(2,2,2001);if(q=xb(w+q,G+q,pa)){w=Ne(n,
"region",u);u=q;if(G=Oe(n,w,v,"tts:extent"))if(r=Pe.exec(G))u.size=Number(r[1]);r=Oe(n,w,v,"tts:writingMode");G=!0;"tb"==r||"tblr"==r?u.vertical="lr":"tbrl"==r?u.vertical="rl":G=!1;if(r=Oe(n,w,v,"tts:origin"))if(r=Pe.exec(r))G?(u.position=Number(r[2]),u.line=Number(r[1])):(u.position=Number(r[1]),u.line=Number(r[2])),u.snapToLines=!1;if(v=Oe(n,w,v,"tts:textAlign"))u.align=v,"center"==v&&("center"!=u.align&&(u.align="middle"),u.position="auto"),u.positionAlign=Qe[v],u.lineAlign=Re[v];v=q}else v=null}else v=
null;v&&d.push(v)}}return d};var Se=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Te=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ue=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ve=/^(\d*\.?\d*)f$/,We=/^(\d*\.?\d*)t$/,Xe=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,Pe=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Re={left:"start",center:"center",right:"end",start:"start",end:"end"},Qe={left:"line-left",center:"center",right:"line-right"};
function Ke(a){var b=[];if(!a)return b;for(var c=a.childNodes,d=0;d<c.length;d++){var e="span"==c[d].nodeName&&"p"==a.nodeName;c[d].nodeType!=Node.ELEMENT_NODE||"br"==c[d].nodeName||e||(e=Ke(c[d]),b=b.concat(e))}b.length||b.push(a);return b}function Le(a,b){for(var c=a.childNodes,d=0;d<c.length;d++)if("br"==c[d].nodeName&&0<d)c[d-1].textContent+="\n";else if(0<c[d].childNodes.length)Le(c[d],b);else if(b){var e=c[d].textContent.trim(),e=e.replace(/\s+/g," ");c[d].textContent=e}}
function Oe(a,b,c,d){for(var e=Ke(b),f=0;f<e.length;f++){var g=e[f].getAttribute(d);if(g)return g}e=Ne;return(a=e(b,"style",c)||e(a,"style",c))?a.getAttribute(d):null}function Ne(a,b,c){if(!a||1>c.length)return null;var d=null,e=a;for(a=null;e&&!(a=e.getAttribute(b))&&(e=e.parentNode,e instanceof Element););if(b=a)for(a=0;a<c.length;a++)if(c[a].getAttribute("xml:id")==b){d=c[a];break}return d}
function Me(a,b){var c=null;if(Se.test(a))var c=Se.exec(a),d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]),g=g+(Number(c[5])||0)/b.b,f=f+g/b.frameRate,c=f+60*e+3600*d;else Te.test(a)?c=Ye(Te,a):Ue.test(a)?c=Ye(Ue,a):Ve.test(a)?(c=Ve.exec(a),c=Number(c[1])/b.frameRate):We.test(a)?(c=We.exec(a),c=Number(c[1])/b.a):Xe.test(a)&&(c=Ye(Xe,a));return c}
function Ye(a,b){var c=a.exec(b);return c&&""!=c[0]?(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0):null}function Je(a,b,c,d){this.frameRate=Number(a)||30;this.b=Number(b)||1;this.a=Number(d);this.a||(this.a=a?this.frameRate*this.b:1);c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.frameRate*=a[1]/a[2])}vb("application/ttml+xml",Ie);function Ze(){this.a=new Ie}Ze.prototype.parseInit=function(a){var b=!1;(new Q).C("moov",R).C("trak",R).C("mdia",R).C("minf",R).C("stbl",R).da("stsd",cd).C("stpp",function(){b=!0}).parse(a);if(!b)throw new t(2,2,2007);};Ze.prototype.parseMedia=function(a,b){var c=!1,d=[];(new Q).C("mdat",dd(function(a){c=!0;d=this.a.parseMedia(a.buffer,b)}.bind(this))).parse(a);if(!c)throw new t(2,2,2007);return d};vb('application/mp4; codecs="stpp"',Ze);function $e(){}$e.prototype.parseInit=function(){};
$e.prototype.parseMedia=function(a,b){var c=F(a),c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),c=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(c[0]))throw new t(2,2,2E3);var d=b.segmentStart;if(0<=c[0].indexOf("X-TIMESTAMP-MAP")){var e=c[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),f=c[0].match(/MPEGTS:(\d+)/m);e&&f&&(d=af(new be(e[1])),d=b.periodStart+(Number(f[1])/9E4-d))}f=[];for(e=1;e<c.length;e++){var g=c[e].split("\n"),h=d;if(1==g.length&&!g[0]||/^NOTE($|[ \t])/.test(g[0]))var l=
null;else{l=null;0>g[0].indexOf("--\x3e")&&(l=g[0],g.splice(0,1));var n=new be(g[0]),q=af(n),r=ce(n,/[ \t]+--\x3e[ \t]+/g),v=af(n);if(null==q||!r||null==v)throw new t(2,2,2001);if(g=xb(q+h,v+h,g.slice(1).join("\n").trim())){ce(n,/[ \t]+/gm);for(h=de(n);h;)bf(g,h),ce(n,/[ \t]+/gm),h=de(n);null!=l&&(g.id=l);l=g}else l=null}l&&f.push(l)}return f};
function bf(a,b){var c;if(c=/^align:(start|middle|center|end|left|right)$/.exec(b))a.align=c[1],"center"==c[1]&&"center"!=a.align&&(a.position="auto",a.align="middle");else if(c=/^vertical:(lr|rl)$/.exec(b))a.vertical=c[1];else if(c=/^size:(\d{1,2}|100)%$/.exec(b))a.size=Number(c[1]);else if(c=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(c[1]),c[2]&&(a.positionAlign=c[2]);else if(c=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(b))a.snapToLines=
!1,a.line=Number(c[1]),c[2]&&(a.lineAlign=c[2]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.snapToLines=!0,a.line=Number(c[1]),c[2]&&(a.lineAlign=c[2])}function af(a){a=ce(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(!a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)}vb("text/vtt",$e);vb('text/vtt; codecs="vtt"',$e);function cf(){this.a=null}cf.prototype.parseInit=function(a){var b=!1;(new Q).C("moov",R).C("trak",R).C("mdia",R).da("mdhd",function(a){0==a.version?(a.s.I(4),a.s.I(4),this.a=a.s.D(),a.s.I(4)):(a.s.I(8),a.s.I(8),this.a=a.s.D(),a.s.I(8));a.s.I(4)}.bind(this)).C("minf",R).C("stbl",R).da("stsd",cd).C("wvtt",function(){b=!0}).parse(a);if(!this.a)throw new t(2,2,2008);if(!b)throw new t(2,2,2008);};
cf.prototype.parseMedia=function(a,b){var c=0,d=[],e=[],f=[],g=!1,h=!1,l=!1;(new Q).C("moof",R).C("traf",R).da("tfdt",function(a){g=!0;c=a.version?a.s.Pa():a.s.D()}).da("trun",function(a){h=!0;var b=a.version,c=a.Lc;a=a.s;var e=a.D();c&1&&a.I(4);c&4&&a.I(4);for(var f=[],g=0;g<e;g++){var l={duration:null,Lb:null};c&256&&(l.duration=a.D());c&512&&a.I(4);c&1024&&a.I(4);c&2048&&(l.Lb=b?a.lc():a.D());f.push(l)}d=f}).C("vtte",function(){e.push(null)}).C("vttc",dd(function(a){e.push(a.buffer)})).C("mdat",
function(a){l=!0;R(a)}).parse(a);if(!l&&!g&&!h)throw new t(2,2,2008);for(var n=c,q=0;q<d.length;q++){var r=d[q],v=e[q];if(r.duration){var u=r.Lb?c+r.Lb:n,n=u+r.duration;v&&f.push(df(v,b.periodStart+u/this.a,b.periodStart+n/this.a))}}return f};function df(a,b,c){var d,e,f;(new Q).C("payl",dd(function(a){d=F(a)})).C("iden",dd(function(a){e=F(a)})).C("sttg",dd(function(a){f=F(a)})).parse(a);return d?ef(d,e,f,b,c):null}
function ef(a,b,c,d,e){(a=xb(d,e,a))&&b&&(a.id=b);if(a&&c)for(b=new be(c),c=de(b);c;)bf(a,c),ce(b,/[ \t]+/gm),c=de(b);return a}vb('application/mp4; codecs="wvtt"',cf);function ff(a,b,c,d,e,f){this.a=a;this.c=b;this.l=c;this.A=d;this.J=e;this.G=f;this.b=new D;this.h=!1;this.g=1;this.j=this.f=null;this.B=a.readyState;this.i=!1;this.P=this.v=-1;this.o=!1;0<a.readyState?this.dc():La(this.b,a,"loadedmetadata",this.dc.bind(this));b=this.fc.bind(this);E(this.b,a,"ratechange",this.pd.bind(this));E(this.b,a,"waiting",b);this.j=setInterval(b,250)}k=ff.prototype;
k.m=function(){var a=this.b.m();this.b=null;null!=this.f&&(window.clearInterval(this.f),this.f=null);null!=this.j&&(window.clearInterval(this.j),this.j=null);this.G=this.J=this.l=this.c=this.a=null;return a};function gf(a,b){0<a.a.readyState?a.a.currentTime=hf(a,b):a.A=b}function jf(a){return 0<a.a.readyState?hf(a,a.a.currentTime):kf(a)}function kf(a){if(a.A)return hf(a,a.A);a=a.c.presentationTimeline;return Infinity>a.Y()?a.ma():a.bb()}k.pb=function(){return this.g};
function lf(a,b){null!=a.f&&(window.clearInterval(a.f),a.f=null);a.g=b;a.a.playbackRate=a.h||0>b?0:b;!a.h&&0>b&&(a.f=window.setInterval(function(){this.a.currentTime+=b/4}.bind(a),250))}k.yb=function(){this.o=!0;this.fc()};k.pd=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&lf(this,this.a.playbackRate)};
k.dc=function(){var a=kf(this);.001>Math.abs(this.a.currentTime-a)?(E(this.b,this.a,"seeking",this.gc.bind(this)),E(this.b,this.a,"playing",this.ec.bind(this))):(La(this.b,this.a,"seeking",this.rd.bind(this)),this.a.currentTime=a)};k.rd=function(){E(this.b,this.a,"seeking",this.gc.bind(this));E(this.b,this.a,"playing",this.ec.bind(this))};
k.fc=function(){if(this.a.readyState){this.a.readyState!=this.B&&(this.i=!1,this.B=this.a.readyState);var a=this.l.smallGapLimit,b=this.a.currentTime,c=this.a.buffered;a:{if(c&&c.length&&!(1==c.length&&1E-6>c.end(0)-c.start(0))){var d=.1;/(Edge|Trident)\//.test(navigator.userAgent)&&(d=.5);for(var e=0;e<c.length;e++)if(c.start(e)>b&&(!e||c.end(e-1)-b<=d)){d=e;break a}}d=null}if(null==d){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.P!=b)this.P=b,this.v=Date.now();else if(this.v<Date.now()-
1E3)for(this.v=Date.now()+5E3,d=0;d<c.length;d++)if(b>=c.start(d)&&b<c.end(d)-.5){this.a.currentTime=this.a.currentTime;break}}else if(d||this.o)if(e=c.start(d),!(e>=this.c.presentationTimeline.bb())){var f=e-b,a=f<=a,g=!1;a||this.i||(this.i=!0,f=new I("largegap",{currentTime:b,gapSize:f}),f.cancelable=!0,this.G(f),this.l.jumpLargeGaps&&!f.defaultPrevented&&(g=!0));if(a||g)d&&c.end(d-1),mf(this,b,e)}}};
k.gc=function(){this.o=!1;var a=this.a.currentTime,b=nf(this,a);.001<Math.abs(b-a)?mf(this,a,b):(this.i=!1,this.J())};k.ec=function(){var a=this.a.currentTime,b=nf(this,a);.001<Math.abs(b-a)&&mf(this,a,b)};function nf(a,b){var c=Bb.bind(null,a.a.buffered),d=1*Math.max(a.c.minBufferTime||0,a.l.rebufferingGoal),e=a.c.presentationTimeline,f=e.ua(),g=e.Da(d),h=e.Da(5),d=e.Da(d+5);return b>f?f:b<e.Da(0)?c(h)?h:d:b>=g||c(b)?b:d}
function mf(a,b,c){a.a.currentTime=c;var d=0,e=function(){!this.a||10<=d++||this.a.currentTime!=b||(this.a.currentTime=c,setTimeout(e,100))}.bind(a);setTimeout(e,100)}function hf(a,b){var c=a.c.presentationTimeline.ma();if(b<c)return c;c=a.c.presentationTimeline.ua();return b>c?c:b};function of(a,b,c,d,e,f){this.a=a;this.g=b;this.A=c;this.l=d;this.h=e;this.B=f;this.c=[];this.j=new D;this.b=!1;this.i=-1;this.f=null;pf(this)}of.prototype.m=function(){var a=this.j?this.j.m():Promise.resolve();this.j=null;qf(this);this.B=this.h=this.l=this.A=this.g=this.a=null;this.c=[];return a};
of.prototype.v=function(a){if(!this.c.some(function(b){return b.info.schemeIdUri==a.schemeIdUri&&b.info.startTime==a.startTime&&b.info.endTime==a.endTime})){var b={info:a,status:1};this.c.push(b);var c=new I("timelineregionadded",{detail:rf(a)});this.h(c);this.o(!0,b)}};function rf(a){var b=Da(a);b.eventElement=a.eventElement;return b}
of.prototype.o=function(a,b){var c=b.info.startTime>this.a.currentTime?1:b.info.endTime<this.a.currentTime?3:2,d=2==b.status,e=2==c;if(c!=b.status){if(!a||d||e)d||this.h(new I("timelineregionenter",{detail:rf(b.info)})),e||this.h(new I("timelineregionexit",{detail:rf(b.info)}));b.status=c}};function pf(a){qf(a);a.f=window.setTimeout(a.G.bind(a),250)}function qf(a){a.f&&(window.clearTimeout(a.f),a.f=null)}
of.prototype.G=function(){this.f=null;pf(this);var a=hc(this.g,this.a.currentTime);a!=this.i&&(-1!=this.i&&this.B(),this.i=a);var a=Cb(this.a.buffered,this.a.currentTime),b=Ab(this.a.buffered)>=this.g.presentationTimeline.ua()-.1||this.a.ended;if(this.b){var c=1*Math.max(this.g.minBufferTime||0,this.A.rebufferingGoal);(b||a>=c)&&0!=this.b&&(this.b=!1,this.l(!1))}else!b&&.5>a&&1!=this.b&&(this.b=!0,this.l(!0));this.c.forEach(this.o.bind(this,!1))};function sf(a,b){this.a=b;this.b=a;this.g=null;this.i=1;this.o=Promise.resolve();this.h=[];this.j={};this.c={};this.f=this.l=this.v=!1}k=sf.prototype;k.m=function(){for(var a in this.c)tf(this.c[a]);this.g=this.c=this.j=this.h=this.o=this.b=this.a=null;this.f=!0;return Promise.resolve()};k.configure=function(a){this.g=a};k.init=function(){var a=this.a.$b(this.b.periods[hc(this.b,jf(this.a.Oa))]);return Ma(a)?Promise.reject(new t(2,5,5005)):uf(this,a).then(function(){this.a&&this.a.gd&&this.a.gd()}.bind(this))};
function V(a){return a.b.periods[hc(a.b,jf(a.a.Oa))]}function vf(a){return Oa(a.c,function(a){return a.na||a.stream})}function wf(a,b){var c={};c.text=b;return uf(a,c)}function xf(a,b){var c=a.c.video;if(c){var d=c.stream;if(d)if(b){var e=d.trickModeVideo;if(e){var f=c.na;f||(yf(a,"video",e,!1),c.na=d)}}else if(f=c.na)c.na=null,yf(a,"video",f,!0)}}
function yf(a,b,c,d){var e=a.c[b];!e&&"text"==b&&a.g.ignoreTextStreamFailures?wf(a,c):e&&(e.na&&(c.trickModeVideo?(e.na=c,c=c.trickModeVideo):e.na=null),"text"==b&&Fb(a.a.K,Yb(c.mimeType,c.codecs)),(b=a.h[ic(a.b,c)])&&b.Ka&&(b=a.j[c.id])&&b.Ka&&e.stream!=c&&(e.stream=c,e.cb=!0,d&&(e.sa?e.kb=!0:e.wa?(e.ra=!0,e.kb=!0):(tf(e),zf(a,e,!0)))))}
function Af(a){var b=jf(a.a.Oa);if(!Object.keys(a.c).every(function(a){var c=this.a.K;"text"==a?(a=c.a,a=b>=a.b&&b<a.a):(a=Ib(c,a),a=Bb(a,b));return a}.bind(a)))for(var c in a.c){var d=a.c[c];d.sa||d.ra||(d.wa?d.ra=!0:null==Gb(a.a.K,c)?null==d.qa&&Bf(a,d,0):(tf(d),zf(a,d,!1)))}}
function uf(a,b,c){var d=hc(a.b,jf(a.a.Oa)),e=Oa(b,function(a){return Yb(a.mimeType,a.codecs)});a.a.K.init(e);Cf(a);e=Na(b);return Df(a,e).then(function(){if(!this.f)for(var a in b){var e=b[a];this.c[a]||(this.c[a]={stream:e,type:a,Ea:null,ea:null,na:null,cb:!0,Ma:d,endOfStream:!1,wa:!1,qa:null,ra:!1,kb:!1,sa:!1,Eb:!1,rb:!1,pc:c||0},Bf(this,this.c[a],0))}}.bind(a))}
function Ef(a,b){var c=a.h[b];if(c)return c.L;c={L:new A,Ka:!1};a.h[b]=c;var d=a.b.periods[b].variants.map(function(a){var b=[];a.audio&&b.push(a.audio);a.video&&b.push(a.video);a.video&&a.video.trickModeVideo&&b.push(a.video.trickModeVideo);return b}).reduce(x,[]).filter(Aa);d.push.apply(d,a.b.periods[b].textStreams);a.o=a.o.then(function(){if(!this.f)return Df(this,d)}.bind(a)).then(function(){this.f||(this.h[b].L.resolve(),this.h[b].Ka=!0)}.bind(a))["catch"](function(a){this.f||(this.h[b].L.reject(),
delete this.h[b],this.a.onError(a))}.bind(a));return c.L}
function Df(a,b){b.map(function(a){return a.id}).filter(Aa);for(var c=[],d=0;d<b.length;++d){var e=b[d];var f=a.j[e.id];f?c.push(f.L):(a.j[e.id]={L:new A,Ka:!1},c.push(e.createSegmentIndex()))}return Promise.all(c).then(function(){if(!this.f)for(var a=0;a<b.length;++a){var c=this.j[b[a].id];c.Ka||(c.L.resolve(),c.Ka=!0)}}.bind(a))["catch"](function(a){if(!this.f)return this.j[e.id].L.reject(),delete this.j[e.id],Promise.reject(a)}.bind(a))}
function Cf(a){var b=a.b.presentationTimeline.Y();Infinity>b?a.a.K.pa(b):a.a.K.pa(Math.pow(2,32))}k.ie=function(a){if(!this.f&&!a.wa&&null!=a.qa&&!a.sa)if(a.qa=null,a.ra)zf(this,a,a.kb);else{try{var b=Ff(this,a);null!=b&&(Bf(this,a,b),a.rb=!1)}catch(c){this.a.onError(c);return}b=Na(this.c);Gf(this,a);b.every(function(a){return a.endOfStream})&&this.a.K.endOfStream().then(function(){this.b.presentationTimeline.pa(this.a.K.Y())}.bind(this))}};
function Ff(a,b){var c=jf(a.a.Oa),d=b.Ea&&b.ea?a.b.periods[ic(a.b,b.Ea)].startTime+b.ea.endTime:Math.max(c,b.pc);b.pc=0;var e=ic(a.b,b.stream),f=hc(a.b,d);var g=a.a.K;var h=b.type;"text"==h?(g=g.a,g=null==g.a||g.a<c?0:g.a-Math.max(c,g.b)):(g=Ib(g,h),g=Cb(g,c));h=Math.max(a.i*Math.max(a.b.minBufferTime||0,a.g.rebufferingGoal),a.i*a.g.bufferingGoal);if(d>=a.b.presentationTimeline.Y())return b.endOfStream=!0,null;b.endOfStream=!1;b.Ma=f;if(f!=e)return null;if(g>=h)return.5;d=a.a.K;f=b.type;d="text"==
f?d.a.a:Ab(Ib(d,f));b.ea&&b.stream==b.Ea?(f=b.ea.position+1,d=Hf(a,b,e,f)):(f=b.ea?b.stream.findSegmentPosition(Math.max(0,a.b.periods[ic(a.b,b.Ea)].startTime+b.ea.endTime-a.b.periods[e].startTime)):b.stream.findSegmentPosition(Math.max(0,(d||c)-a.b.periods[e].startTime)),null==f?d=null:(g=null,null==d&&(g=Hf(a,b,e,Math.max(0,f-1))),d=g||Hf(a,b,e,f)));if(!d)return 1;If(a,b,c,e,d);return null}
function Hf(a,b,c,d){c=a.b.periods[c];b=b.stream.getSegmentReference(d);if(!b)return null;a=a.b.presentationTimeline;d=a.ua();return c.startTime+b.endTime<a.ma()||c.startTime+b.startTime>d?null:b}
function If(a,b,c,d,e){var f=a.b.periods[d],g=b.stream,h=a.b.periods[d+1],l=null,l=h?h.startTime:a.b.presentationTimeline.Y();d=Jf(a,b,d,l);b.wa=!0;b.cb=!1;h=Kf(a,e);Promise.all([d,h]).then(function(a){if(!this.f&&!this.l)return Lf(this,b,c,f,g,e,a[1])}.bind(a)).then(function(){this.f||this.l||(b.wa=!1,b.Eb=!1,b.ra||this.a.yb(),Bf(this,b,0),Mf(this,g))}.bind(a))["catch"](function(a){this.f||this.l||(b.wa=!1,this.b.presentationTimeline.$()&&this.g.infiniteRetriesForLiveStreams&&(1001==a.code||1002==
a.code||1003==a.code)?"text"==b.type&&this.g.ignoreTextStreamFailures&&1001==a.code?delete this.c.text:(a.severity=1,this.a.onError(a),Bf(this,b,4)):3017==a.code?Nf(this,b,a):"text"==b.type&&this.g.ignoreTextStreamFailures?delete this.c.text:(b.rb=!0,a.severity=2,this.a.onError(a)))}.bind(a))}function Nf(a,b,c){if(!Na(a.c).some(function(a){return a!=b&&a.Eb})){var d=Math.round(100*a.i);if(20<d)a.i-=.2;else if(4<d)a.i-=.04;else{b.rb=!0;a.l=!0;a.a.onError(c);return}b.Eb=!0}Bf(a,b,4)}
function Jf(a,b,c,d){if(!b.cb)return Promise.resolve();c=Mb(a.a.K,b.type,a.b.periods[c].startTime-b.stream.presentationTimeOffset,d);if(!b.stream.initSegmentReference)return c;a=Kf(a,b.stream.initSegmentReference).then(function(a){if(!this.f)return Jb(this.a.K,b.type,a,null,null)}.bind(a))["catch"](function(a){b.cb=!0;return Promise.reject(a)});return Promise.all([c,a])}
function Lf(a,b,c,d,e,f,g){e.containsEmsgBoxes&&(new Q).da("emsg",a.Cd.bind(a,d,f)).parse(g);return Of(a,b,c).then(function(){if(!this.f)return Jb(this.a.K,b.type,g,f.startTime+d.startTime,f.endTime+d.startTime)}.bind(a)).then(function(){if(!this.f)return b.Ea=e,b.ea=f,Promise.resolve()}.bind(a))}
k.Cd=function(a,b,c){var d=c.s.Bb(),e=c.s.Bb(),f=c.s.D(),g=c.s.D(),h=c.s.D(),l=c.s.D();c=c.s.Ja(c.s.H.byteLength-c.s.u);a=a.startTime+b.startTime+g/f;if("urn:mpeg:dash:event:2012"==d)this.a.hd();else this.a.onEvent(new I("emsg",{detail:{startTime:a,endTime:a+h/f,schemeIdUri:d,value:e,timescale:f,presentationTimeDelta:g,eventDuration:h,id:l,messageData:c}}))};
function Of(a,b,c){var d=Gb(a.a.K,b.type);if(null==d)return Promise.resolve();c=c-d-a.g.bufferBehind;return 0>=c?Promise.resolve():a.a.K.remove(b.type,d,d+c).then(function(){}.bind(a))}function Mf(a,b){if(!a.v&&(a.v=Na(a.c).every(function(a){return"text"==a.type?!0:!a.ra&&!a.sa&&a.ea}),a.v)){var c=ic(a.b,b);a.h[c]||Ef(a,c).then(function(){this.a.Zb()}.bind(a))["catch"](y);for(c=0;c<a.b.periods.length;++c)Ef(a,c)["catch"](y);a.a.ud&&a.a.ud()}}
function Gf(a,b){if(b.Ma!=ic(a.b,b.stream)){var c=b.Ma,d=Na(a.c);d.every(function(a){return a.Ma==c})&&d.every(Pf)&&Ef(a,c).then(function(){if(!this.f&&d.every(function(a){var b=ic(this.b,a.stream);return Pf(a)&&a.Ma==c&&b!=c}.bind(this))){var a=this.b.periods[c],b=this.a.$b(a),g;for(g in this.c)if(!b[g]&&"text"!=g){this.a.onError(new t(2,5,5005));return}for(g in b)if(!this.c[g])if("text"==g)uf(this,{text:b.text},a.startTime),delete b[g];else{this.a.onError(new t(2,5,5005));return}for(g in this.c)(a=
b[g])?(yf(this,g,a,!1),Bf(this,this.c[g],0)):delete this.c[g];this.a.Zb()}}.bind(a))["catch"](y)}}function Pf(a){return!a.wa&&null==a.qa&&!a.ra&&!a.sa}function Kf(a,b){var c=C(b.a(),a.g.retryParameters);if(b.X||null!=b.M){var d="bytes="+b.X+"-";null!=b.M&&(d+=b.M);c.headers.Range=d}return a.a.bd.request(1,c).then(function(a){return a.data})}
function zf(a,b,c){b.ra=!1;b.kb=!1;b.sa=!0;Lb(a.a.K,b.type).then(function(){if(!this.f&&c){var a=this.a.K,e=b.type;return"text"==e?Promise.resolve():Kb(a,e,a.Mc.bind(a,e))}}.bind(a)).then(function(){this.f||(b.Ea=null,b.ea=null,b.sa=!1,b.endOfStream=!1,Bf(this,b,0))}.bind(a))}function Bf(a,b,c){b.qa=window.setTimeout(a.ie.bind(a,b),1E3*c)}function tf(a){null!=a.qa&&(window.clearTimeout(a.qa),a.qa=null)};function Qf(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onload=function(b){b=b.target;var e=b.getAllResponseHeaders().split("\r\n").reduce(function(a,b){var c=b.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ");return a},{});if(200<=b.status&&299>=b.status&&202!=b.status)b.responseURL&&(a=b.responseURL),c({uri:a,data:b.response,headers:e,fromCache:!!e["x-shaka-from-cache"]});
else{var f=null;try{f=Ta(b.response)}catch(n){}d(new t(401==b.status||403==b.status?2:1,1,1001,a,b.status,f,e))}};e.onerror=function(){d(new t(1,1,1002,a))};e.ontimeout=function(){d(new t(1,1,1003,a))};for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.send(b.body)})}m("shaka.net.HttpPlugin",Qf);Ea.http=Qf;Ea.https=Qf;function Rf(){this.a=null;this.b=[];this.c={}}k=Rf.prototype;k.init=function(a,b){return Sf(this,a,b).then(function(){var b=Object.keys(a);return Promise.all(b.map(function(a){return Tf(this,a).then(function(b){this.c[a]=b}.bind(this))}.bind(this)))}.bind(this))};k.m=function(){return Promise.all(this.b.map(function(a){try{a.transaction.abort()}catch(b){}return a.L["catch"](y)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))};
k.get=function(a,b){var c;return Uf(this,a,"readonly",function(a){c=a.get(b)}).then(function(){return c.result})};k.forEach=function(a,b){return Uf(this,a,"readonly",function(a){a.openCursor().onsuccess=function(a){if(a=a.target.result)b(a.value),a["continue"]()}})};function Vf(a,b,c){return Uf(a,b,"readwrite",function(a){a.put(c)})}k.remove=function(a,b){return Uf(this,a,"readwrite",function(a){a["delete"](b)})};
function Wf(a,b,c){return Uf(a,"segment","readwrite",function(a){for(var d=0;d<b.length;d++)a["delete"](b[d]).onsuccess=c||function(){}})}function Tf(a,b){var c=0;return Uf(a,b,"readonly",function(a){a.openCursor(null,"prev").onsuccess=function(a){(a=a.target.result)&&(c=a.key+1)}}).then(function(){return c})}
function Uf(a,b,c,d){var e={transaction:a.a.transaction([b],c),L:new A};e.transaction.oncomplete=function(){this.b.splice(this.b.indexOf(e),1);e.L.resolve()}.bind(a);e.transaction.onabort=function(a){this.b.splice(this.b.indexOf(e),1);Xf(e.transaction,e.L,a)}.bind(a);e.transaction.onerror=function(a){a.preventDefault()}.bind(a);b=e.transaction.objectStore(b);d(b);a.b.push(e);return e.L}
function Sf(a,b,c){var d=window.indexedDB.open("shaka_offline_db",1),e=!1,f=new A;d.onupgradeneeded=function(a){e=!0;a=a.target.result;for(var c in b)a.createObjectStore(c,{keyPath:b[c]})};d.onsuccess=function(a){c&&!e?(a.target.result.close(),setTimeout(function(){Sf(this,b,c-1).then(f.resolve,f.reject)}.bind(this),1E3)):(this.a=a.target.result,f.resolve())}.bind(a);d.onerror=Xf.bind(null,d,f);return f}
function Xf(a,b,c){a.error?b.reject(new t(2,9,9001,a.error)):b.reject(new t(2,9,9002));c.preventDefault()};var Yf={manifest:"key",segment:"key"};function Zf(a){var b=$f(a.periods[0],[],new T(null,0)),c=Zb(b,null,null),b=ac(b,null);c.push.apply(c,b);return{offlineUri:"offline:"+a.key,originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:void 0==a.expiration?Infinity:a.expiration,tracks:c,appMetadata:a.appMetadata}}
function $f(a,b,c){var d=a.streams.filter(function(a){return"text"==a.contentType}),e=a.streams.filter(function(a){return"audio"==a.contentType}),f=a.streams.filter(function(a){return"video"==a.contentType});b=ag(e,f,b);d=d.map(bg);a.streams.forEach(function(a){a=cg(a);c.Ga(0,a)});return{startTime:a.startTime,variants:b,textStreams:d}}function cg(a){return a.segments.map(function(a,c){return new O(c,a.startTime,a.endTime,function(){return[a.uri]},0,null)})}
function ag(a,b,c){var d=[];if(!a.length&&!b.length)return d;a.length?b.length||(b=[null]):a=[null];for(var e=0,f=0;f<a.length;f++)for(var g=0;g<b.length;g++)if(dg(a[f],b[g])){var h=a[f];var l=b[g],n=c;h={id:e++,language:h?h.language:"",primary:!!h&&h.primary||!!l&&l.primary,audio:bg(h),video:bg(l),bandwidth:0,drmInfos:n,allowedByApplication:!0,allowedByKeySystem:!0};d.push(h)}return d}
function dg(a,b){if(!(a&&b&&a.variantIds&&b.variantIds))return!0;for(var c=0;c<a.variantIds.length;c++)if(b.variantIds.some(function(b){return b==a.variantIds[c]}))return!0;return!1}
function bg(a){if(!a)return null;var b=cg(a),b=new S(b);return{id:a.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b),initSegmentReference:a.initSegmentUri?new Zc(function(){return[a.initSegmentUri]},0,null):null,presentationTimeOffset:a.presentationTimeOffset,mimeType:a.mimeType,codecs:a.codecs,width:a.width||void 0,height:a.height||void 0,frameRate:a.frameRate||void 0,kind:a.kind,encrypted:a.encrypted,keyId:a.keyId,language:a.language,
label:a.label||null,type:a.contentType,primary:a.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[]}}function eg(){return window.indexedDB?new Rf:null};function fg(a,b,c,d){this.b={};this.l=[];this.o=d;this.j=a;this.v=b;this.A=c;this.i=this.a=null;this.f=this.g=this.h=this.c=0}fg.prototype.m=function(){var a=this.j,b=this.l,c=this.i||Promise.resolve(),c=c.then(function(){return Wf(a,b)});this.b={};this.l=[];this.i=this.a=this.A=this.v=this.j=this.o=null;return c};function gg(a,b,c,d,e){a.b[b]=a.b[b]||[];a.b[b].push({uris:c.a(),X:c.X,M:c.M,Pb:d,Fb:e})}
function hg(a,b){a.c=0;a.h=0;a.g=0;a.f=0;Na(a.b).forEach(function(a){a.forEach(function(a){null!=a.M?this.c+=a.M-a.X+1:this.g+=a.Pb}.bind(this))}.bind(a));a.a=b;a.a.size=a.c;var c=Na(a.b).map(function(a){var b=0,c=function(){if(!this.o)return Promise.reject(new t(2,9,9002));if(b>=a.length)return Promise.resolve();var d=a[b++];return ig(this,d).then(c)}.bind(this);return c()}.bind(a));a.b={};a.i=Promise.all(c).then(function(){return Vf(this.j,"manifest",b)}.bind(a)).then(function(){this.l=[]}.bind(a));
return a.i}
function ig(a,b){var c=C(b.uris,a.A);if(b.X||null!=b.M)c.headers.Range="bytes="+b.X+"-"+(null==b.M?"":b.M);var d;return a.v.request(1,c).then(function(a){if(!this.a)return Promise.reject(new t(2,9,9002));d=a.data.byteLength;this.l.push(b.Fb.key);b.Fb.data=a.data;return Vf(this.j,"segment",b.Fb)}.bind(a)).then(function(){if(!this.a)return Promise.reject(new t(2,9,9002));null==b.M?(this.a.size+=d,this.f+=b.Pb):this.h+=d;var a=(this.h+this.f)/(this.c+this.g),c=Zf(this.a);this.o.progressCallback(c,a)}.bind(a))}
;function jg(){this.a=-1}k=jg.prototype;k.configure=function(){};k.start=function(a){var b=/^offline:([0-9]+)$/.exec(a);if(!b)return Promise.reject(new t(2,1,9004,a));var c=Number(b[1]),d=eg();this.a=c;return d?d.init(Yf).then(function(){return d.get("manifest",c)}).then(function(a){if(!a)throw new t(2,9,9003,c);return kg(a)}).then(function(a){return d.m().then(function(){return a})},function(a){return d.m().then(function(){throw a;})}):Promise.reject(new t(2,9,9E3))};k.stop=function(){return Promise.resolve()};
k.update=function(){};k.onExpirationUpdated=function(a,b){var c=eg();c.init(Yf).then(function(){return c.get("manifest",this.a)}.bind(this)).then(function(d){if(d&&!(0>d.sessionIds.indexOf(a))&&(void 0==d.expiration||d.expiration>b))return d.expiration=b,Vf(c,"manifest",d)})["catch"](function(){}).then(function(){return c.m()})};
function kg(a){var b=new T(null,0);b.pa(a.duration);var c=a.drmInfo?[a.drmInfo]:[];return{presentationTimeline:b,minBufferTime:10,offlineSessionIds:a.sessionIds,periods:a.periods.map(function(a){return $f(a,c,b)})}}Dd["application/x-offline-manifest"]=jg;function lg(a){if(/^offline:([0-9]+)$/.exec(a)){var b={uri:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(b)}if(b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)){var c=Number(b[1]),d=eg();return d?d.init(Yf).then(function(){return d.get("segment",c)}).then(function(b){return d.m().then(function(){if(!b)throw new t(2,9,9003,c);return{uri:a,data:b.data,headers:{}}})}):Promise.reject(new t(2,9,9E3))}return Promise.reject(new t(2,1,9004,a))}
m("shaka.offline.OfflineScheme",lg);Ea.offline=lg;function mg(){this.a=Promise.resolve();this.c=this.b=this.f=!1;this.g=new Promise(function(a){this.h=a}.bind(this))}mg.prototype.then=function(a){this.a=this.a.then(a).then(function(a){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(a)}.bind(this));return this};function ng(a){a.f||(a.a=a.a.then(function(a){this.b=!0;return Promise.resolve(a)}.bind(a),function(a){this.b=!0;return Promise.reject(a)}.bind(a)));a.f=!0;return a.a}
mg.prototype.cancel=function(a){if(this.b)return Promise.resolve();this.c=!0;this.i=a;return this.g};function W(a,b){p.call(this);this.J=!1;this.f=a;this.A=null;this.l=new D;this.Ob=new H;this.Ya=this.c=this.h=this.a=this.v=this.g=this.Wa=this.ja=this.N=this.j=this.o=null;this.Bc=1E9;this.Va=[];this.ka=!1;this.Za=!0;this.la=this.G=null;this.B={};this.Xa=[];this.P={};this.b=og(this);this.mb={width:Infinity,height:Infinity};this.i=pg();this.Ua=0;this.ia=this.b.preferredAudioLanguage;this.Ba=this.b.preferredTextLanguage;b&&b(this);this.o=new B(this.be.bind(this));this.Wa=qg(this);for(var c=0;c<this.f.textTracks.length;++c){var d=
this.f.textTracks[c];d.mode="disabled";"Shaka Player TextTrack"==d.label&&(this.A=d)}this.A||(this.A=this.f.addTextTrack("subtitles","Shaka Player TextTrack"));this.A.mode="hidden";E(this.l,this.f,"error",this.wd.bind(this))}ba(W);m("shaka.Player",W);
W.prototype.m=function(){this.J=!0;var a=Promise.resolve();this.G&&(a=this.G.cancel(new t(2,7,7E3)));return a.then(function(){var a=Promise.all([this.la,rg(this),this.l?this.l.m():null,this.o?this.o.m():null]);this.b=this.o=this.Ob=this.l=this.A=this.f=null;return a}.bind(this))};W.prototype.destroy=W.prototype.m;W.version="v2.1.3";var sg={};W.registerSupportPlugin=function(a,b){sg[a]=b};
W.isBrowserSupported=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration};W.probeSupport=function(){return qb().then(function(a){var b=Fd(),c=Eb();a={manifest:b,media:c,drm:a};for(var d in sg)a[d]=sg[d]();return a})};
W.prototype.load=function(a,b,c){var d=this.hb(),e=new mg;this.G=e;this.dispatchEvent(new I("loading"));var f=Date.now();return ng(e.then(function(){return d}).then(function(){this.i=pg();E(this.l,this.f,"playing",this.Sa.bind(this));E(this.l,this.f,"pause",this.Sa.bind(this));E(this.l,this.f,"ended",this.Sa.bind(this));return Gd(a,this.o,this.b.manifest.retryParameters,c)}.bind(this)).then(function(b){this.h=new b;this.h.configure(this.b.manifest);b={networkingEngine:this.o,filterPeriod:this.fb.bind(this),
onTimelineRegionAdded:this.vd.bind(this),onEvent:this.gb.bind(this),onError:this.xa.bind(this)};return 2<this.h.start.length?this.h.start(a,this.o,b.filterPeriod,b.onError,b.onEvent):this.h.start(a,b)}.bind(this)).then(function(b){if(0==b.periods.length)throw new t(2,4,4014);this.c=b;this.Ya=a;this.j=new bb(this.o,this.xa.bind(this),this.$d.bind(this),this.Zd.bind(this));this.j.configure(this.b.drm);return this.j.init(b,!1)}.bind(this)).then(function(){this.c.periods.forEach(this.fb.bind(this));this.Ua=
Date.now()/1E3;this.ia=this.b.preferredAudioLanguage;this.Ba=this.b.preferredTextLanguage;return Promise.all([eb(this.j,this.f),this.Wa])}.bind(this)).then(function(){this.b.abr.manager.init(this.Jb.bind(this));this.g=new ff(this.f,this.c,this.b.streaming,b||null,this.ae.bind(this),this.gb.bind(this));this.v=new of(this.f,this.c,this.b.streaming,this.xc.bind(this),this.gb.bind(this),this.Yd.bind(this));this.ja=new Db(this.f,this.N,this.A);this.a=new sf(this.c,{Oa:this.g,K:this.ja,bd:this.o,$b:this.cd.bind(this),
Zb:this.Ec.bind(this),onError:this.xa.bind(this),onEvent:this.gb.bind(this),hd:this.jd.bind(this),yb:this.sd.bind(this)});this.a.configure(this.b.streaming);tg(this);return this.a.init()}.bind(this)).then(function(){if(this.b.streaming.startAtSegmentBoundary){var a=ug(this,jf(this.g));gf(this.g,a)}this.c.periods.forEach(this.fb.bind(this));vg(this);wg(this);var a=V(this.a),b=dc(a,this.ia);this.b.abr.manager.setVariants(b);a.variants.some(function(a){return a.primary});this.Xa.forEach(this.v.v.bind(this.v));
this.Xa=[];La(this.l,this.f,"loadeddata",function(){this.i.loadLatency=(Date.now()-f)/1E3}.bind(this));this.G=null}.bind(this)))["catch"](function(a){this.G==e&&(this.G=null,this.dispatchEvent(new I("unloading")));return Promise.reject(a)}.bind(this))};W.prototype.load=W.prototype.load;
function tg(a){function b(a){return(a.video?a.video.codecs.split(".")[0]:"")+"-"+(a.audio?a.audio.codecs.split(".")[0]:"")}var c={};a.c.periods.forEach(function(a){a.variants.forEach(function(a){var d=b(a);d in c||(c[d]=[]);c[d].push(a)})});var d=null,e=Infinity;Qa(c,function(a,b){var c=0,f=0;b.forEach(function(a){c+=a.bandwidth;++f});var g=c/f;g<e&&(d=a,e=g)});a.c.periods.forEach(function(a){a.variants=a.variants.filter(function(a){return b(a)==d?!0:!1})})}
function qg(a){a.N=new MediaSource;var b=new A;E(a.l,a.N,"sourceopen",b.resolve);a.f.src=window.URL.createObjectURL(a.N);return b}W.prototype.configure=function(a){a.abr&&a.abr.manager&&a.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),a.abr.manager.init(this.Jb.bind(this)));Ca(this.b,a,og(this),xg(),"");yg(this)};W.prototype.configure=W.prototype.configure;
function yg(a){a.h&&a.h.configure(a.b.manifest);a.j&&a.j.configure(a.b.drm);if(a.a){a.a.configure(a.b.streaming);try{a.c.periods.forEach(a.fb.bind(a))}catch(b){a.xa(b)}zg(a,V(a.a))}a.b.abr.enabled&&!a.Za?a.b.abr.manager.enable():a.b.abr.manager.disable();a.b.abr.manager.setDefaultEstimate(a.b.abr.defaultBandwidthEstimate);a.b.abr.manager.setRestrictions(a.b.abr.restrictions)}W.prototype.getConfiguration=function(){var a=og(this);Ca(a,this.b,og(this),xg(),"");return a};
W.prototype.getConfiguration=W.prototype.getConfiguration;W.prototype.Pd=function(){var a=og(this);a.abr&&a.abr.manager&&a.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),a.abr.manager.init(this.Jb.bind(this)));this.b=og(this);yg(this)};W.prototype.resetConfiguration=W.prototype.Pd;W.prototype.Qc=function(){return this.f};W.prototype.getMediaElement=W.prototype.Qc;W.prototype.Ub=function(){return this.o};W.prototype.getNetworkingEngine=W.prototype.Ub;W.prototype.Pc=function(){return this.Ya};
W.prototype.getManifestUri=W.prototype.Pc;W.prototype.$=function(){return this.c?this.c.presentationTimeline.$():!1};W.prototype.isLive=W.prototype.$;W.prototype.va=function(){return this.c?this.c.presentationTimeline.va():!1};W.prototype.isInProgress=W.prototype.va;W.prototype.Rd=function(){var a=0,b=0;this.c&&(b=this.c.presentationTimeline,a=b.ma(),b=b.bb());return{start:a,end:b}};W.prototype.seekRange=W.prototype.Rd;W.prototype.keySystem=function(){return this.j?this.j.keySystem():""};
W.prototype.keySystem=W.prototype.keySystem;W.prototype.drmInfo=function(){return this.j?this.j.b:null};W.prototype.drmInfo=W.prototype.drmInfo;W.prototype.ab=function(){return this.j?this.j.ab():Infinity};W.prototype.getExpiration=W.prototype.ab;W.prototype.Yc=function(){return this.ka};W.prototype.isBuffering=W.prototype.Yc;
W.prototype.hb=function(){if(this.J)return Promise.resolve();this.dispatchEvent(new I("unloading"));var a=Promise.resolve();this.G&&(a=this.G.cancel(new t(2,7,7E3)));return a.then(function(){this.la||(this.la=Ag(this).then(function(){this.la=null}.bind(this)));return this.la}.bind(this))};W.prototype.unload=W.prototype.hb;W.prototype.pb=function(){return this.g?this.g.pb():0};W.prototype.getPlaybackRate=W.prototype.pb;W.prototype.le=function(a){this.g&&lf(this.g,a);this.a&&xf(this.a,1!=a)};
W.prototype.trickPlay=W.prototype.le;W.prototype.Fc=function(){this.g&&lf(this.g,1);this.a&&xf(this.a,!1)};W.prototype.cancelTrickPlay=W.prototype.Fc;W.prototype.getTracks=function(){return this.Wb().concat(this.Vb())};W.prototype.getTracks=W.prototype.getTracks;W.prototype.Ud=function(a,b){"text"==a.type?this.rc(a):(this.configure({abr:{enabled:!1}}),this.sc(a,b))};W.prototype.selectTrack=W.prototype.Ud;
W.prototype.Wb=function(){if(!this.c)return[];var a=hc(this.c,jf(this.g)),b=this.P[a]||{};return Zb(this.c.periods[a],b.audio,b.video)};W.prototype.getVariantTracks=W.prototype.Wb;W.prototype.Vb=function(){if(!this.c)return[];var a=hc(this.c,jf(this.g));return ac(this.c.periods[a],(this.P[a]||{}).text).filter(function(a){return 0>this.Va.indexOf(a.id)}.bind(this))};W.prototype.getTextTracks=W.prototype.Vb;
W.prototype.rc=function(a){if(this.a&&(a=cc(V(this.a),a))){Bg(this,a,!1);var b={};b.text=a;Cg(this,b,!0)}};W.prototype.selectTextTrack=W.prototype.rc;
W.prototype.sc=function(a,b){if(this.a){var c={},d=bc(V(this.a),a),e=vf(this.a);if(d){if(!d.allowedByApplication||!d.allowedByKeySystem)return;d.audio&&(Dg(this,d.audio),d.audio!=e.audio&&(c.audio=d.audio));d.video&&(Dg(this,d.video),d.video!=e.video&&(c.video=d.video))}Na(c).forEach(function(a){Bg(this,a,!1)}.bind(this));(d=e.text)&&(c.text=d);Cg(this,c,b)}};W.prototype.selectVariantTrack=W.prototype.sc;
W.prototype.Nc=function(){return this.a?$b(V(this.a).variants).map(function(a){return a.language}).filter(Aa):[]};W.prototype.getAudioLanguages=W.prototype.Nc;W.prototype.Wc=function(){return this.a?V(this.a).textStreams.map(function(a){return a.language}).filter(Aa):[]};W.prototype.getTextLanguages=W.prototype.Wc;W.prototype.Sd=function(a){if(this.a){var b=V(this.a);this.ia=a;zg(this,b)}};W.prototype.selectAudioLanguage=W.prototype.Sd;
W.prototype.Td=function(a){if(this.a){var b=V(this.a);this.Ba=a;zg(this,b)}};W.prototype.selectTextLanguage=W.prototype.Td;W.prototype.$c=function(){return"showing"==this.A.mode};W.prototype.isTextTrackVisible=W.prototype.$c;W.prototype.Wd=function(a){this.A.mode=a?"showing":"hidden";Eg(this)};W.prototype.setTextTrackVisibility=W.prototype.Wd;W.prototype.Sc=function(){return this.c?new Date(1E3*this.c.presentationTimeline.f+1E3*this.f.currentTime):null};W.prototype.getPlayheadTimeAsDate=W.prototype.Sc;
W.prototype.getStats=function(){Fg(this);this.Sa();var a=null,b=null,c=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};this.g&&this.c&&(a=hc(this.c,jf(this.g)),b=this.P[a],b=gc(b.audio,b.video,this.c.periods[a].variants),a=b.video||{});a||(a={});b||(b={});return{width:a.width||0,height:a.height||0,streamBandwidth:b.bandwidth||0,decodedFrames:Number(c.totalVideoFrames),droppedFrames:Number(c.droppedVideoFrames),estimatedBandwidth:this.b.abr.manager.getBandwidthEstimate(),
loadLatency:this.i.loadLatency,playTime:this.i.playTime,bufferingTime:this.i.bufferingTime,switchHistory:Da(this.i.switchHistory),stateHistory:Da(this.i.stateHistory)}};W.prototype.getStats=W.prototype.getStats;
W.prototype.addTextTrack=function(a,b,c,d,e,f){if(!this.a)return Promise.reject();for(var g=V(this.a),h,l=0;l<this.c.periods.length;l++)if(this.c.periods[l]==g){if(l==this.c.periods.length-1){if(h=this.c.presentationTimeline.Y()-g.startTime,Infinity==h)return Promise.reject()}else h=this.c.periods[l+1].startTime-g.startTime;break}var n={id:this.Bc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(b){return 1!=b?null:new O(1,0,
h,function(){return[a]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:d,codecs:e||"",kind:c,encrypted:!1,keyId:null,language:b,label:f||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[]};this.Va.push(n.id);g.textStreams.push(n);return wf(this.a,n).then(function(){if(!this.J)return this.Va.splice(this.Va.indexOf(n.id),1),zg(this,g),vg(this),{id:n.id,active:!1,type:"text",bandwidth:0,language:b,label:f||null,kind:c,width:null,height:null}}.bind(this))};
W.prototype.addTextTrack=W.prototype.addTextTrack;W.prototype.Hb=function(a,b){this.mb.width=a;this.mb.height=b};W.prototype.setMaxHardwareResolution=W.prototype.Hb;function Bg(a,b,c){a.i.switchHistory.push({timestamp:Date.now()/1E3,id:b.id,type:b.type,fromAdaptation:c});Dg(a,b)}function Dg(a,b){var c=ic(a.c,b);a.P[c]||(a.P[c]={});a.P[c][b.type]=b.id}
function rg(a){a.l&&(a.l.ha(a.N,"sourceopen"),a.l.ha(a.f,"loadeddata"),a.l.ha(a.f,"playing"),a.l.ha(a.f,"pause"),a.l.ha(a.f,"ended"));a.f&&(a.f.removeAttribute("src"),a.f.load());var b=Promise.all([a.b?a.b.abr.manager.stop():null,a.j?a.j.m():null,a.ja?a.ja.m():null,a.g?a.g.m():null,a.v?a.v.m():null,a.a?a.a.m():null,a.h?a.h.stop():null]);a.j=null;a.ja=null;a.g=null;a.v=null;a.a=null;a.h=null;a.c=null;a.Ya=null;a.Wa=null;a.N=null;a.Xa=[];a.P={};a.B={};a.i=pg();return b}
function Ag(a){return a.h?rg(a).then(function(){this.J||(this.xc(!1),this.Wa=qg(this))}.bind(a)):Promise.resolve()}function xg(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}
function og(a){return{drm:{retryParameters:Fa(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:Fa(),dash:{customScheme:function(a){if(a)return null},clockSyncUri:"",ignoreDrmInfo:!1},hls:{defaultTimeOffset:0}},streaming:{retryParameters:Fa(),infiniteRetriesForLiveStreams:!0,rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1},abr:{manager:a.Ob,enabled:!0,defaultBandwidthEstimate:5E5,
restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minBandwidth:0,maxBandwidth:Infinity}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minBandwidth:0,maxBandwidth:Infinity}}}
function pg(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}k=W.prototype;k.fb=function(a){var b=this.a?vf(this.a):{};Wb(this.j,b,a);b=0<$b(a.variants).length;Vb(a,this.b.restrictions,this.mb)&&this.a&&V(this.a)==a&&vg(this);a=1>$b(a.variants).length;if(!b)throw new t(2,4,4011);if(a)throw new t(2,4,4012);};
function Cg(a,b,c){for(var d in b){var e=b[d],f=c||!1;"text"==d&&(f=!0);a.Za?a.B[d]={stream:e,Ic:f}:yf(a.a,d,e,f)}}function Fg(a){if(a.c){var b=Date.now()/1E3;a.ka?a.i.bufferingTime+=b-a.Ua:a.i.playTime+=b-a.Ua;a.Ua=b}}
function ug(a,b){function c(a,b){if(!a)return null;var c=a.findSegmentPosition(b-e.startTime);return null==c?null:(c=a.getSegmentReference(c))?c.startTime+e.startTime:null}var d=vf(a.a),e=V(a.a),f=c(d.video,b),d=c(d.audio,b);return null!=f&&null!=d?Math.max(f,d):null!=f?f:null!=d?d:b}k.be=function(a,b){this.b.abr.manager.segmentDownloaded(a,b)};k.xc=function(a){Fg(this);this.ka=a;this.Sa();if(this.g){var b=this.g;a!=b.h&&(b.h=a,lf(b,b.g))}this.dispatchEvent(new I("buffering",{buffering:a}))};
k.Yd=function(){vg(this)};k.Sa=function(){if(!this.J){var a=this.ka?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing";var b=Date.now()/1E3;if(this.i.stateHistory.length){var c=this.i.stateHistory[this.i.stateHistory.length-1];c.duration=b-c.timestamp;if(a==c.state)return}this.i.stateHistory.push({timestamp:b,state:a,duration:0})}};k.ae=function(){if(this.v){var a=this.v;a.c.forEach(a.o.bind(a,!0))}this.a&&Af(this.a)};
function Gg(a,b,c,d,e){if(!c||1>c.length)return a.xa(new t(2,4,4012)),{};a.b.abr.manager.setVariants(c);a.b.abr.manager.setTextStreams(d);var f=[];e&&(f=["video","audio"],b.textStreams.length&&f.push("text"));e=vf(a.a);if(b=fc(e.audio,e.video,b.variants)){b.allowedByApplication&&b.allowedByKeySystem||(f.push("audio"),f.push("video"));for(var g in e)b=e[g],"audio"==b.type&&b.language!=c[0].language?f.push(g):"text"==b.type&&0<d.length&&b.language!=d[0].language&&f.push(g)}f=f.filter(Aa);if(0<f.length){c=
{};try{c=a.b.abr.manager.chooseStreams(f)}catch(h){a.xa(h)}return c}return{}}function zg(a,b){var c={audio:!1,text:!1},d=dc(b,a.ia,c),e=ec(b,a.Ba,c),d=Gg(a,b,d,e),f;for(f in d)Bg(a,d[f],!0);Cg(a,d,!0);wg(a);d.text&&d.audio&&c.text&&d.text.language!=d.audio.language&&(a.A.mode="showing",Eg(a))}k.cd=function(a){this.Za=!0;this.b.abr.manager.disable();var b=dc(a,this.ia),c=ec(a,this.Ba);a=Gg(this,a,b,c,!0);for(var d in this.B)a[d]=this.B[d].stream;this.B={};for(d in a)Bg(this,a[d],!0);return a};
k.Ec=function(){this.Za=!1;this.b.abr.enabled&&this.b.abr.manager.enable();for(var a in this.B){var b=this.B[a];yf(this.a,a,b.stream,b.Ic)}this.B={}};k.jd=function(){this.h&&this.h.update&&this.h.update()};k.sd=function(){this.g&&this.g.yb()};k.Jb=function(a,b){var c=vf(this.a),d;for(d in a){var e=a[d];c[d]!=e?Bg(this,e,!0):delete a[d]}if(!Ma(a)&&this.a){for(d in a)yf(this.a,d,a[d],b||!1);wg(this)}};
function wg(a){Promise.resolve().then(function(){this.J||this.dispatchEvent(new I("adaptation"))}.bind(a))}function vg(a){Promise.resolve().then(function(){this.J||this.dispatchEvent(new I("trackschanged"))}.bind(a))}function Eg(a){a.dispatchEvent(new I("texttrackvisibility"))}k.xa=function(a){this.J||this.dispatchEvent(new I("error",{detail:a}))};k.vd=function(a){this.v?this.v.v(a):this.Xa.push(a)};k.gb=function(a){this.dispatchEvent(a)};
k.wd=function(){if(this.f.error){var a=this.f.error.code;if(1!=a){var b=this.f.error.msExtendedCode;b&&(0>b&&(b+=Math.pow(2,32)),b=b.toString(16));this.xa(new t(2,3,3016,a,b))}}};
k.$d=function(a){var b=["output-restricted","internal-error"],c=V(this.a),d=!1;c.variants.forEach(function(c){var e=[];c.audio&&e.push(c.audio);c.video&&e.push(c.video);e.forEach(function(e){var f=c.allowedByKeySystem;e.keyId&&(e=a[e.keyId],c.allowedByKeySystem=!!e&&0>b.indexOf(e));f!=c.allowedByKeySystem&&(d=!0)})});var e=vf(this.a);(e=fc(e.audio,e.video,c.variants))&&!e.allowedByKeySystem&&zg(this,c);d&&vg(this)};
k.Zd=function(a,b){if(this.h&&this.h.onExpirationUpdated)this.h.onExpirationUpdated(a,b);this.dispatchEvent(new I("expirationupdated"))};function X(a){if(!a||a.constructor!=W)throw new t(2,9,9008);this.a=eg();this.f=a;this.i=Hg(this);this.b=null;this.v=!1;this.j=null;this.g=-1;this.l=0;this.c=null;this.h=new fg(this.a,a.o,a.getConfiguration().streaming.retryParameters,this.i)}m("shaka.offline.Storage",X);function Ig(){return!!window.indexedDB}X.support=Ig;X.prototype.m=function(){var a=this.a,b=this.h?this.h.m()["catch"](function(){}).then(function(){if(a)return a.m()}):Promise.resolve();this.i=this.f=this.h=this.a=null;return b};
X.prototype.destroy=X.prototype.m;X.prototype.configure=function(a){Ca(this.i,a,Hg(this),{},"")};X.prototype.configure=X.prototype.configure;
X.prototype.je=function(a,b,c){function d(a){f=a}if(this.v)return Promise.reject(new t(2,9,9006));this.v=!0;var e,f=null;return Jg(this).then(function(){Y(this);return Kg(this,a,d,c)}.bind(this)).then(function(c){Y(this);this.c=c.manifest;this.b=c.Jc;if(this.c.presentationTimeline.$()||this.c.presentationTimeline.va())throw new t(2,9,9005,a);this.c.periods.forEach(this.o.bind(this));this.g=this.a.c.manifest++;this.l=0;c=this.c.periods.map(this.B.bind(this));var d=this.b.b,f=jb(this.b);if(d){if(!f.length)throw new t(2,
9,9007,a);d.initData=[]}e={key:this.g,originalManifestUri:a,duration:this.l,size:0,expiration:this.b.ab(),periods:c,sessionIds:f,drmInfo:d,appMetadata:b};return hg(this.h,e)}.bind(this)).then(function(){Y(this);if(f)throw f;return Lg(this)}.bind(this)).then(function(){return Zf(e)}.bind(this))["catch"](function(a){return Lg(this)["catch"](y).then(function(){throw a;})}.bind(this))};X.prototype.store=X.prototype.je;
X.prototype.remove=function(a){function b(a){6013!=a.code&&(e=a)}var c=a.offlineUri,d=/^offline:([0-9]+)$/.exec(c);if(!d)return Promise.reject(new t(2,9,9004,c));var e=null,f,g,h=Number(d[1]);return Jg(this).then(function(){Y(this);return this.a.get("manifest",h)}.bind(this)).then(function(a){Y(this);if(!a)throw new t(2,9,9003,c);f=a;a=kg(f);g=new bb(this.f.o,b,function(){},function(){});g.configure(this.f.getConfiguration().drm);return g.init(a,!0)}.bind(this)).then(function(){return gb(g,f.sessionIds)}.bind(this)).then(function(){return g.m()}.bind(this)).then(function(){Y(this);
if(e)throw e;var b=f.periods.map(function(a){return a.streams.map(function(a){var b=a.segments.map(function(a){a=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.uri);return Number(a[1])});a.initSegmentUri&&(a=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a.initSegmentUri),b.push(Number(a[1])));return b}).reduce(x,[])}).reduce(x,[]),c=0,d=b.length,g=this.i.progressCallback;return Wf(this.a,b,function(){c++;g(a,c/d)})}.bind(this)).then(function(){Y(this);this.i.progressCallback(a,1);return this.a.remove("manifest",
h)}.bind(this))};X.prototype.remove=X.prototype.remove;X.prototype.list=function(){var a=[];return Jg(this).then(function(){Y(this);return this.a.forEach("manifest",function(b){a.push(Zf(b))})}.bind(this)).then(function(){return a})};X.prototype.list=X.prototype.list;
function Kg(a,b,c,d){function e(){}var f=a.f.o,g=a.f.getConfiguration(),h,l,n;return Gd(b,f,g.manifest.retryParameters,d).then(function(a){Y(this);n=new a;n.configure(g.manifest);return n.start(b,{networkingEngine:f,filterPeriod:this.o.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:c})}.bind(a)).then(function(a){Y(this);h=a;l=new bb(f,c,e,function(){});l.configure(g.drm);return l.init(h,!0)}.bind(a)).then(function(){Y(this);return Mg(h)}.bind(a)).then(function(){Y(this);
return fb(l)}.bind(a)).then(function(){Y(this);return n.stop()}.bind(a)).then(function(){Y(this);return{manifest:h,Jc:l}}.bind(a))["catch"](function(a){if(n)return n.stop().then(function(){throw a;});throw a;})}
X.prototype.A=function(a){for(var b=[],c=Sb(this.f.getConfiguration().preferredAudioLanguage),d=[0,Qb,Rb],e=a.filter(function(a){return"variant"==a.type}),d=d.map(function(a){return e.filter(function(b){b=Sb(b.language);return Pb(a,c,b)})}),f,g=0;g<d.length;g++)if(d[g].length){f=d[g];break}f||(d=e.filter(function(a){return a.primary}),d.length&&(f=d));f||(f=e,e.map(function(a){return a.language}).filter(Aa));var h=f.filter(function(a){return a.height&&480>=a.height});h.length&&(h.sort(function(a,
b){return b.height-a.height}),f=h.filter(function(a){return a.height==h[0].height}));f.sort(function(a,b){return a.bandwidth-b.bandwidth});f.length&&b.push(f[Math.floor(f.length/2)]);b.push.apply(b,a.filter(function(a){return"text"==a.type}));return b};function Hg(a){return{trackSelectionCallback:a.A.bind(a),progressCallback:function(a,c){if(a||c)return null}}}function Jg(a){return a.a?a.a.a?Promise.resolve():a.a.init(Yf):Promise.reject(new t(2,9,9E3))}
X.prototype.o=function(a){var b={};if(this.j){var c=this.j.filter(function(a){return"variant"==a.type}),d=null;c.length&&(d=bc(a,c[0]));d&&(d.video&&(b.video=d.video),d.audio&&(b.audio=d.audio))}Wb(this.b,b,a);Vb(a,this.f.getConfiguration().restrictions,{width:Infinity,height:Infinity})};function Lg(a){var b=a.b?a.b.m():Promise.resolve();a.b=null;a.c=null;a.v=!1;a.j=null;a.g=-1;return b}
function Mg(a){var b=a.periods.map(function(a){return a.variants}).reduce(x,[]).map(function(a){var b=[];a.audio&&b.push(a.audio);a.video&&b.push(a.video);return b}).reduce(x,[]).filter(Aa);a=a.periods.map(function(a){return a.textStreams}).reduce(x,[]);b.push.apply(b,a);return Promise.all(b.map(function(a){return a.createSegmentIndex()}))}
X.prototype.B=function(a){var b,c,d=Zb(a,null,null),e=ac(a,null),d=this.i.trackSelectionCallback(d.concat(e));this.j||(this.j=d,this.c.periods.forEach(this.o.bind(this)));for(e=d.length-1;0<e;--e){var f=!1;for(c=e-1;0<=c;--c)if(d[e].type==d[c].type&&d[e].kind==d[c].kind&&d[e].language==d[c].language){f=!0;break}if(f)break}f=[];for(e=0;e<d.length;e++)(b=bc(a,d[e]))?(b.audio&&((c=f.filter(function(a){return a.id==b.audio.id})[0])?c.variantIds.push(b.id):(c=b.video?b.bandwidth/2:b.bandwidth,f.push(Ng(this,
a,b.audio,c,b.id)))),b.video&&((c=f.filter(function(a){return a.id==b.video.id})[0])?c.variantIds.push(b.id):(c=b.audio?b.bandwidth/2:b.bandwidth,f.push(Ng(this,a,b.video,c,b.id))))):f.push(Ng(this,a,cc(a,d[e]),0));return{startTime:a.startTime,streams:f}};
function Ng(a,b,c,d,e){var f=[],g=a.c.presentationTimeline.ma();var h=g;for(var l=c.findSegmentPosition(g),n=null!=l?c.getSegmentReference(l):null;n;)h=a.a.c.segment++,gg(a.h,c.type,n,(n.endTime-n.startTime)*d/8,{key:h,data:null,manifestKey:a.g,streamNumber:c.id,segmentNumber:h}),f.push({startTime:n.startTime,endTime:n.endTime,uri:"offline:"+a.g+"/"+c.id+"/"+h}),h=n.endTime+b.startTime,n=c.getSegmentReference(++l);a.l=Math.max(a.l,h-g);b=null;c.initSegmentReference&&(h=a.a.c.segment++,b="offline:"+
a.g+"/"+c.id+"/"+h,gg(a.h,c.contentType,c.initSegmentReference,0,{key:h,data:null,manifestKey:a.g,streamNumber:c.id,segmentNumber:-1}));a=[];null!=e&&a.push(e);return{id:c.id,primary:c.primary,presentationTimeOffset:c.presentationTimeOffset||0,contentType:c.type,mimeType:c.mimeType,codecs:c.codecs,frameRate:c.frameRate,kind:c.kind,language:c.language,label:c.label,width:c.width||null,height:c.height||null,initSegmentUri:b,encrypted:c.encrypted,keyId:c.keyId,segments:f,variantIds:a}}
function Y(a){if(!a.f)throw new t(2,9,9002);}sg.offline=Ig;m("shaka.polyfill.installAll",function(){for(var a=0;a<Og.length;++a)Og[a]()});var Og=[];function Pg(a){Og.push(a)}m("shaka.polyfill.register",Pg);function Qg(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var c=new Event(b,a);else c=document.createEvent("Event"),c.initEvent(b,a.bubbles,a.cancelable);a.target.dispatchEvent(c)}
Pg(function(){if(window.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,
"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Qg);document.addEventListener("webkitfullscreenerror",Qg);document.addEventListener("mozfullscreenchange",Qg);document.addEventListener("mozfullscreenerror",Qg);document.addEventListener("MSFullscreenChange",Qg);document.addEventListener("MSFullscreenError",Qg)}});Pg(function(){var a=navigator.userAgent;a&&0<=a.indexOf("CrKey")&&delete window.indexedDB});Pg(function(){if(4503599627370497!=Math.round(4503599627370497)){var a=Math.round;Math.round=function(b){var c=b;4503599627370496>=b&&(c=a(b));return c}}});function Rg(a){this.f=[];this.b=[];this.a=[];(new Q).da("pssh",this.c.bind(this)).parse(a.buffer)}Rg.prototype.c=function(a){if(!(1<a.version)){var b=$a(a.s.Ja(16)),c=[];if(0<a.version)for(var d=a.s.D(),e=0;e<d;++e){var f=$a(a.s.Ja(16));c.push(f)}d=a.s.D();a.s.I(d);this.b.push.apply(this.b,c);this.f.push(b);this.a.push({start:a.start,end:a.start+a.size-1})}};function Sg(a,b){try{var c=new Tg(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function Tg(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d];var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var l=e.audioCapabilities[h];if(l.contentType){g=!0;var n=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.audioCapabilities.push(l),c=!0)}}if(e.videoCapabilities)for(h=
0;h<e.videoCapabilities.length;++h)l=e.videoCapabilities[h],l.contentType&&(g=!0,n=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.videoCapabilities.push(l),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(f.persistentState="required",f.sessionTypes=["persistent-license"]);if(c){this.a=f;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e;}
Tg.prototype.createMediaKeys=function(){var a=new Ug(this.keySystem);return Promise.resolve(a)};Tg.prototype.getConfiguration=function(){return this.a};function Vg(a){var b=this.mediaKeys;b&&b!=a&&Wg(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?Wg(a,this):Promise.resolve()}function Ug(a){this.a=new MSMediaKeys(a);this.b=new D}Ug.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new Xg(this.a)};
Ug.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Wg(a,b){function c(){b.msSetMediaKeys(d.a);b.removeEventListener("loadedmetadata",c)}Ja(a.b);if(!b)return Promise.resolve();E(a.b,b,"msneedkey",Yg);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}
function Xg(a){p.call(this);this.c=null;this.g=a;this.b=this.a=null;this.f=new D;this.sessionId="";this.expiration=NaN;this.closed=new A;this.keyStatuses=new Zg}ba(Xg);k=Xg.prototype;k.generateRequest=function(a,b){this.a=new A;try{this.c=this.g.createSession("video/mp4",new Uint8Array(b),null),E(this.f,this.c,"mskeymessage",this.nd.bind(this)),E(this.f,this.c,"mskeyadded",this.ld.bind(this)),E(this.f,this.c,"mskeyerror",this.md.bind(this)),$g(this,"status-pending")}catch(c){this.a.reject(c)}return this.a};
k.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};k.update=function(a){this.b=new A;try{this.c.update(new Uint8Array(a))}catch(b){this.b.reject(b)}return this.b};k.close=function(){try{this.c.close(),this.closed.resolve(),Ja(this.f)}catch(a){this.closed.reject(a)}return this.closed};k.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Yg(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";var c=a.initData;if(c){var d=new Rg(c);if(1>=d.a.length)a=c;else{var e=[];for(a=0;a<d.a.length;a++)e.push(c.subarray(d.a[a].start,d.a[a].end+1));c=Ga(e,ah);for(a=d=0;a<c.length;a++)d+=c[a].length;d=new Uint8Array(d);for(a=e=0;a<c.length;a++)d.set(c[a],e),e+=c[a].length;a=d}}else a=c;b.initData=a;this.dispatchEvent(b)}function ah(a,b){return ab(a,b)}
k.nd=function(a){this.a&&(this.a.resolve(),this.a=null);this.dispatchEvent(new I("message",{messageType:void 0==this.keyStatuses.qb()?"licenserequest":"licenserenewal",message:a.message.buffer}))};k.ld=function(){this.a?($g(this,"usable"),this.a.resolve(),this.a=null):this.b&&($g(this,"usable"),this.b.resolve(),this.b=null)};
k.md=function(){var a=Error("EME PatchedMediaKeysMs key error");a.errorCode=this.c.error;if(this.a)this.a.reject(a),this.a=null;else if(this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:$g(this,"output-not-allowed");default:$g(this,"internal-error")}};function $g(a,b){a.keyStatuses.Ib(b);a.dispatchEvent(new I("keystatuseschange"))}function Zg(){this.size=0;this.a=void 0}var bh;k=Zg.prototype;
k.Ib=function(a){this.size=void 0==a?0:1;this.a=a};k.qb=function(){return this.a};k.forEach=function(a){this.a&&a(this.a,bh)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=bh;return this.a&&ab(new Uint8Array(a),new Uint8Array(b))?!0:!1};k.entries=function(){};k.keys=function(){};k.values=function(){};function ch(){return Promise.reject(Error("The key system specified is not supported."))}function dh(a){return a?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function eh(){throw new TypeError("Illegal constructor.");}eh.prototype.createSession=function(){};eh.prototype.setServerCertificate=function(){};function fh(){throw new TypeError("Illegal constructor.");}fh.prototype.getConfiguration=function(){};fh.prototype.createMediaKeys=function(){};var gh="";function hh(a){gh=a;ih=(new Uint8Array([0])).buffer;navigator.requestMediaKeySystemAccess=jh;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=kh;window.MediaKeys=lh;window.MediaKeySystemAccess=mh}function nh(a){var b=gh;return b?b+a.charAt(0).toUpperCase()+a.slice(1):a}function jh(a,b){try{var c=new mh(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function kh(a){var b=this.mediaKeys;b&&b!=a&&oh(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&oh(a,this);return Promise.resolve()}
function mh(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1;var e=document.getElementsByTagName("video");var f=e.length?e[0]:document.createElement("video");for(var g=0;g<b.length;++g){e=b[g];var h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},l=!1;if(e.audioCapabilities)for(var n=0;n<e.audioCapabilities.length;++n){var q=
e.audioCapabilities[n];if(q.contentType){var l=!0,r=q.contentType.split(";")[0];f.canPlayType(r,this.a)&&(h.audioCapabilities.push(q),d=!0)}}if(e.videoCapabilities)for(n=0;n<e.videoCapabilities.length;++n)q=e.videoCapabilities[n],q.contentType&&(l=!0,f.canPlayType(q.contentType,this.a)&&(h.videoCapabilities.push(q),d=!0));l||(d=f.canPlayType("video/mp4",this.a)||f.canPlayType("video/webm",this.a));"required"==e.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):
d=!1);if(d){this.b=h;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}mh.prototype.createMediaKeys=function(){var a=new lh(this.a);return Promise.resolve(a)};mh.prototype.getConfiguration=function(){return this.b};function lh(a){this.g=a;this.b=null;this.a=new D;this.c=[];this.f={}}
function oh(a,b){a.b=b;Ja(a.a);var c=gh;b&&(E(a.a,b,c+"needkey",a.Ad.bind(a)),E(a.a,b,c+"keymessage",a.zd.bind(a)),E(a.a,b,c+"keyadded",a.xd.bind(a)),E(a.a,b,c+"keyerror",a.yd.bind(a)))}k=lh.prototype;k.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.b||document.createElement("video");a.src||(a.src="about:blank");b=new ph(a,this.g,b);this.c.push(b);return b};
k.setServerCertificate=function(){return Promise.resolve(!1)};k.Ad=function(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="webm";b.initData=a.initData;this.b.dispatchEvent(b)};k.zd=function(a){var b=qh(this,a.sessionId);b&&(a=new I("message",{messageType:void 0==b.keyStatuses.qb()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))};
k.xd=function(a){if(a=qh(this,a.sessionId))rh(a,"usable"),a.a&&a.a.resolve(),a.a=null};
k.yd=function(a){var b=qh(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode;c.errorCode.systemCode=a.systemCode;!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?rh(b,"output-restricted"):1==c?rh(b,"expired"):rh(b,"internal-error"))}};
function qh(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function ph(a,b,c){p.call(this);this.f=a;this.h=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new A;this.keyStatuses=new sh}ba(ph);
function th(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;try{if("persistent-license"==a.g)if(c)var d=new Uint8Array(Ua("LOAD_SESSION|"+c));else{var e=Ua("PERSISTENT|"),f=new Uint8Array(e.byteLength+b.byteLength);f.set(new Uint8Array(e),0);f.set(new Uint8Array(b),e.byteLength);d=f}else d=new Uint8Array(b)}catch(h){return Promise.reject(h)}a.b=new A;var g=nh("generateKeyRequest");try{a.f[g](a.c,d)}catch(h){if("InvalidStateError"!=h.name)return a.b=null,Promise.reject(h);
setTimeout(function(){try{this.f[g](this.c,d)}catch(l){this.b.reject(l),this.b=null}}.bind(a),10)}return a.b}k=ph.prototype;
k.Kb=function(a,b){if(this.a)this.a.then(this.Kb.bind(this,a,b))["catch"](this.Kb.bind(this,a,b));else{this.a=a;if("webkit-org.w3.clearkey"==this.c){var c=F(b);var d=JSON.parse(c);"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null);c=Ya(d.keys[0].k);d=Ya(d.keys[0].kid)}else c=new Uint8Array(b),d=null;var e=nh("addKey");try{this.f[e](this.c,c,d,this.sessionId)}catch(f){this.a.reject(f),this.a=null}}};
function rh(a,b){a.keyStatuses.Ib(b);a.dispatchEvent(new I("keystatuseschange"))}k.generateRequest=function(a,b){return th(this,b,null)};k.load=function(a){return"persistent-license"==this.g?th(this,null,a):Promise.reject(Error("Not a persistent session."))};k.update=function(a){var b=new A;this.Kb(b,a);return b};
k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var a=nh("cancelKeyRequest");try{this.f[a](this.c,this.sessionId)}catch(b){}}this.closed.resolve();return this.closed};k.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function sh(){this.size=0;this.a=void 0}var ih;k=sh.prototype;k.Ib=function(a){this.size=void 0==a?0:1;this.a=a};
k.qb=function(){return this.a};k.forEach=function(a){this.a&&a(this.a,ih)};k.get=function(a){if(this.has(a))return this.a};k.has=function(a){var b=ih;return this.a&&ab(new Uint8Array(a),new Uint8Array(b))?!0:!1};k.entries=function(){};k.keys=function(){};k.values=function(){};Pg(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?hh("webkit"):HTMLMediaElement.prototype.generateKeyRequest?hh(""):window.MSMediaKeys?(bh=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vg,window.MediaKeys=Ug,window.MediaKeySystemAccess=Tg,navigator.requestMediaKeySystemAccess=
Sg):(navigator.requestMediaKeySystemAccess=ch,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=dh,window.MediaKeys=eh,window.MediaKeySystemAccess=fh))});function uh(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var b=a.apply(this,arguments);b.abort=function(){};return b}}
function vh(){var a=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var b,d=0,e=0;e<this.sourceBuffers.length;++e)b=this.sourceBuffers[e],b=b.buffered.end(b.buffered.length-1),d=Math.max(d,b);if(!isNaN(this.duration)&&d<this.duration)for(this.Xb=!0,e=0;e<this.sourceBuffers.length;++e)b=this.sourceBuffers[e],b.Rb=!1;return a.apply(this,arguments)};var b=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var a=b.apply(this,arguments);
a.N=this;a.addEventListener("updateend",wh,!1);this.a||(this.addEventListener("sourceclose",xh,!1),this.a=!0);return a}}function wh(a){var b=a.target,c=b.N;if(c.Xb){a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();b.Rb=!0;for(a=0;a<c.sourceBuffers.length;++a)if(0==c.sourceBuffers[a].Rb)return;c.Xb=!1}}function xh(a){a=a.target;for(var b=0;b<a.sourceBuffers.length;++b)a.sourceBuffers[b].removeEventListener("updateend",wh,!1);a.removeEventListener("sourceclose",xh,!1)}
Pg(function(){if(window.MediaSource){var a=navigator.vendor,b=navigator.appVersion;!a||!b||0>a.indexOf("Apple")||(0<=b.indexOf("Version/8")?window.MediaSource=null:0<=b.indexOf("Version/9")?uh():0<=b.indexOf("Version/10")&&(uh(),vh()))}});function Z(a){this.c=[];this.b=[];this.za=yh;if(a)try{a(this.fa.bind(this),this.a.bind(this))}catch(b){this.a(b)}}var yh=0;function zh(a){var b=new Z;b.fa(void 0);return b.then(function(){return a})}function Ah(a){var b=new Z;b.a(a);return b}function Bh(a){function b(a,b,c){a.za==yh&&(e[b]=c,d++,d==e.length&&a.fa(e))}var c=new Z;if(!a.length)return c.fa([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g]&&a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}
function Ch(a){for(var b=new Z,c=b.fa.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e]&&a[e].then?a[e].then(c,d):c(a[e]);return b}Z.prototype.then=function(a,b){var c=new Z;switch(this.za){case 1:Dh(this,c,a);break;case 2:Dh(this,c,b);break;case yh:this.c.push({L:c,nb:a}),this.b.push({L:c,nb:b})}return c};Z.prototype["catch"]=function(a){return this.then(void 0,a)};
Z.prototype.fa=function(a){if(this.za==yh){this.jb=a;this.za=1;for(a=0;a<this.c.length;++a)Dh(this,this.c[a].L,this.c[a].nb);this.c=[];this.b=[]}};Z.prototype.a=function(a){if(this.za==yh){this.jb=a;this.za=2;for(a=0;a<this.b.length;++a)Dh(this,this.b[a].L,this.b[a].nb);this.c=[];this.b=[]}};
function Dh(a,b,c){Eh.push(function(){if(c&&"function"==typeof c){try{var a=c(this.jb)}catch(f){b.a(f);return}try{var e=a&&a.then}catch(f){b.a(f);return}a instanceof Z?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.fa.bind(b),b.a.bind(b)):e?Fh(a,e,b):b.fa(a)}else 1==this.za?b.fa(this.jb):b.a(this.jb)}.bind(a));null==Gh&&(Gh=Hh(Ih))}
function Fh(a,b,c){try{var d=!1;b.call(a,function(a){if(!d){d=!0;try{var b=a&&a.then}catch(g){c.a(g);return}b?Fh(a,b,c):c.fa(a)}},c.a.bind(c))}catch(e){c.a(e)}}function Ih(){for(;Eh.length;){null!=Gh&&(Jh(Gh),Gh=null);var a=Eh;Eh=[];for(var b=0;b<a.length;++b)a[b]()}}function Hh(){return 0}function Jh(){}var Gh=null,Eh=[];
Pg(function(a){window.setImmediate?(Hh=function(a){return window.setImmediate(a)},Jh=function(a){return window.clearImmediate(a)}):(Hh=function(a){return window.setTimeout(a,0)},Jh=function(a){return window.clearTimeout(a)});if(!window.Promise||a)window.Promise=Z,window.Promise.resolve=zh,window.Promise.reject=Ah,window.Promise.all=Bh,window.Promise.race=Ch,window.Promise.prototype.then=Z.prototype.then,window.Promise.prototype["catch"]=Z.prototype["catch"]});Pg(function(){if(window.HTMLMediaElement){var a=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var b=a.apply(this,arguments);b&&b["catch"](function(){});return b}}});function Kh(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Pg(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=Kh)}});function Lh(a,b,c){return new window.TextTrackCue(a,b,c)}function Mh(a,b,c){return new window.TextTrackCue(a+"-"+b+"-"+c,a,b,c)}Pg(function(){if(!window.VTTCue&&window.TextTrackCue){var a=TextTrackCue.length;if(3==a)window.VTTCue=Lh;else if(6==a)window.VTTCue=Mh;else{try{var b=!!Lh(1,2,"")}catch(c){b=!1}b&&(window.VTTCue=Lh)}}});}.call(g,this));
if (typeof(module)!="undefined"&&module.exports)module.exports=g.shaka;
else if (typeof(define)!="undefined" && define.amd)define(function(){return g.shaka});
else this.shaka=g.shaka;
})();


},{}],5:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PresentationTime = function () {
  function PresentationTime(sec) {
    _classCallCheck(this, PresentationTime);

    this.seconds = sec;
  }

  _createClass(PresentationTime, [{
    key: "toHHMMSS",
    value: function toHHMMSS() {
      var pad = function pad(input) {
        return input < 10 ? "0" + input : input;
      };
      return [pad(Math.floor(this.seconds / 3600)), pad(Math.floor(this.seconds % 3600 / 60)), pad(Math.floor(this.seconds % 60))].join(':');
    }
  }]);

  return PresentationTime;
}();

;

module.exports = PresentationTime;

},{}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9jb250cm9sbGVycy5qcyIsImpzL2V5ZXZpbm5fcGxheWVyLmpzIiwianMvaW5kZXguanMiLCJqcy9saWIvc2hha2EtcGxheWVyLmNvbXBpbGVkLmpzIiwianMvcHJlc2VudGF0aW9uX3RpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFNLEtBQUssUUFBUSx3QkFBUixDQUFYOztJQUVNLFc7QUFDSix1QkFBWSxxQkFBWixFQUFtQztBQUFBOztBQUNqQyxTQUFLLHFCQUFMLEdBQTZCLHFCQUE3QjtBQUNBLFNBQUssWUFBTCxHQUFvQixLQUFwQjtBQUNEOzs7OzZCQUVRO0FBQ1AsV0FBSyxxQkFBTCxDQUEyQixTQUEzQixHQUF1QywwQkFBdkM7O0FBRUEsVUFBTSxvQkFBb0IsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQTFCO0FBQ0Esd0JBQWtCLFNBQWxCLEdBQThCLDhEQUE5QjtBQUNBLFVBQU0scUJBQXFCLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUEzQjtBQUNBLHlCQUFtQixTQUFuQixHQUErQix5QkFBL0I7QUFDQSx3QkFBa0IsV0FBbEIsQ0FBOEIsa0JBQTlCO0FBQ0EsV0FBSyxpQkFBTCxHQUF5QixpQkFBekI7O0FBRUEsVUFBTSxpQkFBaUIsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQXZCO0FBQ0EscUJBQWUsU0FBZixHQUEyQixxQkFBM0I7QUFDQSx3QkFBa0IsV0FBbEIsQ0FBOEIsY0FBOUI7O0FBRUE7QUFDQSxVQUFNLHNCQUFzQixTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBNUI7QUFDQSwwQkFBb0IsU0FBcEIsR0FBZ0Msb0RBQWhDO0FBQ0EseUJBQW1CLFdBQW5CLENBQStCLG1CQUEvQjtBQUNBLFdBQUssbUJBQUwsR0FBMkIsbUJBQTNCOztBQUVBO0FBQ0EsVUFBTSx1QkFBdUIsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQTdCO0FBQ0EsMkJBQXFCLFNBQXJCLEdBQWlDLG1EQUFqQztBQUNBLHlCQUFtQixXQUFuQixDQUErQixvQkFBL0I7QUFDQSxXQUFLLG9CQUFMLEdBQTRCLG9CQUE1Qjs7QUFFQTtBQUNBLFVBQU0sa0JBQWlCLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLHNCQUFnQixTQUFoQixHQUE0QiwrQkFBNUI7QUFDQSx5QkFBbUIsV0FBbkIsQ0FBK0IsZUFBL0I7QUFDQSxXQUFLLGVBQUwsR0FBdUIsZUFBdkI7O0FBRUEsV0FBSyxxQkFBTCxDQUEyQixXQUEzQixDQUF1QyxpQkFBdkM7O0FBRUEsVUFBTSxlQUFlLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFyQjtBQUNBLG1CQUFhLFNBQWIsR0FBeUIsd0RBQXpCO0FBQ0EsV0FBSyxZQUFMLEdBQW9CLFlBQXBCOztBQUVBLFdBQUsscUJBQUwsQ0FBMkIsV0FBM0IsQ0FBdUMsWUFBdkM7QUFDRDs7O2tDQUVhO0FBQ1osVUFBTSxhQUFhLEtBQUssV0FBTCxDQUFpQixRQUFqQixFQUFuQjs7QUFFQSxVQUFJLFlBQVksS0FBaEI7QUFDQSxtQkFBYSxJQUFJLEVBQUosQ0FBTyxLQUFLLFlBQUwsQ0FBa0IsV0FBekIsRUFBc0MsUUFBdEMsRUFBYjtBQUNBLFVBQUksQ0FBQyxNQUFNLFdBQVcsYUFBakIsQ0FBTCxFQUFzQztBQUNwQyxxQkFBYSxPQUFPLFdBQVcsYUFBbEIsR0FBa0MsYUFBbEMsR0FBa0QsV0FBVyxhQUE3RCxHQUE2RSxXQUExRjtBQUNEO0FBQ0QsbUJBQWEsTUFBYjtBQUNBLG1CQUFhLEtBQWI7QUFDQSxtQkFBYSxXQUFXLEtBQVgsR0FBbUIsR0FBbkIsR0FBeUIsV0FBVyxNQUFqRDtBQUNBLG1CQUFhLE9BQU8sS0FBSyxLQUFMLENBQVcsV0FBVyxlQUFYLEdBQTZCLElBQXhDLENBQVAsR0FBdUQsVUFBdkQsR0FBb0UsS0FBSyxLQUFMLENBQVcsV0FBVyxrQkFBWCxHQUFnQyxJQUEzQyxDQUFwRSxHQUF1SCxxQkFBcEk7QUFDQSxtQkFBYSxNQUFiOztBQUVBLFdBQUssWUFBTCxDQUFrQixTQUFsQixHQUE4QixTQUE5QjtBQUNEOzs7NENBRXVCLFksRUFBYztBQUFBOztBQUNwQyxXQUFLLFlBQUwsR0FBb0IsWUFBcEI7O0FBRUEsV0FBSyxxQkFBTCxDQUEyQixnQkFBM0IsQ0FBNEMsV0FBNUMsRUFBeUQsWUFBTTtBQUM3RCxjQUFLLGlCQUFMLENBQXVCLFNBQXZCLEdBQW1DLDhEQUFuQztBQUNELE9BRkQ7QUFHQSxXQUFLLHFCQUFMLENBQTJCLGdCQUEzQixDQUE0QyxVQUE1QyxFQUF3RCxZQUFNO0FBQzVELGNBQUssaUJBQUwsQ0FBdUIsU0FBdkIsR0FBbUMsOERBQW5DO0FBQ0QsT0FGRDs7QUFJQSxXQUFLLG1CQUFMLENBQXlCLGdCQUF6QixDQUEwQyxPQUExQyxFQUFtRCxZQUFNO0FBQ3ZELFlBQUksTUFBSyxZQUFMLENBQWtCLE1BQXRCLEVBQThCO0FBQzVCLGdCQUFLLFlBQUwsQ0FBa0IsSUFBbEI7QUFDRCxTQUZELE1BRU87QUFDTCxnQkFBSyxZQUFMLENBQWtCLEtBQWxCO0FBQ0Q7QUFDRixPQU5EOztBQVFBLFdBQUssb0JBQUwsQ0FBMEIsZ0JBQTFCLENBQTJDLE9BQTNDLEVBQW9ELFlBQU07QUFDeEQsWUFBSSxNQUFLLFlBQUwsQ0FBa0IsS0FBdEIsRUFBNkI7QUFDM0IsZ0JBQUssWUFBTCxDQUFrQixLQUFsQixHQUEwQixLQUExQjtBQUNELFNBRkQsTUFFTztBQUNMLGdCQUFLLFlBQUwsQ0FBa0IsS0FBbEIsR0FBMEIsSUFBMUI7QUFDRDtBQUNGLE9BTkQ7O0FBUUEsV0FBSyxlQUFMLENBQXFCLGdCQUFyQixDQUFzQyxPQUF0QyxFQUErQyxZQUFNO0FBQ25ELGNBQUssWUFBTCxHQUFvQixDQUFDLE1BQUssWUFBMUI7QUFDQSxZQUFJLENBQUMsTUFBSyxZQUFWLEVBQXdCO0FBQ3RCLGdCQUFLLFlBQUwsQ0FBa0IsU0FBbEIsR0FBOEIsd0RBQTlCO0FBQ0QsU0FGRCxNQUVPO0FBQ0wsZ0JBQUssWUFBTCxDQUFrQixTQUFsQixHQUE4Qix3REFBOUI7QUFDRDtBQUNGLE9BUEQ7QUFRRDs7O3FDQUVnQixZLEVBQWM7QUFBQTs7QUFDN0IsV0FBSyxZQUFMLENBQWtCLGdCQUFsQixDQUFtQyxTQUFuQyxFQUE4QyxZQUFNO0FBQ2xELGVBQUssbUJBQUwsQ0FBeUIsU0FBekIsR0FBcUMsb0RBQXJDO0FBQ0QsT0FGRDtBQUdBLFdBQUssWUFBTCxDQUFrQixnQkFBbEIsQ0FBbUMsT0FBbkMsRUFBNEMsWUFBTTtBQUNoRCxlQUFLLG1CQUFMLENBQXlCLFNBQXpCLEdBQXFDLG1EQUFyQztBQUNELE9BRkQ7QUFHQSxXQUFLLFlBQUwsQ0FBa0IsZ0JBQWxCLENBQW1DLGNBQW5DLEVBQW1ELFlBQU07QUFDdkQsWUFBSSxPQUFLLFlBQUwsQ0FBa0IsS0FBdEIsRUFBNkI7QUFDM0IsaUJBQUssb0JBQUwsQ0FBMEIsU0FBMUIsR0FBc0MsbURBQXRDO0FBQ0QsU0FGRCxNQUVPO0FBQ0wsaUJBQUssb0JBQUwsQ0FBMEIsU0FBMUIsR0FBc0MscURBQXRDO0FBQ0Q7QUFDRixPQU5EO0FBT0Q7OztvQ0FFZSxZLEVBQWMsVyxFQUFhO0FBQUE7O0FBQ3pDLFdBQUssV0FBTCxHQUFtQixXQUFuQjs7QUFFQSxXQUFLLFlBQUwsQ0FBa0IsZ0JBQWxCLENBQW1DLFlBQW5DLEVBQWlELFlBQU07QUFDckQsZUFBSyxXQUFMO0FBQ0QsT0FGRDtBQUdEOzs7Ozs7QUFDRjs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsV0FBakI7Ozs7Ozs7OztBQy9IQSxJQUFNLFFBQVEsUUFBUSxnQ0FBUixDQUFkO0FBQ0EsSUFBTSxjQUFjLFFBQVEsa0JBQVIsQ0FBcEI7O0lBRU0sYTtBQUNKLHlCQUFZLGFBQVosRUFBMkIsV0FBM0IsRUFBd0M7QUFBQTs7QUFDdEMsU0FBSyxhQUFMLEdBQXFCLGFBQXJCO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLFdBQW5CO0FBQ0Q7Ozs7MkJBRU07QUFBQTs7QUFDTCxXQUFLLFlBQUwsR0FBb0IsU0FBUyxhQUFULENBQXVCLE9BQXZCLENBQXBCO0FBQ0EsV0FBSyxZQUFMLENBQWtCLFNBQWxCLEdBQThCLGdCQUE5QjtBQUNBLFdBQUssYUFBTCxDQUFtQixXQUFuQixDQUErQixLQUFLLFlBQXBDO0FBQ0EsV0FBSyxXQUFMLEdBQW1CLElBQUksTUFBTSxNQUFWLENBQWlCLEtBQUssWUFBdEIsQ0FBbkI7O0FBRUEsV0FBSyxXQUFMLENBQWlCLFNBQWpCLENBQTJCO0FBQ3pCLG1CQUFXO0FBQ1QseUJBQWU7QUFETixTQURjO0FBSXpCLGtCQUFVO0FBQ1IsZ0JBQU0sRUFBRSxjQUFjLEtBQUssV0FBckI7QUFERTtBQUplLE9BQTNCO0FBUUEsV0FBSyxXQUFMLENBQWlCLElBQWpCLENBQXNCLEtBQUssV0FBM0IsRUFDQyxJQURELENBQ00sVUFBQyxFQUFELEVBQVE7QUFDWixjQUFLLGdCQUFMLEdBQXdCLElBQUksV0FBSixDQUFnQixNQUFLLGFBQXJCLENBQXhCO0FBQ0EsY0FBSyxnQkFBTCxDQUFzQixNQUF0QjtBQUNBLGNBQUssZ0JBQUwsQ0FBc0IsdUJBQXRCLENBQThDLE1BQUssWUFBbkQ7QUFDQSxjQUFLLGdCQUFMLENBQXNCLGdCQUF0QixDQUF1QyxNQUFLLFlBQTVDO0FBQ0EsY0FBSyxnQkFBTCxDQUFzQixlQUF0QixDQUFzQyxNQUFLLFlBQTNDLEVBQXlELE1BQUssV0FBOUQ7O0FBRUEsY0FBSyxZQUFMLENBQWtCLEtBQWxCLEdBQTBCLElBQTFCO0FBQ0EsY0FBSyxZQUFMLENBQWtCLElBQWxCO0FBQ0QsT0FWRDtBQVdEOzs7Ozs7QUFDRjs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsYUFBakI7Ozs7O0FDckNBLE9BQU8sYUFBUCxHQUF1QixRQUFRLHFCQUFSLENBQXZCOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztJQ2xYTSxnQjtBQUNKLDRCQUFZLEdBQVosRUFBaUI7QUFBQTs7QUFDZixTQUFLLE9BQUwsR0FBZSxHQUFmO0FBQ0Q7Ozs7K0JBRVU7QUFDVCxVQUFNLE1BQU0sU0FBTixHQUFNLENBQVMsS0FBVCxFQUFnQjtBQUFDLGVBQU8sUUFBUSxFQUFSLEdBQWEsTUFBTSxLQUFuQixHQUEyQixLQUFsQztBQUF5QyxPQUF0RTtBQUNBLGFBQU8sQ0FDSCxJQUFJLEtBQUssS0FBTCxDQUFXLEtBQUssT0FBTCxHQUFlLElBQTFCLENBQUosQ0FERyxFQUVILElBQUksS0FBSyxLQUFMLENBQVcsS0FBSyxPQUFMLEdBQWUsSUFBZixHQUFzQixFQUFqQyxDQUFKLENBRkcsRUFHSCxJQUFJLEtBQUssS0FBTCxDQUFXLEtBQUssT0FBTCxHQUFlLEVBQTFCLENBQUosQ0FIRyxFQUlMLElBSkssQ0FJQSxHQUpBLENBQVA7QUFLRDs7Ozs7O0FBQ0Y7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLGdCQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zdCBQVCA9IHJlcXVpcmUoJy4vcHJlc2VudGF0aW9uX3RpbWUuanMnKTtcblxuY2xhc3MgQ29udHJvbGxlcnMge1xuICBjb25zdHJ1Y3Rvcih2aWRlb0NvbnRhaW5lckVsZW1lbnQpIHtcbiAgICB0aGlzLnZpZGVvQ29udGFpbmVyRWxlbWVudCA9IHZpZGVvQ29udGFpbmVyRWxlbWVudDtcbiAgICB0aGlzLnNob3dpbmdTdGF0cyA9IGZhbHNlO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMudmlkZW9Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udGFpbmVyXCI7XG5cbiAgICBjb25zdCBjb250cm9sQmFyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRyb2xCYXJFbGVtZW50LmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udHJvbHMtd3JhcHBlciBleWV2aW5uLXBsYXllci1jb250cm9scy1oaWRlXCI7XG4gICAgY29uc3QgY29udHJvbEJhckNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udHJvbEJhckNvbnRyb2xzLmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udHJvbHNcIjtcbiAgICBjb250cm9sQmFyRWxlbWVudC5hcHBlbmRDaGlsZChjb250cm9sQmFyQ29udHJvbHMpO1xuICAgIHRoaXMuY29udHJvbEJhckVsZW1lbnQgPSBjb250cm9sQmFyRWxlbWVudDtcblxuICAgIGNvbnN0IGNvbnRyb2xCYXJMb2dvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udHJvbEJhckxvZ28uY2xhc3NOYW1lID0gXCJleWV2aW5uLXBsYXllci1sb2dvXCI7XG4gICAgY29udHJvbEJhckVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udHJvbEJhckxvZ28pO1xuXG4gICAgLy8gUGxheS9QYXVzZSBidXR0b25cbiAgICBjb25zdCBjb250cm9sQmFyUGxheVBhdXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udHJvbEJhclBsYXlQYXVzZS5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLXBsYXlwYXVzZSBjb250cm9scy1wbGF5aW5nXCI7XG4gICAgY29udHJvbEJhckNvbnRyb2xzLmFwcGVuZENoaWxkKGNvbnRyb2xCYXJQbGF5UGF1c2UpO1xuICAgIHRoaXMuY29udHJvbEJhclBsYXlQYXVzZSA9IGNvbnRyb2xCYXJQbGF5UGF1c2U7XG5cbiAgICAvLyBNdXRlL1VubXV0ZSBidXR0b25cbiAgICBjb25zdCBjb250cm9sQmFyTXV0ZVVubXV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRyb2xCYXJNdXRlVW5tdXRlLmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udHJvbHMtbXV0ZXVubXV0ZSBjb250cm9scy1tdXRlZFwiO1xuICAgIGNvbnRyb2xCYXJDb250cm9scy5hcHBlbmRDaGlsZChjb250cm9sQmFyTXV0ZVVubXV0ZSk7XG4gICAgdGhpcy5jb250cm9sQmFyTXV0ZVVubXV0ZSA9IGNvbnRyb2xCYXJNdXRlVW5tdXRlO1xuXG4gICAgLy8gU2hvdyBzdGF0cyBidXR0b25cbiAgICBjb25zdCBjb250cm9sQmFyU3RhdHM9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRyb2xCYXJTdGF0cy5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLXN0YXRzXCI7XG4gICAgY29udHJvbEJhckNvbnRyb2xzLmFwcGVuZENoaWxkKGNvbnRyb2xCYXJTdGF0cyk7XG4gICAgdGhpcy5jb250cm9sQmFyU3RhdHMgPSBjb250cm9sQmFyU3RhdHM7XG4gICAgXG4gICAgdGhpcy52aWRlb0NvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udHJvbEJhckVsZW1lbnQpO1xuXG4gICAgY29uc3Qgc3RhdHNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3RhdHNFbGVtZW50LmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItc3RhdHMtd3JhcHBlciBleWV2aW5uLXBsYXllci1zdGF0cy1oaWRlXCI7XG4gICAgdGhpcy5zdGF0c0VsZW1lbnQgPSBzdGF0c0VsZW1lbnQ7XG5cbiAgICB0aGlzLnZpZGVvQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChzdGF0c0VsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVyU3RhdHMoKSB7XG4gICAgY29uc3Qgc2hha2FTdGF0cyA9IHRoaXMuc2hha2FQbGF5ZXIuZ2V0U3RhdHMoKTtcblxuICAgIGxldCBzdGF0c0h0bWwgPSBcIjxwPlwiO1xuICAgIHN0YXRzSHRtbCArPSBuZXcgUFQodGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUpLnRvSEhNTVNTKCk7XG4gICAgaWYgKCFpc05hTihzaGFrYVN0YXRzLmRlY29kZWRGcmFtZXMpKSB7XG4gICAgICBzdGF0c0h0bWwgKz0gXCIgKFwiICsgc2hha2FTdGF0cy5kZWNvZGVkRnJhbWVzICsgXCIgZGVjb2RlZCAvIFwiICsgc2hha2FTdGF0cy5kcm9wcGVkRnJhbWVzICsgXCIgZHJvcHBlZClcIjtcbiAgICB9XG4gICAgc3RhdHNIdG1sICs9IFwiPC9wPlwiO1xuICAgIHN0YXRzSHRtbCArPSBcIjxwPlwiO1xuICAgIHN0YXRzSHRtbCArPSBzaGFrYVN0YXRzLndpZHRoICsgXCJ4XCIgKyBzaGFrYVN0YXRzLmhlaWdodDtcbiAgICBzdGF0c0h0bWwgKz0gXCIgKFwiICsgTWF0aC5mbG9vcihzaGFrYVN0YXRzLnN0cmVhbUJhbmR3aWR0aCAvIDEwMDApICsgXCIga2JwcyAvIFwiICsgTWF0aC5mbG9vcihzaGFrYVN0YXRzLmVzdGltYXRlZEJhbmR3aWR0aCAvIDEwMDApICsgXCIga2JwcyBlc3RpbWF0ZWQgYncpXCJcbiAgICBzdGF0c0h0bWwgKz0gXCI8L3A+XCI7XG5cbiAgICB0aGlzLnN0YXRzRWxlbWVudC5pbm5lckhUTUwgPSBzdGF0c0h0bWw7XG4gIH1cblxuICBpbml0SW50ZXJhY3Rpb25IYW5kbGVycyh2aWRlb0VsZW1lbnQpIHtcbiAgICB0aGlzLnZpZGVvRWxlbWVudCA9IHZpZGVvRWxlbWVudDtcblxuICAgIHRoaXMudmlkZW9Db250YWluZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jb250cm9sQmFyRWxlbWVudC5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLXdyYXBwZXIgZXlldmlubi1wbGF5ZXItY29udHJvbHMtc2hvd1wiO1xuICAgIH0pO1xuICAgIHRoaXMudmlkZW9Db250YWluZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRyb2xCYXJFbGVtZW50LmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udHJvbHMtd3JhcHBlciBleWV2aW5uLXBsYXllci1jb250cm9scy1oaWRlXCI7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRyb2xCYXJQbGF5UGF1c2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpOyAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpOyAgICAgIFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb250cm9sQmFyTXV0ZVVubXV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50Lm11dGVkKSB7XG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRyb2xCYXJTdGF0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zaG93aW5nU3RhdHMgPSAhdGhpcy5zaG93aW5nU3RhdHM7XG4gICAgICBpZiAoIXRoaXMuc2hvd2luZ1N0YXRzKSB7XG4gICAgICAgIHRoaXMuc3RhdHNFbGVtZW50LmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItc3RhdHMtd3JhcHBlciBleWV2aW5uLXBsYXllci1zdGF0cy1oaWRlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRzRWxlbWVudC5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLXN0YXRzLXdyYXBwZXIgZXlldmlubi1wbGF5ZXItc3RhdHMtc2hvd1wiOyAgICAgICAgXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbml0UmVuZGVyRXZlbnRzKHZpZGVvRWxlbWVudCkge1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5aW5nXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY29udHJvbEJhclBsYXlQYXVzZS5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLXBsYXlwYXVzZSBjb250cm9scy1wbGF5aW5nXCI7XG4gICAgfSk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY29udHJvbEJhclBsYXlQYXVzZS5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLXBsYXlwYXVzZSBjb250cm9scy1wYXVzZWRcIjtcbiAgICB9KTtcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidm9sdW1lY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xCYXJNdXRlVW5tdXRlLmNsYXNzTmFtZSA9IFwiZXlldmlubi1wbGF5ZXItY29udHJvbHMtbXV0ZXVubXV0ZSBjb250cm9scy1tdXRlZFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb250cm9sQmFyTXV0ZVVubXV0ZS5jbGFzc05hbWUgPSBcImV5ZXZpbm4tcGxheWVyLWNvbnRyb2xzLW11dGV1bm11dGUgY29udHJvbHMtdW5tdXRlZFwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaW5pdFJlbmRlclN0YXRzKHZpZGVvRWxlbWVudCwgc2hha2FQbGF5ZXIpIHtcbiAgICB0aGlzLnNoYWthUGxheWVyID0gc2hha2FQbGF5ZXI7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlclN0YXRzKCk7ICBcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb250cm9sbGVyczsiLCJjb25zdCBzaGFrYSA9IHJlcXVpcmUoJy4vbGliL3NoYWthLXBsYXllci5jb21waWxlZC5qcycpO1xuY29uc3QgQ29udHJvbGxlcnMgPSByZXF1aXJlKCcuL2NvbnRyb2xsZXJzLmpzJyk7XG5cbmNsYXNzIEV5ZXZpbm5QbGF5ZXIge1xuICBjb25zdHJ1Y3RvcihwbGF5ZXJFbGVtZW50LCB2aWRlb1NvdXJjZSkge1xuICAgIHRoaXMucGxheWVyRWxlbWVudCA9IHBsYXllckVsZW1lbnQ7XG4gICAgdGhpcy52aWRlb1NvdXJjZSA9IHZpZGVvU291cmNlO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQuY2xhc3NOYW1lID0gJ2V5ZXZpbm4tcGxheWVyJztcbiAgICB0aGlzLnBsYXllckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2hha2FQbGF5ZXIgPSBuZXcgc2hha2EuUGxheWVyKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgIHRoaXMuc2hha2FQbGF5ZXIuY29uZmlndXJlKHtcbiAgICAgIHN0cmVhbWluZzoge1xuICAgICAgICBqdW1wTGFyZ2VHYXBzOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG1hbmlmZXN0OiB7XG4gICAgICAgIGRhc2g6IHsgY2xvY2tTeW5jVXJpOiB0aGlzLnZpZGVvU291cmNlIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNoYWthUGxheWVyLmxvYWQodGhpcy52aWRlb1NvdXJjZSlcbiAgICAudGhlbigoZXYpID0+IHtcbiAgICAgIHRoaXMudmlkZW9Db250cm9sbGVycyA9IG5ldyBDb250cm9sbGVycyh0aGlzLnBsYXllckVsZW1lbnQpO1xuICAgICAgdGhpcy52aWRlb0NvbnRyb2xsZXJzLnJlbmRlcigpO1xuICAgICAgdGhpcy52aWRlb0NvbnRyb2xsZXJzLmluaXRJbnRlcmFjdGlvbkhhbmRsZXJzKHRoaXMudmlkZW9FbGVtZW50KTtcbiAgICAgIHRoaXMudmlkZW9Db250cm9sbGVycy5pbml0UmVuZGVyRXZlbnRzKHRoaXMudmlkZW9FbGVtZW50KTtcbiAgICAgIHRoaXMudmlkZW9Db250cm9sbGVycy5pbml0UmVuZGVyU3RhdHModGhpcy52aWRlb0VsZW1lbnQsIHRoaXMuc2hha2FQbGF5ZXIpO1xuICAgIFxuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpO1xuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV5ZXZpbm5QbGF5ZXI7Iiwid2luZG93LkV5ZXZpbm5QbGF5ZXIgPSByZXF1aXJlKCcuL2V5ZXZpbm5fcGxheWVyLmpzJyk7XG5cbiIsIihmdW5jdGlvbigpe3ZhciBnPXt9O1xuKGZ1bmN0aW9uKHdpbmRvdyl7dmFyIGssYWE9dGhpczthYS51ZT0hMDtmdW5jdGlvbiBtKGEsYil7dmFyIGM9YS5zcGxpdChcIi5cIiksZD1hYTtjWzBdaW4gZHx8IWQuZXhlY1NjcmlwdHx8ZC5leGVjU2NyaXB0KFwidmFyIFwiK2NbMF0pO2Zvcih2YXIgZTtjLmxlbmd0aCYmKGU9Yy5zaGlmdCgpKTspYy5sZW5ndGh8fHZvaWQgMD09PWI/ZFtlXT9kPWRbZV06ZD1kW2VdPXt9OmRbZV09Yn1mdW5jdGlvbiBiYShhKXt2YXIgYj1wO2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS56ZT1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2Eud2U9ZnVuY3Rpb24oYSxjLGYpe3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy5cblxuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuZnVuY3Rpb24gY2EoYSl7dGhpcy5jPU1hdGguZXhwKE1hdGgubG9nKC41KS9hKTt0aGlzLmI9dGhpcy5hPTB9ZnVuY3Rpb24gZGEoYSxiLGMpe3ZhciBkPU1hdGgucG93KGEuYyxiKTtjPWMqKDEtZCkrZCphLmE7aXNOYU4oYyl8fChhLmE9YyxhLmIrPWIpfWZ1bmN0aW9uIGVhKGEpe3JldHVybiBhLmEvKDEtTWF0aC5wb3coYS5jLGEuYikpfTtmdW5jdGlvbiBmYSgpe3RoaXMuYz1uZXcgY2EoMik7dGhpcy5mPW5ldyBjYSg1KTt0aGlzLmE9MDt0aGlzLmI9NUU1fWZhLnByb3RvdHlwZS5zZXREZWZhdWx0RXN0aW1hdGU9ZnVuY3Rpb24oYSl7dGhpcy5iPWF9O2ZhLnByb3RvdHlwZS5nZXRCYW5kd2lkdGhFc3RpbWF0ZT1mdW5jdGlvbigpe3JldHVybiAxMjhFMz50aGlzLmE/dGhpcy5iOk1hdGgubWluKGVhKHRoaXMuYyksZWEodGhpcy5mKSl9O2Z1bmN0aW9uIGdhKCl7fTtmdW5jdGlvbiB0KGEsYixjLGQpe3RoaXMuc2V2ZXJpdHk9YTt0aGlzLmNhdGVnb3J5PWI7dGhpcy5jb2RlPWM7dGhpcy5kYXRhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywzKX1tKFwic2hha2EudXRpbC5FcnJvclwiLHQpO3QucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJzaGFrYS51dGlsLkVycm9yIFwiK0pTT04uc3RyaW5naWZ5KHRoaXMsbnVsbCxcIiAgXCIpfTt0LlNldmVyaXR5PXtSRUNPVkVSQUJMRToxLENSSVRJQ0FMOjJ9O3QuQ2F0ZWdvcnk9e05FVFdPUks6MSxURVhUOjIsTUVESUE6MyxNQU5JRkVTVDo0LFNUUkVBTUlORzo1LERSTTo2LFBMQVlFUjo3LENBU1Q6OCxTVE9SQUdFOjl9O1xudC5Db2RlPXtVTlNVUFBPUlRFRF9TQ0hFTUU6MUUzLEJBRF9IVFRQX1NUQVRVUzoxMDAxLEhUVFBfRVJST1I6MTAwMixUSU1FT1VUOjEwMDMsTUFMRk9STUVEX0RBVEFfVVJJOjEwMDQsVU5LTk9XTl9EQVRBX1VSSV9FTkNPRElORzoxMDA1LFJFUVVFU1RfRklMVEVSX0VSUk9SOjEwMDYsUkVTUE9OU0VfRklMVEVSX0VSUk9SOjEwMDcsSU5WQUxJRF9URVhUX0hFQURFUjoyRTMsSU5WQUxJRF9URVhUX0NVRToyMDAxLFVOQUJMRV9UT19ERVRFQ1RfRU5DT0RJTkc6MjAwMyxCQURfRU5DT0RJTkc6MjAwNCxJTlZBTElEX1hNTDoyMDA1LElOVkFMSURfTVA0X1RUTUw6MjAwNyxJTlZBTElEX01QNF9WVFQ6MjAwOCxCVUZGRVJfUkVBRF9PVVRfT0ZfQk9VTkRTOjNFMyxKU19JTlRFR0VSX09WRVJGTE9XOjMwMDEsRUJNTF9PVkVSRkxPVzozMDAyLEVCTUxfQkFEX0ZMT0FUSU5HX1BPSU5UX1NJWkU6MzAwMyxNUDRfU0lEWF9XUk9OR19CT1hfVFlQRTozMDA0LE1QNF9TSURYX0lOVkFMSURfVElNRVNDQUxFOjMwMDUsXG5NUDRfU0lEWF9UWVBFX05PVF9TVVBQT1JURUQ6MzAwNixXRUJNX0NVRVNfRUxFTUVOVF9NSVNTSU5HOjMwMDcsV0VCTV9FQk1MX0hFQURFUl9FTEVNRU5UX01JU1NJTkc6MzAwOCxXRUJNX1NFR01FTlRfRUxFTUVOVF9NSVNTSU5HOjMwMDksV0VCTV9JTkZPX0VMRU1FTlRfTUlTU0lORzozMDEwLFdFQk1fRFVSQVRJT05fRUxFTUVOVF9NSVNTSU5HOjMwMTEsV0VCTV9DVUVfVFJBQ0tfUE9TSVRJT05TX0VMRU1FTlRfTUlTU0lORzozMDEyLFdFQk1fQ1VFX1RJTUVfRUxFTUVOVF9NSVNTSU5HOjMwMTMsTUVESUFfU09VUkNFX09QRVJBVElPTl9GQUlMRUQ6MzAxNCxNRURJQV9TT1VSQ0VfT1BFUkFUSU9OX1RIUkVXOjMwMTUsVklERU9fRVJST1I6MzAxNixRVU9UQV9FWENFRURFRF9FUlJPUjozMDE3LFVOQUJMRV9UT19HVUVTU19NQU5JRkVTVF9UWVBFOjRFMyxEQVNIX0lOVkFMSURfWE1MOjQwMDEsREFTSF9OT19TRUdNRU5UX0lORk86NDAwMixEQVNIX0VNUFRZX0FEQVBUQVRJT05fU0VUOjQwMDMsXG5EQVNIX0VNUFRZX1BFUklPRDo0MDA0LERBU0hfV0VCTV9NSVNTSU5HX0lOSVQ6NDAwNSxEQVNIX1VOU1VQUE9SVEVEX0NPTlRBSU5FUjo0MDA2LERBU0hfUFNTSF9CQURfRU5DT0RJTkc6NDAwNyxEQVNIX05PX0NPTU1PTl9LRVlfU1lTVEVNOjQwMDgsREFTSF9NVUxUSVBMRV9LRVlfSURTX05PVF9TVVBQT1JURUQ6NDAwOSxEQVNIX0NPTkZMSUNUSU5HX0tFWV9JRFM6NDAxMCxVTlBMQVlBQkxFX1BFUklPRDo0MDExLFJFU1RSSUNUSU9OU19DQU5OT1RfQkVfTUVUOjQwMTIsTk9fUEVSSU9EUzo0MDE0LEhMU19QTEFZTElTVF9IRUFERVJfTUlTU0lORzo0MDE1LElOVkFMSURfSExTX1RBRzo0MDE2LEhMU19JTlZBTElEX1BMQVlMSVNUX0hJRVJBUkNIWTo0MDE3LERBU0hfRFVQTElDQVRFX1JFUFJFU0VOVEFUSU9OX0lEOjQwMTgsSExTX01VTFRJUExFX01FRElBX0lOSVRfU0VDVElPTlNfRk9VTkQ6NDAyMCxITFNfQ09VTERfTk9UX0dVRVNTX01JTUVfVFlQRTo0MDIxLEhMU19NQVNURVJfUExBWUxJU1RfTk9UX1BST1ZJREVEOjQwMjIsXG5ITFNfUkVRVUlSRURfQVRUUklCVVRFX01JU1NJTkc6NDAyMyxITFNfUkVRVUlSRURfVEFHX01JU1NJTkc6NDAyNCxITFNfQ09VTERfTk9UX0dVRVNTX0NPREVDUzo0MDI1LEhMU19LRVlGT1JNQVRTX05PVF9TVVBQT1JURUQ6NDAyNixJTlZBTElEX1NUUkVBTVNfQ0hPU0VOOjUwMDUsTk9fUkVDT0dOSVpFRF9LRVlfU1lTVEVNUzo2RTMsUkVRVUVTVEVEX0tFWV9TWVNURU1fQ09ORklHX1VOQVZBSUxBQkxFOjYwMDEsRkFJTEVEX1RPX0NSRUFURV9DRE06NjAwMixGQUlMRURfVE9fQVRUQUNIX1RPX1ZJREVPOjYwMDMsSU5WQUxJRF9TRVJWRVJfQ0VSVElGSUNBVEU6NjAwNCxGQUlMRURfVE9fQ1JFQVRFX1NFU1NJT046NjAwNSxGQUlMRURfVE9fR0VORVJBVEVfTElDRU5TRV9SRVFVRVNUOjYwMDYsTElDRU5TRV9SRVFVRVNUX0ZBSUxFRDo2MDA3LExJQ0VOU0VfUkVTUE9OU0VfUkVKRUNURUQ6NjAwOCxFTkNSWVBURURfQ09OVEVOVF9XSVRIT1VUX0RSTV9JTkZPOjYwMTAsTk9fTElDRU5TRV9TRVJWRVJfR0lWRU46NjAxMixcbk9GRkxJTkVfU0VTU0lPTl9SRU1PVkVEOjYwMTMsRVhQSVJFRDo2MDE0LExPQURfSU5URVJSVVBURUQ6N0UzLENBU1RfQVBJX1VOQVZBSUxBQkxFOjhFMyxOT19DQVNUX1JFQ0VJVkVSUzo4MDAxLEFMUkVBRFlfQ0FTVElORzo4MDAyLFVORVhQRUNURURfQ0FTVF9FUlJPUjo4MDAzLENBU1RfQ0FOQ0VMRURfQllfVVNFUjo4MDA0LENBU1RfQ09OTkVDVElPTl9USU1FRF9PVVQ6ODAwNSxDQVNUX1JFQ0VJVkVSX0FQUF9VTkFWQUlMQUJMRTo4MDA2LFNUT1JBR0VfTk9UX1NVUFBPUlRFRDo5RTMsSU5ERVhFRF9EQl9FUlJPUjo5MDAxLE9QRVJBVElPTl9BQk9SVEVEOjkwMDIsUkVRVUVTVEVEX0lURU1fTk9UX0ZPVU5EOjkwMDMsTUFMRk9STUVEX09GRkxJTkVfVVJJOjkwMDQsQ0FOTk9UX1NUT1JFX0xJVkVfT0ZGTElORTo5MDA1LFNUT1JFX0FMUkVBRFlfSU5fUFJPR1JFU1M6OTAwNixOT19JTklUX0RBVEFfRk9SX09GRkxJTkU6OTAwNyxMT0NBTF9QTEFZRVJfSU5TVEFOQ0VfUkVRVUlSRUQ6OTAwOH07dmFyIGhhPS9eKD86KFteOi8/Iy5dKyk6KT8oPzpcXC9cXC8oPzooW14vPyNdKilAKT8oW14vIz9dKj8pKD86OihbMC05XSspKT8oPz1bLyM/XXwkKSk/KFtePyNdKyk/KD86XFw/KFteI10qKSk/KD86IyguKikpPyQvO2Z1bmN0aW9uIGlhKGEpe3ZhciBiO2EgaW5zdGFuY2VvZiBpYT8oamEodGhpcyxhLmFhKSx0aGlzLkFhPWEuQWEsdGhpcy5jYT1hLmNhLGthKHRoaXMsYS5JYSksdGhpcy5XPWEuVyxsYSh0aGlzLG1hKGEuYSkpLHRoaXMudGE9YS50YSk6YSYmKGI9U3RyaW5nKGEpLm1hdGNoKGhhKSk/KGphKHRoaXMsYlsxXXx8XCJcIiwhMCksdGhpcy5BYT1uYShiWzJdfHxcIlwiKSx0aGlzLmNhPW5hKGJbM118fFwiXCIsITApLGthKHRoaXMsYls0XSksdGhpcy5XPW5hKGJbNV18fFwiXCIsITApLGxhKHRoaXMsYls2XXx8XCJcIiwhMCksdGhpcy50YT1uYShiWzddfHxcIlwiKSk6dGhpcy5hPW5ldyBvYShudWxsKX1rPWlhLnByb3RvdHlwZTtrLmFhPVwiXCI7ay5BYT1cIlwiO2suY2E9XCJcIjtrLklhPW51bGw7ay5XPVwiXCI7ay50YT1cIlwiO1xuay50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5hYTtiJiZhLnB1c2gocWEoYixyYSwhMCksXCI6XCIpO2lmKGI9dGhpcy5jYSl7YS5wdXNoKFwiLy9cIik7dmFyIGM9dGhpcy5BYTtjJiZhLnB1c2gocWEoYyxyYSwhMCksXCJAXCIpO2EucHVzaChlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKTtiPXRoaXMuSWE7bnVsbCE9YiYmYS5wdXNoKFwiOlwiLFN0cmluZyhiKSl9aWYoYj10aGlzLlcpdGhpcy5jYSYmXCIvXCIhPWIuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChxYShiLFwiL1wiPT1iLmNoYXJBdCgwKT9zYTp0YSwhMCkpOyhiPXRoaXMuYS50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGIpOyhiPXRoaXMudGEpJiZhLnB1c2goXCIjXCIscWEoYix1YSkpO3JldHVybiBhLmpvaW4oXCJcIil9O1xuay5yZXNvbHZlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBpYSh0aGlzKTtcImRhdGFcIj09PWIuYWEmJihiPW5ldyBpYSk7dmFyIGM9ISFhLmFhO2M/amEoYixhLmFhKTpjPSEhYS5BYTtjP2IuQWE9YS5BYTpjPSEhYS5jYTtjP2IuY2E9YS5jYTpjPW51bGwhPWEuSWE7dmFyIGQ9YS5XO2lmKGMpa2EoYixhLklhKTtlbHNlIGlmKGM9ISFhLlcpe2lmKFwiL1wiIT1kLmNoYXJBdCgwKSlpZih0aGlzLmNhJiYhdGhpcy5XKWQ9XCIvXCIrZDtlbHNle3ZhciBlPWIuVy5sYXN0SW5kZXhPZihcIi9cIik7LTEhPWUmJihkPWIuVy5zdWJzdHIoMCxlKzEpK2QpfWlmKFwiLi5cIj09ZHx8XCIuXCI9PWQpZD1cIlwiO2Vsc2UgaWYoLTEhPWQuaW5kZXhPZihcIi4vXCIpfHwtMSE9ZC5pbmRleE9mKFwiLy5cIikpe2Zvcih2YXIgZT0hZC5sYXN0SW5kZXhPZihcIi9cIiwwKSxkPWQuc3BsaXQoXCIvXCIpLGY9W10sZz0wO2c8ZC5sZW5ndGg7KXt2YXIgaD1kW2crK107XCIuXCI9PWg/ZSYmZz09ZC5sZW5ndGgmJmYucHVzaChcIlwiKTpcIi4uXCI9PWg/KCgxPFxuZi5sZW5ndGh8fDE9PWYubGVuZ3RoJiZcIlwiIT1mWzBdKSYmZi5wb3AoKSxlJiZnPT1kLmxlbmd0aCYmZi5wdXNoKFwiXCIpKTooZi5wdXNoKGgpLGU9ITApfWQ9Zi5qb2luKFwiL1wiKX19Yz9iLlc9ZDpjPVwiXCIhPT1hLmEudG9TdHJpbmcoKTtjP2xhKGIsbWEoYS5hKSk6Yz0hIWEudGE7YyYmKGIudGE9YS50YSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGphKGEsYixjKXthLmFhPWM/bmEoYiwhMCk6YjthLmFhJiYoYS5hYT1hLmFhLnJlcGxhY2UoLzokLyxcIlwiKSl9ZnVuY3Rpb24ga2EoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EuSWE9Yn1lbHNlIGEuSWE9bnVsbH1mdW5jdGlvbiBsYShhLGIsYyl7YiBpbnN0YW5jZW9mIG9hP2EuYT1iOihjfHwoYj1xYShiLHZhKSksYS5hPW5ldyBvYShiKSl9XG5mdW5jdGlvbiBuYShhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIHFhKGEsYixjKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLHdhKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiB3YShhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm5cIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIHJhPS9bI1xcL1xcP0BdL2csdGE9L1tcXCNcXD86XS9nLHNhPS9bXFwjXFw/XS9nLHZhPS9bXFwjXFw/QF0vZyx1YT0vIy9nO2Z1bmN0aW9uIG9hKGEpe3RoaXMuYj1hfHxudWxsfW9hLnByb3RvdHlwZS5hPW51bGw7b2EucHJvdG90eXBlLmM9bnVsbDtcbm9hLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuYilyZXR1cm4gdGhpcy5iO2lmKCF0aGlzLmEpcmV0dXJuXCJcIjt2YXIgYT1bXSxiO2ZvcihiIGluIHRoaXMuYSlmb3IodmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50KGIpLGQ9dGhpcy5hW2JdLGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9YztcIlwiIT09ZFtlXSYmKGYrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChkW2VdKSk7YS5wdXNoKGYpfXJldHVybiB0aGlzLmI9YS5qb2luKFwiJlwiKX07ZnVuY3Rpb24gbWEoYSl7dmFyIGI9bmV3IG9hO2IuYj1hLmI7aWYoYS5hKXt2YXIgYz17fSxkO2ZvcihkIGluIGEuYSljW2RdPWEuYVtkXS5jb25jYXQoKTtiLmE9YztiLmM9YS5jfXJldHVybiBifTtmdW5jdGlvbiB4YShhLGIpe3JldHVybiBhLnJlZHVjZShmdW5jdGlvbihhLGIsZSl7cmV0dXJuIGJbXCJjYXRjaFwiXShhLmJpbmQobnVsbCxlKSl9LmJpbmQobnVsbCxiKSxQcm9taXNlLnJlamVjdCgpKX1mdW5jdGlvbiB4KGEsYil7cmV0dXJuIGEuY29uY2F0KGIpfWZ1bmN0aW9uIHkoKXt9ZnVuY3Rpb24geWEoYSl7cmV0dXJuIG51bGwhPWF9ZnVuY3Rpb24gemEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hfX1mdW5jdGlvbiBBYShhLGIsYyl7cmV0dXJuIGMuaW5kZXhPZihhKT09Yn07ZnVuY3Rpb24geihhLGIpe2lmKCFiLmxlbmd0aClyZXR1cm4gYTt2YXIgYz1iLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGlhKGEpfSk7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaWEoYSl9KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMubWFwKGEucmVzb2x2ZS5iaW5kKGEpKX0pLnJlZHVjZSh4LFtdKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9TdHJpbmcoKX0pfWZ1bmN0aW9uIEJhKGEsYil7cmV0dXJue2tleVN5c3RlbTphLGxpY2Vuc2VTZXJ2ZXJVcmk6XCJcIixkaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZDohMSxwZXJzaXN0ZW50U3RhdGVSZXF1aXJlZDohMSxhdWRpb1JvYnVzdG5lc3M6XCJcIix2aWRlb1JvYnVzdG5lc3M6XCJcIixzZXJ2ZXJDZXJ0aWZpY2F0ZTpudWxsLGluaXREYXRhOmJ8fFtdLGtleUlkczpbXX19O2Z1bmN0aW9uIENhKGEsYixjLGQsZSl7dmFyIGY9ZSBpbiBkLGc7Zm9yKGcgaW4gYil7dmFyIGg9ZStcIi5cIitnLGw9Zj9kW2VdOmNbZ10sbj0hIXtcIi5hYnIubWFuYWdlclwiOiEwfVtoXXx8ISF7c2VydmVyQ2VydGlmaWNhdGU6ITB9W2ddO2lmKGZ8fGcgaW4gYSl2b2lkIDA9PT1iW2ddP3ZvaWQgMD09PWx8fGY/ZGVsZXRlIGFbZ106YVtnXT1sOm4/YVtnXT1iW2ddOlwib2JqZWN0XCI9PXR5cGVvZiBhW2ddJiZcIm9iamVjdFwiPT10eXBlb2YgYltnXT9DYShhW2ddLGJbZ10sbCxkLGgpOnR5cGVvZiBiW2ddPT10eXBlb2YgbCYmKGFbZ109YltnXSl9fWZ1bmN0aW9uIERhKGEpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEpKX07ZnVuY3Rpb24gQSgpe3ZhciBhLGIsYz1uZXcgUHJvbWlzZShmdW5jdGlvbihjLGUpe2E9YztiPWV9KTtjLnJlc29sdmU9YTtjLnJlamVjdD1iO3JldHVybiBjfTtmdW5jdGlvbiBCKGEpe3RoaXMuZj0hMTt0aGlzLmE9W107dGhpcy5iPVtdO3RoaXMuYz1bXTt0aGlzLmg9YXx8bnVsbH1tKFwic2hha2EubmV0Lk5ldHdvcmtpbmdFbmdpbmVcIixCKTtCLlJlcXVlc3RUeXBlPXtNQU5JRkVTVDowLFNFR01FTlQ6MSxMSUNFTlNFOjIsQVBQOjN9O3ZhciBFYT17fTtCLnJlZ2lzdGVyU2NoZW1lPWZ1bmN0aW9uKGEsYil7RWFbYV09Yn07Qi51bnJlZ2lzdGVyU2NoZW1lPWZ1bmN0aW9uKGEpe2RlbGV0ZSBFYVthXX07Qi5wcm90b3R5cGUuSmQ9ZnVuY3Rpb24oYSl7dGhpcy5iLnB1c2goYSl9O0IucHJvdG90eXBlLnJlZ2lzdGVyUmVxdWVzdEZpbHRlcj1CLnByb3RvdHlwZS5KZDtCLnByb3RvdHlwZS5tZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmI7YT1iLmluZGV4T2YoYSk7MDw9YSYmYi5zcGxpY2UoYSwxKX07Qi5wcm90b3R5cGUudW5yZWdpc3RlclJlcXVlc3RGaWx0ZXI9Qi5wcm90b3R5cGUubWU7XG5CLnByb3RvdHlwZS5HYz1mdW5jdGlvbigpe3RoaXMuYj1bXX07Qi5wcm90b3R5cGUuY2xlYXJBbGxSZXF1ZXN0RmlsdGVycz1CLnByb3RvdHlwZS5HYztCLnByb3RvdHlwZS5LZD1mdW5jdGlvbihhKXt0aGlzLmMucHVzaChhKX07Qi5wcm90b3R5cGUucmVnaXN0ZXJSZXNwb25zZUZpbHRlcj1CLnByb3RvdHlwZS5LZDtCLnByb3RvdHlwZS5uZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmM7YT1iLmluZGV4T2YoYSk7MDw9YSYmYi5zcGxpY2UoYSwxKX07Qi5wcm90b3R5cGUudW5yZWdpc3RlclJlc3BvbnNlRmlsdGVyPUIucHJvdG90eXBlLm5lO0IucHJvdG90eXBlLkhjPWZ1bmN0aW9uKCl7dGhpcy5jPVtdfTtCLnByb3RvdHlwZS5jbGVhckFsbFJlc3BvbnNlRmlsdGVycz1CLnByb3RvdHlwZS5IYztmdW5jdGlvbiBGYSgpe3JldHVybnttYXhBdHRlbXB0czoyLGJhc2VEZWxheToxRTMsYmFja29mZkZhY3RvcjoyLGZ1enpGYWN0b3I6LjUsdGltZW91dDowfX1cbmZ1bmN0aW9uIEMoYSxiKXtyZXR1cm57dXJpczphLG1ldGhvZDpcIkdFVFwiLGJvZHk6bnVsbCxoZWFkZXJzOnt9LGFsbG93Q3Jvc3NTaXRlQ3JlZGVudGlhbHM6ITEscmV0cnlQYXJhbWV0ZXJzOmJ9fUIucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmY9ITA7dGhpcy5iPVtdO3RoaXMuYz1bXTtmb3IodmFyIGE9W10sYj0wO2I8dGhpcy5hLmxlbmd0aDsrK2IpYS5wdXNoKHRoaXMuYVtiXVtcImNhdGNoXCJdKHkpKTtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9O0IucHJvdG90eXBlLmRlc3Ryb3k9Qi5wcm90b3R5cGUubTtcbkIucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmYpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Yi5tZXRob2Q9Yi5tZXRob2R8fFwiR0VUXCI7Yi5oZWFkZXJzPWIuaGVhZGVyc3x8e307Yi5yZXRyeVBhcmFtZXRlcnM9Yi5yZXRyeVBhcmFtZXRlcnM/RGEoYi5yZXRyeVBhcmFtZXRlcnMpOkZhKCk7Yi51cmlzPURhKGIudXJpcyk7dmFyIGM9RGF0ZS5ub3coKSxkPVByb21pc2UucmVzb2x2ZSgpO3RoaXMuYi5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Q9ZC50aGVuKGMuYmluZChudWxsLGEsYikpfSk7ZD1kW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhyb3cgbmV3IHQoMiwxLDEwMDYsYSk7fSk7ZD1kLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGQ9RGF0ZS5ub3coKS1jLGY9Yi5yZXRyeVBhcmFtZXRlcnN8fHt9LGc9Zi5tYXhBdHRlbXB0c3x8MSxoPWYuYmFja29mZkZhY3Rvcnx8MixmPW51bGw9PWYuYmFzZURlbGF5PzFFMzpmLmJhc2VEZWxheSxsPXRoaXMuZyhhLGIsMCxcbmQpLG49MTtuPGc7bisrKWw9bFtcImNhdGNoXCJdKGZ1bmN0aW9uKGMsZSxmKXtpZihmJiYxPT1mLnNldmVyaXR5KXtmPW5ldyBBO3ZhciBnPWIucmV0cnlQYXJhbWV0ZXJzfHx7fTt3aW5kb3cuc2V0VGltZW91dChmLnJlc29sdmUsYyooMSsoMipNYXRoLnJhbmRvbSgpLTEpKihudWxsPT1nLmZ1enpGYWN0b3I/LjU6Zy5mdXp6RmFjdG9yKSkpO3JldHVybiBmLnRoZW4odGhpcy5nLmJpbmQodGhpcyxhLGIsZSxkKSl9dGhyb3cgZjt9LmJpbmQodGhpcyxmLG4lYi51cmlzLmxlbmd0aCkpLGYqPWg7cmV0dXJuIGx9LmJpbmQodGhpcykpO3RoaXMuYS5wdXNoKGQpO3JldHVybiBkLnRoZW4oZnVuY3Rpb24oYil7MDw9dGhpcy5hLmluZGV4T2YoZCkmJnRoaXMuYS5zcGxpY2UodGhpcy5hLmluZGV4T2YoZCksMSk7dGhpcy5oJiYhYi5mcm9tQ2FjaGUmJjE9PWEmJnRoaXMuaChiLnRpbWVNcyxiLmRhdGEuYnl0ZUxlbmd0aCk7cmV0dXJuIGJ9LmJpbmQodGhpcykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7YSYmXG4oYS5zZXZlcml0eT0yKTswPD10aGlzLmEuaW5kZXhPZihkKSYmdGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihkKSwxKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQodGhpcykpfTtCLnByb3RvdHlwZS5yZXF1ZXN0PUIucHJvdG90eXBlLnJlcXVlc3Q7XG5CLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZilyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt2YXIgZT1uZXcgaWEoYi51cmlzW2NdKSxmPWUuYWE7Znx8KGY9bG9jYXRpb24ucHJvdG9jb2wsZj1mLnNsaWNlKDAsLTEpLGphKGUsZiksYi51cmlzW2NdPWUudG9TdHJpbmcoKSk7Zj1FYVtmXTtpZighZilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoMiwxLDFFMyxlKSk7dmFyIGc9RGF0ZS5ub3coKTtyZXR1cm4gZihiLnVyaXNbY10sYixhKS50aGVuKGZ1bmN0aW9uKGIpe3ZvaWQgMD09Yi50aW1lTXMmJihiLnRpbWVNcz1EYXRlLm5vdygpLWcpO3ZhciBjPURhdGUubm93KCksZT1Qcm9taXNlLnJlc29sdmUoKTt0aGlzLmMuZm9yRWFjaChmdW5jdGlvbihjKXtlPWUudGhlbihmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoYyhhLGIpKX0uYmluZCh0aGlzKSl9KTtlPWVbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt2YXIgYj0yO2EgaW5zdGFuY2VvZiB0JiZcbihiPWEuc2V2ZXJpdHkpO3Rocm93IG5ldyB0KGIsMSwxMDA3LGEpO30pO3JldHVybiBlLnRoZW4oZnVuY3Rpb24oKXtiLnRpbWVNcys9RGF0ZS5ub3coKS1jO2IudGltZU1zKz1kO3JldHVybiBifSl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiBHYShhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDsrK2Qpe2Zvcih2YXIgZT0hMSxmPTA7ZjxjLmxlbmd0aCYmIShlPWI/YihhW2RdLGNbZl0pOmFbZF09PT1jW2ZdKTsrK2YpO2V8fGMucHVzaChhW2RdKX1yZXR1cm4gY31mdW5jdGlvbiBIYShhLGIsYyl7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDsrK2QpaWYoYyhhW2RdLGIpKXJldHVybiBkO3JldHVybi0xfTtmdW5jdGlvbiBJYSgpe3RoaXMuYT17fX1JYS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3RoaXMuYS5oYXNPd25Qcm9wZXJ0eShhKT90aGlzLmFbYV0ucHVzaChiKTp0aGlzLmFbYV09W2JdfTtJYS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybihhPXRoaXMuYVthXSk/YS5zbGljZSgpOm51bGx9O0lhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFbYV07aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOysrZCljW2RdPT1iJiYoYy5zcGxpY2UoZCwxKSwtLWQpfTtmdW5jdGlvbiBEKCl7dGhpcy5hPW5ldyBJYX1ELnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7SmEodGhpcyk7dGhpcy5hPW51bGw7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtmdW5jdGlvbiBFKGEsYixjLGQpe2EuYSYmKGI9bmV3IEthKGIsYyxkKSxhLmEucHVzaChjLGIpKX1mdW5jdGlvbiBMYShhLGIsYyxkKXtFKGEsYixjLGZ1bmN0aW9uKGEpe3RoaXMuaGEoYixjKTtkKGEpfS5iaW5kKGEpKX1ELnByb3RvdHlwZS5oYT1mdW5jdGlvbihhLGIpe2lmKHRoaXMuYSlmb3IodmFyIGM9dGhpcy5hLmdldChiKXx8W10sZD0wO2Q8Yy5sZW5ndGg7KytkKXt2YXIgZT1jW2RdO2UudGFyZ2V0PT1hJiYoZS5oYSgpLHRoaXMuYS5yZW1vdmUoYixlKSl9fTtmdW5jdGlvbiBKYShhKXtpZihhLmEpe3ZhciBiPWEuYSxjPVtdLGQ7Zm9yKGQgaW4gYi5hKWMucHVzaC5hcHBseShjLGIuYVtkXSk7Zm9yKGI9MDtiPGMubGVuZ3RoOysrYiljW2JdLmhhKCk7YS5hLmE9e319fVxuZnVuY3Rpb24gS2EoYSxiLGMpe3RoaXMudGFyZ2V0PWE7dGhpcy50eXBlPWI7dGhpcy5hPWM7dGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihiLGMsITEpfUthLnByb3RvdHlwZS5oYT1mdW5jdGlvbigpe3RoaXMudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy50eXBlLHRoaXMuYSwhMSk7dGhpcy5hPXRoaXMudGFyZ2V0PW51bGx9O2Z1bmN0aW9uIE1hKGEpe3JldHVybiFhfHwhT2JqZWN0LmtleXMoYSkubGVuZ3RofWZ1bmN0aW9uIE5hKGEpe3JldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19KX1mdW5jdGlvbiBPYShhLGIpe3JldHVybiBPYmplY3Qua2V5cyhhKS5yZWR1Y2UoZnVuY3Rpb24oYyxkKXtjW2RdPWIoYVtkXSxkKTtyZXR1cm4gY30se30pfWZ1bmN0aW9uIFBhKGEsYil7cmV0dXJuIE9iamVjdC5rZXlzKGEpLmV2ZXJ5KGZ1bmN0aW9uKGMpe3JldHVybiBiKGMsYVtjXSl9KX1mdW5jdGlvbiBRYShhLGIpe09iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24oYyl7YihjLGFbY10pfSl9O2Z1bmN0aW9uIEYoYSl7aWYoIWEpcmV0dXJuXCJcIjthPW5ldyBVaW50OEFycmF5KGEpOzIzOT09YVswXSYmMTg3PT1hWzFdJiYxOTE9PWFbMl0mJihhPWEuc3ViYXJyYXkoMykpO2E9ZXNjYXBlKFJhKGEpKTt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXt0aHJvdyBuZXcgdCgyLDIsMjAwNCk7fX1tKFwic2hha2EudXRpbC5TdHJpbmdVdGlscy5mcm9tVVRGOFwiLEYpO1xuZnVuY3Rpb24gU2EoYSxiLGMpe2lmKCFhKXJldHVyblwiXCI7aWYoIWMmJmEuYnl0ZUxlbmd0aCUyKXRocm93IG5ldyB0KDIsMiwyMDA0KTtpZihhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpdmFyIGQ9YTtlbHNlIGM9bmV3IFVpbnQ4QXJyYXkoYS5ieXRlTGVuZ3RoKSxjLnNldChuZXcgVWludDhBcnJheShhKSksZD1jLmJ1ZmZlcjthPU1hdGguZmxvb3IoYS5ieXRlTGVuZ3RoLzIpO2M9bmV3IFVpbnQxNkFycmF5KGEpO2Q9bmV3IERhdGFWaWV3KGQpO2Zvcih2YXIgZT0wO2U8YTtlKyspY1tlXT1kLmdldFVpbnQxNigyKmUsYik7cmV0dXJuIFJhKGMpfW0oXCJzaGFrYS51dGlsLlN0cmluZ1V0aWxzLmZyb21VVEYxNlwiLFNhKTtcbmZ1bmN0aW9uIFRhKGEpe3ZhciBiPW5ldyBVaW50OEFycmF5KGEpO2lmKDIzOT09YlswXSYmMTg3PT1iWzFdJiYxOTE9PWJbMl0pcmV0dXJuIEYoYik7aWYoMjU0PT1iWzBdJiYyNTU9PWJbMV0pcmV0dXJuIFNhKGIuc3ViYXJyYXkoMiksITEpO2lmKDI1NT09YlswXSYmMjU0PT1iWzFdKXJldHVybiBTYShiLnN1YmFycmF5KDIpLCEwKTt2YXIgYz1mdW5jdGlvbihhLGIpe3JldHVybiBhLmJ5dGVMZW5ndGg8PWJ8fDMyPD1hW2JdJiYxMjY+PWFbYl19LmJpbmQobnVsbCxiKTtpZihiWzBdfHxiWzJdKXtpZighYlsxXSYmIWJbM10pcmV0dXJuIFNhKGEsITApO2lmKGMoMCkmJmMoMSkmJmMoMikmJmMoMykpcmV0dXJuIEYoYSl9ZWxzZSByZXR1cm4gU2EoYSwhMSk7dGhyb3cgbmV3IHQoMiwyLDIwMDMpO31tKFwic2hha2EudXRpbC5TdHJpbmdVdGlscy5mcm9tQnl0ZXNBdXRvRGV0ZWN0XCIsVGEpO1xuZnVuY3Rpb24gVWEoYSl7YT11bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYSkpO2Zvcih2YXIgYj1uZXcgVWludDhBcnJheShhLmxlbmd0aCksYz0wO2M8YS5sZW5ndGg7KytjKWJbY109YS5jaGFyQ29kZUF0KGMpO3JldHVybiBiLmJ1ZmZlcn1tKFwic2hha2EudXRpbC5TdHJpbmdVdGlscy50b1VURjhcIixVYSk7ZnVuY3Rpb24gUmEoYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7Yys9MTZFMyliKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYS5zdWJhcnJheShjLGMrMTZFMykpO3JldHVybiBifTtmdW5jdGlvbiBWYShhKXt0aGlzLmE9bnVsbDt0aGlzLmI9ZnVuY3Rpb24oKXt0aGlzLmE9bnVsbDthKCl9LmJpbmQodGhpcyl9VmEucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe251bGwhPXRoaXMuYSYmKGNsZWFyVGltZW91dCh0aGlzLmEpLHRoaXMuYT1udWxsKX07ZnVuY3Rpb24gV2EoYSl7YS5jYW5jZWwoKTthLmE9c2V0VGltZW91dChhLmIsNTAwKX07ZnVuY3Rpb24gWGEoYSxiKXt2YXIgYz12b2lkIDA9PWI/ITA6YixkPXdpbmRvdy5idG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhKSkucmVwbGFjZSgvXFwrL2csXCItXCIpLnJlcGxhY2UoL1xcLy9nLFwiX1wiKTtyZXR1cm4gYz9kOmQucmVwbGFjZSgvPSokLyxcIlwiKX1tKFwic2hha2EudXRpbC5VaW50OEFycmF5VXRpbHMudG9CYXNlNjRcIixYYSk7ZnVuY3Rpb24gWWEoYSl7YT13aW5kb3cuYXRvYihhLnJlcGxhY2UoLy0vZyxcIitcIikucmVwbGFjZSgvXy9nLFwiL1wiKSk7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoKSxjPTA7YzxhLmxlbmd0aDsrK2MpYltjXT1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGJ9bShcInNoYWthLnV0aWwuVWludDhBcnJheVV0aWxzLmZyb21CYXNlNjRcIixZYSk7XG5mdW5jdGlvbiBaYShhKXtmb3IodmFyIGI9bmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgvMiksYz0wO2M8YS5sZW5ndGg7Yys9MiliW2MvMl09d2luZG93LnBhcnNlSW50KGEuc3Vic3RyKGMsMiksMTYpO3JldHVybiBifW0oXCJzaGFrYS51dGlsLlVpbnQ4QXJyYXlVdGlscy5mcm9tSGV4XCIsWmEpO2Z1bmN0aW9uICRhKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGQ9YVtjXS50b1N0cmluZygxNik7MT09ZC5sZW5ndGgmJihkPVwiMFwiK2QpO2IrPWR9cmV0dXJuIGJ9bShcInNoYWthLnV0aWwuVWludDhBcnJheVV0aWxzLnRvSGV4XCIsJGEpO2Z1bmN0aW9uIGFiKGEsYil7aWYoIWEmJiFiKXJldHVybiEwO2lmKCFhfHwhYnx8YS5sZW5ndGghPWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7KytjKWlmKGFbY10hPWJbY10pcmV0dXJuITE7cmV0dXJuITB9bShcInNoYWthLnV0aWwuVWludDhBcnJheVV0aWxzLmVxdWFsXCIsYWIpO1xubShcInNoYWthLnV0aWwuVWludDhBcnJheVV0aWxzLmNvbmNhdFwiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MDtjPGFyZ3VtZW50cy5sZW5ndGg7KytjKWIrPWFyZ3VtZW50c1tjXS5sZW5ndGg7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGIpLGQ9MCxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoOysrYyliLnNldChhcmd1bWVudHNbY10sZCksZCs9YXJndW1lbnRzW2NdLmxlbmd0aDtyZXR1cm4gYn0pO2Z1bmN0aW9uIGJiKGEsYixjLGQpe3RoaXMuaj10aGlzLmk9dGhpcy52PW51bGw7dGhpcy5KPSExO3RoaXMuYj1udWxsO3RoaXMuZj1uZXcgRDt0aGlzLmE9W107dGhpcy5vPVtdO3RoaXMubD1uZXcgQTt0aGlzLmthPWE7dGhpcy5oPW51bGw7dGhpcy5nPWZ1bmN0aW9uKGEpe3RoaXMubC5yZWplY3QoYSk7YihhKX0uYmluZCh0aGlzKTt0aGlzLkE9e307dGhpcy5CYT1jO3RoaXMubGE9ZDt0aGlzLkI9bmV3IFZhKHRoaXMuSWQuYmluZCh0aGlzKSk7dGhpcy5qYT10aGlzLmM9ITE7dGhpcy5HPVtdO3RoaXMuaWE9ITE7dGhpcy5QPXNldEludGVydmFsKHRoaXMuSGQuYmluZCh0aGlzKSwxRTMpO3RoaXMubFtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSl9az1iYi5wcm90b3R5cGU7XG5rLm09ZnVuY3Rpb24oKXt0aGlzLmM9ITA7dmFyIGE9dGhpcy5hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4oYS5iYS5jbG9zZSgpfHxQcm9taXNlLnJlc29sdmUoKSlbXCJjYXRjaFwiXSh5KX0pO3RoaXMubC5yZWplY3QoKTt0aGlzLmYmJmEucHVzaCh0aGlzLmYubSgpKTt0aGlzLmomJmEucHVzaCh0aGlzLmouc2V0TWVkaWFLZXlzKG51bGwpW1wiY2F0Y2hcIl0oeSkpO3RoaXMuUCYmKGNsZWFySW50ZXJ2YWwodGhpcy5QKSx0aGlzLlA9bnVsbCk7dGhpcy5CJiZ0aGlzLkIuY2FuY2VsKCk7dGhpcy5mPXRoaXMuaj10aGlzLmk9dGhpcy52PXRoaXMuYj10aGlzLkI9bnVsbDt0aGlzLmE9W107dGhpcy5vPVtdO3RoaXMubGE9dGhpcy5nPXRoaXMuaD10aGlzLmthPW51bGw7cmV0dXJuIFByb21pc2UuYWxsKGEpfTtrLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt0aGlzLmg9YX07XG5rLmluaXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fSxkPVtdO3RoaXMuamE9Yjt0aGlzLm89YS5vZmZsaW5lU2Vzc2lvbklkcztjYih0aGlzLGEsYnx8MDxhLm9mZmxpbmVTZXNzaW9uSWRzLmxlbmd0aCxjLGQpO3JldHVybiBkLmxlbmd0aD9kYih0aGlzLGMsZCk6KHRoaXMuSj0hMCxQcm9taXNlLnJlc29sdmUoKSl9O1xuZnVuY3Rpb24gZWIoYSxiKXtpZighYS5pKXJldHVybiBMYShhLmYsYixcImVuY3J5cHRlZFwiLGZ1bmN0aW9uKCl7dGhpcy5nKG5ldyB0KDIsNiw2MDEwKSl9LmJpbmQoYSkpLFByb21pc2UucmVzb2x2ZSgpO2Euaj1iO0xhKGEuZixhLmosXCJwbGF5XCIsYS5vZC5iaW5kKGEpKTt2YXIgYz1hLmouc2V0TWVkaWFLZXlzKGEuaSksYz1jW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyB0KDIsNiw2MDAzLGEubWVzc2FnZSkpfSksZD1udWxsO2EuYi5zZXJ2ZXJDZXJ0aWZpY2F0ZSYmKGQ9YS5pLnNldFNlcnZlckNlcnRpZmljYXRlKGEuYi5zZXJ2ZXJDZXJ0aWZpY2F0ZSkudGhlbihmdW5jdGlvbigpe30pW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyB0KDIsNiw2MDA0LGEubWVzc2FnZSkpfSkpO3JldHVybiBQcm9taXNlLmFsbChbYyxkXSkudGhlbihmdW5jdGlvbigpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbmZiKHRoaXMpO3RoaXMuYi5pbml0RGF0YS5sZW5ndGh8fHRoaXMuby5sZW5ndGh8fEUodGhpcy5mLHRoaXMuaixcImVuY3J5cHRlZFwiLHRoaXMuZGQuYmluZCh0aGlzKSl9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz9Qcm9taXNlLnJlc29sdmUoKTpQcm9taXNlLnJlamVjdChhKX0uYmluZChhKSl9ZnVuY3Rpb24gZ2IoYSxiKXtyZXR1cm4gUHJvbWlzZS5hbGwoYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGhiKHRoaXMsYSkudGhlbihmdW5jdGlvbihhKXtpZihhKXtmb3IodmFyIGI9bmV3IEEsYz0wO2M8dGhpcy5hLmxlbmd0aDtjKyspaWYodGhpcy5hW2NdLmJhPT1hKXt0aGlzLmFbY10uaWI9YjticmVha31yZXR1cm4gUHJvbWlzZS5hbGwoW2EucmVtb3ZlKCksYl0pfX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpKX1cbmZ1bmN0aW9uIGZiKGEpe3ZhciBiPWEuYj9hLmIuaW5pdERhdGE6W107Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2liKHRoaXMsYS5pbml0RGF0YVR5cGUsYS5pbml0RGF0YSl9LmJpbmQoYSkpO2Euby5mb3JFYWNoKGZ1bmN0aW9uKGEpe2hiKHRoaXMsYSl9LmJpbmQoYSkpO2IubGVuZ3RofHxhLm8ubGVuZ3RofHxhLmwucmVzb2x2ZSgpO3JldHVybiBhLmx9ay5rZXlTeXN0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iP3RoaXMuYi5rZXlTeXN0ZW06XCJcIn07ZnVuY3Rpb24gamIoYSl7cmV0dXJuIGEuYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYmEuc2Vzc2lvbklkfSl9ay5hYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYS5tYXAoZnVuY3Rpb24oYSl7YT1hLmJhLmV4cGlyYXRpb247cmV0dXJuIGlzTmFOKGEpP0luZmluaXR5OmF9KTtyZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCxhKX07XG5mdW5jdGlvbiBjYihhLGIsYyxkLGUpe3ZhciBmPWtiKGEpO2IucGVyaW9kcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EudmFyaWFudHMuZm9yRWFjaChmdW5jdGlvbihhKXtmJiYoYS5kcm1JbmZvcz1bZl0pO2EuZHJtSW5mb3MuZm9yRWFjaChmdW5jdGlvbihiKXtsYih0aGlzLGIpO3dpbmRvdy5jYXN0JiZ3aW5kb3cuY2FzdC5fX3BsYXRmb3JtX18mJlwiY29tLm1pY3Jvc29mdC5wbGF5cmVhZHlcIj09Yi5rZXlTeXN0ZW0mJihiLmtleVN5c3RlbT1cImNvbS5jaHJvbWVjYXN0LnBsYXlyZWFkeVwiKTt2YXIgZj1kW2Iua2V5U3lzdGVtXTtmfHwoZj17YXVkaW9DYXBhYmlsaXRpZXM6W10sdmlkZW9DYXBhYmlsaXRpZXM6W10sZGlzdGluY3RpdmVJZGVudGlmaWVyOlwib3B0aW9uYWxcIixwZXJzaXN0ZW50U3RhdGU6Yz9cInJlcXVpcmVkXCI6XCJvcHRpb25hbFwiLHNlc3Npb25UeXBlczpbYz9cInBlcnNpc3RlbnQtbGljZW5zZVwiOlwidGVtcG9yYXJ5XCJdLGxhYmVsOmIua2V5U3lzdGVtLGRybUluZm9zOltdfSxcbmRbYi5rZXlTeXN0ZW1dPWYsZS5wdXNoKGIua2V5U3lzdGVtKSk7Zi5kcm1JbmZvcy5wdXNoKGIpO2IuZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQmJihmLmRpc3RpbmN0aXZlSWRlbnRpZmllcj1cInJlcXVpcmVkXCIpO2IucGVyc2lzdGVudFN0YXRlUmVxdWlyZWQmJihmLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIpO3ZhciBnPVtdO2EudmlkZW8mJmcucHVzaChhLnZpZGVvKTthLmF1ZGlvJiZnLnB1c2goYS5hdWRpbyk7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPVwidmlkZW9cIj09YS50eXBlP2YudmlkZW9DYXBhYmlsaXRpZXM6Zi5hdWRpb0NhcGFiaWxpdGllcyxkPShcInZpZGVvXCI9PWEudHlwZT9iLnZpZGVvUm9idXN0bmVzczpiLmF1ZGlvUm9idXN0bmVzcyl8fFwiXCIsZT1hLm1pbWVUeXBlO2EuY29kZWNzJiYoZSs9JzsgY29kZWNzPVwiJythLmNvZGVjcysnXCInKTtjLnB1c2goe3JvYnVzdG5lc3M6ZCxjb250ZW50VHlwZTplfSl9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpfVxuZnVuY3Rpb24gZGIoYSxiLGMpe2lmKDE9PWMubGVuZ3RoJiZcIlwiPT1jWzBdKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgdCgyLDYsNkUzKSk7dmFyIGQ9bmV3IEEsZT1kO1shMCwhMV0uZm9yRWFjaChmdW5jdGlvbihhKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9YltjXTtkLmRybUluZm9zLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuISFhLmxpY2Vuc2VTZXJ2ZXJVcml9KT09YSYmKGQuYXVkaW9DYXBhYmlsaXRpZXMubGVuZ3RofHxkZWxldGUgZC5hdWRpb0NhcGFiaWxpdGllcyxkLnZpZGVvQ2FwYWJpbGl0aWVzLmxlbmd0aHx8ZGVsZXRlIGQudmlkZW9DYXBhYmlsaXRpZXMsZT1lW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jP1Byb21pc2UucmVqZWN0KCk6bmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2VzcyhjLFtkXSl9LmJpbmQodGhpcykpKX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpO2U9ZVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyB0KDIsXG42LDYwMDEpKX0pO2U9ZS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt2YXIgYz0wPD1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJFZGdlL1wiKSxkPWEuZ2V0Q29uZmlndXJhdGlvbigpO3RoaXMudj0oZC5hdWRpb0NhcGFiaWxpdGllc3x8W10pLmNvbmNhdChkLnZpZGVvQ2FwYWJpbGl0aWVzfHxbXSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnRUeXBlfSk7YyYmKHRoaXMudj1udWxsKTtjPWJbYS5rZXlTeXN0ZW1dO21iKHRoaXMsYS5rZXlTeXN0ZW0sYyxjLmRybUluZm9zKTtyZXR1cm4gdGhpcy5iLmxpY2Vuc2VTZXJ2ZXJVcmk/YS5jcmVhdGVNZWRpYUtleXMoKTpQcm9taXNlLnJlamVjdChuZXcgdCgyLDYsNjAxMikpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYylyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTt0aGlzLmk9YTt0aGlzLko9ITB9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbnRoaXMudj10aGlzLmI9bnVsbDtyZXR1cm4gYSBpbnN0YW5jZW9mIHQ/UHJvbWlzZS5yZWplY3QoYSk6UHJvbWlzZS5yZWplY3QobmV3IHQoMiw2LDYwMDIsYS5tZXNzYWdlKSl9LmJpbmQoYSkpO2QucmVqZWN0KCk7cmV0dXJuIGV9XG5mdW5jdGlvbiBsYihhLGIpe3ZhciBjPWIua2V5U3lzdGVtO2lmKGMpe2lmKCFiLmxpY2Vuc2VTZXJ2ZXJVcmkpe3ZhciBkPWEuaC5zZXJ2ZXJzW2NdO2QmJihiLmxpY2Vuc2VTZXJ2ZXJVcmk9ZCl9Yi5rZXlJZHN8fChiLmtleUlkcz1bXSk7aWYoYz1hLmguYWR2YW5jZWRbY10pYi5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZHx8KGIuZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ9Yy5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZCksYi5wZXJzaXN0ZW50U3RhdGVSZXF1aXJlZHx8KGIucGVyc2lzdGVudFN0YXRlUmVxdWlyZWQ9Yy5wZXJzaXN0ZW50U3RhdGVSZXF1aXJlZCksYi52aWRlb1JvYnVzdG5lc3N8fChiLnZpZGVvUm9idXN0bmVzcz1jLnZpZGVvUm9idXN0bmVzcyksYi5hdWRpb1JvYnVzdG5lc3N8fChiLmF1ZGlvUm9idXN0bmVzcz1jLmF1ZGlvUm9idXN0bmVzcyksYi5zZXJ2ZXJDZXJ0aWZpY2F0ZXx8KGIuc2VydmVyQ2VydGlmaWNhdGU9Yy5zZXJ2ZXJDZXJ0aWZpY2F0ZSl9fVxuZnVuY3Rpb24ga2IoYSl7aWYoTWEoYS5oLmNsZWFyS2V5cykpcmV0dXJuIG51bGw7dmFyIGI9W10sYz1bXSxkO2ZvcihkIGluIGEuaC5jbGVhcktleXMpe3ZhciBlPWEuaC5jbGVhcktleXNbZF0sZj1aYShkKSxlPVphKGUpLGY9e2t0eTpcIm9jdFwiLGtpZDpYYShmLCExKSxrOlhhKGUsITEpfTtiLnB1c2goZik7Yy5wdXNoKGYua2lkKX1hPUpTT04uc3RyaW5naWZ5KHtrZXlzOmJ9KTtjPUpTT04uc3RyaW5naWZ5KHtraWRzOmN9KTtjPVt7aW5pdERhdGE6bmV3IFVpbnQ4QXJyYXkoVWEoYykpLGluaXREYXRhVHlwZTpcImtleWlkc1wifV07cmV0dXJue2tleVN5c3RlbTpcIm9yZy53My5jbGVhcmtleVwiLGxpY2Vuc2VTZXJ2ZXJVcmk6XCJkYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiK3dpbmRvdy5idG9hKGEpLGRpc3RpbmN0aXZlSWRlbnRpZmllclJlcXVpcmVkOiExLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOiExLGF1ZGlvUm9idXN0bmVzczpcIlwiLHZpZGVvUm9idXN0bmVzczpcIlwiLHNlcnZlckNlcnRpZmljYXRlOm51bGwsXG5pbml0RGF0YTpjLGtleUlkczpbXX19ZnVuY3Rpb24gbWIoYSxiLGMsZCl7dmFyIGU9W10sZj1bXSxnPVtdLGg9W107bmIoZCxlLGYsZyxoKTthLmI9e2tleVN5c3RlbTpiLGxpY2Vuc2VTZXJ2ZXJVcmk6ZVswXSxkaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZDpcInJlcXVpcmVkXCI9PWMuZGlzdGluY3RpdmVJZGVudGlmaWVyLHBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkOlwicmVxdWlyZWRcIj09Yy5wZXJzaXN0ZW50U3RhdGUsYXVkaW9Sb2J1c3RuZXNzOmMuYXVkaW9DYXBhYmlsaXRpZXM/Yy5hdWRpb0NhcGFiaWxpdGllc1swXS5yb2J1c3RuZXNzOlwiXCIsdmlkZW9Sb2J1c3RuZXNzOmMudmlkZW9DYXBhYmlsaXRpZXM/Yy52aWRlb0NhcGFiaWxpdGllc1swXS5yb2J1c3RuZXNzOlwiXCIsc2VydmVyQ2VydGlmaWNhdGU6ZlswXSxpbml0RGF0YTpnLGtleUlkczpofX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIpe3JldHVybiBhLmtleUlkJiZhLmtleUlkPT1iLmtleUlkPyEwOmEuaW5pdERhdGFUeXBlPT1iLmluaXREYXRhVHlwZSYmYWIoYS5pbml0RGF0YSxiLmluaXREYXRhKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7LTE9PWIuaW5kZXhPZihhLmxpY2Vuc2VTZXJ2ZXJVcmkpJiZiLnB1c2goYS5saWNlbnNlU2VydmVyVXJpKTthLnNlcnZlckNlcnRpZmljYXRlJiYtMT09SGEoYyxhLnNlcnZlckNlcnRpZmljYXRlLGFiKSYmYy5wdXNoKGEuc2VydmVyQ2VydGlmaWNhdGUpO2EuaW5pdERhdGEmJmEuaW5pdERhdGEuZm9yRWFjaChmdW5jdGlvbihhKXstMT09SGEoZCxhLGYpJiZkLnB1c2goYSl9KTtpZihhLmtleUlkcylmb3IodmFyIGc9MDtnPGEua2V5SWRzLmxlbmd0aDsrK2cpLTE9PWUuaW5kZXhPZihhLmtleUlkc1tnXSkmJmUucHVzaChhLmtleUlkc1tnXSl9KX1cbmsuZGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBVaW50OEFycmF5KGEuaW5pdERhdGEpLGM9MDtjPHRoaXMuYS5sZW5ndGg7KytjKWlmKGFiKGIsdGhpcy5hW2NdLmluaXREYXRhKSlyZXR1cm47aWIodGhpcyxhLmluaXREYXRhVHlwZSxiKX07XG5mdW5jdGlvbiBoYihhLGIpe3RyeXt2YXIgYz1hLmkuY3JlYXRlU2Vzc2lvbihcInBlcnNpc3RlbnQtbGljZW5zZVwiKX1jYXRjaChmKXt2YXIgZD1uZXcgdCgyLDYsNjAwNSxmLm1lc3NhZ2UpO2EuZyhkKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZCl9RShhLmYsYyxcIm1lc3NhZ2VcIixhLmljLmJpbmQoYSkpO0UoYS5mLGMsXCJrZXlzdGF0dXNlc2NoYW5nZVwiLGEuY2MuYmluZChhKSk7dmFyIGU9e2luaXREYXRhOm51bGwsYmE6Yyxsb2FkZWQ6ITEseGI6SW5maW5pdHksaWI6bnVsbH07YS5hLnB1c2goZSk7cmV0dXJuIGMubG9hZChiKS50aGVuKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmMpe2lmKGEpcmV0dXJuIGUubG9hZGVkPSEwLHRoaXMuYS5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4gYS5sb2FkZWR9KSYmdGhpcy5sLnJlc29sdmUoKSxjO3RoaXMuYS5zcGxpY2UodGhpcy5hLmluZGV4T2YoZSksMSk7dGhpcy5nKG5ldyB0KDIsNiw2MDEzKSl9fS5iaW5kKGEpLGZ1bmN0aW9uKGEpe3RoaXMuY3x8XG4odGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihlKSwxKSx0aGlzLmcobmV3IHQoMiw2LDYwMDUsYS5tZXNzYWdlKSkpfS5iaW5kKGEpKX1cbmZ1bmN0aW9uIGliKGEsYixjKXt0cnl7dmFyIGQ9YS5qYT9hLmkuY3JlYXRlU2Vzc2lvbihcInBlcnNpc3RlbnQtbGljZW5zZVwiKTphLmkuY3JlYXRlU2Vzc2lvbigpfWNhdGNoKGUpe2EuZyhuZXcgdCgyLDYsNjAwNSxlLm1lc3NhZ2UpKTtyZXR1cm59RShhLmYsZCxcIm1lc3NhZ2VcIixhLmljLmJpbmQoYSkpO0UoYS5mLGQsXCJrZXlzdGF0dXNlc2NoYW5nZVwiLGEuY2MuYmluZChhKSk7YS5hLnB1c2goe2luaXREYXRhOmMsYmE6ZCxsb2FkZWQ6ITEseGI6SW5maW5pdHksaWI6bnVsbH0pO2QuZ2VuZXJhdGVSZXF1ZXN0KGIsYy5idWZmZXIpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7aWYoIXRoaXMuYyl7Zm9yKHZhciBiPTA7Yjx0aGlzLmEubGVuZ3RoOysrYilpZih0aGlzLmFbYl0uYmE9PWQpe3RoaXMuYS5zcGxpY2UoYiwxKTticmVha310aGlzLmcobmV3IHQoMiw2LDYwMDYsYS5tZXNzYWdlKSl9fS5iaW5kKGEpKX1cbmsuaWM9ZnVuY3Rpb24oYSl7dGhpcy5oLmRlbGF5TGljZW5zZVJlcXVlc3RVbnRpbFBsYXllZCYmdGhpcy5qLnBhdXNlZCYmIXRoaXMuaWE/dGhpcy5HLnB1c2goYSk6b2IodGhpcyxhKX07XG5mdW5jdGlvbiBvYihhLGIpe2Zvcih2YXIgYz1iLnRhcmdldCxkLGU9MDtlPGEuYS5sZW5ndGg7ZSsrKWlmKGEuYVtlXS5iYT09Yyl7ZD1hLmFbZV0uaWI7YnJlYWt9ZT1DKFthLmIubGljZW5zZVNlcnZlclVyaV0sYS5oLnJldHJ5UGFyYW1ldGVycyk7ZS5ib2R5PWIubWVzc2FnZTtlLm1ldGhvZD1cIlBPU1RcIjtcImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCI9PWEuYi5rZXlTeXN0ZW0mJnBiKGUpO2Eua2EucmVxdWVzdCgyLGUpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz9Qcm9taXNlLnJlamVjdCgpOmMudXBkYXRlKGEuZGF0YSkudGhlbihmdW5jdGlvbigpe2QmJmQucmVzb2x2ZSgpfSl9LmJpbmQoYSksZnVuY3Rpb24oYSl7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTthPW5ldyB0KDIsNiw2MDA3LGEpO3RoaXMuZyhhKTtkJiZkLnJlamVjdChhKX0uYmluZChhKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtpZih0aGlzLmMpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuYT1uZXcgdCgyLDYsNjAwOCxhLm1lc3NhZ2UpO3RoaXMuZyhhKTtkJiZkLnJlamVjdChhKX0uYmluZChhKSl9ZnVuY3Rpb24gcGIoYSl7dmFyIGI9U2EoYS5ib2R5LCEwLCEwKTtpZigtMT09Yi5pbmRleE9mKFwiUGxheVJlYWR5S2V5TWVzc2FnZVwiKSlhLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJ0ZXh0L3htbDsgY2hhcnNldD11dGYtOFwiO2Vsc2V7Zm9yKHZhciBiPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYixcImFwcGxpY2F0aW9uL3htbFwiKSxjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJIdHRwSGVhZGVyXCIpLGQ9MDtkPGMubGVuZ3RoOysrZClhLmhlYWRlcnNbY1tkXS5xdWVyeVNlbGVjdG9yKFwibmFtZVwiKS50ZXh0Q29udGVudF09Y1tkXS5xdWVyeVNlbGVjdG9yKFwidmFsdWVcIikudGV4dENvbnRlbnQ7YS5ib2R5PVlhKGIucXVlcnlTZWxlY3RvcihcIkNoYWxsZW5nZVwiKS50ZXh0Q29udGVudCkuYnVmZmVyfX1cbmsuY2M9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYjtmb3IoYj0wO2I8dGhpcy5hLmxlbmd0aCYmdGhpcy5hW2JdLmJhIT1hOysrYik7aWYoYiE9dGhpcy5hLmxlbmd0aCl7dmFyIGM9ITE7YS5rZXlTdGF0dXNlcy5mb3JFYWNoKGZ1bmN0aW9uKGEsZCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGQpe3ZhciBlPWQ7ZD1hO2E9ZX1pZihcImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCI9PXRoaXMuYi5rZXlTeXN0ZW0mJjE2PT1kLmJ5dGVMZW5ndGgpe3ZhciBlPW5ldyBEYXRhVmlldyhkKSxmPWUuZ2V0VWludDMyKDAsITApLGw9ZS5nZXRVaW50MTYoNCwhMCksbj1lLmdldFVpbnQxNig2LCEwKTtlLnNldFVpbnQzMigwLGYsITEpO2Uuc2V0VWludDE2KDQsbCwhMSk7ZS5zZXRVaW50MTYoNixuLCExKX1cImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCI9PXRoaXMuYi5rZXlTeXN0ZW0mJlwic3RhdHVzLXBlbmRpbmdcIj09YSYmKGE9XCJ1c2FibGVcIik7XCJzdGF0dXMtcGVuZGluZ1wiIT1hJiYodGhpcy5hW2JdLmxvYWRlZD1cbiEwLHRoaXMuYS5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4gYS5sb2FkZWR9KSYmdGhpcy5sLnJlc29sdmUoKSk7XCJleHBpcmVkXCI9PWEmJihjPSEwKTtlPSRhKG5ldyBVaW50OEFycmF5KGQpKTt0aGlzLkFbZV09YX0uYmluZCh0aGlzKSk7dmFyIGQ9YS5leHBpcmF0aW9uLURhdGUubm93KCk7KDA+ZHx8YyYmMUUzPmQpJiYhdGhpcy5hW2JdLmliJiYodGhpcy5hLnNwbGljZShiLDEpLGEuY2xvc2UoKSk7V2EodGhpcy5CKX19O2suSWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyl7cmV0dXJuXCJleHBpcmVkXCI9PWN9IU1hKHRoaXMuQSkmJlBhKHRoaXMuQSxhKSYmdGhpcy5nKG5ldyB0KDIsNiw2MDE0KSk7dGhpcy5CYSh0aGlzLkEpfTtcbmZ1bmN0aW9uIHFiKCl7dmFyIGE9W10sYj1be2NvbnRlbnRUeXBlOid2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNDJFMDFFXCInfSx7Y29udGVudFR5cGU6J3ZpZGVvL3dlYm07IGNvZGVjcz1cInZwOFwiJ31dLGM9W3t2aWRlb0NhcGFiaWxpdGllczpiLHBlcnNpc3RlbnRTdGF0ZTpcInJlcXVpcmVkXCIsc2Vzc2lvblR5cGVzOltcInBlcnNpc3RlbnQtbGljZW5zZVwiXX0se3ZpZGVvQ2FwYWJpbGl0aWVzOmJ9XSxkPXt9O1wib3JnLnczLmNsZWFya2V5IGNvbS53aWRldmluZS5hbHBoYSBjb20ubWljcm9zb2Z0LnBsYXlyZWFkeSBjb20uYXBwbGUuZnBzLjJfMCBjb20uYXBwbGUuZnBzLjFfMCBjb20uYXBwbGUuZnBzIGNvbS5hZG9iZS5wcmltZXRpbWVcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgZT1uYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzKGIsYykudGhlbihmdW5jdGlvbihhKXt2YXIgYz1hLmdldENvbmZpZ3VyYXRpb24oKS5zZXNzaW9uVHlwZXM7ZFtiXT1cbntwZXJzaXN0ZW50U3RhdGU6Yz8wPD1jLmluZGV4T2YoXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIik6ITF9O3JldHVybiBhLmNyZWF0ZU1lZGlhS2V5cygpfSlbXCJjYXRjaFwiXShmdW5jdGlvbigpe2RbYl09bnVsbH0pO2EucHVzaChlKX0pO3JldHVybiBQcm9taXNlLmFsbChhKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KX1rLm9kPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLkcubGVuZ3RoO2ErKylvYih0aGlzLHRoaXMuR1thXSk7dGhpcy5pYT0hMDt0aGlzLkc9W119O2Z1bmN0aW9uIHJiKGEsYil7dmFyIGM9YS5rZXlTeXN0ZW0oKTtyZXR1cm4hYi5kcm1JbmZvcy5sZW5ndGh8fGIuZHJtSW5mb3Muc29tZShmdW5jdGlvbihhKXtyZXR1cm4gYS5rZXlTeXN0ZW09PWN9KX1cbmZ1bmN0aW9uIHNiKGEsYil7aWYoIWEubGVuZ3RoKXJldHVybiBiO2lmKCFiLmxlbmd0aClyZXR1cm4gYTtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWZvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKWlmKGFbZF0ua2V5U3lzdGVtPT1iW2VdLmtleVN5c3RlbSl7dmFyIGY9YVtkXSxlPWJbZV0sZz1bXSxnPWcuY29uY2F0KGYuaW5pdERhdGF8fFtdKSxnPWcuY29uY2F0KGUuaW5pdERhdGF8fFtdKSxoPVtdLGg9aC5jb25jYXQoZi5rZXlJZHMpLGg9aC5jb25jYXQoZS5rZXlJZHMpO2MucHVzaCh7a2V5U3lzdGVtOmYua2V5U3lzdGVtLGxpY2Vuc2VTZXJ2ZXJVcmk6Zi5saWNlbnNlU2VydmVyVXJpfHxlLmxpY2Vuc2VTZXJ2ZXJVcmksZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ6Zi5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZHx8ZS5kaXN0aW5jdGl2ZUlkZW50aWZpZXJSZXF1aXJlZCxwZXJzaXN0ZW50U3RhdGVSZXF1aXJlZDpmLnBlcnNpc3RlbnRTdGF0ZVJlcXVpcmVkfHxcbmUucGVyc2lzdGVudFN0YXRlUmVxdWlyZWQsdmlkZW9Sb2J1c3RuZXNzOmYudmlkZW9Sb2J1c3RuZXNzfHxlLnZpZGVvUm9idXN0bmVzcyxhdWRpb1JvYnVzdG5lc3M6Zi5hdWRpb1JvYnVzdG5lc3N8fGUuYXVkaW9Sb2J1c3RuZXNzLHNlcnZlckNlcnRpZmljYXRlOmYuc2VydmVyQ2VydGlmaWNhdGV8fGUuc2VydmVyQ2VydGlmaWNhdGUsaW5pdERhdGE6ZyxrZXlJZHM6aH0pO2JyZWFrfXJldHVybiBjfWsuSGQ9ZnVuY3Rpb24oKXt0aGlzLmEuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnhiLGM9YS5iYS5leHBpcmF0aW9uO2lzTmFOKGMpJiYoYz1JbmZpbml0eSk7YyE9YiYmKHRoaXMubGEoYS5iYS5zZXNzaW9uSWQsYyksYS54Yj1jKX0uYmluZCh0aGlzKSl9O2Z1bmN0aW9uIHRiKGEpe3RoaXMuZj1udWxsO3RoaXMuYz1hO3RoaXMuaD0wO3RoaXMuZz1JbmZpbml0eTt0aGlzLmE9dGhpcy5iPW51bGx9dmFyIHViPXt9O2Z1bmN0aW9uIHZiKGEsYil7dWJbYV09Yi5sZW5ndGg/d2IuYmluZChudWxsLGIpOmJ9bShcInNoYWthLm1lZGlhLlRleHRFbmdpbmUucmVnaXN0ZXJQYXJzZXJcIix2Yik7bShcInNoYWthLm1lZGlhLlRleHRFbmdpbmUudW5yZWdpc3RlclBhcnNlclwiLGZ1bmN0aW9uKGEpe2RlbGV0ZSB1YlthXX0pO2Z1bmN0aW9uIHhiKGEsYixjKXtyZXR1cm4gYT49Yj9udWxsOm5ldyBWVFRDdWUoYSxiLGMpfW0oXCJzaGFrYS5tZWRpYS5UZXh0RW5naW5lLm1ha2VDdWVcIix4Yik7dGIucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmMmJnliKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4hMH0pO3RoaXMuYz10aGlzLmY9bnVsbDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O1xuZnVuY3Rpb24gemIoYSxiLGMsZCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtpZih0aGlzLmMpaWYobnVsbD09Y3x8bnVsbD09ZCl0aGlzLmYucGFyc2VJbml0KGIpO2Vsc2V7Zm9yKHZhciBhPXRoaXMuZi5wYXJzZU1lZGlhKGIse3BlcmlvZFN0YXJ0OnRoaXMuaCxzZWdtZW50U3RhcnQ6YyxzZWdtZW50RW5kOmR9KSxmPTA7ZjxhLmxlbmd0aCYmIShhW2ZdLnN0YXJ0VGltZT49dGhpcy5nKTsrK2YpdGhpcy5jLmFkZEN1ZShhW2ZdKTtudWxsPT10aGlzLmImJih0aGlzLmI9Yyk7dGhpcy5hPU1hdGgubWluKGQsdGhpcy5nKX19LmJpbmQoYSkpfVxudGIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhLGIpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5jJiYoeWIodGhpcyxmdW5jdGlvbihjKXtyZXR1cm4gYy5zdGFydFRpbWU+PWJ8fGMuZW5kVGltZTw9YT8hMTohMH0pLG51bGw9PXRoaXMuYnx8Yjw9dGhpcy5ifHxhPj10aGlzLmF8fChhPD10aGlzLmImJmI+PXRoaXMuYT90aGlzLmI9dGhpcy5hPW51bGw6YTw9dGhpcy5iJiZiPHRoaXMuYT90aGlzLmI9YjphPnRoaXMuYiYmYj49dGhpcy5hJiYodGhpcy5hPWEpKSl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiB5YihhLGIpe2Zvcih2YXIgYz1hLmMuY3VlcyxkPVtdLGU9MDtlPGMubGVuZ3RoOysrZSliKGNbZV0pJiZkLnB1c2goY1tlXSk7Zm9yKGU9MDtlPGQubGVuZ3RoOysrZSlhLmMucmVtb3ZlQ3VlKGRbZV0pfWZ1bmN0aW9uIHdiKGEpe3RoaXMuTmE9YX1cbndiLnByb3RvdHlwZS5wYXJzZUluaXQ9ZnVuY3Rpb24oYSl7dGhpcy5OYShhLDAsbnVsbCxudWxsKX07d2IucHJvdG90eXBlLnBhcnNlTWVkaWE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5OYShhLGIucGVyaW9kU3RhcnQsYi5zZWdtZW50U3RhcnQsYi5zZWdtZW50RW5kKX07ZnVuY3Rpb24gQWIoYSl7cmV0dXJuIWF8fDE9PWEubGVuZ3RoJiYxRS02PmEuZW5kKDApLWEuc3RhcnQoMCk/bnVsbDphLmxlbmd0aD9hLmVuZChhLmxlbmd0aC0xKTpudWxsfWZ1bmN0aW9uIEJiKGEsYil7cmV0dXJuIWF8fCFhLmxlbmd0aHx8MT09YS5sZW5ndGgmJjFFLTY+YS5lbmQoMCktYS5zdGFydCgwKT8hMTpiPj1hLnN0YXJ0KDApJiZiPD1hLmVuZChhLmxlbmd0aC0xKX1mdW5jdGlvbiBDYihhLGIpe2lmKCFhfHwhYS5sZW5ndGh8fDE9PWEubGVuZ3RoJiYxRS02PmEuZW5kKDApLWEuc3RhcnQoMCkpcmV0dXJuIDA7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aC0xOzA8PWQmJmEuZW5kKGQpPmI7LS1kKWMrPWEuZW5kKGQpLU1hdGgubWF4KGEuc3RhcnQoZCksYik7cmV0dXJuIGN9O2Z1bmN0aW9uIERiKGEsYixjKXt0aGlzLmY9YTt0aGlzLk49Yjt0aGlzLmk9Yzt0aGlzLmM9e307dGhpcy5hPW51bGw7dGhpcy5iPXt9O3RoaXMuZz1uZXcgRDt0aGlzLmg9ITF9XG5mdW5jdGlvbiBFYigpe3ZhciBhPXt9Oyd2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNDJFMDFFXCIsdmlkZW8vbXA0OyBjb2RlY3M9XCJhdmMzLjQyRTAxRVwiLHZpZGVvL21wNDsgY29kZWNzPVwiaHZjMS4xLjYuTDkzLjkwXCIsYXVkaW8vbXA0OyBjb2RlY3M9XCJtcDRhLjQwLjJcIixhdWRpby9tcDQ7IGNvZGVjcz1cImFjLTNcIixhdWRpby9tcDQ7IGNvZGVjcz1cImVjLTNcIix2aWRlby93ZWJtOyBjb2RlY3M9XCJ2cDhcIix2aWRlby93ZWJtOyBjb2RlY3M9XCJ2cDlcIix2aWRlby93ZWJtOyBjb2RlY3M9XCJhdjFcIixhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIixhdWRpby93ZWJtOyBjb2RlY3M9XCJvcHVzXCIsdmlkZW8vbXAydDsgY29kZWNzPVwiYXZjMS40MkUwMUVcIix2aWRlby9tcDJ0OyBjb2RlY3M9XCJhdmMzLjQyRTAxRVwiLHZpZGVvL21wMnQ7IGNvZGVjcz1cImh2YzEuMS42Lkw5My45MFwiLHZpZGVvL21wMnQ7IGNvZGVjcz1cIm1wNGEuNDAuMlwiLHZpZGVvL21wMnQ7IGNvZGVjcz1cImFjLTNcIix2aWRlby9tcDJ0OyBjb2RlY3M9XCJlYy0zXCIsdmlkZW8vbXAydDsgY29kZWNzPVwibXA0YS40MC4yXCIsdGV4dC92dHQsYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJ3dnR0XCIsYXBwbGljYXRpb24vdHRtbCt4bWwsYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJzdHBwXCInLnNwbGl0KFwiLFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2FbYl09ISF1YltiXXx8XG5NZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoYik7dmFyIGM9Yi5zcGxpdChcIjtcIilbMF07YVtjXT1hW2NdfHxhW2JdfSk7cmV0dXJuIGF9az1EYi5wcm90b3R5cGU7ay5tPWZ1bmN0aW9uKCl7dGhpcy5oPSEwO3ZhciBhPVtdLGI7Zm9yKGIgaW4gdGhpcy5iKXt2YXIgYz10aGlzLmJbYl0sZD1jWzBdO3RoaXMuYltiXT1jLnNsaWNlKDAsMSk7ZCYmYS5wdXNoKGQucFtcImNhdGNoXCJdKHkpKTtmb3IoZD0xO2Q8Yy5sZW5ndGg7KytkKWNbZF0ucFtcImNhdGNoXCJdKHkpLGNbZF0ucC5yZWplY3QoKX10aGlzLmEmJmEucHVzaCh0aGlzLmEubSgpKTtyZXR1cm4gUHJvbWlzZS5hbGwoYSkudGhlbihmdW5jdGlvbigpe3RoaXMuZy5tKCk7dGhpcy5hPXRoaXMuaT10aGlzLk49dGhpcy5mPXRoaXMuZz1udWxsO3RoaXMuYz17fTt0aGlzLmI9e319LmJpbmQodGhpcykpfTtcbmsuaW5pdD1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtcInRleHRcIj09Yj9GYih0aGlzLGMpOihjPXRoaXMuTi5hZGRTb3VyY2VCdWZmZXIoYyksRSh0aGlzLmcsYyxcImVycm9yXCIsdGhpcy5oZS5iaW5kKHRoaXMsYikpLEUodGhpcy5nLGMsXCJ1cGRhdGVlbmRcIix0aGlzLkhhLmJpbmQodGhpcyxiKSksdGhpcy5jW2JdPWMsdGhpcy5iW2JdPVtdKX19O2Z1bmN0aW9uIEZiKGEsYil7YS5hfHwoYS5hPW5ldyB0YihhLmkpKTthLmEuZj1uZXcgdWJbYl19ZnVuY3Rpb24gR2IoYSxiKXtpZihcInRleHRcIj09Yil2YXIgYz1hLmEuYjtlbHNlIGM9SWIoYSxiKSxjPSFjfHwxPT1jLmxlbmd0aCYmMUUtNj5jLmVuZCgwKS1jLnN0YXJ0KDApP251bGw6MT09Yy5sZW5ndGgmJjA+Yy5zdGFydCgwKT8wOmMubGVuZ3RoP2Muc3RhcnQoMCk6bnVsbDtyZXR1cm4gY31mdW5jdGlvbiBJYihhLGIpe3RyeXtyZXR1cm4gYS5jW2JdLmJ1ZmZlcmVkfWNhdGNoKGMpe3JldHVybiBudWxsfX1cbmZ1bmN0aW9uIEpiKGEsYixjLGQsZSl7cmV0dXJuXCJ0ZXh0XCI9PWI/emIoYS5hLGMsZCxlKTpLYihhLGIsYS5nZS5iaW5kKGEsYixjKSl9ay5yZW1vdmU9ZnVuY3Rpb24oYSxiLGMpe3JldHVyblwidGV4dFwiPT1hP3RoaXMuYS5yZW1vdmUoYixjKTpLYih0aGlzLGEsdGhpcy5vYy5iaW5kKHRoaXMsYSxiLGMpKX07ZnVuY3Rpb24gTGIoYSxiKXtyZXR1cm5cInRleHRcIj09Yj9hLmEucmVtb3ZlKDAsSW5maW5pdHkpOktiKGEsYixhLm9jLmJpbmQoYSxiLDAsYS5OLmR1cmF0aW9uKSl9ZnVuY3Rpb24gTWIoYSxiLGMsZCl7aWYoXCJ0ZXh0XCI9PWIpcmV0dXJuIGEuYS5oPWMsbnVsbCE9ZCYmKGEuYS5nPWQpLFByb21pc2UucmVzb2x2ZSgpO251bGw9PWQmJihkPUluZmluaXR5KTtyZXR1cm4gUHJvbWlzZS5hbGwoW0tiKGEsYixhLkNjLmJpbmQoYSxiKSksS2IoYSxiLGEuWGQuYmluZChhLGIsYykpLEtiKGEsYixhLlZkLmJpbmQoYSxiLGQpKV0pfVxuay5lbmRPZlN0cmVhbT1mdW5jdGlvbihhKXtyZXR1cm4gTmIodGhpcyxmdW5jdGlvbigpe2E/dGhpcy5OLmVuZE9mU3RyZWFtKGEpOnRoaXMuTi5lbmRPZlN0cmVhbSgpfS5iaW5kKHRoaXMpKX07ay5wYT1mdW5jdGlvbihhKXtyZXR1cm4gTmIodGhpcyxmdW5jdGlvbigpe3RoaXMuTi5kdXJhdGlvbj1hfS5iaW5kKHRoaXMpKX07ay5ZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTi5kdXJhdGlvbn07ay5nZT1mdW5jdGlvbihhLGIpe3RoaXMuY1thXS5hcHBlbmRCdWZmZXIoYil9O2sub2M9ZnVuY3Rpb24oYSxiLGMpe2M8PWI/dGhpcy5IYShhKTp0aGlzLmNbYV0ucmVtb3ZlKGIsYyl9O2suQ2M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jW2FdLmFwcGVuZFdpbmRvd0VuZDt0aGlzLmNbYV0uYWJvcnQoKTt0aGlzLmNbYV0uYXBwZW5kV2luZG93RW5kPWI7dGhpcy5IYShhKX07ay5NYz1mdW5jdGlvbihhKXt0aGlzLmYuY3VycmVudFRpbWUtPS4wMDE7dGhpcy5IYShhKX07XG5rLlhkPWZ1bmN0aW9uKGEsYil7dGhpcy5jW2FdLnRpbWVzdGFtcE9mZnNldD1iO3RoaXMuSGEoYSl9O2suVmQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmNbYV0uYXBwZW5kV2luZG93RW5kPWIrLjA0O3RoaXMuSGEoYSl9O2suaGU9ZnVuY3Rpb24oYSl7dGhpcy5iW2FdWzBdLnAucmVqZWN0KG5ldyB0KDIsMywzMDE0LHRoaXMuZi5lcnJvcj90aGlzLmYuZXJyb3IuY29kZTowKSl9O2suSGE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5iW2FdWzBdO2ImJihiLnAucmVzb2x2ZSgpLE9iKHRoaXMsYSkpfTtcbmZ1bmN0aW9uIEtiKGEsYixjKXtpZihhLmgpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Yz17c3RhcnQ6YyxwOm5ldyBBfTthLmJbYl0ucHVzaChjKTtpZigxPT1hLmJbYl0ubGVuZ3RoKXRyeXtjLnN0YXJ0KCl9Y2F0Y2goZCl7XCJRdW90YUV4Y2VlZGVkRXJyb3JcIj09ZC5uYW1lP2MucC5yZWplY3QobmV3IHQoMiwzLDMwMTcsYikpOmMucC5yZWplY3QobmV3IHQoMiwzLDMwMTUsZCkpLE9iKGEsYil9cmV0dXJuIGMucH1cbmZ1bmN0aW9uIE5iKGEsYil7aWYoYS5oKXJldHVybiBQcm9taXNlLnJlamVjdCgpO3ZhciBjPVtdLGQ7Zm9yKGQgaW4gYS5jKXt2YXIgZT1uZXcgQSxmPXtzdGFydDpmdW5jdGlvbihhKXthLnJlc29sdmUoKX0uYmluZChudWxsLGUpLHA6ZX07YS5iW2RdLnB1c2goZik7Yy5wdXNoKGUpOzE9PWEuYltkXS5sZW5ndGgmJmYuc3RhcnQoKX1yZXR1cm4gUHJvbWlzZS5hbGwoYykudGhlbihmdW5jdGlvbigpe3ZhciBhO3RyeXtiKCl9Y2F0Y2gobCl7dmFyIGM9UHJvbWlzZS5yZWplY3QobmV3IHQoMiwzLDMwMTUsbCkpfWZvcihhIGluIHRoaXMuYylPYih0aGlzLGEpO3JldHVybiBjfS5iaW5kKGEpLGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KCl9LmJpbmQoYSkpfWZ1bmN0aW9uIE9iKGEsYil7YS5iW2JdLnNoaWZ0KCk7dmFyIGM9YS5iW2JdWzBdO2lmKGMpdHJ5e2Muc3RhcnQoKX1jYXRjaChkKXtjLnAucmVqZWN0KG5ldyB0KDIsMywzMDE1LGQpKSxPYihhLGIpfX07ZnVuY3Rpb24gUGIoYSxiLGMpe3JldHVybiBjPT1ifHxhPj1RYiYmYz09Yi5zcGxpdChcIi1cIilbMF18fGE+PVJiJiZjLnNwbGl0KFwiLVwiKVswXT09Yi5zcGxpdChcIi1cIilbMF0/ITA6ITF9dmFyIFFiPTEsUmI9MjtmdW5jdGlvbiBTYihhKXthPWEudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIik7dmFyIGI9VGJbYVswXV07YiYmKGFbMF09Yik7cmV0dXJuIGEuam9pbihcIi1cIil9XG52YXIgVGI9e2FhcjpcImFhXCIsYWJrOlwiYWJcIixhZnI6XCJhZlwiLGFrYTpcImFrXCIsYWxiOlwic3FcIixhbWg6XCJhbVwiLGFyYTpcImFyXCIsYXJnOlwiYW5cIixhcm06XCJoeVwiLGFzbTpcImFzXCIsYXZhOlwiYXZcIixhdmU6XCJhZVwiLGF5bTpcImF5XCIsYXplOlwiYXpcIixiYWs6XCJiYVwiLGJhbTpcImJtXCIsYmFxOlwiZXVcIixiZWw6XCJiZVwiLGJlbjpcImJuXCIsYmloOlwiYmhcIixiaXM6XCJiaVwiLGJvZDpcImJvXCIsYm9zOlwiYnNcIixicmU6XCJiclwiLGJ1bDpcImJnXCIsYnVyOlwibXlcIixjYXQ6XCJjYVwiLGNlczpcImNzXCIsY2hhOlwiY2hcIixjaGU6XCJjZVwiLGNoaTpcInpoXCIsY2h1OlwiY3VcIixjaHY6XCJjdlwiLGNvcjpcImt3XCIsY29zOlwiY29cIixjcmU6XCJjclwiLGN5bTpcImN5XCIsY3plOlwiY3NcIixkYW46XCJkYVwiLGRldTpcImRlXCIsZGl2OlwiZHZcIixkdXQ6XCJubFwiLGR6bzpcImR6XCIsZWxsOlwiZWxcIixlbmc6XCJlblwiLGVwbzpcImVvXCIsZXN0OlwiZXRcIixldXM6XCJldVwiLGV3ZTpcImVlXCIsZmFvOlwiZm9cIixmYXM6XCJmYVwiLGZpajpcImZqXCIsZmluOlwiZmlcIixmcmE6XCJmclwiLGZyZTpcImZyXCIsXG5mcnk6XCJmeVwiLGZ1bDpcImZmXCIsZ2VvOlwia2FcIixnZXI6XCJkZVwiLGdsYTpcImdkXCIsZ2xlOlwiZ2FcIixnbGc6XCJnbFwiLGdsdjpcImd2XCIsZ3JlOlwiZWxcIixncm46XCJnblwiLGd1ajpcImd1XCIsaGF0OlwiaHRcIixoYXU6XCJoYVwiLGhlYjpcImhlXCIsaGVyOlwiaHpcIixoaW46XCJoaVwiLGhtbzpcImhvXCIsaHJ2OlwiaHJcIixodW46XCJodVwiLGh5ZTpcImh5XCIsaWJvOlwiaWdcIixpY2U6XCJpc1wiLGlkbzpcImlvXCIsaWlpOlwiaWlcIixpa3U6XCJpdVwiLGlsZTpcImllXCIsaW5hOlwiaWFcIixpbmQ6XCJpZFwiLGlwazpcImlrXCIsaXNsOlwiaXNcIixpdGE6XCJpdFwiLGphdjpcImp2XCIsanBuOlwiamFcIixrYWw6XCJrbFwiLGthbjpcImtuXCIsa2FzOlwia3NcIixrYXQ6XCJrYVwiLGthdTpcImtyXCIsa2F6Olwia2tcIixraG06XCJrbVwiLGtpazpcImtpXCIsa2luOlwicndcIixraXI6XCJreVwiLGtvbTpcImt2XCIsa29uOlwia2dcIixrb3I6XCJrb1wiLGt1YTpcImtqXCIsa3VyOlwia3VcIixsYW86XCJsb1wiLGxhdDpcImxhXCIsbGF2OlwibHZcIixsaW06XCJsaVwiLGxpbjpcImxuXCIsbGl0OlwibHRcIixsdHo6XCJsYlwiLGx1YjpcImx1XCIsXG5sdWc6XCJsZ1wiLG1hYzpcIm1rXCIsbWFoOlwibWhcIixtYWw6XCJtbFwiLG1hbzpcIm1pXCIsbWFyOlwibXJcIixtYXk6XCJtc1wiLG1rZDpcIm1rXCIsbWxnOlwibWdcIixtbHQ6XCJtdFwiLG1vbjpcIm1uXCIsbXJpOlwibWlcIixtc2E6XCJtc1wiLG15YTpcIm15XCIsbmF1OlwibmFcIixuYXY6XCJudlwiLG5ibDpcIm5yXCIsbmRlOlwibmRcIixuZG86XCJuZ1wiLG5lcDpcIm5lXCIsbmxkOlwibmxcIixubm86XCJublwiLG5vYjpcIm5iXCIsbm9yOlwibm9cIixueWE6XCJueVwiLG9jaTpcIm9jXCIsb2ppOlwib2pcIixvcmk6XCJvclwiLG9ybTpcIm9tXCIsb3NzOlwib3NcIixwYW46XCJwYVwiLHBlcjpcImZhXCIscGxpOlwicGlcIixwb2w6XCJwbFwiLHBvcjpcInB0XCIscHVzOlwicHNcIixxdWU6XCJxdVwiLHJvaDpcInJtXCIscm9uOlwicm9cIixydW06XCJyb1wiLHJ1bjpcInJuXCIscnVzOlwicnVcIixzYWc6XCJzZ1wiLHNhbjpcInNhXCIsc2luOlwic2lcIixzbGs6XCJza1wiLHNsbzpcInNrXCIsc2x2Olwic2xcIixzbWU6XCJzZVwiLHNtbzpcInNtXCIsc25hOlwic25cIixzbmQ6XCJzZFwiLHNvbTpcInNvXCIsc290Olwic3RcIixzcGE6XCJlc1wiLHNxaTpcInNxXCIsXG5zcmQ6XCJzY1wiLHNycDpcInNyXCIsc3N3Olwic3NcIixzdW46XCJzdVwiLHN3YTpcInN3XCIsc3dlOlwic3ZcIix0YWg6XCJ0eVwiLHRhbTpcInRhXCIsdGF0OlwidHRcIix0ZWw6XCJ0ZVwiLHRnazpcInRnXCIsdGdsOlwidGxcIix0aGE6XCJ0aFwiLHRpYjpcImJvXCIsdGlyOlwidGlcIix0b246XCJ0b1wiLHRzbjpcInRuXCIsdHNvOlwidHNcIix0dWs6XCJ0a1wiLHR1cjpcInRyXCIsdHdpOlwidHdcIix1aWc6XCJ1Z1wiLHVrcjpcInVrXCIsdXJkOlwidXJcIix1emI6XCJ1elwiLHZlbjpcInZlXCIsdmllOlwidmlcIix2b2w6XCJ2b1wiLHdlbDpcImN5XCIsd2xuOlwid2FcIix3b2w6XCJ3b1wiLHhobzpcInhoXCIseWlkOlwieWlcIix5b3I6XCJ5b1wiLHpoYTpcInphXCIsemhvOlwiemhcIix6dWw6XCJ6dVwifTtmdW5jdGlvbiBVYihhLGIsYyl7dmFyIGQ9YS52aWRlbztyZXR1cm4gZCYmKGQud2lkdGg8Yi5taW5XaWR0aHx8ZC53aWR0aD5iLm1heFdpZHRofHxkLndpZHRoPmMud2lkdGh8fGQuaGVpZ2h0PGIubWluSGVpZ2h0fHxkLmhlaWdodD5iLm1heEhlaWdodHx8ZC5oZWlnaHQ+Yy5oZWlnaHR8fGQud2lkdGgqZC5oZWlnaHQ8Yi5taW5QaXhlbHN8fGQud2lkdGgqZC5oZWlnaHQ+Yi5tYXhQaXhlbHMpfHxhLmJhbmR3aWR0aDxiLm1pbkJhbmR3aWR0aHx8YS5iYW5kd2lkdGg+Yi5tYXhCYW5kd2lkdGg/ITE6ITB9ZnVuY3Rpb24gVmIoYSxiLGMpe3ZhciBkPSExO2EudmFyaWFudHMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgZT1hLmFsbG93ZWRCeUFwcGxpY2F0aW9uO2EuYWxsb3dlZEJ5QXBwbGljYXRpb249VWIoYSxiLGMpO2UhPWEuYWxsb3dlZEJ5QXBwbGljYXRpb24mJihkPSEwKX0pO3JldHVybiBkfVxuZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkPWIudmlkZW8sZT1iLmF1ZGlvO2ZvcihiPTA7YjxjLnZhcmlhbnRzLmxlbmd0aDsrK2Ipe3ZhciBmPWMudmFyaWFudHNbYl0sZz1hLGg9ZSxsPWQ7KGcmJmcuSiYmIXJiKGcsZik/MDpYYihmLmF1ZGlvLGcsaCkmJlhiKGYudmlkZW8sZyxsKSl8fChjLnZhcmlhbnRzLnNwbGljZShiLDEpLC0tYil9Zm9yKGI9MDtiPGMudGV4dFN0cmVhbXMubGVuZ3RoOysrYilhPWMudGV4dFN0cmVhbXNbYl0sdWJbWWIoYS5taW1lVHlwZSxhLmNvZGVjcyldfHwoYy50ZXh0U3RyZWFtcy5zcGxpY2UoYiwxKSwtLWIpfVxuZnVuY3Rpb24gWGIoYSxiLGMpe2lmKCFhKXJldHVybiEwO3ZhciBkPW51bGw7YiYmYi5KJiYoZD1iLnYpO2I9WWIoYS5taW1lVHlwZSxhLmNvZGVjcyk7cmV0dXJuIXViW2JdJiYhTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKGIpfHxkJiZhLmVuY3J5cHRlZCYmMD5kLmluZGV4T2YoYil8fGMmJihhLm1pbWVUeXBlIT1jLm1pbWVUeXBlfHxhLmNvZGVjcy5zcGxpdChcIi5cIilbMF0hPWMuY29kZWNzLnNwbGl0KFwiLlwiKVswXSk/ITE6ITB9XG5mdW5jdGlvbiBaYihhLGIsYyl7dmFyIGQ9bnVsbDtyZXR1cm4gJGIoYS52YXJpYW50cykubWFwKGZ1bmN0aW9uKGEpe3ZhciBlO2EudmlkZW8mJmEuYXVkaW8/ZT1jPT1hLnZpZGVvLmlkJiZiPT1hLmF1ZGlvLmlkOmU9YS52aWRlbyYmYz09YS52aWRlby5pZHx8YS5hdWRpbyYmYj09YS5hdWRpby5pZDt2YXIgZz1cIlwiO2EudmlkZW8mJihnKz1hLnZpZGVvLmNvZGVjcyk7YS5hdWRpbyYmKFwiXCIhPWcmJihnKz1cIiwgXCIpLGcrPWEuYXVkaW8uY29kZWNzLGQ9YS5hdWRpby5sYWJlbCk7dmFyIGg9YS5hdWRpbz9hLmF1ZGlvLmNvZGVjczpudWxsLGw9YS52aWRlbz9hLnZpZGVvLmNvZGVjczpudWxsLG49bnVsbDthLnZpZGVvP249YS52aWRlby5taW1lVHlwZTphLmF1ZGlvJiYobj1hLmF1ZGlvLm1pbWVUeXBlKTt2YXIgcT1udWxsO2EuYXVkaW8/cT1hLmF1ZGlvLmtpbmQ6YS52aWRlbyYmKHE9YS52aWRlby5raW5kKTt2YXIgcj1HYSgoYS5hdWRpbz9hLmF1ZGlvLnJvbGVzOltdKS5jb25jYXQoYS52aWRlbz9cbmEudmlkZW8ucm9sZXM6W10pKTtyZXR1cm57aWQ6YS5pZCxhY3RpdmU6ZSx0eXBlOlwidmFyaWFudFwiLGJhbmR3aWR0aDphLmJhbmR3aWR0aCxsYW5ndWFnZTphLmxhbmd1YWdlLGxhYmVsOmQsa2luZDpxfHxudWxsLHdpZHRoOmEudmlkZW8/YS52aWRlby53aWR0aDpudWxsLGhlaWdodDphLnZpZGVvP2EudmlkZW8uaGVpZ2h0Om51bGwsZnJhbWVSYXRlOmEudmlkZW8/YS52aWRlby5mcmFtZVJhdGU6dm9pZCAwLG1pbWVUeXBlOm4sY29kZWNzOmcsYXVkaW9Db2RlYzpoLHZpZGVvQ29kZWM6bCxwcmltYXJ5OmEucHJpbWFyeSxyb2xlczpyLHZpZGVvSWQ6YS52aWRlbz9hLnZpZGVvLmlkOm51bGwsYXVkaW9JZDphLmF1ZGlvP2EuYXVkaW8uaWQ6bnVsbH19KX1cbmZ1bmN0aW9uIGFjKGEsYil7cmV0dXJuIGEudGV4dFN0cmVhbXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybntpZDphLmlkLGFjdGl2ZTpiPT1hLmlkLHR5cGU6XCJ0ZXh0XCIsbGFuZ3VhZ2U6YS5sYW5ndWFnZSxsYWJlbDphLmxhYmVsLGtpbmQ6YS5raW5kLG1pbWVUeXBlOmEubWltZVR5cGUsY29kZWNzOmEuY29kZWNzfHxudWxsLGF1ZGlvQ29kZWM6bnVsbCx2aWRlb0NvZGVjOm51bGwscHJpbWFyeTphLnByaW1hcnkscm9sZXM6YS5yb2xlc319KX1mdW5jdGlvbiBiYyhhLGIpe2Zvcih2YXIgYz0wO2M8YS52YXJpYW50cy5sZW5ndGg7YysrKWlmKGEudmFyaWFudHNbY10uaWQ9PWIuaWQpcmV0dXJuIGEudmFyaWFudHNbY107cmV0dXJuIG51bGx9ZnVuY3Rpb24gY2MoYSxiKXtmb3IodmFyIGM9MDtjPGEudGV4dFN0cmVhbXMubGVuZ3RoO2MrKylpZihhLnRleHRTdHJlYW1zW2NdLmlkPT1iLmlkKXJldHVybiBhLnRleHRTdHJlYW1zW2NdO3JldHVybiBudWxsfVxuZnVuY3Rpb24gJGIoYSl7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZhLmFsbG93ZWRCeUtleVN5c3RlbX0pfWZ1bmN0aW9uIGRjKGEsYixjKXt2YXIgZD0kYihhLnZhcmlhbnRzKSxlPWQuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmxhbmd1YWdlPT1kWzBdLmxhbmd1YWdlfSk7YT1kLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5wcmltYXJ5fSk7YS5sZW5ndGgmJihlPWEpO2lmKGIpe3ZhciBmPVNiKGIpO1tSYixRYiwwXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPSExO2QuZm9yRWFjaChmdW5jdGlvbihkKXtmPVNiKGYpO3ZhciBnPVNiKGQubGFuZ3VhZ2UpO1BiKGEsZixnKSYmKGI/ZS5wdXNoKGQpOihlPVtkXSxiPSEwKSxjJiYoYy5hdWRpbz0hMCkpfSl9KX1yZXR1cm4gZX1cbmZ1bmN0aW9uIGVjKGEsYixjKXt2YXIgZD1hLnRleHRTdHJlYW1zLGU9ZDthPWQuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLnByaW1hcnl9KTthLmxlbmd0aCYmKGU9YSk7aWYoYil7dmFyIGY9U2IoYik7W1JiLFFiLDBdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ITE7ZC5mb3JFYWNoKGZ1bmN0aW9uKGQpe3ZhciBnPVNiKGQubGFuZ3VhZ2UpO1BiKGEsZixnKSYmKGI/ZS5wdXNoKGQpOihlPVtkXSxiPSEwKSxjJiYoYy50ZXh0PSEwKSl9KX0pfXJldHVybiBlfWZ1bmN0aW9uIGZjKGEsYixjKXtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdLmF1ZGlvPT1hJiZjW2RdLnZpZGVvPT1iKXJldHVybiBjW2RdO3JldHVybiBudWxsfVxuZnVuY3Rpb24gZ2MoYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gbnVsbD09YT9udWxsPT1iOmIuaWQ9PWF9Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspaWYoZChhLGNbZV0uYXVkaW8pJiZkKGIsY1tlXS52aWRlbykpcmV0dXJuIGNbZV07cmV0dXJuIG51bGx9ZnVuY3Rpb24gWWIoYSxiKXt2YXIgYz1hO2ImJihjKz0nOyBjb2RlY3M9XCInK2IrJ1wiJyk7cmV0dXJuIGN9ZnVuY3Rpb24gaGMoYSxiKXtmb3IodmFyIGM9YS5wZXJpb2RzLmxlbmd0aC0xOzA8YzstLWMpaWYoYj49YS5wZXJpb2RzW2NdLnN0YXJ0VGltZSlyZXR1cm4gYztyZXR1cm4gMH1cbmZ1bmN0aW9uIGljKGEsYil7Zm9yKHZhciBjPTA7YzxhLnBlcmlvZHMubGVuZ3RoOysrYyl7dmFyIGQ9YS5wZXJpb2RzW2NdO2lmKFwidGV4dFwiPT1iLnR5cGUpZm9yKHZhciBlPTA7ZTxkLnRleHRTdHJlYW1zLmxlbmd0aDsrK2Upe2lmKGQudGV4dFN0cmVhbXNbZV09PWIpcmV0dXJuIGN9ZWxzZSBmb3IoZT0wO2U8ZC52YXJpYW50cy5sZW5ndGg7KytlKXt2YXIgZj1kLnZhcmlhbnRzW2VdO2lmKGYuYXVkaW89PWJ8fGYudmlkZW89PWJ8fGYudmlkZW8mJmYudmlkZW8udHJpY2tNb2RlVmlkZW89PWIpcmV0dXJuIGN9fXJldHVybi0xfTtmdW5jdGlvbiBIKCl7dGhpcy5mPW51bGw7dGhpcy5iPSExO3RoaXMuYT1uZXcgZmE7dGhpcy5oPVtdO3RoaXMuZz1bXTt0aGlzLmo9ITE7dGhpcy5jPW51bGw7dGhpcy5pPXttaW5XaWR0aDowLG1heFdpZHRoOkluZmluaXR5LG1pbkhlaWdodDowLG1heEhlaWdodDpJbmZpbml0eSxtaW5QaXhlbHM6MCxtYXhQaXhlbHM6SW5maW5pdHksbWluQmFuZHdpZHRoOjAsbWF4QmFuZHdpZHRoOkluZmluaXR5fX1tKFwic2hha2EuYWJyLlNpbXBsZUFick1hbmFnZXJcIixIKTtILnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5mPW51bGw7dGhpcy5iPSExO3RoaXMuaD1bXTt0aGlzLmc9W107dGhpcy5jPW51bGx9O0gucHJvdG90eXBlLnN0b3A9SC5wcm90b3R5cGUuc3RvcDtILnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEpe3RoaXMuZj1hfTtILnByb3RvdHlwZS5pbml0PUgucHJvdG90eXBlLmluaXQ7XG5ILnByb3RvdHlwZS5jaG9vc2VTdHJlYW1zPWZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKC0xPGEuaW5kZXhPZihcImF1ZGlvXCIpfHwtMTxhLmluZGV4T2YoXCJ2aWRlb1wiKSl7dmFyIGM9dGhpcy5oO3ZhciBkPWpjKHRoaXMuaSxjKTt2YXIgZT10aGlzLmEuZ2V0QmFuZHdpZHRoRXN0aW1hdGUoKTtpZihjLmxlbmd0aCYmIWQubGVuZ3RoKXRocm93IG5ldyB0KDIsNCw0MDEyKTtmb3IodmFyIGM9ZFswXSxmPTA7ZjxkLmxlbmd0aDsrK2Ype3ZhciBnPWRbZl0saD0oZFtmKzFdfHx7YmFuZHdpZHRoOkluZmluaXR5fSkuYmFuZHdpZHRoLy44NTtlPj1nLmJhbmR3aWR0aC8uOTUmJmU8PWgmJihjPWcpfShkPWMpJiZkLnZpZGVvJiYoYi52aWRlbz1kLnZpZGVvKTtkJiZkLmF1ZGlvJiYoYi5hdWRpbz1kLmF1ZGlvKX0tMTxhLmluZGV4T2YoXCJ0ZXh0XCIpJiYoYi50ZXh0PXRoaXMuZ1swXSk7dGhpcy5jPURhdGUubm93KCk7cmV0dXJuIGJ9O0gucHJvdG90eXBlLmNob29zZVN0cmVhbXM9SC5wcm90b3R5cGUuY2hvb3NlU3RyZWFtcztcbkgucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuYj0hMH07SC5wcm90b3R5cGUuZW5hYmxlPUgucHJvdG90eXBlLmVuYWJsZTtILnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5iPSExfTtILnByb3RvdHlwZS5kaXNhYmxlPUgucHJvdG90eXBlLmRpc2FibGU7SC5wcm90b3R5cGUuc2VnbWVudERvd25sb2FkZWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmE7aWYoISgxNkUzPmIpKXt2YXIgZD04RTMqYi9hLGU9YS8xRTM7Yy5hKz1iO2RhKGMuYyxlLGQpO2RhKGMuZixlLGQpfWlmKG51bGwhPXRoaXMuYyYmdGhpcy5iKWE6e2lmKCF0aGlzLmope2lmKCEoMTI4RTM8PXRoaXMuYS5hKSlicmVhayBhO3RoaXMuaj0hMH1lbHNlIGlmKDhFMz5EYXRlLm5vdygpLXRoaXMuYylicmVhayBhO2M9dGhpcy5jaG9vc2VTdHJlYW1zKFtcImF1ZGlvXCIsXCJ2aWRlb1wiXSk7dGhpcy5hLmdldEJhbmR3aWR0aEVzdGltYXRlKCk7dGhpcy5mKGMpfX07XG5ILnByb3RvdHlwZS5zZWdtZW50RG93bmxvYWRlZD1ILnByb3RvdHlwZS5zZWdtZW50RG93bmxvYWRlZDtILnByb3RvdHlwZS5nZXRCYW5kd2lkdGhFc3RpbWF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuZ2V0QmFuZHdpZHRoRXN0aW1hdGUoKX07SC5wcm90b3R5cGUuZ2V0QmFuZHdpZHRoRXN0aW1hdGU9SC5wcm90b3R5cGUuZ2V0QmFuZHdpZHRoRXN0aW1hdGU7SC5wcm90b3R5cGUuc2V0RGVmYXVsdEVzdGltYXRlPWZ1bmN0aW9uKGEpe3RoaXMuYS5zZXREZWZhdWx0RXN0aW1hdGUoYSl9O0gucHJvdG90eXBlLnNldERlZmF1bHRFc3RpbWF0ZT1ILnByb3RvdHlwZS5zZXREZWZhdWx0RXN0aW1hdGU7SC5wcm90b3R5cGUuc2V0UmVzdHJpY3Rpb25zPWZ1bmN0aW9uKGEpe3RoaXMuaT1hfTtILnByb3RvdHlwZS5zZXRSZXN0cmljdGlvbnM9SC5wcm90b3R5cGUuc2V0UmVzdHJpY3Rpb25zO0gucHJvdG90eXBlLnNldFZhcmlhbnRzPWZ1bmN0aW9uKGEpe3RoaXMuaD1hfTtcbkgucHJvdG90eXBlLnNldFZhcmlhbnRzPUgucHJvdG90eXBlLnNldFZhcmlhbnRzO0gucHJvdG90eXBlLnNldFRleHRTdHJlYW1zPWZ1bmN0aW9uKGEpe3RoaXMuZz1hfTtILnByb3RvdHlwZS5zZXRUZXh0U3RyZWFtcz1ILnByb3RvdHlwZS5zZXRUZXh0U3RyZWFtcztmdW5jdGlvbiBqYyhhLGIpe3JldHVybiBiLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gVWIoYixhLHt3aWR0aDpJbmZpbml0eSxoZWlnaHQ6SW5maW5pdHl9KX0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5iYW5kd2lkdGgtYi5iYW5kd2lkdGh9KX07ZnVuY3Rpb24gSShhLGIpe3ZhciBjPWJ8fHt9LGQ7Zm9yKGQgaW4gYyl0aGlzW2RdPWNbZF07dGhpcy5kZWZhdWx0UHJldmVudGVkPXRoaXMuY2FuY2VsYWJsZT10aGlzLmJ1YmJsZXM9ITE7dGhpcy50aW1lU3RhbXA9d2luZG93LnBlcmZvcm1hbmNlJiZ3aW5kb3cucGVyZm9ybWFuY2Uubm93P3dpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpO3RoaXMudHlwZT1hO3RoaXMuaXNUcnVzdGVkPSExO3RoaXMudGFyZ2V0PXRoaXMuY3VycmVudFRhcmdldD1udWxsO3RoaXMuYT0hMX1JLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsYWJsZSYmKHRoaXMuZGVmYXVsdFByZXZlbnRlZD0hMCl9O0kucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe3RoaXMuYT0hMH07SS5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7fTt2YXIga2M9XCJlbmRlZCBwbGF5IHBsYXlpbmcgcGF1c2UgcGF1c2luZyByYXRlY2hhbmdlIHNlZWtlZCBzZWVraW5nIHRpbWV1cGRhdGUgdm9sdW1lY2hhbmdlXCIuc3BsaXQoXCIgXCIpLGxjPVwiYnVmZmVyZWQgY3VycmVudFRpbWUgZHVyYXRpb24gZW5kZWQgbG9vcCBtdXRlZCBwYXVzZWQgcGxheWJhY2tSYXRlIHNlZWtpbmcgdmlkZW9IZWlnaHQgdmlkZW9XaWR0aCB2b2x1bWVcIi5zcGxpdChcIiBcIiksbWM9W1wibG9vcFwiLFwicGxheWJhY2tSYXRlXCJdLG5jPVtcInBhdXNlXCIsXCJwbGF5XCJdLG9jPVwiYWRhcHRhdGlvbiBidWZmZXJpbmcgZW1zZyBlcnJvciBsb2FkaW5nIHVubG9hZGluZyB0ZXh0dHJhY2t2aXNpYmlsaXR5IHRpbWVsaW5lcmVnaW9uYWRkZWQgdGltZWxpbmVyZWdpb25lbnRlciB0aW1lbGluZXJlZ2lvbmV4aXQgdHJhY2tzY2hhbmdlZFwiLnNwbGl0KFwiIFwiKSxwYz1cImRybUluZm8gZ2V0QXVkaW9MYW5ndWFnZXMgZ2V0Q29uZmlndXJhdGlvbiBnZXRFeHBpcmF0aW9uIGdldE1hbmlmZXN0VXJpIGdldFBsYXliYWNrUmF0ZSBnZXRQbGF5aGVhZFRpbWVBc0RhdGUgZ2V0VGV4dExhbmd1YWdlcyBnZXRUZXh0VHJhY2tzIGdldFRyYWNrcyBnZXRTdGF0cyBnZXRWYXJpYW50VHJhY2tzIGlzQnVmZmVyaW5nIGlzSW5Qcm9ncmVzcyBpc0xpdmUgaXNUZXh0VHJhY2tWaXNpYmxlIGtleVN5c3RlbSBzZWVrUmFuZ2VcIi5zcGxpdChcIiBcIiksXG5xYz1bW1wiZ2V0Q29uZmlndXJhdGlvblwiLFwiY29uZmlndXJlXCJdXSxyYz1bW1wiaXNUZXh0VHJhY2tWaXNpYmxlXCIsXCJzZXRUZXh0VHJhY2tWaXNpYmlsaXR5XCJdXSxzYz1cImFkZFRleHRUcmFjayBjYW5jZWxUcmlja1BsYXkgY29uZmlndXJlIHJlc2V0Q29uZmlndXJhdGlvbiBzZWxlY3RBdWRpb0xhbmd1YWdlIHNlbGVjdFRleHRMYW5ndWFnZSBzZWxlY3RUZXh0VHJhY2sgc2VsZWN0VHJhY2sgc2VsZWN0VmFyaWFudFRyYWNrIHNldFRleHRUcmFja1Zpc2liaWxpdHkgdHJpY2tQbGF5XCIuc3BsaXQoXCIgXCIpLHVjPVtcImxvYWRcIixcInVubG9hZFwiXTtcbmZ1bmN0aW9uIHZjKGEpe3JldHVybiBKU09OLnN0cmluZ2lmeShhLGZ1bmN0aW9uKGEsYyl7aWYoXCJtYW5hZ2VyXCIhPWEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGMpe2lmKGMgaW5zdGFuY2VvZiBFdmVudHx8YyBpbnN0YW5jZW9mIEkpe3ZhciBiPXt9LGU7Zm9yKGUgaW4gYyl7dmFyIGY9Y1tlXTtmJiZcIm9iamVjdFwiPT10eXBlb2YgZnx8ZSBpbiBFdmVudHx8KGJbZV09Zil9cmV0dXJuIGJ9aWYoYyBpbnN0YW5jZW9mIFRpbWVSYW5nZXMpZm9yKGI9e19fdHlwZV9fOlwiVGltZVJhbmdlc1wiLGxlbmd0aDpjLmxlbmd0aCxzdGFydDpbXSxlbmQ6W119LGU9MDtlPGMubGVuZ3RoOysrZSliLnN0YXJ0LnB1c2goYy5zdGFydChlKSksYi5lbmQucHVzaChjLmVuZChlKSk7ZWxzZSBiPVwibnVtYmVyXCI9PXR5cGVvZiBjP2lzTmFOKGMpP1wiTmFOXCI6aXNGaW5pdGUoYyk/YzowPmM/XCItSW5maW5pdHlcIjpcIkluZmluaXR5XCI6YztyZXR1cm4gYn19KX1cbmZ1bmN0aW9uIHdjKGEpe3JldHVybiBKU09OLnBhcnNlKGEsZnVuY3Rpb24oYSxjKXtyZXR1cm5cIk5hTlwiPT1jP05hTjpcIi1JbmZpbml0eVwiPT1jPy1JbmZpbml0eTpcIkluZmluaXR5XCI9PWM/SW5maW5pdHk6YyYmXCJvYmplY3RcIj09dHlwZW9mIGMmJlwiVGltZVJhbmdlc1wiPT1jLl9fdHlwZV9fP3hjKGMpOmN9KX1mdW5jdGlvbiB4YyhhKXtyZXR1cm57bGVuZ3RoOmEubGVuZ3RoLHN0YXJ0OmZ1bmN0aW9uKGIpe3JldHVybiBhLnN0YXJ0W2JdfSxlbmQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEuZW5kW2JdfX19O2Z1bmN0aW9uIHljKGEsYixjLGQsZSl7dGhpcy5KPWE7dGhpcy5sPWI7dGhpcy5CPWM7dGhpcy5HPWQ7dGhpcy52PWU7dGhpcy5jPXRoaXMuaj10aGlzLmg9ITE7dGhpcy5BPVwiXCI7dGhpcy5hPXRoaXMuaT1udWxsO3RoaXMuYj17dmlkZW86e30scGxheWVyOnt9fTt0aGlzLm89MDt0aGlzLmY9e307dGhpcy5nPW51bGx9az15Yy5wcm90b3R5cGU7ay5tPWZ1bmN0aW9uKCl7emModGhpcyk7dGhpcy5hJiYodGhpcy5hLmxlYXZlKGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pLHRoaXMuYT1udWxsKTt0aGlzLkc9dGhpcy5CPXRoaXMubD1udWxsO3RoaXMuYz10aGlzLmo9dGhpcy5oPSExO3RoaXMuZz10aGlzLmY9dGhpcy5iPXRoaXMuaT1udWxsO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07ay5WPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY307ay5EYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkF9O1xuay5pbml0PWZ1bmN0aW9uKCl7aWYod2luZG93LmNocm9tZSYmY2hyb21lLmNhc3QmJmNocm9tZS5jYXN0LmlzQXZhaWxhYmxlKXtkZWxldGUgd2luZG93Ll9fb25HQ2FzdEFwaUF2YWlsYWJsZTt0aGlzLmg9ITA7dGhpcy5sKCk7dmFyIGE9bmV3IGNocm9tZS5jYXN0LlNlc3Npb25SZXF1ZXN0KHRoaXMuSiksYT1uZXcgY2hyb21lLmNhc3QuQXBpQ29uZmlnKGEsdGhpcy5lZC5iaW5kKHRoaXMpLHRoaXMucWQuYmluZCh0aGlzKSxcIm9yaWdpbl9zY29wZWRcIik7Y2hyb21lLmNhc3QuaW5pdGlhbGl6ZShhLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pfWVsc2Ugd2luZG93Ll9fb25HQ2FzdEFwaUF2YWlsYWJsZT1mdW5jdGlvbihhKXthJiZ0aGlzLmluaXQoKX0uYmluZCh0aGlzKX07ay5HYj1mdW5jdGlvbihhKXt0aGlzLmk9YTt0aGlzLmMmJkFjKHRoaXMse3R5cGU6XCJhcHBEYXRhXCIsYXBwRGF0YTp0aGlzLml9KX07XG5rLmNhc3Q9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoMSw4LDhFMykpO2lmKCF0aGlzLmopcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyB0KDEsOCw4MDAxKSk7aWYodGhpcy5jKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgdCgxLDgsODAwMikpO3RoaXMuZz1uZXcgQTtjaHJvbWUuY2FzdC5yZXF1ZXN0U2Vzc2lvbih0aGlzLnpiLmJpbmQodGhpcyxhKSx0aGlzLmFjLmJpbmQodGhpcykpO3JldHVybiB0aGlzLmd9O2suJGE9ZnVuY3Rpb24oKXt0aGlzLmMmJih6Yyh0aGlzKSx0aGlzLmEmJih0aGlzLmEuc3RvcChmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KSx0aGlzLmE9bnVsbCkpfTtcbmsuZ2V0PWZ1bmN0aW9uKGEsYil7aWYoXCJ2aWRlb1wiPT1hKXtpZigwPD1uYy5pbmRleE9mKGIpKXJldHVybiB0aGlzLm5jLmJpbmQodGhpcyxhLGIpfWVsc2UgaWYoXCJwbGF5ZXJcIj09YSl7aWYoMDw9c2MuaW5kZXhPZihiKSlyZXR1cm4gdGhpcy5uYy5iaW5kKHRoaXMsYSxiKTtpZigwPD11Yy5pbmRleE9mKGIpKXJldHVybiB0aGlzLk1kLmJpbmQodGhpcyxhLGIpO2lmKDA8PXBjLmluZGV4T2YoYikpcmV0dXJuIHRoaXMuamMuYmluZCh0aGlzLGEsYil9cmV0dXJuIHRoaXMuamMoYSxiKX07ay5zZXQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYlthXVtiXT1jO0FjKHRoaXMse3R5cGU6XCJzZXRcIix0YXJnZXROYW1lOmEscHJvcGVydHk6Yix2YWx1ZTpjfSl9O1xuay56Yj1mdW5jdGlvbihhLGIpe3RoaXMuYT1iO3RoaXMuYS5hZGRVcGRhdGVMaXN0ZW5lcih0aGlzLmJjLmJpbmQodGhpcykpO3RoaXMuYS5hZGRNZXNzYWdlTGlzdGVuZXIoXCJ1cm46eC1jYXN0OmNvbS5nb29nbGUuc2hha2EudjJcIix0aGlzLmtkLmJpbmQodGhpcykpO3RoaXMuYmMoKTtBYyh0aGlzLHt0eXBlOlwiaW5pdFwiLGluaXRTdGF0ZTphLGFwcERhdGE6dGhpcy5pfSk7dGhpcy5nLnJlc29sdmUoKX07ay5hYz1mdW5jdGlvbihhKXt2YXIgYj04MDAzO3N3aXRjaChhLmNvZGUpe2Nhc2UgXCJjYW5jZWxcIjpiPTgwMDQ7YnJlYWs7Y2FzZSBcInRpbWVvdXRcIjpiPTgwMDU7YnJlYWs7Y2FzZSBcInJlY2VpdmVyX3VuYXZhaWxhYmxlXCI6Yj04MDA2fXRoaXMuZy5yZWplY3QobmV3IHQoMiw4LGIsYSkpfTtrLmpjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYlthXVtiXX07XG5rLm5jPWZ1bmN0aW9uKGEsYil7QWModGhpcyx7dHlwZTpcImNhbGxcIix0YXJnZXROYW1lOmEsbWV0aG9kTmFtZTpiLGFyZ3M6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpfSl9O2suTWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZD1uZXcgQSxlPXRoaXMuby50b1N0cmluZygpO3RoaXMubysrO3RoaXMuZltlXT1kO0FjKHRoaXMse3R5cGU6XCJhc3luY0NhbGxcIix0YXJnZXROYW1lOmEsbWV0aG9kTmFtZTpiLGFyZ3M6YyxpZDplfSk7cmV0dXJuIGR9O2suZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52KCk7dGhpcy5nPW5ldyBBO3RoaXMuemIoYixhKX07ay5xZD1mdW5jdGlvbihhKXt0aGlzLmo9XCJhdmFpbGFibGVcIj09YTt0aGlzLmwoKX07XG5rLmJjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hP1wiY29ubmVjdGVkXCI9PXRoaXMuYS5zdGF0dXM6ITE7aWYodGhpcy5jJiYhYSl7dGhpcy5HKCk7Zm9yKHZhciBiIGluIHRoaXMuYil0aGlzLmJbYl09e307emModGhpcyl9dGhpcy5BPSh0aGlzLmM9YSk/dGhpcy5hLnJlY2VpdmVyLmZyaWVuZGx5TmFtZTpcIlwiO3RoaXMubCgpfTtmdW5jdGlvbiB6YyhhKXtmb3IodmFyIGIgaW4gYS5mKXt2YXIgYz1hLmZbYl07ZGVsZXRlIGEuZltiXTtjLnJlamVjdChuZXcgdCgxLDcsN0UzKSl9fVxuay5rZD1mdW5jdGlvbihhLGIpe3ZhciBjPXdjKGIpO3N3aXRjaChjLnR5cGUpe2Nhc2UgXCJldmVudFwiOnZhciBkPWMudGFyZ2V0TmFtZSxlPWMuZXZlbnQ7dGhpcy5CKGQsbmV3IEkoZS50eXBlLGUpKTticmVhaztjYXNlIFwidXBkYXRlXCI6ZT1jLnVwZGF0ZTtmb3IoZCBpbiBlKXt2YXIgYz10aGlzLmJbZF18fHt9O2ZvcihmIGluIGVbZF0pY1tmXT1lW2RdW2ZdfWJyZWFrO2Nhc2UgXCJhc3luY0NvbXBsZXRlXCI6ZD1jLmlkO3ZhciBmPWMuZXJyb3I7Yz10aGlzLmZbZF07ZGVsZXRlIHRoaXMuZltkXTtpZihjKWlmKGYpe2Q9bmV3IHQoZi5zZXZlcml0eSxmLmNhdGVnb3J5LGYuY29kZSk7Zm9yKGUgaW4gZilkW2VdPWZbZV07Yy5yZWplY3QoZCl9ZWxzZSBjLnJlc29sdmUoKX19O2Z1bmN0aW9uIEFjKGEsYil7dmFyIGM9dmMoYik7YS5hLnNlbmRNZXNzYWdlKFwidXJuOngtY2FzdDpjb20uZ29vZ2xlLnNoYWthLnYyXCIsYyxmdW5jdGlvbigpe30sZ2EpfTtmdW5jdGlvbiBwKCl7dGhpcy5sYj1uZXcgSWE7dGhpcy5UYT10aGlzfXAucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmxiLnB1c2goYSxiKX07cC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3RoaXMubGIucmVtb3ZlKGEsYil9O3AucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubGIuZ2V0KGEudHlwZSl8fFtdLGM9MDtjPGIubGVuZ3RoOysrYyl7YS50YXJnZXQ9dGhpcy5UYTthLmN1cnJlbnRUYXJnZXQ9dGhpcy5UYTt2YXIgZD1iW2NdO3RyeXtkLmhhbmRsZUV2ZW50P2QuaGFuZGxlRXZlbnQoYSk6ZC5jYWxsKHRoaXMsYSl9Y2F0Y2goZSl7fWlmKGEuYSlicmVha31yZXR1cm4gYS5kZWZhdWx0UHJldmVudGVkfTtmdW5jdGlvbiBKKGEsYixjKXtwLmNhbGwodGhpcyk7dGhpcy5jPWE7dGhpcy5iPWI7dGhpcy5oPXRoaXMuZj10aGlzLmc9dGhpcy5pPXRoaXMuaj1udWxsO3RoaXMuYT1uZXcgeWMoYyx0aGlzLmNlLmJpbmQodGhpcyksdGhpcy5kZS5iaW5kKHRoaXMpLHRoaXMuZWUuYmluZCh0aGlzKSx0aGlzLlRiLmJpbmQodGhpcykpO0JjKHRoaXMpfWJhKEopO20oXCJzaGFrYS5jYXN0LkNhc3RQcm94eVwiLEopO0oucHJvdG90eXBlLm09ZnVuY3Rpb24oYSl7YSYmdGhpcy5hJiZ0aGlzLmEuJGEoKTthPVt0aGlzLmg/dGhpcy5oLm0oKTpudWxsLHRoaXMuYj90aGlzLmIubSgpOm51bGwsdGhpcy5hP3RoaXMuYS5tKCk6bnVsbF07dGhpcy5hPXRoaXMuaD10aGlzLmk9dGhpcy5qPXRoaXMuYj10aGlzLmM9bnVsbDtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9O0oucHJvdG90eXBlLmRlc3Ryb3k9Si5wcm90b3R5cGUubTtKLnByb3RvdHlwZS5YYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmp9O1xuSi5wcm90b3R5cGUuZ2V0VmlkZW89Si5wcm90b3R5cGUuWGM7Si5wcm90b3R5cGUuUmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pfTtKLnByb3RvdHlwZS5nZXRQbGF5ZXI9Si5wcm90b3R5cGUuUmM7Si5wcm90b3R5cGUuRGM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hP3RoaXMuYS5oJiZ0aGlzLmEuajohMX07Si5wcm90b3R5cGUuY2FuQ2FzdD1KLnByb3RvdHlwZS5EYztKLnByb3RvdHlwZS5WPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYT90aGlzLmEuVigpOiExfTtKLnByb3RvdHlwZS5pc0Nhc3Rpbmc9Si5wcm90b3R5cGUuVjtKLnByb3RvdHlwZS5EYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/dGhpcy5hLkRiKCk6XCJcIn07Si5wcm90b3R5cGUucmVjZWl2ZXJOYW1lPUoucHJvdG90eXBlLkRiO0oucHJvdG90eXBlLmNhc3Q9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLlRiKCk7cmV0dXJuIHRoaXMuYS5jYXN0KGEpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iLmhiKCl9LmJpbmQodGhpcykpfTtcbkoucHJvdG90eXBlLmNhc3Q9Si5wcm90b3R5cGUuY2FzdDtKLnByb3RvdHlwZS5HYj1mdW5jdGlvbihhKXt0aGlzLmEuR2IoYSl9O0oucHJvdG90eXBlLnNldEFwcERhdGE9Si5wcm90b3R5cGUuR2I7Si5wcm90b3R5cGUua2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE7aWYoYS5jKXt2YXIgYj1hLnYoKTtjaHJvbWUuY2FzdC5yZXF1ZXN0U2Vzc2lvbihhLnpiLmJpbmQoYSxiKSxhLmFjLmJpbmQoYSkpfX07Si5wcm90b3R5cGUuc3VnZ2VzdERpc2Nvbm5lY3Q9Si5wcm90b3R5cGUua2U7Si5wcm90b3R5cGUuJGE9ZnVuY3Rpb24oKXt0aGlzLmEuJGEoKX07Si5wcm90b3R5cGUuZm9yY2VEaXNjb25uZWN0PUoucHJvdG90eXBlLiRhO1xuZnVuY3Rpb24gQmMoYSl7YS5hLmluaXQoKTthLmg9bmV3IEQ7a2MuZm9yRWFjaChmdW5jdGlvbihhKXtFKHRoaXMuaCx0aGlzLmMsYSx0aGlzLnJlLmJpbmQodGhpcykpfS5iaW5kKGEpKTtvYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe0UodGhpcy5oLHRoaXMuYixhLHRoaXMuR2QuYmluZCh0aGlzKSl9LmJpbmQoYSkpO2Euaj17fTtmb3IodmFyIGIgaW4gYS5jKU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLmosYix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OmEucWUuYmluZChhLGIpLHNldDphLnNlLmJpbmQoYSxiKX0pO2EuaT17fTtmb3IoYiBpbiBhLmIpT2JqZWN0LmRlZmluZVByb3BlcnR5KGEuaSxiLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6YS5GZC5iaW5kKGEsYil9KTthLmc9bmV3IHA7YS5nLlRhPWEuajthLmY9bmV3IHA7YS5mLlRhPWEuaX1rPUoucHJvdG90eXBlO1xuay5UYj1mdW5jdGlvbigpe3ZhciBhPXt2aWRlbzp7fSxwbGF5ZXI6e30scGxheWVyQWZ0ZXJMb2FkOnt9LG1hbmlmZXN0OnRoaXMuYi5ZYSxzdGFydFRpbWU6bnVsbH07dGhpcy5jLnBhdXNlKCk7bWMuZm9yRWFjaChmdW5jdGlvbihiKXthLnZpZGVvW2JdPXRoaXMuY1tiXX0uYmluZCh0aGlzKSk7dGhpcy5jLmVuZGVkfHwoYS5zdGFydFRpbWU9dGhpcy5jLmN1cnJlbnRUaW1lKTtxYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPWJbMV07Yj10aGlzLmJbYlswXV0oKTthLnBsYXllcltjXT1ifS5iaW5kKHRoaXMpKTtyYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPWJbMV07Yj10aGlzLmJbYlswXV0oKTthLnBsYXllckFmdGVyTG9hZFtjXT1ifS5iaW5kKHRoaXMpKTtyZXR1cm4gYX07ay5jZT1mdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSShcImNhc3RzdGF0dXNjaGFuZ2VkXCIpKX07XG5rLmVlPWZ1bmN0aW9uKCl7cWMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hWzFdO2E9dGhpcy5hLmdldChcInBsYXllclwiLGFbMF0pKCk7dGhpcy5iW2JdKGEpfS5iaW5kKHRoaXMpKTt2YXIgYT10aGlzLmEuZ2V0KFwicGxheWVyXCIsXCJnZXRNYW5pZmVzdFVyaVwiKSgpLGI9dGhpcy5hLmdldChcInZpZGVvXCIsXCJlbmRlZFwiKSxjPVByb21pc2UucmVzb2x2ZSgpLGQ9dGhpcy5jLmF1dG9wbGF5LGU9bnVsbDtifHwoZT10aGlzLmEuZ2V0KFwidmlkZW9cIixcImN1cnJlbnRUaW1lXCIpKTthJiYodGhpcy5jLmF1dG9wbGF5PSExLGM9dGhpcy5iLmxvYWQoYSxlKSxjW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5iLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJlcnJvclwiLHtkZXRhaWw6YX0pKX0uYmluZCh0aGlzKSkpO3ZhciBmPXt9O21jLmZvckVhY2goZnVuY3Rpb24oYSl7ZlthXT10aGlzLmEuZ2V0KFwidmlkZW9cIixhKX0uYmluZCh0aGlzKSk7Yy50aGVuKGZ1bmN0aW9uKCl7bWMuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmNbYV09XG5mW2FdfS5iaW5kKHRoaXMpKTtyYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWFbMV07YT10aGlzLmEuZ2V0KFwicGxheWVyXCIsYVswXSkoKTt0aGlzLmJbYl0oYSl9LmJpbmQodGhpcykpO3RoaXMuYy5hdXRvcGxheT1kO2EmJnRoaXMuYy5wbGF5KCl9LmJpbmQodGhpcykpfTtcbmsucWU9ZnVuY3Rpb24oYSl7aWYoXCJhZGRFdmVudExpc3RlbmVyXCI9PWEpcmV0dXJuIHRoaXMuZy5hZGRFdmVudExpc3RlbmVyLmJpbmQodGhpcy5nKTtpZihcInJlbW92ZUV2ZW50TGlzdGVuZXJcIj09YSlyZXR1cm4gdGhpcy5nLnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZCh0aGlzLmcpO2lmKHRoaXMuYS5WKCkmJiFPYmplY3Qua2V5cyh0aGlzLmEuYi52aWRlbykubGVuZ3RoKXt2YXIgYj10aGlzLmNbYV07aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYilyZXR1cm4gYn1yZXR1cm4gdGhpcy5hLlYoKT90aGlzLmEuZ2V0KFwidmlkZW9cIixhKTooYj10aGlzLmNbYV0sXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKGI9Yi5iaW5kKHRoaXMuYykpLGIpfTtrLnNlPWZ1bmN0aW9uKGEsYil7dGhpcy5hLlYoKT90aGlzLmEuc2V0KFwidmlkZW9cIixhLGIpOnRoaXMuY1thXT1ifTtrLnJlPWZ1bmN0aW9uKGEpe3RoaXMuYS5WKCl8fHRoaXMuZy5kaXNwYXRjaEV2ZW50KG5ldyBJKGEudHlwZSxhKSl9O1xuay5GZD1mdW5jdGlvbihhKXtyZXR1cm5cImFkZEV2ZW50TGlzdGVuZXJcIj09YT90aGlzLmYuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMuZik6XCJyZW1vdmVFdmVudExpc3RlbmVyXCI9PWE/dGhpcy5mLnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZCh0aGlzLmYpOlwiZ2V0TmV0d29ya2luZ0VuZ2luZVwiPT1hP3RoaXMuYi5VYi5iaW5kKHRoaXMuYik6dGhpcy5hLlYoKSYmIU9iamVjdC5rZXlzKHRoaXMuYS5iLnZpZGVvKS5sZW5ndGgmJjA8PXBjLmluZGV4T2YoYSl8fCF0aGlzLmEuVigpPyhhPXRoaXMuYlthXSxhLmJpbmQodGhpcy5iKSk6dGhpcy5hLmdldChcInBsYXllclwiLGEpfTtrLkdkPWZ1bmN0aW9uKGEpe3RoaXMuYS5WKCl8fHRoaXMuZi5kaXNwYXRjaEV2ZW50KGEpfTtrLmRlPWZ1bmN0aW9uKGEsYil7dGhpcy5hLlYoKSYmKFwidmlkZW9cIj09YT90aGlzLmcuZGlzcGF0Y2hFdmVudChiKTpcInBsYXllclwiPT1hJiZ0aGlzLmYuZGlzcGF0Y2hFdmVudChiKSl9O2Z1bmN0aW9uIEsoYSxiLGMsZCl7cC5jYWxsKHRoaXMpO3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMuaj17dmlkZW86YSxwbGF5ZXI6Yn07dGhpcy5sPWN8fGZ1bmN0aW9uKCl7fTt0aGlzLm89ZHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3RoaXMuaT0hMTt0aGlzLmY9ITA7dGhpcy5oPXRoaXMuZz10aGlzLmM9bnVsbDtDYyh0aGlzKX1iYShLKTttKFwic2hha2EuY2FzdC5DYXN0UmVjZWl2ZXJcIixLKTtLLnByb3RvdHlwZS5pc0Nvbm5lY3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLml9O0sucHJvdG90eXBlLmlzQ29ubmVjdGVkPUsucHJvdG90eXBlLmlzQ29ubmVjdGVkO0sucHJvdG90eXBlLlpjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZn07Sy5wcm90b3R5cGUuaXNJZGxlPUsucHJvdG90eXBlLlpjO1xuSy5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYj90aGlzLmIubSgpOlByb21pc2UucmVzb2x2ZSgpO251bGwhPXRoaXMuaCYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmgpO3RoaXMubD10aGlzLmo9dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuaT0hMTt0aGlzLmY9ITA7dGhpcy5oPXRoaXMuZz10aGlzLmM9bnVsbDtyZXR1cm4gYS50aGVuKGZ1bmN0aW9uKCl7Y2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCkuc3RvcCgpfSl9O0sucHJvdG90eXBlLmRlc3Ryb3k9Sy5wcm90b3R5cGUubTtcbmZ1bmN0aW9uIENjKGEpe3ZhciBiPWNhc3QucmVjZWl2ZXIuQ2FzdFJlY2VpdmVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO2Iub25TZW5kZXJDb25uZWN0ZWQ9YS5oYy5iaW5kKGEpO2Iub25TZW5kZXJEaXNjb25uZWN0ZWQ9YS5oYy5iaW5kKGEpO2Iub25TeXN0ZW1Wb2x1bWVDaGFuZ2VkPWEuS2MuYmluZChhKTthLmc9Yi5nZXRDYXN0TWVzc2FnZUJ1cyhcInVybjp4LWNhc3Q6Y29tLmdvb2dsZS5jYXN0Lm1lZGlhXCIpO2EuZy5vbk1lc3NhZ2U9YS5mZC5iaW5kKGEpO2EuYz1iLmdldENhc3RNZXNzYWdlQnVzKFwidXJuOngtY2FzdDpjb20uZ29vZ2xlLnNoYWthLnYyXCIpO2EuYy5vbk1lc3NhZ2U9YS50ZC5iaW5kKGEpO2Iuc3RhcnQoKTtrYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuYS5hZGRFdmVudExpc3RlbmVyKGEsdGhpcy5rYy5iaW5kKHRoaXMsXCJ2aWRlb1wiKSl9LmJpbmQoYSkpO29jLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5iLmFkZEV2ZW50TGlzdGVuZXIoYSx0aGlzLmtjLmJpbmQodGhpcyxcblwicGxheWVyXCIpKX0uYmluZChhKSk7Y2FzdC5fX3BsYXRmb3JtX18mJmNhc3QuX19wbGF0Zm9ybV9fLmNhbkRpc3BsYXlUeXBlKCd2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNjQwMDI4XCI7IHdpZHRoPTM4NDA7IGhlaWdodD0yMTYwJyk/YS5iLkhiKDM4NDAsMjE2MCk6YS5iLkhiKDE5MjAsMTA4MCk7YS5iLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkaW5nXCIsZnVuY3Rpb24oKXt0aGlzLmY9ITE7RGModGhpcyl9LmJpbmQoYSkpO2EuYS5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLGZ1bmN0aW9uKCl7dGhpcy5mPSExO0RjKHRoaXMpfS5iaW5kKGEpKTthLmEuYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsZnVuY3Rpb24oKXtEYyh0aGlzKX0uYmluZChhKSk7YS5iLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRpbmdcIixmdW5jdGlvbigpe3RoaXMuZj0hMDtEYyh0aGlzKX0uYmluZChhKSk7YS5hLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLGZ1bmN0aW9uKCl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmEmJlxudGhpcy5hLmVuZGVkJiYodGhpcy5mPSEwLERjKHRoaXMpKX0uYmluZCh0aGlzKSw1RTMpfS5iaW5kKGEpKX1rPUsucHJvdG90eXBlO2suaGM9ZnVuY3Rpb24oKXt0aGlzLmk9ISFjYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZW5kZXJzKCkubGVuZ3RoO0RjKHRoaXMpfTtmdW5jdGlvbiBEYyhhKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJKFwiY2FzdHN0YXR1c2NoYW5nZWRcIikpO0wodGhpcywwKX0uYmluZChhKSl9XG5mdW5jdGlvbiBFYyhhLGIsYyl7Zm9yKHZhciBkIGluIGIucGxheWVyKWEuYltkXShiLnBsYXllcltkXSk7YS5sKGMpO2M9UHJvbWlzZS5yZXNvbHZlKCk7dmFyIGU9YS5hLmF1dG9wbGF5O2IubWFuaWZlc3QmJihhLmEuYXV0b3BsYXk9ITEsYz1hLmIubG9hZChiLm1hbmlmZXN0LGIuc3RhcnRUaW1lKSxjW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5iLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJlcnJvclwiLHtkZXRhaWw6YX0pKX0uYmluZChhKSkpO2MudGhlbihmdW5jdGlvbigpe3ZhciBhO2ZvcihhIGluIGIudmlkZW8pe3ZhciBjPWIudmlkZW9bYV07dGhpcy5hW2FdPWN9Zm9yKGEgaW4gYi5wbGF5ZXJBZnRlckxvYWQpYz1iLnBsYXllckFmdGVyTG9hZFthXSx0aGlzLmJbYV0oYyk7dGhpcy5hLmF1dG9wbGF5PWU7Yi5tYW5pZmVzdCYmKHRoaXMuYS5wbGF5KCksTCh0aGlzLDApKX0uYmluZChhKSl9XG5rLmtjPWZ1bmN0aW9uKGEsYil7dGhpcy5BYigpO0ZjKHRoaXMse3R5cGU6XCJldmVudFwiLHRhcmdldE5hbWU6YSxldmVudDpifSx0aGlzLmMpfTtrLkFiPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5oJiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaCk7dGhpcy5oPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuQWIuYmluZCh0aGlzKSw1MDApO3ZhciBhPXt2aWRlbzp7fSxwbGF5ZXI6e319O2xjLmZvckVhY2goZnVuY3Rpb24oYil7YS52aWRlb1tiXT10aGlzLmFbYl19LmJpbmQodGhpcykpO3BjLmZvckVhY2goZnVuY3Rpb24oYil7YS5wbGF5ZXJbYl09dGhpcy5iW2JdKCl9LmJpbmQodGhpcykpO3ZhciBiPWNhc3QucmVjZWl2ZXIuQ2FzdFJlY2VpdmVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN5c3RlbVZvbHVtZSgpO2ImJihhLnZpZGVvLnZvbHVtZT1iLmxldmVsLGEudmlkZW8ubXV0ZWQ9Yi5tdXRlZCk7RmModGhpcyx7dHlwZTpcInVwZGF0ZVwiLHVwZGF0ZTphfSx0aGlzLmMpfTtcbmsuS2M9ZnVuY3Rpb24oKXt2YXIgYT1jYXN0LnJlY2VpdmVyLkNhc3RSZWNlaXZlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTeXN0ZW1Wb2x1bWUoKTthJiZGYyh0aGlzLHt0eXBlOlwidXBkYXRlXCIsdXBkYXRlOnt2aWRlbzp7dm9sdW1lOmEubGV2ZWwsbXV0ZWQ6YS5tdXRlZH19fSx0aGlzLmMpO0ZjKHRoaXMse3R5cGU6XCJldmVudFwiLHRhcmdldE5hbWU6XCJ2aWRlb1wiLGV2ZW50Ont0eXBlOlwidm9sdW1lY2hhbmdlXCJ9fSx0aGlzLmMpfTtcbmsudGQ9ZnVuY3Rpb24oYSl7dmFyIGI9d2MoYS5kYXRhKTtzd2l0Y2goYi50eXBlKXtjYXNlIFwiaW5pdFwiOkVjKHRoaXMsYi5pbml0U3RhdGUsYi5hcHBEYXRhKTt0aGlzLkFiKCk7YnJlYWs7Y2FzZSBcImFwcERhdGFcIjp0aGlzLmwoYi5hcHBEYXRhKTticmVhaztjYXNlIFwic2V0XCI6dmFyIGM9Yi50YXJnZXROYW1lLGQ9Yi5wcm9wZXJ0eSxlPWIudmFsdWU7aWYoXCJ2aWRlb1wiPT1jKWlmKGI9Y2FzdC5yZWNlaXZlci5DYXN0UmVjZWl2ZXJNYW5hZ2VyLmdldEluc3RhbmNlKCksXCJ2b2x1bWVcIj09ZCl7Yi5zZXRTeXN0ZW1Wb2x1bWVMZXZlbChlKTticmVha31lbHNlIGlmKFwibXV0ZWRcIj09ZCl7Yi5zZXRTeXN0ZW1Wb2x1bWVNdXRlZChlKTticmVha310aGlzLmpbY11bZF09ZTticmVhaztjYXNlIFwiY2FsbFwiOmM9Yi50YXJnZXROYW1lO2Q9Yi5tZXRob2ROYW1lO2U9Yi5hcmdzO2M9dGhpcy5qW2NdO2NbZF0uYXBwbHkoYyxlKTticmVhaztjYXNlIFwiYXN5bmNDYWxsXCI6Yz1iLnRhcmdldE5hbWUsXG5kPWIubWV0aG9kTmFtZSxlPWIuYXJncyxiPWIuaWQsYT1hLnNlbmRlcklkLGM9dGhpcy5qW2NdLGNbZF0uYXBwbHkoYyxlKS50aGVuKHRoaXMudGMuYmluZCh0aGlzLGEsYixudWxsKSx0aGlzLnRjLmJpbmQodGhpcyxhLGIpKX19O1xuay5mZD1mdW5jdGlvbihhKXt2YXIgYj13YyhhLmRhdGEpO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJQTEFZXCI6dGhpcy5hLnBsYXkoKTtMKHRoaXMsMCk7YnJlYWs7Y2FzZSBcIlBBVVNFXCI6dGhpcy5hLnBhdXNlKCk7TCh0aGlzLDApO2JyZWFrO2Nhc2UgXCJTRUVLXCI6YT1iLmN1cnJlbnRUaW1lO3ZhciBjPWIucmVzdW1lU3RhdGU7bnVsbCE9YSYmKHRoaXMuYS5jdXJyZW50VGltZT1OdW1iZXIoYSkpO2MmJlwiUExBWUJBQ0tfU1RBUlRcIj09Yz8odGhpcy5hLnBsYXkoKSxMKHRoaXMsMCkpOmMmJlwiUExBWUJBQ0tfUEFVU0VcIj09YyYmKHRoaXMuYS5wYXVzZSgpLEwodGhpcywwKSk7YnJlYWs7Y2FzZSBcIlNUT1BcIjp0aGlzLmIuaGIoKS50aGVuKGZ1bmN0aW9uKCl7TCh0aGlzLDApfS5iaW5kKHRoaXMpKTticmVhaztjYXNlIFwiR0VUX1NUQVRVU1wiOkwodGhpcyxOdW1iZXIoYi5yZXF1ZXN0SWQpKTticmVhaztjYXNlIFwiVk9MVU1FXCI6Yz1iLnZvbHVtZTthPWMubGV2ZWw7dmFyIGM9Yy5tdXRlZCxkPVxudGhpcy5hLnZvbHVtZSxlPXRoaXMuYS5tdXRlZDtudWxsIT1hJiYodGhpcy5hLnZvbHVtZT1OdW1iZXIoYSkpO251bGwhPWMmJih0aGlzLmEubXV0ZWQ9Yyk7ZD09dGhpcy5hLnZvbHVtZSYmZT09dGhpcy5hLm11dGVkfHxMKHRoaXMsMCk7YnJlYWs7Y2FzZSBcIkxPQURcIjpjPWIubWVkaWEuY29udGVudElkO2E9Yi5jdXJyZW50VGltZTt2YXIgZj10aGlzLm8oYyk7dGhpcy5hLmF1dG9wbGF5PSEwO3RoaXMuYi5sb2FkKGYsYSkudGhlbihmdW5jdGlvbigpe0wodGhpcywwLHtjb250ZW50SWQ6ZixzdHJlYW1UeXBlOnRoaXMuYi4kKCk/XCJMSVZFXCI6XCJCVUZGRVJFRFwiLGNvbnRlbnRUeXBlOlwiXCJ9KX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt2YXIgYz1cIkxPQURfRkFJTEVEXCI7Nz09YS5jYXRlZ29yeSYmN0UzPT1hLmNvZGUmJihjPVwiTE9BRF9DQU5DRUxMRURcIik7RmModGhpcyx7cmVxdWVzdElkOk51bWJlcihiLnJlcXVlc3RJZCksdHlwZTpjfSx0aGlzLmcpfS5iaW5kKHRoaXMpKTtcbmJyZWFrO2RlZmF1bHQ6RmModGhpcyx7cmVxdWVzdElkOk51bWJlcihiLnJlcXVlc3RJZCksdHlwZTpcIklOVkFMSURfUkVRVUVTVFwiLHJlYXNvbjpcIklOVkFMSURfQ09NTUFORFwifSx0aGlzLmcpfX07ay50Yz1mdW5jdGlvbihhLGIsYyl7RmModGhpcyx7dHlwZTpcImFzeW5jQ29tcGxldGVcIixpZDpiLGVycm9yOmN9LHRoaXMuYyxhKX07ZnVuY3Rpb24gRmMoYSxiLGMsZCl7YS5pJiYoYT12YyhiKSxkP2MuZ2V0Q2FzdENoYW5uZWwoZCkuc2VuZChhKTpjLmJyb2FkY2FzdChhKSl9XG5mdW5jdGlvbiBMKGEsYixjKXt2YXIgZD1HYyxkPXttZWRpYVNlc3Npb25JZDowLHBsYXliYWNrUmF0ZTphLmEucGxheWJhY2tSYXRlLHBsYXllclN0YXRlOmEuZj9kLklETEU6YS5iLmthP2QueWM6YS5hLnBhdXNlZD9kLnpjOmQuQWMsY3VycmVudFRpbWU6YS5hLmN1cnJlbnRUaW1lLHN1cHBvcnRlZE1lZGlhQ29tbWFuZHM6MTUsdm9sdW1lOntsZXZlbDphLmEudm9sdW1lLG11dGVkOmEuYS5tdXRlZH19O2MmJihkLm1lZGlhPWMpO0ZjKGEse3JlcXVlc3RJZDpiLHR5cGU6XCJNRURJQV9TVEFUVVNcIixzdGF0dXM6W2RdfSxhLmcpfXZhciBHYz17SURMRTpcIklETEVcIixBYzpcIlBMQVlJTkdcIix5YzpcIkJVRkZFUklOR1wiLHpjOlwiUEFVU0VEXCJ9O2Z1bmN0aW9uIEhjKGEsYil7dmFyIGM9TShhLGIpO3JldHVybiAxIT1jLmxlbmd0aD9udWxsOmNbMF19ZnVuY3Rpb24gTShhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRhZ05hbWU9PWJ9KX1mdW5jdGlvbiBJYyhhKXt2YXIgYj1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGImJmIubm9kZVR5cGU9PU5vZGUuVEVYVF9OT0RFP2EudGV4dENvbnRlbnQudHJpbSgpOm51bGx9ZnVuY3Rpb24gTihhLGIsYyxkKXt2YXIgZT1udWxsO2E9YS5nZXRBdHRyaWJ1dGUoYik7bnVsbCE9YSYmKGU9YyhhKSk7cmV0dXJuIG51bGw9PWU/dm9pZCAwIT1kP2Q6bnVsbDplfWZ1bmN0aW9uIEpjKGEpe2lmKCFhKXJldHVybiBudWxsO2E9RGF0ZS5wYXJzZShhKTtyZXR1cm4gaXNOYU4oYSk/bnVsbDpNYXRoLmZsb29yKGEvMUUzKX1cbmZ1bmN0aW9uIEtjKGEpe2lmKCFhKXJldHVybiBudWxsO2E9L15QKD86KFswLTldKilZKT8oPzooWzAtOV0qKU0pPyg/OihbMC05XSopRCk/KD86VCg/OihbMC05XSopSCk/KD86KFswLTldKilNKT8oPzooWzAtOS5dKilTKT8pPyQvLmV4ZWMoYSk7aWYoIWEpcmV0dXJuIG51bGw7YT0zMTUzNkUzKk51bWJlcihhWzFdfHxudWxsKSsyNTkyRTMqTnVtYmVyKGFbMl18fG51bGwpKzg2NDAwKk51bWJlcihhWzNdfHxudWxsKSszNjAwKk51bWJlcihhWzRdfHxudWxsKSs2MCpOdW1iZXIoYVs1XXx8bnVsbCkrTnVtYmVyKGFbNl18fG51bGwpO3JldHVybiBpc0Zpbml0ZShhKT9hOm51bGx9ZnVuY3Rpb24gTGMoYSl7dmFyIGI9LyhbMC05XSspLShbMC05XSspLy5leGVjKGEpO2lmKCFiKXJldHVybiBudWxsO2E9TnVtYmVyKGJbMV0pO2lmKCFpc0Zpbml0ZShhKSlyZXR1cm4gbnVsbDtiPU51bWJlcihiWzJdKTtyZXR1cm4gaXNGaW5pdGUoYik/e3N0YXJ0OmEsZW5kOmJ9Om51bGx9XG5mdW5jdGlvbiBNYyhhKXthPU51bWJlcihhKTtyZXR1cm4gYSUxP251bGw6YX1mdW5jdGlvbiBOYyhhKXthPU51bWJlcihhKTtyZXR1cm4hKGElMSkmJjA8YT9hOm51bGx9ZnVuY3Rpb24gT2MoYSl7YT1OdW1iZXIoYSk7cmV0dXJuIShhJTEpJiYwPD1hP2E6bnVsbH1mdW5jdGlvbiBQYyhhKXt2YXIgYjthPShiPWEubWF0Y2goL14oXFxkKylcXC8oXFxkKykkLykpP051bWJlcihiWzFdL2JbMl0pOk51bWJlcihhKTtyZXR1cm4gaXNOYU4oYSk/bnVsbDphfTt2YXIgUWM9e1widXJuOnV1aWQ6MTA3N2VmZWMtYzBiMi00ZDAyLWFjZTMtM2MxZTUyZTJmYjRiXCI6XCJvcmcudzMuY2xlYXJrZXlcIixcInVybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZFwiOlwiY29tLndpZGV2aW5lLmFscGhhXCIsXCJ1cm46dXVpZDo5YTA0ZjA3OS05ODQwLTQyODYtYWI5Mi1lNjViZTA4ODVmOTVcIjpcImNvbS5taWNyb3NvZnQucGxheXJlYWR5XCIsXCJ1cm46dXVpZDpmMjM5ZTc2OS1lZmEzLTQ4NTAtOWMxNi1hOTAzYzY5MzJlZmJcIjpcImNvbS5hZG9iZS5wcmltZXRpbWVcIn07XG5mdW5jdGlvbiBSYyhhLGIsYyl7YT1TYyhhKTt2YXIgZD1udWxsLGU9bnVsbCxmPVtdLGc9W10saD1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5rZXlJZH0pLmZpbHRlcih5YSk7aWYoMDxoLmxlbmd0aCYmKGU9aFswXSxoLnNvbWUoemEoZSkpKSl0aHJvdyBuZXcgdCgyLDQsNDAxMCk7Y3x8KGc9YS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJ1cm46bXBlZzpkYXNoOm1wNHByb3RlY3Rpb246MjAxMVwiPT1hLnFjPyhkPWEuaW5pdHx8ZCwhMSk6ITB9KSwwPGcubGVuZ3RoJiYoZj1UYyhkLGIsZyksZi5sZW5ndGh8fChmPVtCYShcIlwiLGQpXSkpKTswPGEubGVuZ3RoJiYoY3x8IWcubGVuZ3RoKSYmKGY9TmEoUWMpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gQmEoYSxkKX0pKTtlJiZmLmZvckVhY2goZnVuY3Rpb24oYSl7YS5pbml0RGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Eua2V5SWQ9ZX0pfSk7cmV0dXJue1FiOmUseGU6ZCxkcm1JbmZvczpmLFNiOiEwfX1cbmZ1bmN0aW9uIFVjKGEsYixjLGQpe3ZhciBlPVJjKGEsYixkKTtpZihjLlNiKXthPTE9PWMuZHJtSW5mb3MubGVuZ3RoJiYhYy5kcm1JbmZvc1swXS5rZXlTeXN0ZW07Yj0hZS5kcm1JbmZvcy5sZW5ndGg7aWYoIWMuZHJtSW5mb3MubGVuZ3RofHxhJiYhYiljLmRybUluZm9zPWUuZHJtSW5mb3M7Yy5TYj0hMX1lbHNlIGlmKDA8ZS5kcm1JbmZvcy5sZW5ndGgmJihjLmRybUluZm9zPWMuZHJtSW5mb3MuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBlLmRybUluZm9zLnNvbWUoZnVuY3Rpb24oYil7cmV0dXJuIGIua2V5U3lzdGVtPT1hLmtleVN5c3RlbX0pfSksIWMuZHJtSW5mb3MubGVuZ3RoKSl0aHJvdyBuZXcgdCgyLDQsNDAwOCk7cmV0dXJuIGUuUWJ8fGMuUWJ9ZnVuY3Rpb24gVGMoYSxiLGMpe3JldHVybiBjLm1hcChmdW5jdGlvbihjKXt2YXIgZD1RY1tjLnFjXTtyZXR1cm4gZD9bQmEoZCxjLmluaXR8fGEpXTpiKGMubm9kZSl8fFtdfSkucmVkdWNlKHgsW10pfVxuZnVuY3Rpb24gU2MoYSl7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVcmlcIiksZD1hLmdldEF0dHJpYnV0ZShcImNlbmM6ZGVmYXVsdF9LSURcIiksZT1NKGEsXCJjZW5jOnBzc2hcIikubWFwKEljKTtpZighYilyZXR1cm4gbnVsbDtiPWIudG9Mb3dlckNhc2UoKTtpZihkJiYoZD1kLnJlcGxhY2UoLy0vZyxcIlwiKS50b0xvd2VyQ2FzZSgpLDA8PWQuaW5kZXhPZihcIiBcIikpKXRocm93IG5ldyB0KDIsNCw0MDA5KTt2YXIgZj1bXTt0cnl7Zj1lLm1hcChmdW5jdGlvbihhKXtyZXR1cm57aW5pdERhdGFUeXBlOlwiY2VuY1wiLGluaXREYXRhOllhKGEpLGtleUlkOm51bGx9fSl9Y2F0Y2goZyl7dGhyb3cgbmV3IHQoMiw0LDQwMDcpO31yZXR1cm57bm9kZTphLHFjOmIsa2V5SWQ6ZCxpbml0OjA8Zi5sZW5ndGg/ZjpudWxsfX0pLmZpbHRlcih5YSl9O2Z1bmN0aW9uIFZjKGEsYixjLGQsZSl7bnVsbCE9ZSYmKGU9TWF0aC5yb3VuZChlKSk7dmFyIGY9e1JlcHJlc2VudGF0aW9uSUQ6YixOdW1iZXI6YyxCYW5kd2lkdGg6ZCxUaW1lOmV9O3JldHVybiBhLnJlcGxhY2UoL1xcJChSZXByZXNlbnRhdGlvbklEfE51bWJlcnxCYW5kd2lkdGh8VGltZSk/KD86JTAoWzAtOV0rKWQpP1xcJC9nLGZ1bmN0aW9uKGEsYixjKXtpZihcIiQkXCI9PWEpcmV0dXJuXCIkXCI7dmFyIGQ9ZltiXTtpZihudWxsPT1kKXJldHVybiBhO1wiUmVwcmVzZW50YXRpb25JRFwiPT1iJiZjJiYoYz12b2lkIDApO2E9ZC50b1N0cmluZygpO2M9d2luZG93LnBhcnNlSW50KGMsMTApfHwxO3JldHVybiBBcnJheShNYXRoLm1heCgwLGMtYS5sZW5ndGgpKzEpLmpvaW4oXCIwXCIpK2F9KX1cbmZ1bmN0aW9uIFdjKGEsYil7dmFyIGM9WGMoYSxiLFwidGltZXNjYWxlXCIpLGQ9MTtjJiYoZD1OYyhjKXx8MSk7Yz1YYyhhLGIsXCJkdXJhdGlvblwiKTsoYz1OYyhjfHxcIlwiKSkmJihjLz1kKTt2YXIgZT1YYyhhLGIsXCJzdGFydE51bWJlclwiKSxmPVhjKGEsYixcInByZXNlbnRhdGlvblRpbWVPZmZzZXRcIiksZz1PYyhlfHxcIlwiKTtpZihudWxsPT1lfHxudWxsPT1nKWc9MTt2YXIgaD1ZYyhhLGIsXCJTZWdtZW50VGltZWxpbmVcIiksZT1udWxsO2lmKGgpe2Zvcih2YXIgZT1kLGw9TnVtYmVyKGYpLG49YS5SLmR1cmF0aW9ufHxJbmZpbml0eSxoPU0oaCxcIlNcIikscT1bXSxyPTAsdj0wO3Y8aC5sZW5ndGg7Kyt2KXt2YXIgdT1oW3ZdLHc9Tih1LFwidFwiLE9jKSxHPU4odSxcImRcIixPYyksdT1OKHUsXCJyXCIsTWMpO251bGwhPXcmJih3LT1sKTtpZighRylicmVhazt3PW51bGwhPXc/dzpyO3U9dXx8MDtpZigwPnUpaWYodisxPGgubGVuZ3RoKXt1PU4oaFt2KzFdLFwidFwiLE9jKTtpZihudWxsPT11KWJyZWFrO1xuZWxzZSBpZih3Pj11KWJyZWFrO3U9TWF0aC5jZWlsKCh1LXcpL0cpLTF9ZWxzZXtpZihJbmZpbml0eT09bilicmVhaztlbHNlIGlmKHcvZT49bilicmVhazt1PU1hdGguY2VpbCgobiplLXcpL0cpLTF9MDxxLmxlbmd0aCYmdyE9ciYmKHFbcS5sZW5ndGgtMV0uZW5kPXcvZSk7Zm9yKHZhciBwYT0wO3BhPD11OysrcGEpcj13K0cscS5wdXNoKHtzdGFydDp3L2UsZW5kOnIvZSxvZTp3fSksdz1yfWU9cX1yZXR1cm57dGltZXNjYWxlOmQsTzpjLHlhOmcscHJlc2VudGF0aW9uVGltZU9mZnNldDpOdW1iZXIoZikvZHx8MCxOYjpOdW1iZXIoZiksRjplfX1mdW5jdGlvbiBYYyhhLGIsYyl7cmV0dXJuW2IoYS53KSxiKGEuUyksYihhLlQpXS5maWx0ZXIoeWEpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYyl9KS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn0pfVxuZnVuY3Rpb24gWWMoYSxiLGMpe3JldHVybltiKGEudyksYihhLlMpLGIoYS5UKV0uZmlsdGVyKHlhKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEhjKGEsYyl9KS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn0pfTtmdW5jdGlvbiBaYyhhLGIsYyl7dGhpcy5hPWE7dGhpcy5YPWI7dGhpcy5NPWN9bShcInNoYWthLm1lZGlhLkluaXRTZWdtZW50UmVmZXJlbmNlXCIsWmMpO2Z1bmN0aW9uIE8oYSxiLGMsZCxlLGYpe3RoaXMucG9zaXRpb249YTt0aGlzLnN0YXJ0VGltZT1iO3RoaXMuZW5kVGltZT1jO3RoaXMuYT1kO3RoaXMuWD1lO3RoaXMuTT1mfW0oXCJzaGFrYS5tZWRpYS5TZWdtZW50UmVmZXJlbmNlXCIsTyk7ZnVuY3Rpb24gUChhLGIpe3RoaXMuSD1hO3RoaXMuYT1iPT0kYzt0aGlzLnU9MH1tKFwic2hha2EudXRpbC5EYXRhVmlld1JlYWRlclwiLFApO3ZhciAkYz0xO1AuRW5kaWFubmVzcz17dGU6MCx2ZTokY307UC5wcm90b3R5cGUuWj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnU8dGhpcy5ILmJ5dGVMZW5ndGh9O1AucHJvdG90eXBlLmhhc01vcmVEYXRhPVAucHJvdG90eXBlLlo7UC5wcm90b3R5cGUuVGM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51fTtQLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1QLnByb3RvdHlwZS5UYztQLnByb3RvdHlwZS5PYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkguYnl0ZUxlbmd0aH07UC5wcm90b3R5cGUuZ2V0TGVuZ3RoPVAucHJvdG90eXBlLk9jO1AucHJvdG90eXBlLkNiPWZ1bmN0aW9uKCl7dHJ5e3ZhciBhPXRoaXMuSC5nZXRVaW50OCh0aGlzLnUpfWNhdGNoKGIpe2FkKCl9dGhpcy51Kz0xO3JldHVybiBhfTtQLnByb3RvdHlwZS5yZWFkVWludDg9UC5wcm90b3R5cGUuQ2I7XG5QLnByb3RvdHlwZS5tYz1mdW5jdGlvbigpe3RyeXt2YXIgYT10aGlzLkguZ2V0VWludDE2KHRoaXMudSx0aGlzLmEpfWNhdGNoKGIpe2FkKCl9dGhpcy51Kz0yO3JldHVybiBhfTtQLnByb3RvdHlwZS5yZWFkVWludDE2PVAucHJvdG90eXBlLm1jO1AucHJvdG90eXBlLkQ9ZnVuY3Rpb24oKXt0cnl7dmFyIGE9dGhpcy5ILmdldFVpbnQzMih0aGlzLnUsdGhpcy5hKX1jYXRjaChiKXthZCgpfXRoaXMudSs9NDtyZXR1cm4gYX07UC5wcm90b3R5cGUucmVhZFVpbnQzMj1QLnByb3RvdHlwZS5EO1AucHJvdG90eXBlLmxjPWZ1bmN0aW9uKCl7dHJ5e3ZhciBhPXRoaXMuSC5nZXRJbnQzMih0aGlzLnUsdGhpcy5hKX1jYXRjaChiKXthZCgpfXRoaXMudSs9NDtyZXR1cm4gYX07UC5wcm90b3R5cGUucmVhZEludDMyPVAucHJvdG90eXBlLmxjO1xuUC5wcm90b3R5cGUuUGE9ZnVuY3Rpb24oKXt0cnl7aWYodGhpcy5hKXt2YXIgYT10aGlzLkguZ2V0VWludDMyKHRoaXMudSwhMCk7dmFyIGI9dGhpcy5ILmdldFVpbnQzMih0aGlzLnUrNCwhMCl9ZWxzZSBiPXRoaXMuSC5nZXRVaW50MzIodGhpcy51LCExKSxhPXRoaXMuSC5nZXRVaW50MzIodGhpcy51KzQsITEpfWNhdGNoKGMpe2FkKCl9aWYoMjA5NzE1MTxiKXRocm93IG5ldyB0KDIsMywzMDAxKTt0aGlzLnUrPTg7cmV0dXJuIGIqTWF0aC5wb3coMiwzMikrYX07UC5wcm90b3R5cGUucmVhZFVpbnQ2ND1QLnByb3RvdHlwZS5QYTtQLnByb3RvdHlwZS5KYT1mdW5jdGlvbihhKXt0aGlzLnUrYT50aGlzLkguYnl0ZUxlbmd0aCYmYWQoKTt2YXIgYj10aGlzLkguYnVmZmVyLnNsaWNlKHRoaXMudSx0aGlzLnUrYSk7dGhpcy51Kz1hO3JldHVybiBuZXcgVWludDhBcnJheShiKX07UC5wcm90b3R5cGUucmVhZEJ5dGVzPVAucHJvdG90eXBlLkphO1xuUC5wcm90b3R5cGUuST1mdW5jdGlvbihhKXt0aGlzLnUrYT50aGlzLkguYnl0ZUxlbmd0aCYmYWQoKTt0aGlzLnUrPWF9O1AucHJvdG90eXBlLnNraXA9UC5wcm90b3R5cGUuSTtQLnByb3RvdHlwZS5CYj1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnU7dGhpcy5aKCkmJnRoaXMuSC5nZXRVaW50OCh0aGlzLnUpOyl0aGlzLnUrPTE7YT10aGlzLkguYnVmZmVyLnNsaWNlKGEsdGhpcy51KTt0aGlzLnUrPTE7cmV0dXJuIEYoYSl9O1AucHJvdG90eXBlLnJlYWRUZXJtaW5hdGVkU3RyaW5nPVAucHJvdG90eXBlLkJiO2Z1bmN0aW9uIGFkKCl7dGhyb3cgbmV3IHQoMiwzLDNFMyk7fTtmdW5jdGlvbiBRKCl7dGhpcy5iPVtdO3RoaXMuYT1bXX1tKFwic2hha2EudXRpbC5NcDRQYXJzZXJcIixRKTtRLnByb3RvdHlwZS5DPWZ1bmN0aW9uKGEsYil7dmFyIGM9YmQoYSk7dGhpcy5iW2NdPTA7dGhpcy5hW2NdPWI7cmV0dXJuIHRoaXN9O1EucHJvdG90eXBlLmJveD1RLnByb3RvdHlwZS5DO1EucHJvdG90eXBlLmRhPWZ1bmN0aW9uKGEsYil7dmFyIGM9YmQoYSk7dGhpcy5iW2NdPTE7dGhpcy5hW2NdPWI7cmV0dXJuIHRoaXN9O1EucHJvdG90eXBlLmZ1bGxCb3g9US5wcm90b3R5cGUuZGE7US5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSl7Zm9yKGE9bmV3IFAobmV3IERhdGFWaWV3KGEpLDApO2EuWigpOyl0aGlzLmViKDAsYSl9O1EucHJvdG90eXBlLnBhcnNlPVEucHJvdG90eXBlLnBhcnNlO1xuUS5wcm90b3R5cGUuZWI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnUsZD1iLkQoKSxlPWIuRCgpO3N3aXRjaChkKXtjYXNlIDA6ZD1iLkguYnl0ZUxlbmd0aC1jO2JyZWFrO2Nhc2UgMTpkPWIuUGEoKX12YXIgZj10aGlzLmFbZV07aWYoZil7dmFyIGc9bnVsbCxoPW51bGw7MT09dGhpcy5iW2VdJiYoaD1iLkQoKSxnPWg+Pj4yNCxoJj0xNjc3NzIxNSk7ZT1jK2QtYi51O2U9MDxlP2IuSmEoZSkuYnVmZmVyOm5ldyBBcnJheUJ1ZmZlcigwKTtlPW5ldyBQKG5ldyBEYXRhVmlldyhlKSwwKTtmKHtOYTp0aGlzLHZlcnNpb246ZyxMYzpoLHM6ZSxzaXplOmQsc3RhcnQ6YythfSl9ZWxzZSBiLkkoYytkLWIudSl9O1EucHJvdG90eXBlLnBhcnNlTmV4dD1RLnByb3RvdHlwZS5lYjtmdW5jdGlvbiBSKGEpe2Zvcig7YS5zLlooKTspYS5OYS5lYihhLnN0YXJ0LGEucyl9US5jaGlsZHJlbj1SO1xuZnVuY3Rpb24gY2QoYSl7Zm9yKHZhciBiPWEucy5EKCk7MDxiOy0tYilhLk5hLmViKGEuc3RhcnQsYS5zKX1RLnNhbXBsZURlc2NyaXB0aW9uPWNkO2Z1bmN0aW9uIGRkKGEpe3JldHVybiBmdW5jdGlvbihiKXthKGIucy5KYShiLnMuSC5ieXRlTGVuZ3RoLWIucy51KSl9fVEuYWxsRGF0YT1kZDtmdW5jdGlvbiBiZChhKXtmb3IodmFyIGI9MCxjPTA7YzxhLmxlbmd0aDtjKyspYj1iPDw4fGEuY2hhckNvZGVBdChjKTtyZXR1cm4gYn07ZnVuY3Rpb24gZWQoYSxiLGMsZCl7dmFyIGUsZj0obmV3IFEpLmRhKFwic2lkeFwiLGZ1bmN0aW9uKGEpe2U9ZmQoYixkLGMsYSl9KTthJiZmLnBhcnNlKGEpO2lmKGUpcmV0dXJuIGU7dGhyb3cgbmV3IHQoMiwzLDMwMDQpO31cbmZ1bmN0aW9uIGZkKGEsYixjLGQpe3ZhciBlPVtdO2Qucy5JKDQpO3ZhciBmPWQucy5EKCk7aWYoIWYpdGhyb3cgbmV3IHQoMiwzLDMwMDUpO2lmKGQudmVyc2lvbil7dmFyIGc9ZC5zLlBhKCk7dmFyIGg9ZC5zLlBhKCl9ZWxzZSBnPWQucy5EKCksaD1kLnMuRCgpO2Qucy5JKDIpO3ZhciBsPWQucy5tYygpO2I9Zy1iO2E9YStkLnNpemUraDtmb3IoaD0wO2g8bDtoKyspe3ZhciBuPWQucy5EKCk7Zz0obiYyMTQ3NDgzNjQ4KT4+PjMxO3ZhciBuPW4mMjE0NzQ4MzY0NyxxPWQucy5EKCk7ZC5zLkkoNCk7aWYoMT09Zyl0aHJvdyBuZXcgdCgyLDMsMzAwNik7ZS5wdXNoKG5ldyBPKGUubGVuZ3RoLGIvZiwoYitxKS9mLGZ1bmN0aW9uKCl7cmV0dXJuIGN9LGEsYStuLTEpKTtiKz1xO2ErPW59cmV0dXJuIGV9O2Z1bmN0aW9uIFMoYSl7dGhpcy5hPWF9bShcInNoYWthLm1lZGlhLlNlZ21lbnRJbmRleFwiLFMpO1MucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmE9bnVsbDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O1MucHJvdG90eXBlLmRlc3Ryb3k9Uy5wcm90b3R5cGUubTtTLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmEubGVuZ3RoLTE7MDw9YjstLWIpe3ZhciBjPXRoaXMuYVtiXTtpZihhPj1jLnN0YXJ0VGltZSYmYTxjLmVuZFRpbWUpcmV0dXJuIGMucG9zaXRpb259cmV0dXJuIHRoaXMuYS5sZW5ndGgmJmE8dGhpcy5hWzBdLnN0YXJ0VGltZT90aGlzLmFbMF0ucG9zaXRpb246bnVsbH07Uy5wcm90b3R5cGUuZmluZD1TLnByb3RvdHlwZS5maW5kO1MucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtpZighdGhpcy5hLmxlbmd0aClyZXR1cm4gbnVsbDthLT10aGlzLmFbMF0ucG9zaXRpb247cmV0dXJuIDA+YXx8YT49dGhpcy5hLmxlbmd0aD9udWxsOnRoaXMuYVthXX07XG5TLnByb3RvdHlwZS5nZXQ9Uy5wcm90b3R5cGUuZ2V0O1MucHJvdG90eXBlLnZiPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9W10sZT1jPTA7Yzx0aGlzLmEubGVuZ3RoJiZlPGEubGVuZ3RoOyl7dmFyIGY9dGhpcy5hW2NdO2I9YVtlXTtmLnN0YXJ0VGltZTxiLnN0YXJ0VGltZT8oZC5wdXNoKGYpLGMrKyk6KGYuc3RhcnRUaW1lPmIuc3RhcnRUaW1lfHwoLjE8TWF0aC5hYnMoZi5lbmRUaW1lLWIuZW5kVGltZSk/ZC5wdXNoKGIpOmQucHVzaChmKSxjKyspLGUrKyl9Zm9yKDtjPHRoaXMuYS5sZW5ndGg7KWQucHVzaCh0aGlzLmFbYysrXSk7aWYoZC5sZW5ndGgpZm9yKGM9ZFtkLmxlbmd0aC0xXS5wb3NpdGlvbisxO2U8YS5sZW5ndGg7KWI9YVtlKytdLGI9bmV3IE8oYysrLGIuc3RhcnRUaW1lLGIuZW5kVGltZSxiLmEsYi5YLGIuTSksZC5wdXNoKGIpO2Vsc2UgZD1hO3RoaXMuYT1kfTtTLnByb3RvdHlwZS5tZXJnZT1TLnByb3RvdHlwZS52YjtcblMucHJvdG90eXBlLm9iPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5hLmxlbmd0aCYmISh0aGlzLmFbYl0uZW5kVGltZT5hKTsrK2IpO3RoaXMuYS5zcGxpY2UoMCxiKX07Uy5wcm90b3R5cGUuZXZpY3Q9Uy5wcm90b3R5cGUub2I7ZnVuY3Rpb24gZ2QoYSxiKXtpZihhLmEubGVuZ3RoKXt2YXIgYz1hLmFbYS5hLmxlbmd0aC0xXTtjLnN0YXJ0VGltZT5ifHwoYS5hW2EuYS5sZW5ndGgtMV09bmV3IE8oYy5wb3NpdGlvbixjLnN0YXJ0VGltZSxiLGMuYSxjLlgsYy5NKSl9fTtmdW5jdGlvbiBoZChhKXt0aGlzLmI9YTt0aGlzLmE9bmV3IFAoYSwwKTtpZHx8KGlkPVtuZXcgVWludDhBcnJheShbMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzEyNywyNTVdKSxuZXcgVWludDhBcnJheShbNjMsMjU1LDI1NV0pLG5ldyBVaW50OEFycmF5KFszMSwyNTUsMjU1LDI1NV0pLG5ldyBVaW50OEFycmF5KFsxNSwyNTUsMjU1LDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbNywyNTUsMjU1LDI1NSwyNTUsMjU1XSksbmV3IFVpbnQ4QXJyYXkoWzMsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTVdKSxuZXcgVWludDhBcnJheShbMSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTVdKV0pfXZhciBpZDtoZC5wcm90b3R5cGUuWj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuWigpfTtcbmZ1bmN0aW9uIGpkKGEpe3ZhciBiPWtkKGEpO2lmKDc8Yi5sZW5ndGgpdGhyb3cgbmV3IHQoMiwzLDMwMDIpO2Zvcih2YXIgYz0wLGQ9MDtkPGIubGVuZ3RoO2QrKyljPTI1NipjK2JbZF07Yj1jO2M9a2QoYSk7YTp7Zm9yKGQ9MDtkPGlkLmxlbmd0aDtkKyspaWYoYWIoYyxpZFtkXSkpe2Q9ITA7YnJlYWsgYX1kPSExfWlmKGQpYz1hLmIuYnl0ZUxlbmd0aC1hLmEudTtlbHNle2lmKDg9PWMubGVuZ3RoJiZjWzFdJjIyNCl0aHJvdyBuZXcgdCgyLDMsMzAwMSk7Zm9yKHZhciBkPWNbMF0mKDE8PDgtYy5sZW5ndGgpLTEsZT0xO2U8Yy5sZW5ndGg7ZSsrKWQ9MjU2KmQrY1tlXTtjPWR9Yz1hLmEudStjPD1hLmIuYnl0ZUxlbmd0aD9jOmEuYi5ieXRlTGVuZ3RoLWEuYS51O2Q9bmV3IERhdGFWaWV3KGEuYi5idWZmZXIsYS5iLmJ5dGVPZmZzZXQrYS5hLnUsYyk7YS5hLkkoYyk7cmV0dXJuIG5ldyBsZChiLGQpfVxuZnVuY3Rpb24ga2QoYSl7dmFyIGI9YS5hLkNiKCksYztmb3IoYz0xOzg+PWMmJiEoYiYxPDw4LWMpO2MrKyk7aWYoODxjKXRocm93IG5ldyB0KDIsMywzMDAyKTt2YXIgZD1uZXcgVWludDhBcnJheShjKTtkWzBdPWI7Zm9yKGI9MTtiPGM7YisrKWRbYl09YS5hLkNiKCk7cmV0dXJuIGR9ZnVuY3Rpb24gbGQoYSxiKXt0aGlzLmlkPWE7dGhpcy5hPWJ9ZnVuY3Rpb24gbWQoYSl7aWYoODxhLmEuYnl0ZUxlbmd0aCl0aHJvdyBuZXcgdCgyLDMsMzAwMik7aWYoOD09YS5hLmJ5dGVMZW5ndGgmJmEuYS5nZXRVaW50OCgwKSYyMjQpdGhyb3cgbmV3IHQoMiwzLDMwMDEpO2Zvcih2YXIgYj0wLGM9MDtjPGEuYS5ieXRlTGVuZ3RoO2MrKyl2YXIgZD1hLmEuZ2V0VWludDgoYyksYj0yNTYqYitkO3JldHVybiBifTtmdW5jdGlvbiBuZCgpe31cbm5kLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtiPW5ldyBoZChuZXcgRGF0YVZpZXcoYikpO2lmKDQ0MDc4Njg1MSE9amQoYikuaWQpdGhyb3cgbmV3IHQoMiwzLDMwMDgpO3ZhciBmPWpkKGIpO2lmKDQwODEyNTU0MyE9Zi5pZCl0aHJvdyBuZXcgdCgyLDMsMzAwOSk7Yj1mLmEuYnl0ZU9mZnNldDtmPW5ldyBoZChmLmEpO2ZvcihlPW51bGw7Zi5aKCk7KXt2YXIgZz1qZChmKTtpZigzNTcxNDkwMzA9PWcuaWQpe2U9ZzticmVha319aWYoIWUpdGhyb3cgbmV3IHQoMiwzLDMwMTApO2Y9bmV3IGhkKGUuYSk7ZT0xRTY7Zm9yKGc9bnVsbDtmLlooKTspe3ZhciBoPWpkKGYpO2lmKDI4MDc3Mjk9PWguaWQpZT1tZChoKTtlbHNlIGlmKDE3NTQ1PT1oLmlkKWlmKGc9aCw0PT1nLmEuYnl0ZUxlbmd0aClnPWcuYS5nZXRGbG9hdDMyKDApO2Vsc2UgaWYoOD09Zy5hLmJ5dGVMZW5ndGgpZz1nLmEuZ2V0RmxvYXQ2NCgwKTtlbHNlIHRocm93IG5ldyB0KDIsMywzMDAzKTtcbn1pZihudWxsPT1nKXRocm93IG5ldyB0KDIsMywzMDExKTtmPWUvMUU5O2U9ZypmO2E9amQobmV3IGhkKG5ldyBEYXRhVmlldyhhKSkpO2lmKDQ3NTI0OTUxNSE9YS5pZCl0aHJvdyBuZXcgdCgyLDMsMzAwNyk7cmV0dXJuIG9kKGEsYixmLGUsYyxkKX07ZnVuY3Rpb24gb2QoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoKXtyZXR1cm4gZX12YXIgaD1bXTthPW5ldyBoZChhLmEpO2Zvcih2YXIgbD0tMSxuPS0xO2EuWigpOyl7dmFyIHE9amQoYSk7aWYoMTg3PT1xLmlkKXt2YXIgcj1wZChxKTtyJiYocT1jKihyLnBlLWYpLHI9YityLkxkLDA8PWwmJmgucHVzaChuZXcgTyhoLmxlbmd0aCxsLHEsZyxuLHItMSkpLGw9cSxuPXIpfX0wPD1sJiZoLnB1c2gobmV3IE8oaC5sZW5ndGgsbCxkLGcsbixudWxsKSk7cmV0dXJuIGh9XG5mdW5jdGlvbiBwZChhKXt2YXIgYj1uZXcgaGQoYS5hKTthPWpkKGIpO2lmKDE3OSE9YS5pZCl0aHJvdyBuZXcgdCgyLDMsMzAxMyk7YT1tZChhKTtiPWpkKGIpO2lmKDE4MyE9Yi5pZCl0aHJvdyBuZXcgdCgyLDMsMzAxMik7Zm9yKHZhciBiPW5ldyBoZChiLmEpLGM9MDtiLlooKTspe3ZhciBkPWpkKGIpO2lmKDI0MT09ZC5pZCl7Yz1tZChkKTticmVha319cmV0dXJue3BlOmEsTGQ6Y319O2Z1bmN0aW9uIHFkKGEsYil7dmFyIGM9WWMoYSxiLFwiSW5pdGlhbGl6YXRpb25cIik7aWYoIWMpcmV0dXJuIG51bGw7dmFyIGQ9YS53LlUsZT1jLmdldEF0dHJpYnV0ZShcInNvdXJjZVVSTFwiKTtlJiYoZD16KGEudy5VLFtlXSkpO3ZhciBlPTAsZj1udWxsO2lmKGM9TihjLFwicmFuZ2VcIixMYykpZT1jLnN0YXJ0LGY9Yy5lbmQ7cmV0dXJuIG5ldyBaYyhmdW5jdGlvbigpe3JldHVybiBkfSxlLGYpfVxuZnVuY3Rpb24gcmQoYSxiKXt2YXIgYz1YYyhhLHNkLFwicHJlc2VudGF0aW9uVGltZU9mZnNldFwiKSxkPXFkKGEsc2QpO3ZhciBlPU51bWJlcihjKTt2YXIgZj1hLncuY29udGVudFR5cGUsZz1hLncubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdO2lmKFwidGV4dFwiIT1mJiZcIm1wNFwiIT1nJiZcIndlYm1cIiE9Zyl0aHJvdyBuZXcgdCgyLDQsNDAwNik7aWYoXCJ3ZWJtXCI9PWcmJiFkKXRocm93IG5ldyB0KDIsNCw0MDA1KTt2YXIgZj1ZYyhhLHNkLFwiUmVwcmVzZW50YXRpb25JbmRleFwiKSxoPVhjKGEsc2QsXCJpbmRleFJhbmdlXCIpLGw9YS53LlUsaD1MYyhofHxcIlwiKTtpZihmKXt2YXIgbj1mLmdldEF0dHJpYnV0ZShcInNvdXJjZVVSTFwiKTtuJiYobD16KGEudy5VLFtuXSkpO2g9TihmLFwicmFuZ2VcIixMYyxoKX1pZighaCl0aHJvdyBuZXcgdCgyLDQsNDAwMik7ZT10ZChhLGIsZCxsLGguc3RhcnQsaC5lbmQsZyxlKTtyZXR1cm57Y3JlYXRlU2VnbWVudEluZGV4OmUuY3JlYXRlU2VnbWVudEluZGV4LGZpbmRTZWdtZW50UG9zaXRpb246ZS5maW5kU2VnbWVudFBvc2l0aW9uLFxuZ2V0U2VnbWVudFJlZmVyZW5jZTplLmdldFNlZ21lbnRSZWZlcmVuY2UsaW5pdFNlZ21lbnRSZWZlcmVuY2U6ZCxwcmVzZW50YXRpb25UaW1lT2Zmc2V0Ok51bWJlcihjKXx8MH19XG5mdW5jdGlvbiB0ZChhLGIsYyxkLGUsZixnLGgpe3ZhciBsPWEucHJlc2VudGF0aW9uVGltZWxpbmUsbj0hYS5DYXx8IWEuUi5zYixxPWEuUi5kdXJhdGlvbixyPWIsdj1udWxsO3JldHVybntjcmVhdGVTZWdtZW50SW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT1bcihkLGUsZiksXCJ3ZWJtXCI9PWc/cihjLmEoKSxjLlgsYy5NKTpudWxsXTtyPW51bGw7cmV0dXJuIFByb21pc2UuYWxsKGEpLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGI9YVswXTthPWFbMV18fG51bGw7Yj1cIm1wNFwiPT1nP2VkKGIsZSxkLGgpOihuZXcgbmQpLnBhcnNlKGIsYSxkLGgpO2wuR2EoMCxiKTt2PW5ldyBTKGIpO24mJmdkKHYscSl9KX0sZmluZFNlZ21lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdi5maW5kKGEpfSxnZXRTZWdtZW50UmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3JldHVybiB2LmdldChhKX19fWZ1bmN0aW9uIHNkKGEpe3JldHVybiBhLlFhfTtmdW5jdGlvbiB1ZChhLGIpe3ZhciBjPXFkKGEsdmQpO3ZhciBkPXdkKGEpO3ZhciBlPVdjKGEsdmQpLGY9ZS55YTtmfHwoZj0xKTt2YXIgZz0wO2UuTz9nPWUuTyooZi0xKTplLkYmJjA8ZS5GLmxlbmd0aCYmKGc9ZS5GWzBdLnN0YXJ0KTtkPXtPOmUuTyxzdGFydFRpbWU6Zyx5YTpmLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6ZS5wcmVzZW50YXRpb25UaW1lT2Zmc2V0LEY6ZS5GLEZhOmR9O2lmKCFkLk8mJiFkLkYmJjE8ZC5GYS5sZW5ndGgpdGhyb3cgbmV3IHQoMiw0LDQwMDIpO2lmKCFkLk8mJiFhLlIuZHVyYXRpb24mJiFkLkYmJjE9PWQuRmEubGVuZ3RoKXRocm93IG5ldyB0KDIsNCw0MDAyKTtpZihkLkYmJiFkLkYubGVuZ3RoKXRocm93IG5ldyB0KDIsNCw0MDAyKTtmPWU9bnVsbDthLlQuaWQmJmEudy5pZCYmKGY9YS5ULmlkK1wiLFwiK2Eudy5pZCxlPWJbZl0pO2c9eGQoYS5SLmR1cmF0aW9uLGQueWEsYS53LlUsZCk7ZT8oZS52YihnKSxlLm9iKGEucHJlc2VudGF0aW9uVGltZWxpbmUubWEoKS1cbmEuUi5zdGFydCkpOihhLnByZXNlbnRhdGlvblRpbWVsaW5lLkdhKDAsZyksZT1uZXcgUyhnKSxmJiZhLkNhJiYoYltmXT1lKSk7YS5DYSYmYS5SLnNifHxnZChlLGEuUi5kdXJhdGlvbik7cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmUuZmluZC5iaW5kKGUpLGdldFNlZ21lbnRSZWZlcmVuY2U6ZS5nZXQuYmluZChlKSxpbml0U2VnbWVudFJlZmVyZW5jZTpjLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6ZC5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fX1mdW5jdGlvbiB2ZChhKXtyZXR1cm4gYS5vYX1cbmZ1bmN0aW9uIHhkKGEsYixjLGQpe3ZhciBlPWQuRmEubGVuZ3RoO2QuRiYmZC5GLmxlbmd0aCE9ZC5GYS5sZW5ndGgmJihlPU1hdGgubWluKGQuRi5sZW5ndGgsZC5GYS5sZW5ndGgpKTtmb3IodmFyIGY9W10sZz1kLnN0YXJ0VGltZSxoPTA7aDxlO2grKyl7dmFyIGw9ZC5GYVtoXSxuPXooYyxbbC5hZF0pO3ZhciBxPW51bGwhPWQuTz9nK2QuTzpkLkY/ZC5GW2hdLmVuZDpnK2E7Zi5wdXNoKG5ldyBPKGgrYixnLHEsZnVuY3Rpb24oYSl7cmV0dXJuIGF9LmJpbmQobnVsbCxuKSxsLnN0YXJ0LGwuZW5kKSk7Zz1xfXJldHVybiBmfVxuZnVuY3Rpb24gd2QoYSl7cmV0dXJuW2Eudy5vYSxhLlMub2EsYS5ULm9hXS5maWx0ZXIoeWEpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gTShhLFwiU2VnbWVudFVSTFwiKX0pLnJlZHVjZShmdW5jdGlvbihhLGMpe3JldHVybiAwPGEubGVuZ3RoP2E6Y30pLm1hcChmdW5jdGlvbihiKXtiLmdldEF0dHJpYnV0ZShcImluZGV4UmFuZ2VcIikmJiFhLlliJiYoYS5ZYj0hMCk7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoXCJtZWRpYVwiKTtiPU4oYixcIm1lZGlhUmFuZ2VcIixMYyx7c3RhcnQ6MCxlbmQ6bnVsbH0pO3JldHVybnthZDpjLHN0YXJ0OmIuc3RhcnQsZW5kOmIuZW5kfX0pfTtmdW5jdGlvbiB5ZChhLGIsYyxkKXt2YXIgZT16ZChhKTt2YXIgZj1XYyhhLEFkKTt2YXIgZz1YYyhhLEFkLFwibWVkaWFcIiksaD1YYyhhLEFkLFwiaW5kZXhcIik7Zj17TzpmLk8sdGltZXNjYWxlOmYudGltZXNjYWxlLHlhOmYueWEscHJlc2VudGF0aW9uVGltZU9mZnNldDpmLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsTmI6Zi5OYixGOmYuRix1YjpnLExhOmh9O2c9MCsoZi5MYT8xOjApO2crPWYuRj8xOjA7Zys9Zi5PPzE6MDtpZighZyl0aHJvdyBuZXcgdCgyLDQsNDAwMik7MSE9ZyYmKGYuTGEmJihmLkY9bnVsbCksZi5PPW51bGwpO2lmKCFmLkxhJiYhZi51Yil0aHJvdyBuZXcgdCgyLDQsNDAwMik7aWYoZi5MYSl7Yz1hLncubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdO2lmKFwibXA0XCIhPWMmJlwid2VibVwiIT1jKXRocm93IG5ldyB0KDIsNCw0MDA2KTtpZihcIndlYm1cIj09YyYmIWUpdGhyb3cgbmV3IHQoMiw0LDQwMDUpO2Q9VmMoZi5MYSxhLncuaWQsbnVsbCxhLmJhbmR3aWR0aHx8bnVsbCxcbm51bGwpO2Q9eihhLncuVSxbZF0pO2E9dGQoYSxiLGUsZCwwLG51bGwsYyxmLnByZXNlbnRhdGlvblRpbWVPZmZzZXQpfWVsc2UgZi5PPyhkfHxhLnByZXNlbnRhdGlvblRpbWVsaW5lLndiKGYuTyksYT1CZChhLGYpKTooZD1iPW51bGwsYS5ULmlkJiZhLncuaWQmJihkPWEuVC5pZCtcIixcIithLncuaWQsYj1jW2RdKSxnPUNkKGEsZiksYj8oYi52YihnKSxiLm9iKGEucHJlc2VudGF0aW9uVGltZWxpbmUubWEoKS1hLlIuc3RhcnQpKTooYS5wcmVzZW50YXRpb25UaW1lbGluZS5HYSgwLGcpLGI9bmV3IFMoZyksZCYmYS5DYSYmKGNbZF09YikpLGEuQ2EmJmEuUi5zYnx8Z2QoYixhLlIuZHVyYXRpb24pLGE9e2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmIuZmluZC5iaW5kKGIpLGdldFNlZ21lbnRSZWZlcmVuY2U6Yi5nZXQuYmluZChiKX0pO3JldHVybntjcmVhdGVTZWdtZW50SW5kZXg6YS5jcmVhdGVTZWdtZW50SW5kZXgsXG5maW5kU2VnbWVudFBvc2l0aW9uOmEuZmluZFNlZ21lbnRQb3NpdGlvbixnZXRTZWdtZW50UmVmZXJlbmNlOmEuZ2V0U2VnbWVudFJlZmVyZW5jZSxpbml0U2VnbWVudFJlZmVyZW5jZTplLHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6Zi5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fX1mdW5jdGlvbiBBZChhKXtyZXR1cm4gYS5SYX1cbmZ1bmN0aW9uIEJkKGEsYil7dmFyIGM9YS5SLmR1cmF0aW9uLGQ9Yi5PLGU9Yi55YSxmPWIudGltZXNjYWxlLGc9Yi51YixoPWEuYmFuZHdpZHRofHxudWxsLGw9YS53LmlkLG49YS53LlU7cmV0dXJue2NyZWF0ZVNlZ21lbnRJbmRleDpQcm9taXNlLnJlc29sdmUuYmluZChQcm9taXNlKSxmaW5kU2VnbWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAwPmF8fGMmJmE+PWM/bnVsbDpNYXRoLmZsb29yKGEvZCl9LGdldFNlZ21lbnRSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9YSpkO3JldHVybiAwPmJ8fGMmJmI+PWM/bnVsbDpuZXcgTyhhLGIsYitkLGZ1bmN0aW9uKCl7dmFyIGM9VmMoZyxsLGErZSxoLGIqZik7cmV0dXJuIHoobixbY10pfSwwLG51bGwpfX19XG5mdW5jdGlvbiBDZChhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLkYubGVuZ3RoO2QrKyl7dmFyIGU9ZCtiLnlhO2MucHVzaChuZXcgTyhlLGIuRltkXS5zdGFydCxiLkZbZF0uZW5kLGZ1bmN0aW9uKGEsYixjLGQsZSxxKXthPVZjKGEsYixlLGMscSk7cmV0dXJuIHooZCxbYV0pLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b1N0cmluZygpfSl9LmJpbmQobnVsbCxiLnViLGEudy5pZCxhLmJhbmR3aWR0aHx8bnVsbCxhLncuVSxlLGIuRltkXS5vZStiLk5iKSwwLG51bGwpKX1yZXR1cm4gY31mdW5jdGlvbiB6ZChhKXt2YXIgYj1YYyhhLEFkLFwiaW5pdGlhbGl6YXRpb25cIik7aWYoIWIpcmV0dXJuIG51bGw7dmFyIGM9YS53LmlkLGQ9YS5iYW5kd2lkdGh8fG51bGwsZT1hLncuVTtyZXR1cm4gbmV3IFpjKGZ1bmN0aW9uKCl7dmFyIGE9VmMoYixjLG51bGwsZCxudWxsKTtyZXR1cm4geihlLFthXSl9LDAsbnVsbCl9O3ZhciBEZD17fSxFZD17fTttKFwic2hha2EubWVkaWEuTWFuaWZlc3RQYXJzZXIucmVnaXN0ZXJQYXJzZXJCeUV4dGVuc2lvblwiLGZ1bmN0aW9uKGEsYil7RWRbYV09Yn0pO20oXCJzaGFrYS5tZWRpYS5NYW5pZmVzdFBhcnNlci5yZWdpc3RlclBhcnNlckJ5TWltZVwiLGZ1bmN0aW9uKGEsYil7RGRbYV09Yn0pO2Z1bmN0aW9uIEZkKCl7dmFyIGE9e30sYjtmb3IoYiBpbiBEZClhW2JdPSEwO2ZvcihiIGluIEVkKWFbYl09ITA7W1wiYXBwbGljYXRpb24vZGFzaCt4bWxcIixcImFwcGxpY2F0aW9uL3gtbXBlZ3VybFwiLFwiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIixcImFwcGxpY2F0aW9uL3ZuZC5tcy1zc3RyK3htbFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2FbYl09ISFEZFtiXX0pO1tcIm1wZFwiLFwibTN1OFwiLFwiaXNtXCJdLmZvckVhY2goZnVuY3Rpb24oYil7YVtiXT0hIUVkW2JdfSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBHZChhLGIsYyxkKXt2YXIgZT1kO2V8fChkPShuZXcgaWEoYSkpLlcuc3BsaXQoXCIvXCIpLnBvcCgpLnNwbGl0KFwiLlwiKSwxPGQubGVuZ3RoJiYoZD1kLnBvcCgpLnRvTG93ZXJDYXNlKCksZT1FZFtkXSkpO2lmKGUpcmV0dXJuIFByb21pc2UucmVzb2x2ZShlKTtjPUMoW2FdLGMpO2MubWV0aG9kPVwiSEVBRFwiO3JldHVybiBiLnJlcXVlc3QoMCxjKS50aGVuKGZ1bmN0aW9uKGIpeyhiPWIuaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSkmJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuKGU9RGRbYl0pP2U6UHJvbWlzZS5yZWplY3QobmV3IHQoMiw0LDRFMyxhKSl9LGZ1bmN0aW9uKGEpe2Euc2V2ZXJpdHk9MjtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9KX07ZnVuY3Rpb24gVChhLGIpe3RoaXMuZj1hO3RoaXMuaT1iO3RoaXMuYz10aGlzLmE9SW5maW5pdHk7dGhpcy5iPTE7dGhpcy5oPTA7dGhpcy5nPSEwfW0oXCJzaGFrYS5tZWRpYS5QcmVzZW50YXRpb25UaW1lbGluZVwiLFQpO1QucHJvdG90eXBlLlk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtULnByb3RvdHlwZS5nZXREdXJhdGlvbj1ULnByb3RvdHlwZS5ZO1QucHJvdG90eXBlLnBhPWZ1bmN0aW9uKGEpe3RoaXMuYT1hfTtULnByb3RvdHlwZS5zZXREdXJhdGlvbj1ULnByb3RvdHlwZS5wYTtULnByb3RvdHlwZS5VYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZ9O1QucHJvdG90eXBlLmdldFByZXNlbnRhdGlvblN0YXJ0VGltZT1ULnByb3RvdHlwZS5VYztULnByb3RvdHlwZS51Yz1mdW5jdGlvbihhKXt0aGlzLmg9YX07VC5wcm90b3R5cGUuc2V0Q2xvY2tPZmZzZXQ9VC5wcm90b3R5cGUudWM7VC5wcm90b3R5cGUud2M9ZnVuY3Rpb24oYSl7dGhpcy5nPWF9O1xuVC5wcm90b3R5cGUuc2V0U3RhdGljPVQucHJvdG90eXBlLndjO1QucHJvdG90eXBlLlZjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY307VC5wcm90b3R5cGUuZ2V0U2VnbWVudEF2YWlsYWJpbGl0eUR1cmF0aW9uPVQucHJvdG90eXBlLlZjO1QucHJvdG90eXBlLnZjPWZ1bmN0aW9uKGEpe3RoaXMuYz1hfTtULnByb3RvdHlwZS5zZXRTZWdtZW50QXZhaWxhYmlsaXR5RHVyYXRpb249VC5wcm90b3R5cGUudmM7VC5wcm90b3R5cGUuR2E9ZnVuY3Rpb24oYSxiKXtiLmxlbmd0aCYmKHRoaXMuYj1iLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLm1heChhLGIuZW5kVGltZS1iLnN0YXJ0VGltZSl9LHRoaXMuYikpfTtULnByb3RvdHlwZS5ub3RpZnlTZWdtZW50cz1ULnByb3RvdHlwZS5HYTtULnByb3RvdHlwZS53Yj1mdW5jdGlvbihhKXt0aGlzLmI9TWF0aC5tYXgodGhpcy5iLGEpfTtULnByb3RvdHlwZS5ub3RpZnlNYXhTZWdtZW50RHVyYXRpb249VC5wcm90b3R5cGUud2I7XG5ULnByb3RvdHlwZS4kPWZ1bmN0aW9uKCl7cmV0dXJuIEluZmluaXR5PT10aGlzLmEmJiF0aGlzLmd9O1QucHJvdG90eXBlLmlzTGl2ZT1ULnByb3RvdHlwZS4kO1QucHJvdG90eXBlLnZhPWZ1bmN0aW9uKCl7cmV0dXJuIEluZmluaXR5IT10aGlzLmEmJiF0aGlzLmd9O1QucHJvdG90eXBlLmlzSW5Qcm9ncmVzcz1ULnByb3RvdHlwZS52YTtULnByb3RvdHlwZS5tYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkRhKDApfTtULnByb3RvdHlwZS5nZXRTZWdtZW50QXZhaWxhYmlsaXR5U3RhcnQ9VC5wcm90b3R5cGUubWE7VC5wcm90b3R5cGUuRGE9ZnVuY3Rpb24oYSl7aWYoSW5maW5pdHk9PXRoaXMuYylyZXR1cm4gMDt2YXIgYj10aGlzLnVhKCk7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4oYi10aGlzLmMrYSxiKSl9O1QucHJvdG90eXBlLmdldFNhZmVBdmFpbGFiaWxpdHlTdGFydD1ULnByb3RvdHlwZS5EYTtcblQucHJvdG90eXBlLnVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgpfHx0aGlzLnZhKCk/TWF0aC5taW4oTWF0aC5tYXgoMCwoRGF0ZS5ub3coKSt0aGlzLmgpLzFFMy10aGlzLmItdGhpcy5mKSx0aGlzLmEpOnRoaXMuYX07VC5wcm90b3R5cGUuZ2V0U2VnbWVudEF2YWlsYWJpbGl0eUVuZD1ULnByb3RvdHlwZS51YTtULnByb3RvdHlwZS5iYj1mdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCgwLHRoaXMudWEoKS0odGhpcy4kKCl8fHRoaXMudmEoKT90aGlzLmk6MCkpfTtULnByb3RvdHlwZS5nZXRTZWVrUmFuZ2VFbmQ9VC5wcm90b3R5cGUuYmI7ZnVuY3Rpb24gSGQoKXt0aGlzLmE9dGhpcy5iPW51bGw7dGhpcy5nPVtdO3RoaXMuYz1udWxsO3RoaXMuaT1bXTt0aGlzLmg9MTt0aGlzLmo9e307dGhpcy5sPTA7dGhpcy5mPW51bGx9bShcInNoYWthLmRhc2guRGFzaFBhcnNlclwiLEhkKTtrPUhkLnByb3RvdHlwZTtrLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt0aGlzLmI9YX07ay5zdGFydD1mdW5jdGlvbihhLGIpe3RoaXMuZz1bYV07dGhpcy5hPWI7cmV0dXJuIElkKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmEmJkpkKHRoaXMsMCk7cmV0dXJuIHRoaXMuY30uYmluZCh0aGlzKSl9O2suc3RvcD1mdW5jdGlvbigpe3RoaXMuYj10aGlzLmE9bnVsbDt0aGlzLmc9W107dGhpcy5jPW51bGw7dGhpcy5pPVtdO3RoaXMuaj17fTtudWxsIT10aGlzLmYmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGwpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07ay51cGRhdGU9ZnVuY3Rpb24oKXtJZCh0aGlzKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYSl0aGlzLmEub25FcnJvcihhKX0uYmluZCh0aGlzKSl9O1xuay5vbkV4cGlyYXRpb25VcGRhdGVkPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBJZChhKXtyZXR1cm4gYS5hLm5ldHdvcmtpbmdFbmdpbmUucmVxdWVzdCgwLEMoYS5nLGEuYi5yZXRyeVBhcmFtZXRlcnMpKS50aGVuKGZ1bmN0aW9uKGEpe2lmKHRoaXMuYSlyZXR1cm4gS2QodGhpcyxhLmRhdGEsYS51cmkpfS5iaW5kKGEpKX1cbmZ1bmN0aW9uIEtkKGEsYixjKXt2YXIgZD1GKGIpLGU9bmV3IERPTVBhcnNlcixmPW51bGw7Yj1udWxsO3RyeXtmPWUucGFyc2VGcm9tU3RyaW5nKGQsXCJ0ZXh0L3htbFwiKX1jYXRjaCh2KXt9ZiYmXCJNUERcIj09Zi5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSYmKGI9Zi5kb2N1bWVudEVsZW1lbnQpO2ImJjA8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCYmKGI9bnVsbCk7aWYoIWIpdGhyb3cgbmV3IHQoMiw0LDQwMDEpO2M9W2NdO2Q9TShiLFwiTG9jYXRpb25cIikubWFwKEljKS5maWx0ZXIoeWEpOzA8ZC5sZW5ndGgmJihjPWEuZz1kKTtkPU0oYixcIkJhc2VVUkxcIikubWFwKEljKTtjPXooYyxkKTt2YXIgZz1OKGIsXCJtaW5CdWZmZXJUaW1lXCIsS2MpO2EubD1OKGIsXCJtaW5pbXVtVXBkYXRlUGVyaW9kXCIsS2MsLTEpO3ZhciBoPU4oYixcImF2YWlsYWJpbGl0eVN0YXJ0VGltZVwiLEpjKSxkPU4oYixcInRpbWVTaGlmdEJ1ZmZlckRlcHRoXCIsS2MpLGw9TihiLFwic3VnZ2VzdGVkUHJlc2VudGF0aW9uRGVsYXlcIixcbktjKSxlPU4oYixcIm1heFNlZ21lbnREdXJhdGlvblwiLEtjKSxmPWIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKXx8XCJzdGF0aWNcIjtpZihhLmMpdmFyIG49YS5jLnByZXNlbnRhdGlvblRpbWVsaW5lO2Vsc2V7dmFyIHE9TWF0aC5tYXgoMTAsMS41KmcpO249bmV3IFQoaCxudWxsIT1sP2w6cSl9dmFyIGg9TGQoYSx7Q2E6XCJzdGF0aWNcIiE9ZixwcmVzZW50YXRpb25UaW1lbGluZTpuLFQ6bnVsbCxSOm51bGwsUzpudWxsLHc6bnVsbCxiYW5kd2lkdGg6dm9pZCAwLFliOiExfSxjLGIpLGw9aC5kdXJhdGlvbixyPWgucGVyaW9kcztuLndjKFwic3RhdGljXCI9PWYpO24ucGEobHx8SW5maW5pdHkpO24udmMobnVsbCE9ZD9kOkluZmluaXR5KTtuLndiKGV8fDEpO2lmKGEuYylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Yj1NKGIsXCJVVENUaW1pbmdcIik7cmV0dXJuIE1kKGEsYyxiLG4uJCgpKS50aGVuKGZ1bmN0aW9uKGEpe3RoaXMuYSYmKG4udWMoYSksdGhpcy5jPXtwcmVzZW50YXRpb25UaW1lbGluZTpuLFxucGVyaW9kczpyLG9mZmxpbmVTZXNzaW9uSWRzOltdLG1pbkJ1ZmZlclRpbWU6Z3x8MH0pfS5iaW5kKGEpKX1cbmZ1bmN0aW9uIExkKGEsYixjLGQpe3ZhciBlPU4oZCxcIm1lZGlhUHJlc2VudGF0aW9uRHVyYXRpb25cIixLYyksZj1bXSxnPTA7ZD1NKGQsXCJQZXJpb2RcIik7Zm9yKHZhciBoPTA7aDxkLmxlbmd0aDtoKyspe3ZhciBsPWRbaF0sZz1OKGwsXCJzdGFydFwiLEtjLGcpLG49TihsLFwiZHVyYXRpb25cIixLYykscT1udWxsO2lmKGghPWQubGVuZ3RoLTEpe3ZhciByPU4oZFtoKzFdLFwic3RhcnRcIixLYyk7bnVsbCE9ciYmKHE9ci1nKX1lbHNlIG51bGwhPWUmJihxPWUtZyk7bnVsbD09cSYmKHE9bik7bD1OZChhLGIsYyx7c3RhcnQ6ZyxkdXJhdGlvbjpxLG5vZGU6bCxzYjpudWxsPT1xfHxoPT1kLmxlbmd0aC0xfSk7Zi5wdXNoKGwpO249Yi5ULmlkO2EuaS5ldmVyeSh6YShuKSkmJihhLmEuZmlsdGVyUGVyaW9kKGwpLGEuaS5wdXNoKG4pLGEuYyYmYS5jLnBlcmlvZHMucHVzaChsKSk7aWYobnVsbD09cSl7Zz1udWxsO2JyZWFrfWcrPXF9cmV0dXJuIG51bGwhPWU/e3BlcmlvZHM6ZixkdXJhdGlvbjplfTpcbntwZXJpb2RzOmYsZHVyYXRpb246Z319XG5mdW5jdGlvbiBOZChhLGIsYyxkKXtiLlQ9T2QoZC5ub2RlLG51bGwsYyk7Yi5SPWQ7Yi5ULmlkfHwoYi5ULmlkPVwiX19zaGFrYV9wZXJpb2RfXCIrZC5zdGFydCk7TShkLm5vZGUsXCJFdmVudFN0cmVhbVwiKS5mb3JFYWNoKGEuRGQuYmluZChhLGQuc3RhcnQsZC5kdXJhdGlvbikpO2M9TShkLm5vZGUsXCJBZGFwdGF0aW9uU2V0XCIpLm1hcChhLkJkLmJpbmQoYSxiKSkuZmlsdGVyKHlhKTt2YXIgZT1jLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5OZH0pLnJlZHVjZSh4LFtdKSxmPWUuZmlsdGVyKEFhKTtpZihiLkNhJiZlLmxlbmd0aCE9Zi5sZW5ndGgpdGhyb3cgbmV3IHQoMiw0LDQwMTgpO3ZhciBnPWMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFhLk1ifSk7Yy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuTWJ9KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RyZWFtc1swXSxjPWEuTWI7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuaWQ9PWMmJmEuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EudHJpY2tNb2RlVmlkZW89XG5ifSl9KX0pO2U9UGQoZyxcInZpZGVvXCIpO2Y9UGQoZyxcImF1ZGlvXCIpO2lmKCFlLmxlbmd0aCYmIWYubGVuZ3RoKXRocm93IG5ldyB0KDIsNCw0MDA0KTtmLmxlbmd0aHx8KGY9W251bGxdKTtlLmxlbmd0aHx8KGU9W251bGxdKTtiPVtdO2ZvcihjPTA7YzxmLmxlbmd0aDtjKyspZm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspUWQoYSxmW2NdLGVbaF0sYik7YT1QZChnLFwidGV4dFwiKTtlPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZS5wdXNoLmFwcGx5KGUsYVtjXS5zdHJlYW1zKTtyZXR1cm57c3RhcnRUaW1lOmQuc3RhcnQsdGV4dFN0cmVhbXM6ZSx2YXJpYW50czpifX1mdW5jdGlvbiBQZChhLGIpe3JldHVybiBhLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50VHlwZT09Yn0pfVxuZnVuY3Rpb24gUWQoYSxiLGMsZCl7aWYoYnx8YylpZihiJiZjKXt2YXIgZT1iLmRybUluZm9zO3ZhciBmPWMuZHJtSW5mb3M7aWYoZS5sZW5ndGgmJmYubGVuZ3RoPzA8c2IoZSxmKS5sZW5ndGg6MSlmb3IodmFyIGc9c2IoYi5kcm1JbmZvcyxjLmRybUluZm9zKSxlPTA7ZTxiLnN0cmVhbXMubGVuZ3RoO2UrKylmb3IodmFyIGg9MDtoPGMuc3RyZWFtcy5sZW5ndGg7aCsrKWY9Yy5zdHJlYW1zW2hdLmJhbmR3aWR0aCtiLnN0cmVhbXNbZV0uYmFuZHdpZHRoLGY9e2lkOmEuaCsrLGxhbmd1YWdlOmIubGFuZ3VhZ2UscHJpbWFyeTpiLnRifHxjLnRiLGF1ZGlvOmIuc3RyZWFtc1tlXSx2aWRlbzpjLnN0cmVhbXNbaF0sYmFuZHdpZHRoOmYsZHJtSW5mb3M6ZyxhbGxvd2VkQnlBcHBsaWNhdGlvbjohMCxhbGxvd2VkQnlLZXlTeXN0ZW06ITB9LGQucHVzaChmKX1lbHNlIGZvcihnPWJ8fGMsZT0wO2U8Zy5zdHJlYW1zLmxlbmd0aDtlKyspZj1nLnN0cmVhbXNbZV0uYmFuZHdpZHRoLGY9e2lkOmEuaCsrLFxubGFuZ3VhZ2U6Zy5sYW5ndWFnZXx8XCJ1bmRcIixwcmltYXJ5OmcudGIsYXVkaW86Yj9nLnN0cmVhbXNbZV06bnVsbCx2aWRlbzpjP2cuc3RyZWFtc1tlXTpudWxsLGJhbmR3aWR0aDpmLGRybUluZm9zOmcuZHJtSW5mb3MsYWxsb3dlZEJ5QXBwbGljYXRpb246ITAsYWxsb3dlZEJ5S2V5U3lzdGVtOiEwfSxkLnB1c2goZil9XG5rLkJkPWZ1bmN0aW9uKGEsYil7YS5TPU9kKGIsYS5ULG51bGwpO3ZhciBjPSExLGQ9TShiLFwiUm9sZVwiKSxlPWQubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSkuZmlsdGVyKHlhKSxmPXZvaWQgMDtcInRleHRcIj09YS5TLmNvbnRlbnRUeXBlJiYoZj1cInN1YnRpdGxlXCIpO2Zvcih2YXIgZz0wO2c8ZC5sZW5ndGg7ZysrKXt2YXIgaD1kW2ddLmdldEF0dHJpYnV0ZShcInNjaGVtZUlkVXJpXCIpO2lmKG51bGw9PWh8fFwidXJuOm1wZWc6ZGFzaDpyb2xlOjIwMTFcIj09aClzd2l0Y2goaD1kW2ddLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLGgpe2Nhc2UgXCJtYWluXCI6Yz0hMDticmVhaztjYXNlIFwiY2FwdGlvblwiOmNhc2UgXCJzdWJ0aXRsZVwiOmY9aH19dmFyIGw9bnVsbCxuPSExO00oYixcIkVzc2VudGlhbFByb3BlcnR5XCIpLmZvckVhY2goZnVuY3Rpb24oYSl7XCJodHRwOi8vZGFzaGlmLm9yZy9ndWlkZWxpbmVzL3RyaWNrbW9kZVwiPT1hLmdldEF0dHJpYnV0ZShcInNjaGVtZUlkVXJpXCIpP1xubD1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpOm49ITB9KTtpZihuKXJldHVybiBudWxsO3ZhciBkPU0oYixcIkNvbnRlbnRQcm90ZWN0aW9uXCIpLHE9UmMoZCx0aGlzLmIuZGFzaC5jdXN0b21TY2hlbWUsdGhpcy5iLmRhc2guaWdub3JlRHJtSW5mbyksZD1TYihiLmdldEF0dHJpYnV0ZShcImxhbmdcIil8fFwidW5kXCIpLGg9Yi5nZXRBdHRyaWJ1dGUoXCJsYWJlbFwiKSxnPU0oYixcIlJlcHJlc2VudGF0aW9uXCIpLGU9Zy5tYXAodGhpcy5FZC5iaW5kKHRoaXMsYSxxLGYsZCxoLGMsZSkpLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hIWF9KTtpZighZS5sZW5ndGgpdGhyb3cgbmV3IHQoMiw0LDQwMDMpO2EuUy5jb250ZW50VHlwZXx8KGEuUy5jb250ZW50VHlwZT1SZChlWzBdLm1pbWVUeXBlLGVbMF0uY29kZWNzKSxlLmZvckVhY2goZnVuY3Rpb24oYil7Yi50eXBlPWEuUy5jb250ZW50VHlwZX0pKTtlLmZvckVhY2goZnVuY3Rpb24oYSl7cS5kcm1JbmZvcy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Eua2V5SWQmJlxuYi5rZXlJZHMucHVzaChhLmtleUlkKX0pfSk7Zj1nLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKX0pLmZpbHRlcih5YSk7cmV0dXJue2lkOmEuUy5pZHx8XCJfX2Zha2VfX1wiK3RoaXMuaCsrLGNvbnRlbnRUeXBlOmEuUy5jb250ZW50VHlwZSxsYW5ndWFnZTpkLHRiOmMsc3RyZWFtczplLGRybUluZm9zOnEuZHJtSW5mb3MsTWI6bCxOZDpmfX07XG5rLkVkPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7YS53PU9kKGgsYS5TLG51bGwpO2lmKCFTZChhLncpKXJldHVybiBudWxsO2EuYmFuZHdpZHRoPU4oaCxcImJhbmR3aWR0aFwiLE5jKXx8dm9pZCAwO3ZhciBsPXRoaXMuT2QuYmluZCh0aGlzKTtpZihhLncuUWEpbD1yZChhLGwpO2Vsc2UgaWYoYS53Lm9hKWw9dWQoYSx0aGlzLmopO2Vsc2UgaWYoYS53LlJhKWw9eWQoYSxsLHRoaXMuaiwhIXRoaXMuYyk7ZWxzZXt2YXIgbj1hLncuVSxxPWEuUi5kdXJhdGlvbnx8MDtsPXtjcmVhdGVTZWdtZW50SW5kZXg6UHJvbWlzZS5yZXNvbHZlLmJpbmQoUHJvbWlzZSksZmluZFNlZ21lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gMDw9YSYmYTxxPzE6bnVsbH0sZ2V0U2VnbWVudFJlZmVyZW5jZTpmdW5jdGlvbihhKXtyZXR1cm4gMSE9YT9udWxsOm5ldyBPKDEsMCxxLGZ1bmN0aW9uKCl7cmV0dXJuIG59LDAsbnVsbCl9LGluaXRTZWdtZW50UmVmZXJlbmNlOm51bGwscHJlc2VudGF0aW9uVGltZU9mZnNldDowfX1oPVxuTShoLFwiQ29udGVudFByb3RlY3Rpb25cIik7aD1VYyhoLHRoaXMuYi5kYXNoLmN1c3RvbVNjaGVtZSxiLHRoaXMuYi5kYXNoLmlnbm9yZURybUluZm8pO3JldHVybntpZDp0aGlzLmgrKyxjcmVhdGVTZWdtZW50SW5kZXg6bC5jcmVhdGVTZWdtZW50SW5kZXgsZmluZFNlZ21lbnRQb3NpdGlvbjpsLmZpbmRTZWdtZW50UG9zaXRpb24sZ2V0U2VnbWVudFJlZmVyZW5jZTpsLmdldFNlZ21lbnRSZWZlcmVuY2UsaW5pdFNlZ21lbnRSZWZlcmVuY2U6bC5pbml0U2VnbWVudFJlZmVyZW5jZSxwcmVzZW50YXRpb25UaW1lT2Zmc2V0OmwucHJlc2VudGF0aW9uVGltZU9mZnNldCxtaW1lVHlwZTphLncubWltZVR5cGUsY29kZWNzOmEudy5jb2RlY3MsZnJhbWVSYXRlOmEudy5mcmFtZVJhdGUsYmFuZHdpZHRoOmEuYmFuZHdpZHRoLHdpZHRoOmEudy53aWR0aCxoZWlnaHQ6YS53LmhlaWdodCxraW5kOmMsZW5jcnlwdGVkOjA8Yi5kcm1JbmZvcy5sZW5ndGgsa2V5SWQ6aCxsYW5ndWFnZTpkLGxhYmVsOmUsXG50eXBlOmEuUy5jb250ZW50VHlwZSxwcmltYXJ5OmYsdHJpY2tNb2RlVmlkZW86bnVsbCxjb250YWluc0Vtc2dCb3hlczphLncuY29udGFpbnNFbXNnQm94ZXMscm9sZXM6Z319O2suZmU9ZnVuY3Rpb24oKXt0aGlzLmY9bnVsbDt2YXIgYT1EYXRlLm5vdygpO0lkKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmEmJkpkKHRoaXMsKERhdGUubm93KCktYSkvMUUzKX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLmEmJihhLnNldmVyaXR5PTEsdGhpcy5hLm9uRXJyb3IoYSksSmQodGhpcywwKSl9LmJpbmQodGhpcykpfTtmdW5jdGlvbiBKZChhLGIpezA+YS5sfHwoYS5mPXdpbmRvdy5zZXRUaW1lb3V0KGEuZmUuYmluZChhKSwxRTMqTWF0aC5tYXgoTWF0aC5tYXgoMyxhLmwpLWIsMCkpKX1cbmZ1bmN0aW9uIE9kKGEsYixjKXtiPWJ8fHtjb250ZW50VHlwZTpcIlwiLG1pbWVUeXBlOlwiXCIsY29kZWNzOlwiXCIsY29udGFpbnNFbXNnQm94ZXM6ITEsZnJhbWVSYXRlOnZvaWQgMH07Yz1jfHxiLlU7dmFyIGQ9TShhLFwiQmFzZVVSTFwiKS5tYXAoSWMpLGU9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50VHlwZVwiKXx8Yi5jb250ZW50VHlwZSxmPWEuZ2V0QXR0cmlidXRlKFwibWltZVR5cGVcIil8fGIubWltZVR5cGUsZz1hLmdldEF0dHJpYnV0ZShcImNvZGVjc1wiKXx8Yi5jb2RlY3MsaD1OKGEsXCJmcmFtZVJhdGVcIixQYyl8fGIuZnJhbWVSYXRlLGw9ISFNKGEsXCJJbmJhbmRFdmVudFN0cmVhbVwiKS5sZW5ndGg7ZXx8KGU9UmQoZixnKSk7cmV0dXJue1U6eihjLGQpLFFhOkhjKGEsXCJTZWdtZW50QmFzZVwiKXx8Yi5RYSxvYTpIYyhhLFwiU2VnbWVudExpc3RcIil8fGIub2EsUmE6SGMoYSxcIlNlZ21lbnRUZW1wbGF0ZVwiKXx8Yi5SYSx3aWR0aDpOKGEsXCJ3aWR0aFwiLE9jKXx8Yi53aWR0aCxoZWlnaHQ6TihhLFwiaGVpZ2h0XCIsXG5PYyl8fGIuaGVpZ2h0LGNvbnRlbnRUeXBlOmUsbWltZVR5cGU6Zixjb2RlY3M6ZyxmcmFtZVJhdGU6aCxjb250YWluc0Vtc2dCb3hlczpsfHxiLmNvbnRhaW5zRW1zZ0JveGVzLGlkOmEuZ2V0QXR0cmlidXRlKFwiaWRcIil9fWZ1bmN0aW9uIFNkKGEpe3ZhciBiPTArKGEuUWE/MTowKTtiKz1hLm9hPzE6MDtiKz1hLlJhPzE6MDtpZighYilyZXR1cm5cInRleHRcIj09YS5jb250ZW50VHlwZXx8XCJhcHBsaWNhdGlvblwiPT1hLmNvbnRlbnRUeXBlPyEwOiExOzEhPWImJihhLlFhJiYoYS5vYT1udWxsKSxhLlJhPW51bGwpO3JldHVybiEwfVxuZnVuY3Rpb24gVGQoYSxiLGMsZCl7Yj16KGIsW2NdKTtiPUMoYixhLmIucmV0cnlQYXJhbWV0ZXJzKTtiLm1ldGhvZD1kO3JldHVybiBhLmEubmV0d29ya2luZ0VuZ2luZS5yZXF1ZXN0KDAsYikudGhlbihmdW5jdGlvbihhKXtpZihcIkhFQURcIj09ZCl7aWYoIWEuaGVhZGVyc3x8IWEuaGVhZGVycy5kYXRlKXJldHVybiAwO2E9YS5oZWFkZXJzLmRhdGV9ZWxzZSBhPUYoYS5kYXRhKTthPURhdGUucGFyc2UoYSk7cmV0dXJuIGlzTmFOKGEpPzA6YS1EYXRlLm5vdygpfSl9XG5mdW5jdGlvbiBNZChhLGIsYyxkKXtjPWMubWFwKGZ1bmN0aW9uKGEpe3JldHVybntzY2hlbWU6YS5nZXRBdHRyaWJ1dGUoXCJzY2hlbWVJZFVyaVwiKSx2YWx1ZTphLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfX0pO3ZhciBlPWEuYi5kYXNoLmNsb2NrU3luY1VyaTtkJiYhYy5sZW5ndGgmJmUmJmMucHVzaCh7c2NoZW1lOlwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1oZWFkOjIwMTRcIix2YWx1ZTplfSk7cmV0dXJuIHhhKGMsZnVuY3Rpb24oYSl7dmFyIGM9YS52YWx1ZTtzd2l0Y2goYS5zY2hlbWUpe2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLWhlYWQ6MjAxNFwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLWhlYWQ6MjAxMlwiOnJldHVybiBUZCh0aGlzLGIsYyxcIkhFQURcIik7Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAteHNkYXRlOjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6aHR0cC1pc286MjAxNFwiOmNhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLXhzZGF0ZToyMDEyXCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOmh0dHAtaXNvOjIwMTJcIjpyZXR1cm4gVGQodGhpcyxcbmIsYyxcIkdFVFwiKTtjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6ZGlyZWN0OjIwMTRcIjpjYXNlIFwidXJuOm1wZWc6ZGFzaDp1dGM6ZGlyZWN0OjIwMTJcIjpyZXR1cm4gYT1EYXRlLnBhcnNlKGMpLGlzTmFOKGEpPzA6YS1EYXRlLm5vdygpO2Nhc2UgXCJ1cm46bXBlZzpkYXNoOnV0YzpodHRwLW50cDoyMDE0XCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOm50cDoyMDE0XCI6Y2FzZSBcInVybjptcGVnOmRhc2g6dXRjOnNudHA6MjAxNFwiOnJldHVybiBQcm9taXNlLnJlamVjdCgpO2RlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KCl9fS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KX1cbmsuRGQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZ2V0QXR0cmlidXRlKFwic2NoZW1lSWRVcmlcIil8fFwiXCIsZT1jLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfHxcIlwiLGY9TihjLFwidGltZXNjYWxlXCIsT2MpfHwxO00oYyxcIkV2ZW50XCIpLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGc9TihjLFwicHJlc2VudGF0aW9uVGltZVwiLE9jKXx8MCxsPU4oYyxcImR1cmF0aW9uXCIsT2MpfHwwLGc9Zy9mK2EsbD1nK2wvZjtudWxsIT1iJiYoZz1NYXRoLm1pbihnLGErYiksbD1NYXRoLm1pbihsLGErYikpO2M9e3NjaGVtZUlkVXJpOmQsdmFsdWU6ZSxzdGFydFRpbWU6ZyxlbmRUaW1lOmwsaWQ6Yy5nZXRBdHRyaWJ1dGUoXCJpZFwiKXx8XCJcIixldmVudEVsZW1lbnQ6Y307dGhpcy5hLm9uVGltZWxpbmVSZWdpb25BZGRlZChjKX0uYmluZCh0aGlzKSl9O1xuay5PZD1mdW5jdGlvbihhLGIsYyl7YT1DKGEsdGhpcy5iLnJldHJ5UGFyYW1ldGVycyk7bnVsbCE9YiYmKGEuaGVhZGVycy5SYW5nZT1cImJ5dGVzPVwiK2IrXCItXCIrKG51bGwhPWM/YzpcIlwiKSk7cmV0dXJuIHRoaXMuYS5uZXR3b3JraW5nRW5naW5lLnJlcXVlc3QoMSxhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGF9KX07ZnVuY3Rpb24gUmQoYSxiKXtyZXR1cm4gdWJbWWIoYSxiKV0/XCJ0ZXh0XCI6YS5zcGxpdChcIi9cIilbMF19RWQubXBkPUhkO0RkW1wiYXBwbGljYXRpb24vZGFzaCt4bWxcIl09SGQ7ZnVuY3Rpb24gVWQoYSxiLGMsZCl7dGhpcy51cmk9YTt0aGlzLnR5cGU9Yjt0aGlzLmdhPWM7dGhpcy5zZWdtZW50cz1kfHxudWxsfWZ1bmN0aW9uIFZkKGEsYixjLGQpe3RoaXMuaWQ9YTt0aGlzLm5hbWU9Yjt0aGlzLmE9Yzt0aGlzLnZhbHVlPWR8fG51bGx9VmQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS5uYW1lKyc9XCInK2EudmFsdWUrJ1wiJ31yZXR1cm4gdGhpcy52YWx1ZT9cIiNcIit0aGlzLm5hbWUrXCI6XCIrdGhpcy52YWx1ZTowPHRoaXMuYS5sZW5ndGg/XCIjXCIrdGhpcy5uYW1lK1wiOlwiK3RoaXMuYS5tYXAoYSkuam9pbihcIixcIik6XCIjXCIrdGhpcy5uYW1lfTtmdW5jdGlvbiBXZChhLGIpe3RoaXMubmFtZT1hO3RoaXMudmFsdWU9Yn1WZC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYS5maWx0ZXIoZnVuY3Rpb24oYil7cmV0dXJuIGIubmFtZT09YX0pO3JldHVybiBiLmxlbmd0aD9iWzBdOm51bGx9O1xuZnVuY3Rpb24gWGQoYSxiLGMpe2M9Y3x8bnVsbDtyZXR1cm4oYT1hLmdldEF0dHJpYnV0ZShiKSk/YS52YWx1ZTpjfWZ1bmN0aW9uIFlkKGEsYil7dGhpcy5nYT1iO3RoaXMudXJpPWF9O2Z1bmN0aW9uIFpkKGEsYil7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLm5hbWU9PWJ9KX1mdW5jdGlvbiAkZChhLGIpe3ZhciBjPVpkKGEsYik7cmV0dXJuIGMubGVuZ3RoP2NbMF06bnVsbH1mdW5jdGlvbiBhZShhLGIsYyl7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3ZhciBkPWEuZ2V0QXR0cmlidXRlKFwiVFlQRVwiKTthPWEuZ2V0QXR0cmlidXRlKFwiR1JPVVAtSURcIik7cmV0dXJuIGQudmFsdWU9PWImJmEudmFsdWU9PWN9KX07ZnVuY3Rpb24gYmUoYSl7dGhpcy5iPWE7dGhpcy5hPTB9ZnVuY3Rpb24gY2UoYSxiKXtiLmxhc3RJbmRleD1hLmE7dmFyIGM9KGM9Yi5leGVjKGEuYikpP3twb3NpdGlvbjpjLmluZGV4LGxlbmd0aDpjWzBdLmxlbmd0aCxRZDpjfTpudWxsO2lmKGEuYT09YS5iLmxlbmd0aHx8IWN8fGMucG9zaXRpb24hPWEuYSlyZXR1cm4gbnVsbDthLmErPWMubGVuZ3RoO3JldHVybiBjLlFkfWZ1bmN0aW9uIGRlKGEpe3JldHVybiBhLmE9PWEuYi5sZW5ndGg/bnVsbDooYT1jZShhLC9bXiBcXHRcXG5dKi9nbSkpP2FbMF06bnVsbH07ZnVuY3Rpb24gZWUoKXt0aGlzLmE9MH1cbmZ1bmN0aW9uIGZlKGEsYixjKXtiPUYoYik7Yj1iLnJlcGxhY2UoL1xcclxcbnxcXHIoPz1bXlxcbl18JCkvZ20sXCJcXG5cIikudHJpbSgpO3ZhciBkPWIuc3BsaXQoL1xcbisvbSk7aWYoIS9eI0VYVE0zVSgkfFsgXFx0XFxuXSkvbS50ZXN0KGRbMF0pKXRocm93IG5ldyB0KDIsNCw0MDE1KTtiPTA7Zm9yKHZhciBlPVtdLGY9MTtmPGQubGVuZ3RoOylpZigvXiMoPyFFWFQpL20udGVzdChkW2ZdKSlmKz0xO2Vsc2V7dmFyIGc9ZFtmXTtnPWdlKGEuYSsrLGcpO2lmKDA8PWhlLmluZGV4T2YoZy5uYW1lKSliPTE7ZWxzZSBpZigwPD1pZS5pbmRleE9mKGcubmFtZSkpe2lmKDEhPWIpdGhyb3cgbmV3IHQoMiw0LDQwMTcpO2Q9ZC5zcGxpY2UoZixkLmxlbmd0aC1mKTthPWplKGEsZCk7cmV0dXJuIG5ldyBVZChjLGIsZSxhKX1lLnB1c2goZyk7Zis9MTtcIkVYVC1YLVNUUkVBTS1JTkZcIj09Zy5uYW1lJiYoZy5hLnB1c2gobmV3IFdkKFwiVVJJXCIsZFtmXSkpLGYrPTEpfXJldHVybiBuZXcgVWQoYyxiLGUpfVxuZnVuY3Rpb24gamUoYSxiKXt2YXIgYz1bXSxkPVtdO2IuZm9yRWFjaChmdW5jdGlvbihhKXsvXigjRVhUKS8udGVzdChhKT8oYT1nZSh0aGlzLmErKyxhKSxkLnB1c2goYSkpOi9eIyg/IUVYVCkvbS50ZXN0KGEpfHwoYy5wdXNoKG5ldyBZZChhLnRyaW0oKSxkKSksZD1bXSl9LmJpbmQoYSkpO3JldHVybiBjfWZ1bmN0aW9uIGdlKGEsYil7dmFyIGM9Yi5tYXRjaCgvXiMoRVhUW146XSopKD86OiguKikpPyQvKTtpZighYyl0aHJvdyBuZXcgdCgyLDQsNDAxNik7dmFyIGQ9Y1sxXSxlPWNbMl0sYz1bXTtpZihlJiYwPD1lLmluZGV4T2YoXCI9XCIpKWZvcih2YXIgZT1uZXcgYmUoZSksZixnPS8oW149XSspPSg/OlwiKFteXCJdKilcInwoW15cIixdKikpKD86LHwkKS9nO2Y9Y2UoZSxnKTspYy5wdXNoKG5ldyBXZChmWzFdLGZbMl18fGZbM10pKTtlbHNlIGlmKGUpcmV0dXJuIG5ldyBWZChhLGQsYyxlKTtyZXR1cm4gbmV3IFZkKGEsZCxjKX1cbnZhciBoZT1cIkVYVC1YLVRBUkdFVERVUkFUSU9OIEVYVC1YLU1FRElBLVNFUVVFTkNFIEVYVC1YLURJU0NPTlRJTlVJVFktU0VRVUVOQ0UgRVhULVgtUExBWUxJU1QtVFlQRSBFWFQtWC1NQVAgRVhULVgtSS1GUkFNRVMtT05MWVwiLnNwbGl0KFwiIFwiKSxpZT1cIkVYVElORiBFWFQtWC1CWVRFUkFOR0UgRVhULVgtRElTQ09OVElOVUlUWSBFWFQtWC1QUk9HUkFNLURBVEUtVElNRSBFWFQtWC1LRVkgRVhULVgtREFURVJBTkdFXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIGtlKGEpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihiKXt2YXIgYz1rZS5wYXJzZShhKTtiKHt1cmk6YSxkYXRhOmMuZGF0YSxoZWFkZXJzOntcImNvbnRlbnQtdHlwZVwiOmMuY29udGVudFR5cGV9fSl9KX1tKFwic2hha2EubmV0LkRhdGFVcmlQbHVnaW5cIixrZSk7XG5rZS5wYXJzZT1mdW5jdGlvbihhKXt2YXIgYj1hLnNwbGl0KFwiOlwiKTtpZigyPmIubGVuZ3RofHxcImRhdGFcIiE9YlswXSl0aHJvdyBuZXcgdCgyLDEsMTAwNCxhKTtiPWIuc2xpY2UoMSkuam9pbihcIjpcIikuc3BsaXQoXCIsXCIpO2lmKDI+Yi5sZW5ndGgpdGhyb3cgbmV3IHQoMiwxLDEwMDQsYSk7dmFyIGM9YlswXSxiPXdpbmRvdy5kZWNvZGVVUklDb21wb25lbnQoYi5zbGljZSgxKS5qb2luKFwiLFwiKSksYz1jLnNwbGl0KFwiO1wiKSxkPW51bGw7MTxjLmxlbmd0aCYmKGQ9Y1sxXSk7aWYoXCJiYXNlNjRcIj09ZClhPVlhKGIpLmJ1ZmZlcjtlbHNle2lmKGQpdGhyb3cgbmV3IHQoMiwxLDEwMDUsYSk7YT1VYShiKX1yZXR1cm57ZGF0YTphLGNvbnRlbnRUeXBlOmNbMF19fTtFYS5kYXRhPWtlO2Z1bmN0aW9uIGxlKCl7dGhpcy5iPXRoaXMuYz1udWxsO3RoaXMuaT0xO3RoaXMuZz17fTt0aGlzLmY9e307dGhpcy5hPW51bGw7dGhpcy5qPVwiXCI7dGhpcy5oPW5ldyBlZX1tKFwic2hha2EuaGxzLkhsc1BhcnNlclwiLGxlKTtrPWxlLnByb3RvdHlwZTtrLmNvbmZpZ3VyZT1mdW5jdGlvbihhKXt0aGlzLmI9YX07ay5zdGFydD1mdW5jdGlvbihhLGIpe3RoaXMuYz1iO3RoaXMuaj1hO3JldHVybiB0aGlzLmMubmV0d29ya2luZ0VuZ2luZS5yZXF1ZXN0KDAsQyhbYV0sdGhpcy5iLnJldHJ5UGFyYW1ldGVycykpLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIG5lKHRoaXMsYi5kYXRhLGEpfS5iaW5kKHRoaXMpKX07ay5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5iPXRoaXMuYz1udWxsO3RoaXMuZz17fTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O2sudXBkYXRlPWZ1bmN0aW9uKCl7fTtrLm9uRXhwaXJhdGlvblVwZGF0ZWQ9ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gbmUoYSxiLGMpe2I9ZmUoYS5oLGIsYyk7aWYoMCE9Yi50eXBlKXRocm93IG5ldyB0KDIsNCw0MDIyKTthLmE9bmV3IFQobnVsbCwwKTtyZXR1cm4gb2UoYSxiKS50aGVuKGZ1bmN0aW9uKGEpe3RoaXMuYy5maWx0ZXJQZXJpb2QoYSk7cmV0dXJue3ByZXNlbnRhdGlvblRpbWVsaW5lOnRoaXMuYSxwZXJpb2RzOlthXSxvZmZsaW5lU2Vzc2lvbklkczpbXSxtaW5CdWZmZXJUaW1lOjB9fS5iaW5kKGEpKX1cbmZ1bmN0aW9uIG9lKGEsYil7dmFyIGM9WmQoYi5nYSxcIkVYVC1YLVNUUkVBTS1JTkZcIikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBwZSh0aGlzLGEsYil9LmJpbmQoYSkpLGQ9WmQoYi5nYSxcIkVYVC1YLU1FRElBXCIpLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cIlNVQlRJVExFU1wiPT1VKGEsXCJUWVBFXCIpfS5iaW5kKGEpKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHFlKHRoaXMsYSxiKX0uYmluZChhKSk7cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIFByb21pc2UuYWxsKGQpLnRoZW4oZnVuY3Rpb24oYil7dmFyIGM9YS5yZWR1Y2UoeCxbXSk7cmUodGhpcyxjKTtyZXR1cm57c3RhcnRUaW1lOjAsdmFyaWFudHM6Yyx0ZXh0U3RyZWFtczpifX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpfVxuZnVuY3Rpb24gcGUoYSxiLGMpe3ZhciBkPU51bWJlcihVKGIsXCJCQU5EV0lEVEhcIikpLGU9WGQoYixcIkNPREVDU1wiLFwiYXZjMS40MkUwMUUsbXA0YS40MC4yXCIpLnNwbGl0KFwiLFwiKSxmPWIuZ2V0QXR0cmlidXRlKFwiUkVTT0xVVElPTlwiKSxnPW51bGwsaD1udWxsLGw9WGQoYixcIkZSQU1FLVJBVEVcIik7aWYoZil2YXIgbj1mLnZhbHVlLnNwbGl0KFwieFwiKSxnPW5bMF0saD1uWzFdO3ZhciBxPXNlKGEsYyk7Yz1aZChjLmdhLFwiRVhULVgtTUVESUFcIik7dmFyIHI9WGQoYixcIkFVRElPXCIpLHY9WGQoYixcIlZJREVPXCIpO3I/Yz1hZShjLFwiQVVESU9cIixyKTp2JiYoYz1hZShjLFwiVklERU9cIix2KSk7Yz1jLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gdGUodGhpcyxhLGUscSl9LmJpbmQoYSkpO3ZhciB1PVtdLHc9W107cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oZnVuY3Rpb24oYSl7cj91PWE6diYmKHc9YSk7aWYodS5sZW5ndGh8fHcubGVuZ3RoKXZhciBjPXUubGVuZ3RoP1widmlkZW9cIjpcImF1ZGlvXCI7XG5lbHNlIDE9PWUubGVuZ3RoP2M9Znx8bD9cInZpZGVvXCI6XCJhdWRpb1wiOihjPVwidmlkZW9cIixlPVtlLmpvaW4oXCIsXCIpXSk7YT1lO3ZhciBkPVUoYixcIlVSSVwiKTtyZXR1cm4gdmUodGhpcyxkLGEsYyxxLFwidW5kXCIsITEsbnVsbCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oYSl7XCJhdWRpb1wiPT1hLnN0cmVhbS50eXBlP3U9W2FdOnc9W2FdO3JldHVybiB3ZSh0aGlzLHUsdyxkLGcsaCxsKX0uYmluZChhKSl9XG5mdW5jdGlvbiB3ZShhLGIsYyxkLGUsZixnKXtjLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoYT1hLnN0cmVhbSlhLndpZHRoPU51bWJlcihlKXx8dm9pZCAwLGEuaGVpZ2h0PU51bWJlcihmKXx8dm9pZCAwLGEuZnJhbWVSYXRlPU51bWJlcihnKXx8dm9pZCAwfS5iaW5kKGEpKTtiLmxlbmd0aHx8KGI9W251bGxdKTtjLmxlbmd0aHx8KGM9W251bGxdKTtmb3IodmFyIGg9W10sbD0wO2w8Yi5sZW5ndGg7bCsrKWZvcih2YXIgbj0wO248Yy5sZW5ndGg7bisrKXt2YXIgcT1iW2xdP2JbbF0uc3RyZWFtOm51bGwscj1jW25dP2Nbbl0uc3RyZWFtOm51bGwsdj1iW2xdP2JbbF0uZHJtSW5mb3M6bnVsbCx1PWNbbl0/Y1tuXS5kcm1JbmZvczpudWxsO2lmKHEmJnIpaWYodi5sZW5ndGgmJnUubGVuZ3RoPzA8c2Iodix1KS5sZW5ndGg6MSl2YXIgdz1zYih2LHUpO2Vsc2UgY29udGludWU7ZWxzZSBxP3c9djpyJiYodz11KTtoLnB1c2goeGUoYSxxLHIsZCx3KSl9cmV0dXJuIGh9XG5mdW5jdGlvbiB4ZShhLGIsYyxkLGUpe3JldHVybntpZDphLmkrKyxsYW5ndWFnZTpiP2IubGFuZ3VhZ2U6XCJ1bmRcIixwcmltYXJ5OiEhYiYmYi5wcmltYXJ5fHwhIWMmJmMucHJpbWFyeSxhdWRpbzpiLHZpZGVvOmMsYmFuZHdpZHRoOmQsZHJtSW5mb3M6ZSxhbGxvd2VkQnlBcHBsaWNhdGlvbjohMCxhbGxvd2VkQnlLZXlTeXN0ZW06ITB9fWZ1bmN0aW9uIHFlKGEsYixjKXtVKGIsXCJUWVBFXCIpO2M9c2UoYSxjKTtyZXR1cm4gdGUoYSxiLFtdLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RyZWFtfSl9XG5mdW5jdGlvbiB0ZShhLGIsYyxkKXtpZihhLmdbYi5pZF0pcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nW2IuaWRdfS5iaW5kKGEpKTt2YXIgZT1VKGIsXCJUWVBFXCIpLnRvTG93ZXJDYXNlKCk7XCJzdWJ0aXRsZXNcIj09ZSYmKGU9XCJ0ZXh0XCIpO3ZhciBmPVNiKFhkKGIsXCJMQU5HVUFHRVwiLFwidW5kXCIpKSxnPVhkKGIsXCJOQU1FXCIpLGg9Yi5nZXRBdHRyaWJ1dGUoXCJERUZBVUxUXCIpLGw9Yi5nZXRBdHRyaWJ1dGUoXCJBVVRPU0VMRUNUXCIpLG49VShiLFwiVVJJXCIpO3JldHVybiB2ZShhLG4sYyxlLGQsZiwhIWh8fCEhbCxnKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdbYi5pZF09YX0uYmluZChhKSl9XG5mdW5jdGlvbiB2ZShhLGIsYyxkLGUsZixnLGgpe2I9eihbYS5qXSxbYl0pWzBdO3JldHVybiBhLmMubmV0d29ya2luZ0VuZ2luZS5yZXF1ZXN0KDAsQyhbYl0sYS5iLnJldHJ5UGFyYW1ldGVycykpLnRoZW4oZnVuY3Rpb24oYSl7YT1mZSh0aGlzLmgsYS5kYXRhLGEudXJpKTtpZigxIT1hLnR5cGUpdGhyb3cgbmV3IHQoMiw0LDQwMTcpO2U9c2UodGhpcyxhKXx8ZTt2YXIgYj1udWxsO1widGV4dFwiIT1kJiYoYj15ZShhKSk7dmFyIGw9JGQoYS5nYSxcIkVYVC1YLU1FRElBLVNFUVVFTkNFXCIpLGw9emUodGhpcyxhLGw/TnVtYmVyKGwudmFsdWUpOjApO3RoaXMuYS5HYSgwLGwpO3ZhciByPWxbbC5sZW5ndGgtMV0uZW5kVGltZS1sWzBdLnN0YXJ0VGltZSx2PXRoaXMuYS5ZKCk7KEluZmluaXR5PT12fHx2PHIpJiZ0aGlzLmEucGEocik7dmFyIHU9QWUoZCxjKSx3PXZvaWQgMDtcInRleHRcIj09ZCYmKHc9XCJzdWJ0aXRsZVwiKTt2YXIgRz1uZXcgUyhsKSxwYT1bXTthLnNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24oYSl7YT1cblpkKGEuZ2EsXCJFWFQtWC1LRVlcIik7cGEucHVzaC5hcHBseShwYSxhKX0pO3ZhciBIYj0hMSx0Yz1bXSxtZT1udWxsO3BhLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoXCJOT05FXCIhPVUoYSxcIk1FVEhPRFwiKSl7SGI9ITA7dmFyIGI9VShhLFwiS0VZRk9STUFUXCIpO2lmKGE9KGI9QmVbYl0pP2IoYSk6bnVsbClhLmtleUlkcy5sZW5ndGgmJihtZT1hLmtleUlkc1swXSksdGMucHVzaChhKX19KTtpZihIYiYmIXRjLmxlbmd0aCl0aHJvdyBuZXcgdCgyLDQsNDAyNik7cmV0dXJuIENlKHRoaXMsZCxsWzBdLmEoKVswXSkudGhlbihmdW5jdGlvbihhKXthPXtpZDp0aGlzLmkrKyxjcmVhdGVTZWdtZW50SW5kZXg6UHJvbWlzZS5yZXNvbHZlLmJpbmQoUHJvbWlzZSksZmluZFNlZ21lbnRQb3NpdGlvbjpHLmZpbmQuYmluZChHKSxnZXRTZWdtZW50UmVmZXJlbmNlOkcuZ2V0LmJpbmQoRyksaW5pdFNlZ21lbnRSZWZlcmVuY2U6YixwcmVzZW50YXRpb25UaW1lT2Zmc2V0OmV8fDAsbWltZVR5cGU6YSxjb2RlY3M6dSxcbmtpbmQ6dyxlbmNyeXB0ZWQ6SGIsa2V5SWQ6bWUsbGFuZ3VhZ2U6ZixsYWJlbDpofHxudWxsLHR5cGU6ZCxwcmltYXJ5OmcsdHJpY2tNb2RlVmlkZW86bnVsbCxjb250YWluc0Vtc2dCb3hlczohMSxmcmFtZVJhdGU6dm9pZCAwLHdpZHRoOnZvaWQgMCxoZWlnaHQ6dm9pZCAwLGJhbmR3aWR0aDp2b2lkIDAscm9sZXM6W119O3RoaXMuZlthLmlkXT1HO3JldHVybntzdHJlYW06YSx5ZTpHLGRybUluZm9zOnRjfX0uYmluZCh0aGlzKSl9LmJpbmQoYSkpfVxuZnVuY3Rpb24geWUoYSl7dmFyIGI9WmQoYS5nYSxcIkVYVC1YLU1BUFwiKTtpZighYi5sZW5ndGgpcmV0dXJuIG51bGw7aWYoMTxiLmxlbmd0aCl0aHJvdyBuZXcgdCgyLDQsNDAyMCk7dmFyIGI9YlswXSxjPVUoYixcIlVSSVwiKSxkPXooW2EudXJpXSxbY10pWzBdO2E9MDtjPW51bGw7aWYoYj1YZChiLFwiQllURVJBTkdFXCIpKWE9Yi5zcGxpdChcIkBcIiksYj1OdW1iZXIoYVswXSksYT1OdW1iZXIoYVsxXSksYz1hK2ItMTtyZXR1cm4gbmV3IFpjKGZ1bmN0aW9uKCl7cmV0dXJuW2RdfSxhLGMpfVxuZnVuY3Rpb24gemUoYSxiLGMpe3ZhciBkPWIuc2VnbWVudHMsZT1bXTtkLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGY9YS5nYSxoPXooW2IudXJpXSxbYS51cmldKVswXSxsPURlKGYpLnZhbHVlLnNwbGl0KFwiLFwiKSxsPU51bWJlcihsWzBdKSxuOyhhPWQuaW5kZXhPZihhKSk/bj1lW2EtMV0uZW5kVGltZTpuPTA7dmFyIGw9bitsLHE9MCxyPW51bGw7aWYoZj0kZChmLFwiRVhULVgtQllURVJBTkdFXCIpKWY9Zi52YWx1ZS5zcGxpdChcIkBcIikscj1OdW1iZXIoZlswXSksZlsxXT9xPU51bWJlcihmWzFdKTpxPWVbYS0xXS5NLHI9cStyLTEsYT09ZC5sZW5ndGgtMSYmKHI9bnVsbCk7ZS5wdXNoKG5ldyBPKGMrYSxuLGwsZnVuY3Rpb24oKXtyZXR1cm5baF19LHEscikpfS5iaW5kKGEpKTtyZXR1cm4gZX1cbmZ1bmN0aW9uIHJlKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYS5ZKCksYz1hLnZpZGVvO2E9YS5hdWRpbztjJiZ0aGlzLmZbYy5pZF0mJmdkKHRoaXMuZltjLmlkXSxiKTthJiZ0aGlzLmZbYS5pZF0mJmdkKHRoaXMuZlthLmlkXSxiKX0uYmluZChhKSl9ZnVuY3Rpb24gQWUoYSxiKXtpZigxPT1iLmxlbmd0aClyZXR1cm4gYlswXTtpZihcInRleHRcIj09YSlyZXR1cm5cIlwiO3ZhciBjPUVlO1wiYXVkaW9cIj09YSYmKGM9RmUpO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWZvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKWlmKGNbZF0udGVzdChiW2VdLnRyaW0oKSkpcmV0dXJuIGJbZV0udHJpbSgpO3Rocm93IG5ldyB0KDIsNCw0MDI1LGIpO31cbmZ1bmN0aW9uIENlKGEsYixjKXt2YXIgZD1jLnNwbGl0KFwiLlwiKSxlPWRbZC5sZW5ndGgtMV07aWYoXCJ0ZXh0XCI9PWIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShcInRleHQvdnR0XCIpO2Q9R2U7XCJ2aWRlb1wiPT1iJiYoZD1IZSk7aWYoYj1kW2VdKXJldHVybiBQcm9taXNlLnJlc29sdmUoYik7Yz1DKFtjXSxhLmIucmV0cnlQYXJhbWV0ZXJzKTtjLm1ldGhvZD1cIkhFQURcIjtyZXR1cm4gYS5jLm5ldHdvcmtpbmdFbmdpbmUucmVxdWVzdCgxLGMpLnRoZW4oZnVuY3Rpb24oYSl7YT1hLmhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl07aWYoIWEpdGhyb3cgbmV3IHQoMiw0LDQwMjEsZSk7cmV0dXJuIGF9KX1mdW5jdGlvbiBzZShhLGIpe3ZhciBjPSRkKGIuZ2EsXCJFWFQtWC1TVEFSVFwiKTtyZXR1cm4gYz9OdW1iZXIoVShjLFwiVElNRS1PRkZTRVRcIikpOmEuYi5obHMuZGVmYXVsdFRpbWVPZmZzZXR9XG5mdW5jdGlvbiBVKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoYik7aWYoIWMpdGhyb3cgbmV3IHQoMiw0LDQwMjMsYik7cmV0dXJuIGMudmFsdWV9ZnVuY3Rpb24gRGUoYSl7YT0kZChhLFwiRVhUSU5GXCIpO2lmKCFhKXRocm93IG5ldyB0KDIsNCw0MDI0LFwiRVhUSU5GXCIpO3JldHVybiBhfVxudmFyIEVlPVsvXihhdmMpLywvXihodmMpLywvXih2cFs4LTldKSQvLC9eKGF2MSkkLywvXihtcDR2KS9dLEZlPVsvXih2b3JiaXMpLywvXihvcHVzKS8sL14obXA0YSkvLC9eKGFjLTMpJC8sL14oZWMtMykkL10sR2U9e21wNDpcImF1ZGlvL21wNFwiLG00czpcImF1ZGlvL21wNFwiLG00aTpcImF1ZGlvL21wNFwiLG00YTpcImF1ZGlvL21wNFwiLHRzOlwidmlkZW8vbXAydFwifSxIZT17bXA0OlwidmlkZW8vbXA0XCIsbTRzOlwidmlkZW8vbXA0XCIsbTRpOlwidmlkZW8vbXA0XCIsbTR2OlwidmlkZW8vbXA0XCIsdHM6XCJ2aWRlby9tcDJ0XCJ9LEJlPXtcInVybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZFwiOmZ1bmN0aW9uKGEpe2lmKFwiU0FNUExFLUFFUy1DRU5DXCIhPVUoYSxcIk1FVEhPRFwiKSlyZXR1cm4gbnVsbDt2YXIgYj1VKGEsXCJVUklcIiksYj1rZS5wYXJzZShiKSxiPW5ldyBVaW50OEFycmF5KGIuZGF0YSksYj1CYShcImNvbS53aWRldmluZS5hbHBoYVwiLFt7aW5pdERhdGFUeXBlOlwiY2VuY1wiLFxuaW5pdERhdGE6Yn1dKTtpZihhPVhkKGEsXCJLRVlJRFwiKSliLmtleUlkcz1bYS5zdWJzdHIoMikudG9Mb3dlckNhc2UoKV07cmV0dXJuIGJ9fTtFZC5tM3U4PWxlO0RkW1wiYXBwbGljYXRpb24veC1tcGVndXJsXCJdPWxlO0RkW1wiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIl09bGU7ZnVuY3Rpb24gSWUoKXt9SWUucHJvdG90eXBlLnBhcnNlSW5pdD1mdW5jdGlvbigpe307XG5JZS5wcm90b3R5cGUucGFyc2VNZWRpYT1mdW5jdGlvbihhLGIpe3ZhciBjPUYoYSksZD1bXSxlPW5ldyBET01QYXJzZXIsZj1udWxsO3RyeXtmPWUucGFyc2VGcm9tU3RyaW5nKGMsXCJ0ZXh0L3htbFwiKX1jYXRjaChIYil7dGhyb3cgbmV3IHQoMiwyLDIwMDUpO31pZihmKXt2YXIgZz1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidHRcIilbMF07aWYoZyl7ZT1nLmdldEF0dHJpYnV0ZShcInR0cDpmcmFtZVJhdGVcIik7Zj1nLmdldEF0dHJpYnV0ZShcInR0cDpzdWJGcmFtZVJhdGVcIik7dmFyIGg9Zy5nZXRBdHRyaWJ1dGUoXCJ0dHA6ZnJhbWVSYXRlTXVsdGlwbGllclwiKTt2YXIgbD1nLmdldEF0dHJpYnV0ZShcInR0cDp0aWNrUmF0ZVwiKTtjPWcuZ2V0QXR0cmlidXRlKFwieG1sOnNwYWNlXCIpfHxcImRlZmF1bHRcIn1lbHNlIHRocm93IG5ldyB0KDIsMiwyMDA1KTtpZihcImRlZmF1bHRcIiE9YyYmXCJwcmVzZXJ2ZVwiIT1jKXRocm93IG5ldyB0KDIsMiwyMDA1KTtjPVwiZGVmYXVsdFwiPT1jO2U9bmV3IEplKGUsXG5mLGgsbCk7Zj1LZShnLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3R5bGluZ1wiKVswXSk7aD1LZShnLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGF5b3V0XCIpWzBdKTtnPUtlKGcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdKTtmb3IobD0wO2w8Zy5sZW5ndGg7bCsrKXt2YXIgbj1nW2xdLHE9Yi5wZXJpb2RTdGFydCxyPWU7dmFyIHY9Zjt2YXIgdT1oLHc9YztpZihuLmhhc0F0dHJpYnV0ZShcImJlZ2luXCIpfHxuLmhhc0F0dHJpYnV0ZShcImVuZFwiKXx8IS9eXFxzKiQvLnRlc3Qobi50ZXh0Q29udGVudCkpe0xlKG4sdyk7dmFyIHc9TWUobi5nZXRBdHRyaWJ1dGUoXCJiZWdpblwiKSxyKSxHPU1lKG4uZ2V0QXR0cmlidXRlKFwiZW5kXCIpLHIpLHI9TWUobi5nZXRBdHRyaWJ1dGUoXCJkdXJcIikscikscGE9bi50ZXh0Q29udGVudDtudWxsPT1HJiZudWxsIT1yJiYoRz13K3IpO2lmKG51bGw9PXd8fG51bGw9PUcpdGhyb3cgbmV3IHQoMiwyLDIwMDEpO2lmKHE9eGIodytxLEcrcSxwYSkpe3c9TmUobixcblwicmVnaW9uXCIsdSk7dT1xO2lmKEc9T2Uobix3LHYsXCJ0dHM6ZXh0ZW50XCIpKWlmKHI9UGUuZXhlYyhHKSl1LnNpemU9TnVtYmVyKHJbMV0pO3I9T2Uobix3LHYsXCJ0dHM6d3JpdGluZ01vZGVcIik7Rz0hMDtcInRiXCI9PXJ8fFwidGJsclwiPT1yP3UudmVydGljYWw9XCJsclwiOlwidGJybFwiPT1yP3UudmVydGljYWw9XCJybFwiOkc9ITE7aWYocj1PZShuLHcsdixcInR0czpvcmlnaW5cIikpaWYocj1QZS5leGVjKHIpKUc/KHUucG9zaXRpb249TnVtYmVyKHJbMl0pLHUubGluZT1OdW1iZXIoclsxXSkpOih1LnBvc2l0aW9uPU51bWJlcihyWzFdKSx1LmxpbmU9TnVtYmVyKHJbMl0pKSx1LnNuYXBUb0xpbmVzPSExO2lmKHY9T2Uobix3LHYsXCJ0dHM6dGV4dEFsaWduXCIpKXUuYWxpZ249dixcImNlbnRlclwiPT12JiYoXCJjZW50ZXJcIiE9dS5hbGlnbiYmKHUuYWxpZ249XCJtaWRkbGVcIiksdS5wb3NpdGlvbj1cImF1dG9cIiksdS5wb3NpdGlvbkFsaWduPVFlW3ZdLHUubGluZUFsaWduPVJlW3ZdO3Y9cX1lbHNlIHY9bnVsbH1lbHNlIHY9XG5udWxsO3YmJmQucHVzaCh2KX19cmV0dXJuIGR9O3ZhciBTZT0vXihcXGR7Mix9KTooXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KVxcLj8oXFxkKyk/JC8sVGU9L14oPzooXFxkezIsfSk6KT8oXFxkezJ9KTooXFxkezJ9KSQvLFVlPS9eKD86KFxcZHsyLH0pOik/KFxcZHsyfSk6KFxcZHsyfVxcLlxcZHsyLH0pJC8sVmU9L14oXFxkKlxcLj9cXGQqKWYkLyxXZT0vXihcXGQqXFwuP1xcZCopdCQvLFhlPS9eKD86KFxcZCpcXC4/XFxkKiloKT8oPzooXFxkKlxcLj9cXGQqKW0pPyg/OihcXGQqXFwuP1xcZCopcyk/KD86KFxcZCpcXC4/XFxkKiltcyk/JC8sUGU9L14oXFxkezEsMn18MTAwKSUgKFxcZHsxLDJ9fDEwMCklJC8sUmU9e2xlZnQ6XCJzdGFydFwiLGNlbnRlcjpcImNlbnRlclwiLHJpZ2h0OlwiZW5kXCIsc3RhcnQ6XCJzdGFydFwiLGVuZDpcImVuZFwifSxRZT17bGVmdDpcImxpbmUtbGVmdFwiLGNlbnRlcjpcImNlbnRlclwiLHJpZ2h0OlwibGluZS1yaWdodFwifTtcbmZ1bmN0aW9uIEtlKGEpe3ZhciBiPVtdO2lmKCFhKXJldHVybiBiO2Zvcih2YXIgYz1hLmNoaWxkTm9kZXMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1cInNwYW5cIj09Y1tkXS5ub2RlTmFtZSYmXCJwXCI9PWEubm9kZU5hbWU7Y1tkXS5ub2RlVHlwZSE9Tm9kZS5FTEVNRU5UX05PREV8fFwiYnJcIj09Y1tkXS5ub2RlTmFtZXx8ZXx8KGU9S2UoY1tkXSksYj1iLmNvbmNhdChlKSl9Yi5sZW5ndGh8fGIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBMZShhLGIpe2Zvcih2YXIgYz1hLmNoaWxkTm9kZXMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKFwiYnJcIj09Y1tkXS5ub2RlTmFtZSYmMDxkKWNbZC0xXS50ZXh0Q29udGVudCs9XCJcXG5cIjtlbHNlIGlmKDA8Y1tkXS5jaGlsZE5vZGVzLmxlbmd0aClMZShjW2RdLGIpO2Vsc2UgaWYoYil7dmFyIGU9Y1tkXS50ZXh0Q29udGVudC50cmltKCksZT1lLnJlcGxhY2UoL1xccysvZyxcIiBcIik7Y1tkXS50ZXh0Q29udGVudD1lfX1cbmZ1bmN0aW9uIE9lKGEsYixjLGQpe2Zvcih2YXIgZT1LZShiKSxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBnPWVbZl0uZ2V0QXR0cmlidXRlKGQpO2lmKGcpcmV0dXJuIGd9ZT1OZTtyZXR1cm4oYT1lKGIsXCJzdHlsZVwiLGMpfHxlKGEsXCJzdHlsZVwiLGMpKT9hLmdldEF0dHJpYnV0ZShkKTpudWxsfWZ1bmN0aW9uIE5lKGEsYixjKXtpZighYXx8MT5jLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgZD1udWxsLGU9YTtmb3IoYT1udWxsO2UmJiEoYT1lLmdldEF0dHJpYnV0ZShiKSkmJihlPWUucGFyZW50Tm9kZSxlIGluc3RhbmNlb2YgRWxlbWVudCk7KTtpZihiPWEpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihjW2FdLmdldEF0dHJpYnV0ZShcInhtbDppZFwiKT09Yil7ZD1jW2FdO2JyZWFrfXJldHVybiBkfVxuZnVuY3Rpb24gTWUoYSxiKXt2YXIgYz1udWxsO2lmKFNlLnRlc3QoYSkpdmFyIGM9U2UuZXhlYyhhKSxkPU51bWJlcihjWzFdKSxlPU51bWJlcihjWzJdKSxmPU51bWJlcihjWzNdKSxnPU51bWJlcihjWzRdKSxnPWcrKE51bWJlcihjWzVdKXx8MCkvYi5iLGY9ZitnL2IuZnJhbWVSYXRlLGM9Zis2MCplKzM2MDAqZDtlbHNlIFRlLnRlc3QoYSk/Yz1ZZShUZSxhKTpVZS50ZXN0KGEpP2M9WWUoVWUsYSk6VmUudGVzdChhKT8oYz1WZS5leGVjKGEpLGM9TnVtYmVyKGNbMV0pL2IuZnJhbWVSYXRlKTpXZS50ZXN0KGEpPyhjPVdlLmV4ZWMoYSksYz1OdW1iZXIoY1sxXSkvYi5hKTpYZS50ZXN0KGEpJiYoYz1ZZShYZSxhKSk7cmV0dXJuIGN9XG5mdW5jdGlvbiBZZShhLGIpe3ZhciBjPWEuZXhlYyhiKTtyZXR1cm4gYyYmXCJcIiE9Y1swXT8oTnVtYmVyKGNbNF0pfHwwKS8xRTMrKE51bWJlcihjWzNdKXx8MCkrNjAqKE51bWJlcihjWzJdKXx8MCkrMzYwMCooTnVtYmVyKGNbMV0pfHwwKTpudWxsfWZ1bmN0aW9uIEplKGEsYixjLGQpe3RoaXMuZnJhbWVSYXRlPU51bWJlcihhKXx8MzA7dGhpcy5iPU51bWJlcihiKXx8MTt0aGlzLmE9TnVtYmVyKGQpO3RoaXMuYXx8KHRoaXMuYT1hP3RoaXMuZnJhbWVSYXRlKnRoaXMuYjoxKTtjJiYoYT0vXihcXGQrKSAoXFxkKykkL2cuZXhlYyhjKSkmJih0aGlzLmZyYW1lUmF0ZSo9YVsxXS9hWzJdKX12YihcImFwcGxpY2F0aW9uL3R0bWwreG1sXCIsSWUpO2Z1bmN0aW9uIFplKCl7dGhpcy5hPW5ldyBJZX1aZS5wcm90b3R5cGUucGFyc2VJbml0PWZ1bmN0aW9uKGEpe3ZhciBiPSExOyhuZXcgUSkuQyhcIm1vb3ZcIixSKS5DKFwidHJha1wiLFIpLkMoXCJtZGlhXCIsUikuQyhcIm1pbmZcIixSKS5DKFwic3RibFwiLFIpLmRhKFwic3RzZFwiLGNkKS5DKFwic3RwcFwiLGZ1bmN0aW9uKCl7Yj0hMH0pLnBhcnNlKGEpO2lmKCFiKXRocm93IG5ldyB0KDIsMiwyMDA3KTt9O1plLnByb3RvdHlwZS5wYXJzZU1lZGlhPWZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD1bXTsobmV3IFEpLkMoXCJtZGF0XCIsZGQoZnVuY3Rpb24oYSl7Yz0hMDtkPXRoaXMuYS5wYXJzZU1lZGlhKGEuYnVmZmVyLGIpfS5iaW5kKHRoaXMpKSkucGFyc2UoYSk7aWYoIWMpdGhyb3cgbmV3IHQoMiwyLDIwMDcpO3JldHVybiBkfTt2YignYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJzdHBwXCInLFplKTtmdW5jdGlvbiAkZSgpe30kZS5wcm90b3R5cGUucGFyc2VJbml0PWZ1bmN0aW9uKCl7fTtcbiRlLnByb3RvdHlwZS5wYXJzZU1lZGlhPWZ1bmN0aW9uKGEsYil7dmFyIGM9RihhKSxjPWMucmVwbGFjZSgvXFxyXFxufFxccig/PVteXFxuXXwkKS9nbSxcIlxcblwiKSxjPWMuc3BsaXQoL1xcbnsyLH0vbSk7aWYoIS9eV0VCVlRUKCR8WyBcXHRcXG5dKS9tLnRlc3QoY1swXSkpdGhyb3cgbmV3IHQoMiwyLDJFMyk7dmFyIGQ9Yi5zZWdtZW50U3RhcnQ7aWYoMDw9Y1swXS5pbmRleE9mKFwiWC1USU1FU1RBTVAtTUFQXCIpKXt2YXIgZT1jWzBdLm1hdGNoKC9MT0NBTDooKD86KFxcZHsxLH0pOik/KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KSkvbSksZj1jWzBdLm1hdGNoKC9NUEVHVFM6KFxcZCspL20pO2UmJmYmJihkPWFmKG5ldyBiZShlWzFdKSksZD1iLnBlcmlvZFN0YXJ0KyhOdW1iZXIoZlsxXSkvOUU0LWQpKX1mPVtdO2ZvcihlPTE7ZTxjLmxlbmd0aDtlKyspe3ZhciBnPWNbZV0uc3BsaXQoXCJcXG5cIiksaD1kO2lmKDE9PWcubGVuZ3RoJiYhZ1swXXx8L15OT1RFKCR8WyBcXHRdKS8udGVzdChnWzBdKSl2YXIgbD1cbm51bGw7ZWxzZXtsPW51bGw7MD5nWzBdLmluZGV4T2YoXCItLVxceDNlXCIpJiYobD1nWzBdLGcuc3BsaWNlKDAsMSkpO3ZhciBuPW5ldyBiZShnWzBdKSxxPWFmKG4pLHI9Y2UobiwvWyBcXHRdKy0tXFx4M2VbIFxcdF0rL2cpLHY9YWYobik7aWYobnVsbD09cXx8IXJ8fG51bGw9PXYpdGhyb3cgbmV3IHQoMiwyLDIwMDEpO2lmKGc9eGIocStoLHYraCxnLnNsaWNlKDEpLmpvaW4oXCJcXG5cIikudHJpbSgpKSl7Y2UobiwvWyBcXHRdKy9nbSk7Zm9yKGg9ZGUobik7aDspYmYoZyxoKSxjZShuLC9bIFxcdF0rL2dtKSxoPWRlKG4pO251bGwhPWwmJihnLmlkPWwpO2w9Z31lbHNlIGw9bnVsbH1sJiZmLnB1c2gobCl9cmV0dXJuIGZ9O1xuZnVuY3Rpb24gYmYoYSxiKXt2YXIgYztpZihjPS9eYWxpZ246KHN0YXJ0fG1pZGRsZXxjZW50ZXJ8ZW5kfGxlZnR8cmlnaHQpJC8uZXhlYyhiKSlhLmFsaWduPWNbMV0sXCJjZW50ZXJcIj09Y1sxXSYmXCJjZW50ZXJcIiE9YS5hbGlnbiYmKGEucG9zaXRpb249XCJhdXRvXCIsYS5hbGlnbj1cIm1pZGRsZVwiKTtlbHNlIGlmKGM9L152ZXJ0aWNhbDoobHJ8cmwpJC8uZXhlYyhiKSlhLnZlcnRpY2FsPWNbMV07ZWxzZSBpZihjPS9ec2l6ZTooXFxkezEsMn18MTAwKSUkLy5leGVjKGIpKWEuc2l6ZT1OdW1iZXIoY1sxXSk7ZWxzZSBpZihjPS9ecG9zaXRpb246KFxcZHsxLDJ9fDEwMCklKD86LChsaW5lLWxlZnR8bGluZS1yaWdodHxjZW50ZXJ8c3RhcnR8ZW5kKSk/JC8uZXhlYyhiKSlhLnBvc2l0aW9uPU51bWJlcihjWzFdKSxjWzJdJiYoYS5wb3NpdGlvbkFsaWduPWNbMl0pO2Vsc2UgaWYoYz0vXmxpbmU6KFxcZHsxLDJ9fDEwMCklKD86LChzdGFydHxlbmR8Y2VudGVyKSk/JC8uZXhlYyhiKSlhLnNuYXBUb0xpbmVzPVxuITEsYS5saW5lPU51bWJlcihjWzFdKSxjWzJdJiYoYS5saW5lQWxpZ249Y1syXSk7ZWxzZSBpZihjPS9ebGluZTooLT9cXGQrKSg/Oiwoc3RhcnR8ZW5kfGNlbnRlcikpPyQvLmV4ZWMoYikpYS5zbmFwVG9MaW5lcz0hMCxhLmxpbmU9TnVtYmVyKGNbMV0pLGNbMl0mJihhLmxpbmVBbGlnbj1jWzJdKX1mdW5jdGlvbiBhZihhKXthPWNlKGEsLyg/OihcXGR7MSx9KTopPyhcXGR7Mn0pOihcXGR7Mn0pXFwuKFxcZHszfSkvZyk7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9TnVtYmVyKGFbMl0pLGM9TnVtYmVyKGFbM10pO3JldHVybiA1OTxifHw1OTxjP251bGw6TnVtYmVyKGFbNF0pLzFFMytjKzYwKmIrMzYwMCooTnVtYmVyKGFbMV0pfHwwKX12YihcInRleHQvdnR0XCIsJGUpO3ZiKCd0ZXh0L3Z0dDsgY29kZWNzPVwidnR0XCInLCRlKTtmdW5jdGlvbiBjZigpe3RoaXMuYT1udWxsfWNmLnByb3RvdHlwZS5wYXJzZUluaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9ITE7KG5ldyBRKS5DKFwibW9vdlwiLFIpLkMoXCJ0cmFrXCIsUikuQyhcIm1kaWFcIixSKS5kYShcIm1kaGRcIixmdW5jdGlvbihhKXswPT1hLnZlcnNpb24/KGEucy5JKDQpLGEucy5JKDQpLHRoaXMuYT1hLnMuRCgpLGEucy5JKDQpKTooYS5zLkkoOCksYS5zLkkoOCksdGhpcy5hPWEucy5EKCksYS5zLkkoOCkpO2Eucy5JKDQpfS5iaW5kKHRoaXMpKS5DKFwibWluZlwiLFIpLkMoXCJzdGJsXCIsUikuZGEoXCJzdHNkXCIsY2QpLkMoXCJ3dnR0XCIsZnVuY3Rpb24oKXtiPSEwfSkucGFyc2UoYSk7aWYoIXRoaXMuYSl0aHJvdyBuZXcgdCgyLDIsMjAwOCk7aWYoIWIpdGhyb3cgbmV3IHQoMiwyLDIwMDgpO307XG5jZi5wcm90b3R5cGUucGFyc2VNZWRpYT1mdW5jdGlvbihhLGIpe3ZhciBjPTAsZD1bXSxlPVtdLGY9W10sZz0hMSxoPSExLGw9ITE7KG5ldyBRKS5DKFwibW9vZlwiLFIpLkMoXCJ0cmFmXCIsUikuZGEoXCJ0ZmR0XCIsZnVuY3Rpb24oYSl7Zz0hMDtjPWEudmVyc2lvbj9hLnMuUGEoKTphLnMuRCgpfSkuZGEoXCJ0cnVuXCIsZnVuY3Rpb24oYSl7aD0hMDt2YXIgYj1hLnZlcnNpb24sYz1hLkxjO2E9YS5zO3ZhciBlPWEuRCgpO2MmMSYmYS5JKDQpO2MmNCYmYS5JKDQpO2Zvcih2YXIgZj1bXSxnPTA7ZzxlO2crKyl7dmFyIGw9e2R1cmF0aW9uOm51bGwsTGI6bnVsbH07YyYyNTYmJihsLmR1cmF0aW9uPWEuRCgpKTtjJjUxMiYmYS5JKDQpO2MmMTAyNCYmYS5JKDQpO2MmMjA0OCYmKGwuTGI9Yj9hLmxjKCk6YS5EKCkpO2YucHVzaChsKX1kPWZ9KS5DKFwidnR0ZVwiLGZ1bmN0aW9uKCl7ZS5wdXNoKG51bGwpfSkuQyhcInZ0dGNcIixkZChmdW5jdGlvbihhKXtlLnB1c2goYS5idWZmZXIpfSkpLkMoXCJtZGF0XCIsXG5mdW5jdGlvbihhKXtsPSEwO1IoYSl9KS5wYXJzZShhKTtpZighbCYmIWcmJiFoKXRocm93IG5ldyB0KDIsMiwyMDA4KTtmb3IodmFyIG49YyxxPTA7cTxkLmxlbmd0aDtxKyspe3ZhciByPWRbcV0sdj1lW3FdO2lmKHIuZHVyYXRpb24pe3ZhciB1PXIuTGI/YytyLkxiOm4sbj11K3IuZHVyYXRpb247diYmZi5wdXNoKGRmKHYsYi5wZXJpb2RTdGFydCt1L3RoaXMuYSxiLnBlcmlvZFN0YXJ0K24vdGhpcy5hKSl9fXJldHVybiBmfTtmdW5jdGlvbiBkZihhLGIsYyl7dmFyIGQsZSxmOyhuZXcgUSkuQyhcInBheWxcIixkZChmdW5jdGlvbihhKXtkPUYoYSl9KSkuQyhcImlkZW5cIixkZChmdW5jdGlvbihhKXtlPUYoYSl9KSkuQyhcInN0dGdcIixkZChmdW5jdGlvbihhKXtmPUYoYSl9KSkucGFyc2UoYSk7cmV0dXJuIGQ/ZWYoZCxlLGYsYixjKTpudWxsfVxuZnVuY3Rpb24gZWYoYSxiLGMsZCxlKXsoYT14YihkLGUsYSkpJiZiJiYoYS5pZD1iKTtpZihhJiZjKWZvcihiPW5ldyBiZShjKSxjPWRlKGIpO2M7KWJmKGEsYyksY2UoYiwvWyBcXHRdKy9nbSksYz1kZShiKTtyZXR1cm4gYX12YignYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9XCJ3dnR0XCInLGNmKTtmdW5jdGlvbiBmZihhLGIsYyxkLGUsZil7dGhpcy5hPWE7dGhpcy5jPWI7dGhpcy5sPWM7dGhpcy5BPWQ7dGhpcy5KPWU7dGhpcy5HPWY7dGhpcy5iPW5ldyBEO3RoaXMuaD0hMTt0aGlzLmc9MTt0aGlzLmo9dGhpcy5mPW51bGw7dGhpcy5CPWEucmVhZHlTdGF0ZTt0aGlzLmk9ITE7dGhpcy5QPXRoaXMudj0tMTt0aGlzLm89ITE7MDxhLnJlYWR5U3RhdGU/dGhpcy5kYygpOkxhKHRoaXMuYixhLFwibG9hZGVkbWV0YWRhdGFcIix0aGlzLmRjLmJpbmQodGhpcykpO2I9dGhpcy5mYy5iaW5kKHRoaXMpO0UodGhpcy5iLGEsXCJyYXRlY2hhbmdlXCIsdGhpcy5wZC5iaW5kKHRoaXMpKTtFKHRoaXMuYixhLFwid2FpdGluZ1wiLGIpO3RoaXMuaj1zZXRJbnRlcnZhbChiLDI1MCl9az1mZi5wcm90b3R5cGU7XG5rLm09ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmIubSgpO3RoaXMuYj1udWxsO251bGwhPXRoaXMuZiYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuZiksdGhpcy5mPW51bGwpO251bGwhPXRoaXMuaiYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaiksdGhpcy5qPW51bGwpO3RoaXMuRz10aGlzLko9dGhpcy5sPXRoaXMuYz10aGlzLmE9bnVsbDtyZXR1cm4gYX07ZnVuY3Rpb24gZ2YoYSxiKXswPGEuYS5yZWFkeVN0YXRlP2EuYS5jdXJyZW50VGltZT1oZihhLGIpOmEuQT1ifWZ1bmN0aW9uIGpmKGEpe3JldHVybiAwPGEuYS5yZWFkeVN0YXRlP2hmKGEsYS5hLmN1cnJlbnRUaW1lKTprZihhKX1mdW5jdGlvbiBrZihhKXtpZihhLkEpcmV0dXJuIGhmKGEsYS5BKTthPWEuYy5wcmVzZW50YXRpb25UaW1lbGluZTtyZXR1cm4gSW5maW5pdHk+YS5ZKCk/YS5tYSgpOmEuYmIoKX1rLnBiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ307XG5mdW5jdGlvbiBsZihhLGIpe251bGwhPWEuZiYmKHdpbmRvdy5jbGVhckludGVydmFsKGEuZiksYS5mPW51bGwpO2EuZz1iO2EuYS5wbGF5YmFja1JhdGU9YS5ofHwwPmI/MDpiOyFhLmgmJjA+YiYmKGEuZj13aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0aGlzLmEuY3VycmVudFRpbWUrPWIvNH0uYmluZChhKSwyNTApKX1rLnliPWZ1bmN0aW9uKCl7dGhpcy5vPSEwO3RoaXMuZmMoKX07ay5wZD1mdW5jdGlvbigpe3RoaXMuYS5wbGF5YmFja1JhdGUhPSh0aGlzLmh8fDA+dGhpcy5nPzA6dGhpcy5nKSYmbGYodGhpcyx0aGlzLmEucGxheWJhY2tSYXRlKX07XG5rLmRjPWZ1bmN0aW9uKCl7dmFyIGE9a2YodGhpcyk7LjAwMT5NYXRoLmFicyh0aGlzLmEuY3VycmVudFRpbWUtYSk/KEUodGhpcy5iLHRoaXMuYSxcInNlZWtpbmdcIix0aGlzLmdjLmJpbmQodGhpcykpLEUodGhpcy5iLHRoaXMuYSxcInBsYXlpbmdcIix0aGlzLmVjLmJpbmQodGhpcykpKTooTGEodGhpcy5iLHRoaXMuYSxcInNlZWtpbmdcIix0aGlzLnJkLmJpbmQodGhpcykpLHRoaXMuYS5jdXJyZW50VGltZT1hKX07ay5yZD1mdW5jdGlvbigpe0UodGhpcy5iLHRoaXMuYSxcInNlZWtpbmdcIix0aGlzLmdjLmJpbmQodGhpcykpO0UodGhpcy5iLHRoaXMuYSxcInBsYXlpbmdcIix0aGlzLmVjLmJpbmQodGhpcykpfTtcbmsuZmM9ZnVuY3Rpb24oKXtpZih0aGlzLmEucmVhZHlTdGF0ZSl7dGhpcy5hLnJlYWR5U3RhdGUhPXRoaXMuQiYmKHRoaXMuaT0hMSx0aGlzLkI9dGhpcy5hLnJlYWR5U3RhdGUpO3ZhciBhPXRoaXMubC5zbWFsbEdhcExpbWl0LGI9dGhpcy5hLmN1cnJlbnRUaW1lLGM9dGhpcy5hLmJ1ZmZlcmVkO2E6e2lmKGMmJmMubGVuZ3RoJiYhKDE9PWMubGVuZ3RoJiYxRS02PmMuZW5kKDApLWMuc3RhcnQoMCkpKXt2YXIgZD0uMTsvKEVkZ2V8VHJpZGVudClcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJihkPS41KTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylpZihjLnN0YXJ0KGUpPmImJighZXx8Yy5lbmQoZS0xKS1iPD1kKSl7ZD1lO2JyZWFrIGF9fWQ9bnVsbH1pZihudWxsPT1kKXtpZigzPnRoaXMuYS5yZWFkeVN0YXRlJiYwPHRoaXMuYS5wbGF5YmFja1JhdGUpaWYodGhpcy5QIT1iKXRoaXMuUD1iLHRoaXMudj1EYXRlLm5vdygpO2Vsc2UgaWYodGhpcy52PERhdGUubm93KCktXG4xRTMpZm9yKHRoaXMudj1EYXRlLm5vdygpKzVFMyxkPTA7ZDxjLmxlbmd0aDtkKyspaWYoYj49Yy5zdGFydChkKSYmYjxjLmVuZChkKS0uNSl7dGhpcy5hLmN1cnJlbnRUaW1lPXRoaXMuYS5jdXJyZW50VGltZTticmVha319ZWxzZSBpZihkfHx0aGlzLm8paWYoZT1jLnN0YXJ0KGQpLCEoZT49dGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLmJiKCkpKXt2YXIgZj1lLWIsYT1mPD1hLGc9ITE7YXx8dGhpcy5pfHwodGhpcy5pPSEwLGY9bmV3IEkoXCJsYXJnZWdhcFwiLHtjdXJyZW50VGltZTpiLGdhcFNpemU6Zn0pLGYuY2FuY2VsYWJsZT0hMCx0aGlzLkcoZiksdGhpcy5sLmp1bXBMYXJnZUdhcHMmJiFmLmRlZmF1bHRQcmV2ZW50ZWQmJihnPSEwKSk7aWYoYXx8ZylkJiZjLmVuZChkLTEpLG1mKHRoaXMsYixlKX19fTtcbmsuZ2M9ZnVuY3Rpb24oKXt0aGlzLm89ITE7dmFyIGE9dGhpcy5hLmN1cnJlbnRUaW1lLGI9bmYodGhpcyxhKTsuMDAxPE1hdGguYWJzKGItYSk/bWYodGhpcyxhLGIpOih0aGlzLmk9ITEsdGhpcy5KKCkpfTtrLmVjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hLmN1cnJlbnRUaW1lLGI9bmYodGhpcyxhKTsuMDAxPE1hdGguYWJzKGItYSkmJm1mKHRoaXMsYSxiKX07ZnVuY3Rpb24gbmYoYSxiKXt2YXIgYz1CYi5iaW5kKG51bGwsYS5hLmJ1ZmZlcmVkKSxkPTEqTWF0aC5tYXgoYS5jLm1pbkJ1ZmZlclRpbWV8fDAsYS5sLnJlYnVmZmVyaW5nR29hbCksZT1hLmMucHJlc2VudGF0aW9uVGltZWxpbmUsZj1lLnVhKCksZz1lLkRhKGQpLGg9ZS5EYSg1KSxkPWUuRGEoZCs1KTtyZXR1cm4gYj5mP2Y6YjxlLkRhKDApP2MoaCk/aDpkOmI+PWd8fGMoYik/YjpkfVxuZnVuY3Rpb24gbWYoYSxiLGMpe2EuYS5jdXJyZW50VGltZT1jO3ZhciBkPTAsZT1mdW5jdGlvbigpeyF0aGlzLmF8fDEwPD1kKyt8fHRoaXMuYS5jdXJyZW50VGltZSE9Ynx8KHRoaXMuYS5jdXJyZW50VGltZT1jLHNldFRpbWVvdXQoZSwxMDApKX0uYmluZChhKTtzZXRUaW1lb3V0KGUsMTAwKX1mdW5jdGlvbiBoZihhLGIpe3ZhciBjPWEuYy5wcmVzZW50YXRpb25UaW1lbGluZS5tYSgpO2lmKGI8YylyZXR1cm4gYztjPWEuYy5wcmVzZW50YXRpb25UaW1lbGluZS51YSgpO3JldHVybiBiPmM/YzpifTtmdW5jdGlvbiBvZihhLGIsYyxkLGUsZil7dGhpcy5hPWE7dGhpcy5nPWI7dGhpcy5BPWM7dGhpcy5sPWQ7dGhpcy5oPWU7dGhpcy5CPWY7dGhpcy5jPVtdO3RoaXMuaj1uZXcgRDt0aGlzLmI9ITE7dGhpcy5pPS0xO3RoaXMuZj1udWxsO3BmKHRoaXMpfW9mLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5qP3RoaXMuai5tKCk6UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5qPW51bGw7cWYodGhpcyk7dGhpcy5CPXRoaXMuaD10aGlzLmw9dGhpcy5BPXRoaXMuZz10aGlzLmE9bnVsbDt0aGlzLmM9W107cmV0dXJuIGF9O1xub2YucHJvdG90eXBlLnY9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuYy5zb21lKGZ1bmN0aW9uKGIpe3JldHVybiBiLmluZm8uc2NoZW1lSWRVcmk9PWEuc2NoZW1lSWRVcmkmJmIuaW5mby5zdGFydFRpbWU9PWEuc3RhcnRUaW1lJiZiLmluZm8uZW5kVGltZT09YS5lbmRUaW1lfSkpe3ZhciBiPXtpbmZvOmEsc3RhdHVzOjF9O3RoaXMuYy5wdXNoKGIpO3ZhciBjPW5ldyBJKFwidGltZWxpbmVyZWdpb25hZGRlZFwiLHtkZXRhaWw6cmYoYSl9KTt0aGlzLmgoYyk7dGhpcy5vKCEwLGIpfX07ZnVuY3Rpb24gcmYoYSl7dmFyIGI9RGEoYSk7Yi5ldmVudEVsZW1lbnQ9YS5ldmVudEVsZW1lbnQ7cmV0dXJuIGJ9XG5vZi5wcm90b3R5cGUubz1mdW5jdGlvbihhLGIpe3ZhciBjPWIuaW5mby5zdGFydFRpbWU+dGhpcy5hLmN1cnJlbnRUaW1lPzE6Yi5pbmZvLmVuZFRpbWU8dGhpcy5hLmN1cnJlbnRUaW1lPzM6MixkPTI9PWIuc3RhdHVzLGU9Mj09YztpZihjIT1iLnN0YXR1cyl7aWYoIWF8fGR8fGUpZHx8dGhpcy5oKG5ldyBJKFwidGltZWxpbmVyZWdpb25lbnRlclwiLHtkZXRhaWw6cmYoYi5pbmZvKX0pKSxlfHx0aGlzLmgobmV3IEkoXCJ0aW1lbGluZXJlZ2lvbmV4aXRcIix7ZGV0YWlsOnJmKGIuaW5mbyl9KSk7Yi5zdGF0dXM9Y319O2Z1bmN0aW9uIHBmKGEpe3FmKGEpO2EuZj13aW5kb3cuc2V0VGltZW91dChhLkcuYmluZChhKSwyNTApfWZ1bmN0aW9uIHFmKGEpe2EuZiYmKHdpbmRvdy5jbGVhclRpbWVvdXQoYS5mKSxhLmY9bnVsbCl9XG5vZi5wcm90b3R5cGUuRz1mdW5jdGlvbigpe3RoaXMuZj1udWxsO3BmKHRoaXMpO3ZhciBhPWhjKHRoaXMuZyx0aGlzLmEuY3VycmVudFRpbWUpO2EhPXRoaXMuaSYmKC0xIT10aGlzLmkmJnRoaXMuQigpLHRoaXMuaT1hKTt2YXIgYT1DYih0aGlzLmEuYnVmZmVyZWQsdGhpcy5hLmN1cnJlbnRUaW1lKSxiPUFiKHRoaXMuYS5idWZmZXJlZCk+PXRoaXMuZy5wcmVzZW50YXRpb25UaW1lbGluZS51YSgpLS4xfHx0aGlzLmEuZW5kZWQ7aWYodGhpcy5iKXt2YXIgYz0xKk1hdGgubWF4KHRoaXMuZy5taW5CdWZmZXJUaW1lfHwwLHRoaXMuQS5yZWJ1ZmZlcmluZ0dvYWwpOyhifHxhPj1jKSYmMCE9dGhpcy5iJiYodGhpcy5iPSExLHRoaXMubCghMSkpfWVsc2UhYiYmLjU+YSYmMSE9dGhpcy5iJiYodGhpcy5iPSEwLHRoaXMubCghMCkpO3RoaXMuYy5mb3JFYWNoKHRoaXMuby5iaW5kKHRoaXMsITEpKX07ZnVuY3Rpb24gc2YoYSxiKXt0aGlzLmE9Yjt0aGlzLmI9YTt0aGlzLmc9bnVsbDt0aGlzLmk9MTt0aGlzLm89UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5oPVtdO3RoaXMuaj17fTt0aGlzLmM9e307dGhpcy5mPXRoaXMubD10aGlzLnY9ITF9az1zZi5wcm90b3R5cGU7ay5tPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuYyl0Zih0aGlzLmNbYV0pO3RoaXMuZz10aGlzLmM9dGhpcy5qPXRoaXMuaD10aGlzLm89dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuZj0hMDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O2suY29uZmlndXJlPWZ1bmN0aW9uKGEpe3RoaXMuZz1hfTtrLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmEuJGIodGhpcy5iLnBlcmlvZHNbaGModGhpcy5iLGpmKHRoaXMuYS5PYSkpXSk7cmV0dXJuIE1hKGEpP1Byb21pc2UucmVqZWN0KG5ldyB0KDIsNSw1MDA1KSk6dWYodGhpcyxhKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5hJiZ0aGlzLmEuZ2QmJnRoaXMuYS5nZCgpfS5iaW5kKHRoaXMpKX07XG5mdW5jdGlvbiBWKGEpe3JldHVybiBhLmIucGVyaW9kc1toYyhhLmIsamYoYS5hLk9hKSldfWZ1bmN0aW9uIHZmKGEpe3JldHVybiBPYShhLmMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubmF8fGEuc3RyZWFtfSl9ZnVuY3Rpb24gd2YoYSxiKXt2YXIgYz17fTtjLnRleHQ9YjtyZXR1cm4gdWYoYSxjKX1mdW5jdGlvbiB4ZihhLGIpe3ZhciBjPWEuYy52aWRlbztpZihjKXt2YXIgZD1jLnN0cmVhbTtpZihkKWlmKGIpe3ZhciBlPWQudHJpY2tNb2RlVmlkZW87aWYoZSl7dmFyIGY9Yy5uYTtmfHwoeWYoYSxcInZpZGVvXCIsZSwhMSksYy5uYT1kKX19ZWxzZSBpZihmPWMubmEpYy5uYT1udWxsLHlmKGEsXCJ2aWRlb1wiLGYsITApfX1cbmZ1bmN0aW9uIHlmKGEsYixjLGQpe3ZhciBlPWEuY1tiXTshZSYmXCJ0ZXh0XCI9PWImJmEuZy5pZ25vcmVUZXh0U3RyZWFtRmFpbHVyZXM/d2YoYSxjKTplJiYoZS5uYSYmKGMudHJpY2tNb2RlVmlkZW8/KGUubmE9YyxjPWMudHJpY2tNb2RlVmlkZW8pOmUubmE9bnVsbCksXCJ0ZXh0XCI9PWImJkZiKGEuYS5LLFliKGMubWltZVR5cGUsYy5jb2RlY3MpKSwoYj1hLmhbaWMoYS5iLGMpXSkmJmIuS2EmJihiPWEualtjLmlkXSkmJmIuS2EmJmUuc3RyZWFtIT1jJiYoZS5zdHJlYW09YyxlLmNiPSEwLGQmJihlLnNhP2Uua2I9ITA6ZS53YT8oZS5yYT0hMCxlLmtiPSEwKToodGYoZSksemYoYSxlLCEwKSkpKSl9XG5mdW5jdGlvbiBBZihhKXt2YXIgYj1qZihhLmEuT2EpO2lmKCFPYmplY3Qua2V5cyhhLmMpLmV2ZXJ5KGZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuYS5LO1widGV4dFwiPT1hPyhhPWMuYSxhPWI+PWEuYiYmYjxhLmEpOihhPUliKGMsYSksYT1CYihhLGIpKTtyZXR1cm4gYX0uYmluZChhKSkpZm9yKHZhciBjIGluIGEuYyl7dmFyIGQ9YS5jW2NdO2Quc2F8fGQucmF8fChkLndhP2QucmE9ITA6bnVsbD09R2IoYS5hLkssYyk/bnVsbD09ZC5xYSYmQmYoYSxkLDApOih0ZihkKSx6ZihhLGQsITEpKSl9fVxuZnVuY3Rpb24gdWYoYSxiLGMpe3ZhciBkPWhjKGEuYixqZihhLmEuT2EpKSxlPU9hKGIsZnVuY3Rpb24oYSl7cmV0dXJuIFliKGEubWltZVR5cGUsYS5jb2RlY3MpfSk7YS5hLksuaW5pdChlKTtDZihhKTtlPU5hKGIpO3JldHVybiBEZihhLGUpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKWZvcih2YXIgYSBpbiBiKXt2YXIgZT1iW2FdO3RoaXMuY1thXXx8KHRoaXMuY1thXT17c3RyZWFtOmUsdHlwZTphLEVhOm51bGwsZWE6bnVsbCxuYTpudWxsLGNiOiEwLE1hOmQsZW5kT2ZTdHJlYW06ITEsd2E6ITEscWE6bnVsbCxyYTohMSxrYjohMSxzYTohMSxFYjohMSxyYjohMSxwYzpjfHwwfSxCZih0aGlzLHRoaXMuY1thXSwwKSl9fS5iaW5kKGEpKX1cbmZ1bmN0aW9uIEVmKGEsYil7dmFyIGM9YS5oW2JdO2lmKGMpcmV0dXJuIGMuTDtjPXtMOm5ldyBBLEthOiExfTthLmhbYl09Yzt2YXIgZD1hLmIucGVyaW9kc1tiXS52YXJpYW50cy5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9W107YS5hdWRpbyYmYi5wdXNoKGEuYXVkaW8pO2EudmlkZW8mJmIucHVzaChhLnZpZGVvKTthLnZpZGVvJiZhLnZpZGVvLnRyaWNrTW9kZVZpZGVvJiZiLnB1c2goYS52aWRlby50cmlja01vZGVWaWRlbyk7cmV0dXJuIGJ9KS5yZWR1Y2UoeCxbXSkuZmlsdGVyKEFhKTtkLnB1c2guYXBwbHkoZCxhLmIucGVyaW9kc1tiXS50ZXh0U3RyZWFtcyk7YS5vPWEuby50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZilyZXR1cm4gRGYodGhpcyxkKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe3RoaXMuZnx8KHRoaXMuaFtiXS5MLnJlc29sdmUoKSx0aGlzLmhbYl0uS2E9ITApfS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3RoaXMuZnx8KHRoaXMuaFtiXS5MLnJlamVjdCgpLFxuZGVsZXRlIHRoaXMuaFtiXSx0aGlzLmEub25FcnJvcihhKSl9LmJpbmQoYSkpO3JldHVybiBjLkx9XG5mdW5jdGlvbiBEZihhLGIpe2IubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlkfSkuZmlsdGVyKEFhKTtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7KytkKXt2YXIgZT1iW2RdO3ZhciBmPWEualtlLmlkXTtmP2MucHVzaChmLkwpOihhLmpbZS5pZF09e0w6bmV3IEEsS2E6ITF9LGMucHVzaChlLmNyZWF0ZVNlZ21lbnRJbmRleCgpKSl9cmV0dXJuIFByb21pc2UuYWxsKGMpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5mKWZvcih2YXIgYT0wO2E8Yi5sZW5ndGg7KythKXt2YXIgYz10aGlzLmpbYlthXS5pZF07Yy5LYXx8KGMuTC5yZXNvbHZlKCksYy5LYT0hMCl9fS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYpcmV0dXJuIHRoaXMualtlLmlkXS5MLnJlamVjdCgpLGRlbGV0ZSB0aGlzLmpbZS5pZF0sUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQoYSkpfVxuZnVuY3Rpb24gQ2YoYSl7dmFyIGI9YS5iLnByZXNlbnRhdGlvblRpbWVsaW5lLlkoKTtJbmZpbml0eT5iP2EuYS5LLnBhKGIpOmEuYS5LLnBhKE1hdGgucG93KDIsMzIpKX1rLmllPWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmYmJiFhLndhJiZudWxsIT1hLnFhJiYhYS5zYSlpZihhLnFhPW51bGwsYS5yYSl6Zih0aGlzLGEsYS5rYik7ZWxzZXt0cnl7dmFyIGI9RmYodGhpcyxhKTtudWxsIT1iJiYoQmYodGhpcyxhLGIpLGEucmI9ITEpfWNhdGNoKGMpe3RoaXMuYS5vbkVycm9yKGMpO3JldHVybn1iPU5hKHRoaXMuYyk7R2YodGhpcyxhKTtiLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLmVuZE9mU3RyZWFtfSkmJnRoaXMuYS5LLmVuZE9mU3RyZWFtKCkudGhlbihmdW5jdGlvbigpe3RoaXMuYi5wcmVzZW50YXRpb25UaW1lbGluZS5wYSh0aGlzLmEuSy5ZKCkpfS5iaW5kKHRoaXMpKX19O1xuZnVuY3Rpb24gRmYoYSxiKXt2YXIgYz1qZihhLmEuT2EpLGQ9Yi5FYSYmYi5lYT9hLmIucGVyaW9kc1tpYyhhLmIsYi5FYSldLnN0YXJ0VGltZStiLmVhLmVuZFRpbWU6TWF0aC5tYXgoYyxiLnBjKTtiLnBjPTA7dmFyIGU9aWMoYS5iLGIuc3RyZWFtKSxmPWhjKGEuYixkKTt2YXIgZz1hLmEuSzt2YXIgaD1iLnR5cGU7XCJ0ZXh0XCI9PWg/KGc9Zy5hLGc9bnVsbD09Zy5hfHxnLmE8Yz8wOmcuYS1NYXRoLm1heChjLGcuYikpOihnPUliKGcsaCksZz1DYihnLGMpKTtoPU1hdGgubWF4KGEuaSpNYXRoLm1heChhLmIubWluQnVmZmVyVGltZXx8MCxhLmcucmVidWZmZXJpbmdHb2FsKSxhLmkqYS5nLmJ1ZmZlcmluZ0dvYWwpO2lmKGQ+PWEuYi5wcmVzZW50YXRpb25UaW1lbGluZS5ZKCkpcmV0dXJuIGIuZW5kT2ZTdHJlYW09ITAsbnVsbDtiLmVuZE9mU3RyZWFtPSExO2IuTWE9ZjtpZihmIT1lKXJldHVybiBudWxsO2lmKGc+PWgpcmV0dXJuLjU7ZD1hLmEuSztmPWIudHlwZTtkPVwidGV4dFwiPT1cbmY/ZC5hLmE6QWIoSWIoZCxmKSk7Yi5lYSYmYi5zdHJlYW09PWIuRWE/KGY9Yi5lYS5wb3NpdGlvbisxLGQ9SGYoYSxiLGUsZikpOihmPWIuZWE/Yi5zdHJlYW0uZmluZFNlZ21lbnRQb3NpdGlvbihNYXRoLm1heCgwLGEuYi5wZXJpb2RzW2ljKGEuYixiLkVhKV0uc3RhcnRUaW1lK2IuZWEuZW5kVGltZS1hLmIucGVyaW9kc1tlXS5zdGFydFRpbWUpKTpiLnN0cmVhbS5maW5kU2VnbWVudFBvc2l0aW9uKE1hdGgubWF4KDAsKGR8fGMpLWEuYi5wZXJpb2RzW2VdLnN0YXJ0VGltZSkpLG51bGw9PWY/ZD1udWxsOihnPW51bGwsbnVsbD09ZCYmKGc9SGYoYSxiLGUsTWF0aC5tYXgoMCxmLTEpKSksZD1nfHxIZihhLGIsZSxmKSkpO2lmKCFkKXJldHVybiAxO0lmKGEsYixjLGUsZCk7cmV0dXJuIG51bGx9XG5mdW5jdGlvbiBIZihhLGIsYyxkKXtjPWEuYi5wZXJpb2RzW2NdO2I9Yi5zdHJlYW0uZ2V0U2VnbWVudFJlZmVyZW5jZShkKTtpZighYilyZXR1cm4gbnVsbDthPWEuYi5wcmVzZW50YXRpb25UaW1lbGluZTtkPWEudWEoKTtyZXR1cm4gYy5zdGFydFRpbWUrYi5lbmRUaW1lPGEubWEoKXx8Yy5zdGFydFRpbWUrYi5zdGFydFRpbWU+ZD9udWxsOmJ9XG5mdW5jdGlvbiBJZihhLGIsYyxkLGUpe3ZhciBmPWEuYi5wZXJpb2RzW2RdLGc9Yi5zdHJlYW0saD1hLmIucGVyaW9kc1tkKzFdLGw9bnVsbCxsPWg/aC5zdGFydFRpbWU6YS5iLnByZXNlbnRhdGlvblRpbWVsaW5lLlkoKTtkPUpmKGEsYixkLGwpO2Iud2E9ITA7Yi5jYj0hMTtoPUtmKGEsZSk7UHJvbWlzZS5hbGwoW2QsaF0pLnRoZW4oZnVuY3Rpb24oYSl7aWYoIXRoaXMuZiYmIXRoaXMubClyZXR1cm4gTGYodGhpcyxiLGMsZixnLGUsYVsxXSl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmZ8fHRoaXMubHx8KGIud2E9ITEsYi5FYj0hMSxiLnJhfHx0aGlzLmEueWIoKSxCZih0aGlzLGIsMCksTWYodGhpcyxnKSl9LmJpbmQoYSkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oYSl7dGhpcy5mfHx0aGlzLmx8fChiLndhPSExLHRoaXMuYi5wcmVzZW50YXRpb25UaW1lbGluZS4kKCkmJnRoaXMuZy5pbmZpbml0ZVJldHJpZXNGb3JMaXZlU3RyZWFtcyYmKDEwMDE9PWEuY29kZXx8MTAwMj09XG5hLmNvZGV8fDEwMDM9PWEuY29kZSk/XCJ0ZXh0XCI9PWIudHlwZSYmdGhpcy5nLmlnbm9yZVRleHRTdHJlYW1GYWlsdXJlcyYmMTAwMT09YS5jb2RlP2RlbGV0ZSB0aGlzLmMudGV4dDooYS5zZXZlcml0eT0xLHRoaXMuYS5vbkVycm9yKGEpLEJmKHRoaXMsYiw0KSk6MzAxNz09YS5jb2RlP05mKHRoaXMsYixhKTpcInRleHRcIj09Yi50eXBlJiZ0aGlzLmcuaWdub3JlVGV4dFN0cmVhbUZhaWx1cmVzP2RlbGV0ZSB0aGlzLmMudGV4dDooYi5yYj0hMCxhLnNldmVyaXR5PTIsdGhpcy5hLm9uRXJyb3IoYSkpKX0uYmluZChhKSl9ZnVuY3Rpb24gTmYoYSxiLGMpe2lmKCFOYShhLmMpLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJmEuRWJ9KSl7dmFyIGQ9TWF0aC5yb3VuZCgxMDAqYS5pKTtpZigyMDxkKWEuaS09LjI7ZWxzZSBpZig0PGQpYS5pLT0uMDQ7ZWxzZXtiLnJiPSEwO2EubD0hMDthLmEub25FcnJvcihjKTtyZXR1cm59Yi5FYj0hMH1CZihhLGIsNCl9XG5mdW5jdGlvbiBKZihhLGIsYyxkKXtpZighYi5jYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Yz1NYihhLmEuSyxiLnR5cGUsYS5iLnBlcmlvZHNbY10uc3RhcnRUaW1lLWIuc3RyZWFtLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsZCk7aWYoIWIuc3RyZWFtLmluaXRTZWdtZW50UmVmZXJlbmNlKXJldHVybiBjO2E9S2YoYSxiLnN0cmVhbS5pbml0U2VnbWVudFJlZmVyZW5jZSkudGhlbihmdW5jdGlvbihhKXtpZighdGhpcy5mKXJldHVybiBKYih0aGlzLmEuSyxiLnR5cGUsYSxudWxsLG51bGwpfS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2IuY2I9ITA7cmV0dXJuIFByb21pc2UucmVqZWN0KGEpfSk7cmV0dXJuIFByb21pc2UuYWxsKFtjLGFdKX1cbmZ1bmN0aW9uIExmKGEsYixjLGQsZSxmLGcpe2UuY29udGFpbnNFbXNnQm94ZXMmJihuZXcgUSkuZGEoXCJlbXNnXCIsYS5DZC5iaW5kKGEsZCxmKSkucGFyc2UoZyk7cmV0dXJuIE9mKGEsYixjKS50aGVuKGZ1bmN0aW9uKCl7aWYoIXRoaXMuZilyZXR1cm4gSmIodGhpcy5hLkssYi50eXBlLGcsZi5zdGFydFRpbWUrZC5zdGFydFRpbWUsZi5lbmRUaW1lK2Quc3RhcnRUaW1lKX0uYmluZChhKSkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYpcmV0dXJuIGIuRWE9ZSxiLmVhPWYsUHJvbWlzZS5yZXNvbHZlKCl9LmJpbmQoYSkpfVxuay5DZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5zLkJiKCksZT1jLnMuQmIoKSxmPWMucy5EKCksZz1jLnMuRCgpLGg9Yy5zLkQoKSxsPWMucy5EKCk7Yz1jLnMuSmEoYy5zLkguYnl0ZUxlbmd0aC1jLnMudSk7YT1hLnN0YXJ0VGltZStiLnN0YXJ0VGltZStnL2Y7aWYoXCJ1cm46bXBlZzpkYXNoOmV2ZW50OjIwMTJcIj09ZCl0aGlzLmEuaGQoKTtlbHNlIHRoaXMuYS5vbkV2ZW50KG5ldyBJKFwiZW1zZ1wiLHtkZXRhaWw6e3N0YXJ0VGltZTphLGVuZFRpbWU6YStoL2Ysc2NoZW1lSWRVcmk6ZCx2YWx1ZTplLHRpbWVzY2FsZTpmLHByZXNlbnRhdGlvblRpbWVEZWx0YTpnLGV2ZW50RHVyYXRpb246aCxpZDpsLG1lc3NhZ2VEYXRhOmN9fSkpfTtcbmZ1bmN0aW9uIE9mKGEsYixjKXt2YXIgZD1HYihhLmEuSyxiLnR5cGUpO2lmKG51bGw9PWQpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2M9Yy1kLWEuZy5idWZmZXJCZWhpbmQ7cmV0dXJuIDA+PWM/UHJvbWlzZS5yZXNvbHZlKCk6YS5hLksucmVtb3ZlKGIudHlwZSxkLGQrYykudGhlbihmdW5jdGlvbigpe30uYmluZChhKSl9ZnVuY3Rpb24gTWYoYSxiKXtpZighYS52JiYoYS52PU5hKGEuYykuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuXCJ0ZXh0XCI9PWEudHlwZT8hMDohYS5yYSYmIWEuc2EmJmEuZWF9KSxhLnYpKXt2YXIgYz1pYyhhLmIsYik7YS5oW2NdfHxFZihhLGMpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmEuWmIoKX0uYmluZChhKSlbXCJjYXRjaFwiXSh5KTtmb3IoYz0wO2M8YS5iLnBlcmlvZHMubGVuZ3RoOysrYylFZihhLGMpW1wiY2F0Y2hcIl0oeSk7YS5hLnVkJiZhLmEudWQoKX19XG5mdW5jdGlvbiBHZihhLGIpe2lmKGIuTWEhPWljKGEuYixiLnN0cmVhbSkpe3ZhciBjPWIuTWEsZD1OYShhLmMpO2QuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuIGEuTWE9PWN9KSYmZC5ldmVyeShQZikmJkVmKGEsYykudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYmJmQuZXZlcnkoZnVuY3Rpb24oYSl7dmFyIGI9aWModGhpcy5iLGEuc3RyZWFtKTtyZXR1cm4gUGYoYSkmJmEuTWE9PWMmJmIhPWN9LmJpbmQodGhpcykpKXt2YXIgYT10aGlzLmIucGVyaW9kc1tjXSxiPXRoaXMuYS4kYihhKSxnO2ZvcihnIGluIHRoaXMuYylpZighYltnXSYmXCJ0ZXh0XCIhPWcpe3RoaXMuYS5vbkVycm9yKG5ldyB0KDIsNSw1MDA1KSk7cmV0dXJufWZvcihnIGluIGIpaWYoIXRoaXMuY1tnXSlpZihcInRleHRcIj09Zyl1Zih0aGlzLHt0ZXh0OmIudGV4dH0sYS5zdGFydFRpbWUpLGRlbGV0ZSBiW2ddO2Vsc2V7dGhpcy5hLm9uRXJyb3IobmV3IHQoMiw1LDUwMDUpKTtyZXR1cm59Zm9yKGcgaW4gdGhpcy5jKShhPVxuYltnXSk/KHlmKHRoaXMsZyxhLCExKSxCZih0aGlzLHRoaXMuY1tnXSwwKSk6ZGVsZXRlIHRoaXMuY1tnXTt0aGlzLmEuWmIoKX19LmJpbmQoYSkpW1wiY2F0Y2hcIl0oeSl9fWZ1bmN0aW9uIFBmKGEpe3JldHVybiFhLndhJiZudWxsPT1hLnFhJiYhYS5yYSYmIWEuc2F9ZnVuY3Rpb24gS2YoYSxiKXt2YXIgYz1DKGIuYSgpLGEuZy5yZXRyeVBhcmFtZXRlcnMpO2lmKGIuWHx8bnVsbCE9Yi5NKXt2YXIgZD1cImJ5dGVzPVwiK2IuWCtcIi1cIjtudWxsIT1iLk0mJihkKz1iLk0pO2MuaGVhZGVycy5SYW5nZT1kfXJldHVybiBhLmEuYmQucmVxdWVzdCgxLGMpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfVxuZnVuY3Rpb24gemYoYSxiLGMpe2IucmE9ITE7Yi5rYj0hMTtiLnNhPSEwO0xiKGEuYS5LLGIudHlwZSkudGhlbihmdW5jdGlvbigpe2lmKCF0aGlzLmYmJmMpe3ZhciBhPXRoaXMuYS5LLGU9Yi50eXBlO3JldHVyblwidGV4dFwiPT1lP1Byb21pc2UucmVzb2x2ZSgpOktiKGEsZSxhLk1jLmJpbmQoYSxlKSl9fS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5mfHwoYi5FYT1udWxsLGIuZWE9bnVsbCxiLnNhPSExLGIuZW5kT2ZTdHJlYW09ITEsQmYodGhpcyxiLDApKX0uYmluZChhKSl9ZnVuY3Rpb24gQmYoYSxiLGMpe2IucWE9d2luZG93LnNldFRpbWVvdXQoYS5pZS5iaW5kKGEsYiksMUUzKmMpfWZ1bmN0aW9uIHRmKGEpe251bGwhPWEucWEmJih3aW5kb3cuY2xlYXJUaW1lb3V0KGEucWEpLGEucWE9bnVsbCl9O2Z1bmN0aW9uIFFmKGEsYil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGMsZCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O2Uub3BlbihiLm1ldGhvZCxhLCEwKTtlLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7ZS50aW1lb3V0PWIucmV0cnlQYXJhbWV0ZXJzLnRpbWVvdXQ7ZS53aXRoQ3JlZGVudGlhbHM9Yi5hbGxvd0Nyb3NzU2l0ZUNyZWRlbnRpYWxzO2Uub25sb2FkPWZ1bmN0aW9uKGIpe2I9Yi50YXJnZXQ7dmFyIGU9Yi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5zcGxpdChcIlxcclxcblwiKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnNwbGl0KFwiOiBcIik7YVtjWzBdLnRvTG93ZXJDYXNlKCldPWMuc2xpY2UoMSkuam9pbihcIjogXCIpO3JldHVybiBhfSx7fSk7aWYoMjAwPD1iLnN0YXR1cyYmMjk5Pj1iLnN0YXR1cyYmMjAyIT1iLnN0YXR1cyliLnJlc3BvbnNlVVJMJiYoYT1iLnJlc3BvbnNlVVJMKSxjKHt1cmk6YSxkYXRhOmIucmVzcG9uc2UsaGVhZGVyczplLGZyb21DYWNoZTohIWVbXCJ4LXNoYWthLWZyb20tY2FjaGVcIl19KTtcbmVsc2V7dmFyIGY9bnVsbDt0cnl7Zj1UYShiLnJlc3BvbnNlKX1jYXRjaChuKXt9ZChuZXcgdCg0MDE9PWIuc3RhdHVzfHw0MDM9PWIuc3RhdHVzPzI6MSwxLDEwMDEsYSxiLnN0YXR1cyxmLGUpKX19O2Uub25lcnJvcj1mdW5jdGlvbigpe2QobmV3IHQoMSwxLDEwMDIsYSkpfTtlLm9udGltZW91dD1mdW5jdGlvbigpe2QobmV3IHQoMSwxLDEwMDMsYSkpfTtmb3IodmFyIGYgaW4gYi5oZWFkZXJzKWUuc2V0UmVxdWVzdEhlYWRlcihmLGIuaGVhZGVyc1tmXSk7ZS5zZW5kKGIuYm9keSl9KX1tKFwic2hha2EubmV0Lkh0dHBQbHVnaW5cIixRZik7RWEuaHR0cD1RZjtFYS5odHRwcz1RZjtmdW5jdGlvbiBSZigpe3RoaXMuYT1udWxsO3RoaXMuYj1bXTt0aGlzLmM9e319az1SZi5wcm90b3R5cGU7ay5pbml0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIFNmKHRoaXMsYSxiKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGI9T2JqZWN0LmtleXMoYSk7cmV0dXJuIFByb21pc2UuYWxsKGIubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBUZih0aGlzLGEpLnRoZW4oZnVuY3Rpb24oYil7dGhpcy5jW2FdPWJ9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKSl9LmJpbmQodGhpcykpfTtrLm09ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5iLm1hcChmdW5jdGlvbihhKXt0cnl7YS50cmFuc2FjdGlvbi5hYm9ydCgpfWNhdGNoKGIpe31yZXR1cm4gYS5MW1wiY2F0Y2hcIl0oeSl9KSkudGhlbihmdW5jdGlvbigpe3RoaXMuYSYmKHRoaXMuYS5jbG9zZSgpLHRoaXMuYT1udWxsKX0uYmluZCh0aGlzKSl9O1xuay5nZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gVWYodGhpcyxhLFwicmVhZG9ubHlcIixmdW5jdGlvbihhKXtjPWEuZ2V0KGIpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBjLnJlc3VsdH0pfTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVWYodGhpcyxhLFwicmVhZG9ubHlcIixmdW5jdGlvbihhKXthLm9wZW5DdXJzb3IoKS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7aWYoYT1hLnRhcmdldC5yZXN1bHQpYihhLnZhbHVlKSxhW1wiY29udGludWVcIl0oKX19KX07ZnVuY3Rpb24gVmYoYSxiLGMpe3JldHVybiBVZihhLGIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbihhKXthLnB1dChjKX0pfWsucmVtb3ZlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFVmKHRoaXMsYSxcInJlYWR3cml0ZVwiLGZ1bmN0aW9uKGEpe2FbXCJkZWxldGVcIl0oYil9KX07XG5mdW5jdGlvbiBXZihhLGIsYyl7cmV0dXJuIFVmKGEsXCJzZWdtZW50XCIsXCJyZWFkd3JpdGVcIixmdW5jdGlvbihhKXtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKylhW1wiZGVsZXRlXCJdKGJbZF0pLm9uc3VjY2Vzcz1jfHxmdW5jdGlvbigpe319KX1mdW5jdGlvbiBUZihhLGIpe3ZhciBjPTA7cmV0dXJuIFVmKGEsYixcInJlYWRvbmx5XCIsZnVuY3Rpb24oYSl7YS5vcGVuQ3Vyc29yKG51bGwsXCJwcmV2XCIpLm9uc3VjY2Vzcz1mdW5jdGlvbihhKXsoYT1hLnRhcmdldC5yZXN1bHQpJiYoYz1hLmtleSsxKX19KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGN9KX1cbmZ1bmN0aW9uIFVmKGEsYixjLGQpe3ZhciBlPXt0cmFuc2FjdGlvbjphLmEudHJhbnNhY3Rpb24oW2JdLGMpLEw6bmV3IEF9O2UudHJhbnNhY3Rpb24ub25jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuYi5zcGxpY2UodGhpcy5iLmluZGV4T2YoZSksMSk7ZS5MLnJlc29sdmUoKX0uYmluZChhKTtlLnRyYW5zYWN0aW9uLm9uYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5iLnNwbGljZSh0aGlzLmIuaW5kZXhPZihlKSwxKTtYZihlLnRyYW5zYWN0aW9uLGUuTCxhKX0uYmluZChhKTtlLnRyYW5zYWN0aW9uLm9uZXJyb3I9ZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfS5iaW5kKGEpO2I9ZS50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShiKTtkKGIpO2EuYi5wdXNoKGUpO3JldHVybiBlLkx9XG5mdW5jdGlvbiBTZihhLGIsYyl7dmFyIGQ9d2luZG93LmluZGV4ZWREQi5vcGVuKFwic2hha2Ffb2ZmbGluZV9kYlwiLDEpLGU9ITEsZj1uZXcgQTtkLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbihhKXtlPSEwO2E9YS50YXJnZXQucmVzdWx0O2Zvcih2YXIgYyBpbiBiKWEuY3JlYXRlT2JqZWN0U3RvcmUoYyx7a2V5UGF0aDpiW2NdfSl9O2Qub25zdWNjZXNzPWZ1bmN0aW9uKGEpe2MmJiFlPyhhLnRhcmdldC5yZXN1bHQuY2xvc2UoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7U2YodGhpcyxiLGMtMSkudGhlbihmLnJlc29sdmUsZi5yZWplY3QpfS5iaW5kKHRoaXMpLDFFMykpOih0aGlzLmE9YS50YXJnZXQucmVzdWx0LGYucmVzb2x2ZSgpKX0uYmluZChhKTtkLm9uZXJyb3I9WGYuYmluZChudWxsLGQsZik7cmV0dXJuIGZ9XG5mdW5jdGlvbiBYZihhLGIsYyl7YS5lcnJvcj9iLnJlamVjdChuZXcgdCgyLDksOTAwMSxhLmVycm9yKSk6Yi5yZWplY3QobmV3IHQoMiw5LDkwMDIpKTtjLnByZXZlbnREZWZhdWx0KCl9O3ZhciBZZj17bWFuaWZlc3Q6XCJrZXlcIixzZWdtZW50Olwia2V5XCJ9O2Z1bmN0aW9uIFpmKGEpe3ZhciBiPSRmKGEucGVyaW9kc1swXSxbXSxuZXcgVChudWxsLDApKSxjPVpiKGIsbnVsbCxudWxsKSxiPWFjKGIsbnVsbCk7Yy5wdXNoLmFwcGx5KGMsYik7cmV0dXJue29mZmxpbmVVcmk6XCJvZmZsaW5lOlwiK2Eua2V5LG9yaWdpbmFsTWFuaWZlc3RVcmk6YS5vcmlnaW5hbE1hbmlmZXN0VXJpLGR1cmF0aW9uOmEuZHVyYXRpb24sc2l6ZTphLnNpemUsZXhwaXJhdGlvbjp2b2lkIDA9PWEuZXhwaXJhdGlvbj9JbmZpbml0eTphLmV4cGlyYXRpb24sdHJhY2tzOmMsYXBwTWV0YWRhdGE6YS5hcHBNZXRhZGF0YX19XG5mdW5jdGlvbiAkZihhLGIsYyl7dmFyIGQ9YS5zdHJlYW1zLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cInRleHRcIj09YS5jb250ZW50VHlwZX0pLGU9YS5zdHJlYW1zLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cImF1ZGlvXCI9PWEuY29udGVudFR5cGV9KSxmPWEuc3RyZWFtcy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJ2aWRlb1wiPT1hLmNvbnRlbnRUeXBlfSk7Yj1hZyhlLGYsYik7ZD1kLm1hcChiZyk7YS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oYSl7YT1jZyhhKTtjLkdhKDAsYSl9KTtyZXR1cm57c3RhcnRUaW1lOmEuc3RhcnRUaW1lLHZhcmlhbnRzOmIsdGV4dFN0cmVhbXM6ZH19ZnVuY3Rpb24gY2coYSl7cmV0dXJuIGEuc2VnbWVudHMubWFwKGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG5ldyBPKGMsYS5zdGFydFRpbWUsYS5lbmRUaW1lLGZ1bmN0aW9uKCl7cmV0dXJuW2EudXJpXX0sMCxudWxsKX0pfVxuZnVuY3Rpb24gYWcoYSxiLGMpe3ZhciBkPVtdO2lmKCFhLmxlbmd0aCYmIWIubGVuZ3RoKXJldHVybiBkO2EubGVuZ3RoP2IubGVuZ3RofHwoYj1bbnVsbF0pOmE9W251bGxdO2Zvcih2YXIgZT0wLGY9MDtmPGEubGVuZ3RoO2YrKylmb3IodmFyIGc9MDtnPGIubGVuZ3RoO2crKylpZihkZyhhW2ZdLGJbZ10pKXt2YXIgaD1hW2ZdO3ZhciBsPWJbZ10sbj1jO2g9e2lkOmUrKyxsYW5ndWFnZTpoP2gubGFuZ3VhZ2U6XCJcIixwcmltYXJ5OiEhaCYmaC5wcmltYXJ5fHwhIWwmJmwucHJpbWFyeSxhdWRpbzpiZyhoKSx2aWRlbzpiZyhsKSxiYW5kd2lkdGg6MCxkcm1JbmZvczpuLGFsbG93ZWRCeUFwcGxpY2F0aW9uOiEwLGFsbG93ZWRCeUtleVN5c3RlbTohMH07ZC5wdXNoKGgpfXJldHVybiBkfVxuZnVuY3Rpb24gZGcoYSxiKXtpZighKGEmJmImJmEudmFyaWFudElkcyYmYi52YXJpYW50SWRzKSlyZXR1cm4hMDtmb3IodmFyIGM9MDtjPGEudmFyaWFudElkcy5sZW5ndGg7YysrKWlmKGIudmFyaWFudElkcy5zb21lKGZ1bmN0aW9uKGIpe3JldHVybiBiPT1hLnZhcmlhbnRJZHNbY119KSlyZXR1cm4hMDtyZXR1cm4hMX1cbmZ1bmN0aW9uIGJnKGEpe2lmKCFhKXJldHVybiBudWxsO3ZhciBiPWNnKGEpLGI9bmV3IFMoYik7cmV0dXJue2lkOmEuaWQsY3JlYXRlU2VnbWVudEluZGV4OlByb21pc2UucmVzb2x2ZS5iaW5kKFByb21pc2UpLGZpbmRTZWdtZW50UG9zaXRpb246Yi5maW5kLmJpbmQoYiksZ2V0U2VnbWVudFJlZmVyZW5jZTpiLmdldC5iaW5kKGIpLGluaXRTZWdtZW50UmVmZXJlbmNlOmEuaW5pdFNlZ21lbnRVcmk/bmV3IFpjKGZ1bmN0aW9uKCl7cmV0dXJuW2EuaW5pdFNlZ21lbnRVcmldfSwwLG51bGwpOm51bGwscHJlc2VudGF0aW9uVGltZU9mZnNldDphLnByZXNlbnRhdGlvblRpbWVPZmZzZXQsbWltZVR5cGU6YS5taW1lVHlwZSxjb2RlY3M6YS5jb2RlY3Msd2lkdGg6YS53aWR0aHx8dm9pZCAwLGhlaWdodDphLmhlaWdodHx8dm9pZCAwLGZyYW1lUmF0ZTphLmZyYW1lUmF0ZXx8dm9pZCAwLGtpbmQ6YS5raW5kLGVuY3J5cHRlZDphLmVuY3J5cHRlZCxrZXlJZDphLmtleUlkLGxhbmd1YWdlOmEubGFuZ3VhZ2UsXG5sYWJlbDphLmxhYmVsfHxudWxsLHR5cGU6YS5jb250ZW50VHlwZSxwcmltYXJ5OmEucHJpbWFyeSx0cmlja01vZGVWaWRlbzpudWxsLGNvbnRhaW5zRW1zZ0JveGVzOiExLHJvbGVzOltdfX1mdW5jdGlvbiBlZygpe3JldHVybiB3aW5kb3cuaW5kZXhlZERCP25ldyBSZjpudWxsfTtmdW5jdGlvbiBmZyhhLGIsYyxkKXt0aGlzLmI9e307dGhpcy5sPVtdO3RoaXMubz1kO3RoaXMuaj1hO3RoaXMudj1iO3RoaXMuQT1jO3RoaXMuaT10aGlzLmE9bnVsbDt0aGlzLmY9dGhpcy5nPXRoaXMuaD10aGlzLmM9MH1mZy5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaixiPXRoaXMubCxjPXRoaXMuaXx8UHJvbWlzZS5yZXNvbHZlKCksYz1jLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gV2YoYSxiKX0pO3RoaXMuYj17fTt0aGlzLmw9W107dGhpcy5pPXRoaXMuYT10aGlzLkE9dGhpcy52PXRoaXMuaj10aGlzLm89bnVsbDtyZXR1cm4gY307ZnVuY3Rpb24gZ2coYSxiLGMsZCxlKXthLmJbYl09YS5iW2JdfHxbXTthLmJbYl0ucHVzaCh7dXJpczpjLmEoKSxYOmMuWCxNOmMuTSxQYjpkLEZiOmV9KX1cbmZ1bmN0aW9uIGhnKGEsYil7YS5jPTA7YS5oPTA7YS5nPTA7YS5mPTA7TmEoYS5iKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtudWxsIT1hLk0/dGhpcy5jKz1hLk0tYS5YKzE6dGhpcy5nKz1hLlBifS5iaW5kKHRoaXMpKX0uYmluZChhKSk7YS5hPWI7YS5hLnNpemU9YS5jO3ZhciBjPU5hKGEuYikubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1mdW5jdGlvbigpe2lmKCF0aGlzLm8pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyB0KDIsOSw5MDAyKSk7aWYoYj49YS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciBkPWFbYisrXTtyZXR1cm4gaWcodGhpcyxkKS50aGVuKGMpfS5iaW5kKHRoaXMpO3JldHVybiBjKCl9LmJpbmQoYSkpO2EuYj17fTthLmk9UHJvbWlzZS5hbGwoYykudGhlbihmdW5jdGlvbigpe3JldHVybiBWZih0aGlzLmosXCJtYW5pZmVzdFwiLGIpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5sPVtdfS5iaW5kKGEpKTtcbnJldHVybiBhLml9XG5mdW5jdGlvbiBpZyhhLGIpe3ZhciBjPUMoYi51cmlzLGEuQSk7aWYoYi5YfHxudWxsIT1iLk0pYy5oZWFkZXJzLlJhbmdlPVwiYnl0ZXM9XCIrYi5YK1wiLVwiKyhudWxsPT1iLk0/XCJcIjpiLk0pO3ZhciBkO3JldHVybiBhLnYucmVxdWVzdCgxLGMpLnRoZW4oZnVuY3Rpb24oYSl7aWYoIXRoaXMuYSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoMiw5LDkwMDIpKTtkPWEuZGF0YS5ieXRlTGVuZ3RoO3RoaXMubC5wdXNoKGIuRmIua2V5KTtiLkZiLmRhdGE9YS5kYXRhO3JldHVybiBWZih0aGlzLmosXCJzZWdtZW50XCIsYi5GYil9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5hKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgdCgyLDksOTAwMikpO251bGw9PWIuTT8odGhpcy5hLnNpemUrPWQsdGhpcy5mKz1iLlBiKTp0aGlzLmgrPWQ7dmFyIGE9KHRoaXMuaCt0aGlzLmYpLyh0aGlzLmMrdGhpcy5nKSxjPVpmKHRoaXMuYSk7dGhpcy5vLnByb2dyZXNzQ2FsbGJhY2soYyxhKX0uYmluZChhKSl9XG47ZnVuY3Rpb24gamcoKXt0aGlzLmE9LTF9az1qZy5wcm90b3R5cGU7ay5jb25maWd1cmU9ZnVuY3Rpb24oKXt9O2suc3RhcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9L15vZmZsaW5lOihbMC05XSspJC8uZXhlYyhhKTtpZighYilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoMiwxLDkwMDQsYSkpO3ZhciBjPU51bWJlcihiWzFdKSxkPWVnKCk7dGhpcy5hPWM7cmV0dXJuIGQ/ZC5pbml0KFlmKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGQuZ2V0KFwibWFuaWZlc3RcIixjKX0pLnRoZW4oZnVuY3Rpb24oYSl7aWYoIWEpdGhyb3cgbmV3IHQoMiw5LDkwMDMsYyk7cmV0dXJuIGtnKGEpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZC5tKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSl9LGZ1bmN0aW9uKGEpe3JldHVybiBkLm0oKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgYTt9KX0pOlByb21pc2UucmVqZWN0KG5ldyB0KDIsOSw5RTMpKX07ay5zdG9wPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtcbmsudXBkYXRlPWZ1bmN0aW9uKCl7fTtrLm9uRXhwaXJhdGlvblVwZGF0ZWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1lZygpO2MuaW5pdChZZikudGhlbihmdW5jdGlvbigpe3JldHVybiBjLmdldChcIm1hbmlmZXN0XCIsdGhpcy5hKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihkKXtpZihkJiYhKDA+ZC5zZXNzaW9uSWRzLmluZGV4T2YoYSkpJiYodm9pZCAwPT1kLmV4cGlyYXRpb258fGQuZXhwaXJhdGlvbj5iKSlyZXR1cm4gZC5leHBpcmF0aW9uPWIsVmYoYyxcIm1hbmlmZXN0XCIsZCl9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSkudGhlbihmdW5jdGlvbigpe3JldHVybiBjLm0oKX0pfTtcbmZ1bmN0aW9uIGtnKGEpe3ZhciBiPW5ldyBUKG51bGwsMCk7Yi5wYShhLmR1cmF0aW9uKTt2YXIgYz1hLmRybUluZm8/W2EuZHJtSW5mb106W107cmV0dXJue3ByZXNlbnRhdGlvblRpbWVsaW5lOmIsbWluQnVmZmVyVGltZToxMCxvZmZsaW5lU2Vzc2lvbklkczphLnNlc3Npb25JZHMscGVyaW9kczphLnBlcmlvZHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiAkZihhLGMsYil9KX19RGRbXCJhcHBsaWNhdGlvbi94LW9mZmxpbmUtbWFuaWZlc3RcIl09amc7ZnVuY3Rpb24gbGcoYSl7aWYoL15vZmZsaW5lOihbMC05XSspJC8uZXhlYyhhKSl7dmFyIGI9e3VyaTphLGRhdGE6bmV3IEFycmF5QnVmZmVyKDApLGhlYWRlcnM6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi94LW9mZmxpbmUtbWFuaWZlc3RcIn19O3JldHVybiBQcm9taXNlLnJlc29sdmUoYil9aWYoYj0vXm9mZmxpbmU6WzAtOV0rXFwvWzAtOV0rXFwvKFswLTldKykkLy5leGVjKGEpKXt2YXIgYz1OdW1iZXIoYlsxXSksZD1lZygpO3JldHVybiBkP2QuaW5pdChZZikudGhlbihmdW5jdGlvbigpe3JldHVybiBkLmdldChcInNlZ21lbnRcIixjKX0pLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIGQubSgpLnRoZW4oZnVuY3Rpb24oKXtpZighYil0aHJvdyBuZXcgdCgyLDksOTAwMyxjKTtyZXR1cm57dXJpOmEsZGF0YTpiLmRhdGEsaGVhZGVyczp7fX19KX0pOlByb21pc2UucmVqZWN0KG5ldyB0KDIsOSw5RTMpKX1yZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoMiwxLDkwMDQsYSkpfVxubShcInNoYWthLm9mZmxpbmUuT2ZmbGluZVNjaGVtZVwiLGxnKTtFYS5vZmZsaW5lPWxnO2Z1bmN0aW9uIG1nKCl7dGhpcy5hPVByb21pc2UucmVzb2x2ZSgpO3RoaXMuYz10aGlzLmI9dGhpcy5mPSExO3RoaXMuZz1uZXcgUHJvbWlzZShmdW5jdGlvbihhKXt0aGlzLmg9YX0uYmluZCh0aGlzKSl9bWcucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSl7dGhpcy5hPXRoaXMuYS50aGVuKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYz8odGhpcy5oKCksUHJvbWlzZS5yZWplY3QodGhpcy5pKSk6UHJvbWlzZS5yZXNvbHZlKGEpfS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gbmcoYSl7YS5mfHwoYS5hPWEuYS50aGVuKGZ1bmN0aW9uKGEpe3RoaXMuYj0hMDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpfS5iaW5kKGEpLGZ1bmN0aW9uKGEpe3RoaXMuYj0hMDtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQoYSkpKTthLmY9ITA7cmV0dXJuIGEuYX1cbm1nLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oYSl7aWYodGhpcy5iKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt0aGlzLmM9ITA7dGhpcy5pPWE7cmV0dXJuIHRoaXMuZ307ZnVuY3Rpb24gVyhhLGIpe3AuY2FsbCh0aGlzKTt0aGlzLko9ITE7dGhpcy5mPWE7dGhpcy5BPW51bGw7dGhpcy5sPW5ldyBEO3RoaXMuT2I9bmV3IEg7dGhpcy5ZYT10aGlzLmM9dGhpcy5oPXRoaXMuYT10aGlzLnY9dGhpcy5nPXRoaXMuV2E9dGhpcy5qYT10aGlzLk49dGhpcy5qPXRoaXMubz1udWxsO3RoaXMuQmM9MUU5O3RoaXMuVmE9W107dGhpcy5rYT0hMTt0aGlzLlphPSEwO3RoaXMubGE9dGhpcy5HPW51bGw7dGhpcy5CPXt9O3RoaXMuWGE9W107dGhpcy5QPXt9O3RoaXMuYj1vZyh0aGlzKTt0aGlzLm1iPXt3aWR0aDpJbmZpbml0eSxoZWlnaHQ6SW5maW5pdHl9O3RoaXMuaT1wZygpO3RoaXMuVWE9MDt0aGlzLmlhPXRoaXMuYi5wcmVmZXJyZWRBdWRpb0xhbmd1YWdlO3RoaXMuQmE9dGhpcy5iLnByZWZlcnJlZFRleHRMYW5ndWFnZTtiJiZiKHRoaXMpO3RoaXMubz1uZXcgQih0aGlzLmJlLmJpbmQodGhpcykpO3RoaXMuV2E9cWcodGhpcyk7Zm9yKHZhciBjPTA7Yzx0aGlzLmYudGV4dFRyYWNrcy5sZW5ndGg7KytjKXt2YXIgZD1cbnRoaXMuZi50ZXh0VHJhY2tzW2NdO2QubW9kZT1cImRpc2FibGVkXCI7XCJTaGFrYSBQbGF5ZXIgVGV4dFRyYWNrXCI9PWQubGFiZWwmJih0aGlzLkE9ZCl9dGhpcy5BfHwodGhpcy5BPXRoaXMuZi5hZGRUZXh0VHJhY2soXCJzdWJ0aXRsZXNcIixcIlNoYWthIFBsYXllciBUZXh0VHJhY2tcIikpO3RoaXMuQS5tb2RlPVwiaGlkZGVuXCI7RSh0aGlzLmwsdGhpcy5mLFwiZXJyb3JcIix0aGlzLndkLmJpbmQodGhpcykpfWJhKFcpO20oXCJzaGFrYS5QbGF5ZXJcIixXKTtcblcucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLko9ITA7dmFyIGE9UHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5HJiYoYT10aGlzLkcuY2FuY2VsKG5ldyB0KDIsNyw3RTMpKSk7cmV0dXJuIGEudGhlbihmdW5jdGlvbigpe3ZhciBhPVByb21pc2UuYWxsKFt0aGlzLmxhLHJnKHRoaXMpLHRoaXMubD90aGlzLmwubSgpOm51bGwsdGhpcy5vP3RoaXMuby5tKCk6bnVsbF0pO3RoaXMuYj10aGlzLm89dGhpcy5PYj10aGlzLmw9dGhpcy5BPXRoaXMuZj1udWxsO3JldHVybiBhfS5iaW5kKHRoaXMpKX07Vy5wcm90b3R5cGUuZGVzdHJveT1XLnByb3RvdHlwZS5tO1cudmVyc2lvbj1cInYyLjEuM1wiO3ZhciBzZz17fTtXLnJlZ2lzdGVyU3VwcG9ydFBsdWdpbj1mdW5jdGlvbihhLGIpe3NnW2FdPWJ9O1xuVy5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXdpbmRvdy5Qcm9taXNlJiYhIXdpbmRvdy5VaW50OEFycmF5JiYhIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoJiYhIXdpbmRvdy5NZWRpYVNvdXJjZSYmISF3aW5kb3cuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkJiYhIXdpbmRvdy5NZWRpYUtleXMmJiEhd2luZG93Lm5hdmlnYXRvciYmISF3aW5kb3cubmF2aWdhdG9yLnJlcXVlc3RNZWRpYUtleVN5c3RlbUFjY2VzcyYmISF3aW5kb3cuTWVkaWFLZXlTeXN0ZW1BY2Nlc3MmJiEhd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9ufTtXLnByb2JlU3VwcG9ydD1mdW5jdGlvbigpe3JldHVybiBxYigpLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGI9RmQoKSxjPUViKCk7YT17bWFuaWZlc3Q6YixtZWRpYTpjLGRybTphfTtmb3IodmFyIGQgaW4gc2cpYVtkXT1zZ1tkXSgpO3JldHVybiBhfSl9O1xuVy5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5oYigpLGU9bmV3IG1nO3RoaXMuRz1lO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSShcImxvYWRpbmdcIikpO3ZhciBmPURhdGUubm93KCk7cmV0dXJuIG5nKGUudGhlbihmdW5jdGlvbigpe3JldHVybiBkfSkudGhlbihmdW5jdGlvbigpe3RoaXMuaT1wZygpO0UodGhpcy5sLHRoaXMuZixcInBsYXlpbmdcIix0aGlzLlNhLmJpbmQodGhpcykpO0UodGhpcy5sLHRoaXMuZixcInBhdXNlXCIsdGhpcy5TYS5iaW5kKHRoaXMpKTtFKHRoaXMubCx0aGlzLmYsXCJlbmRlZFwiLHRoaXMuU2EuYmluZCh0aGlzKSk7cmV0dXJuIEdkKGEsdGhpcy5vLHRoaXMuYi5tYW5pZmVzdC5yZXRyeVBhcmFtZXRlcnMsYyl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oYil7dGhpcy5oPW5ldyBiO3RoaXMuaC5jb25maWd1cmUodGhpcy5iLm1hbmlmZXN0KTtiPXtuZXR3b3JraW5nRW5naW5lOnRoaXMubyxmaWx0ZXJQZXJpb2Q6dGhpcy5mYi5iaW5kKHRoaXMpLFxub25UaW1lbGluZVJlZ2lvbkFkZGVkOnRoaXMudmQuYmluZCh0aGlzKSxvbkV2ZW50OnRoaXMuZ2IuYmluZCh0aGlzKSxvbkVycm9yOnRoaXMueGEuYmluZCh0aGlzKX07cmV0dXJuIDI8dGhpcy5oLnN0YXJ0Lmxlbmd0aD90aGlzLmguc3RhcnQoYSx0aGlzLm8sYi5maWx0ZXJQZXJpb2QsYi5vbkVycm9yLGIub25FdmVudCk6dGhpcy5oLnN0YXJ0KGEsYil9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oYil7aWYoMD09Yi5wZXJpb2RzLmxlbmd0aCl0aHJvdyBuZXcgdCgyLDQsNDAxNCk7dGhpcy5jPWI7dGhpcy5ZYT1hO3RoaXMuaj1uZXcgYmIodGhpcy5vLHRoaXMueGEuYmluZCh0aGlzKSx0aGlzLiRkLmJpbmQodGhpcyksdGhpcy5aZC5iaW5kKHRoaXMpKTt0aGlzLmouY29uZmlndXJlKHRoaXMuYi5kcm0pO3JldHVybiB0aGlzLmouaW5pdChiLCExKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3RoaXMuYy5wZXJpb2RzLmZvckVhY2godGhpcy5mYi5iaW5kKHRoaXMpKTt0aGlzLlVhPVxuRGF0ZS5ub3coKS8xRTM7dGhpcy5pYT10aGlzLmIucHJlZmVycmVkQXVkaW9MYW5ndWFnZTt0aGlzLkJhPXRoaXMuYi5wcmVmZXJyZWRUZXh0TGFuZ3VhZ2U7cmV0dXJuIFByb21pc2UuYWxsKFtlYih0aGlzLmosdGhpcy5mKSx0aGlzLldhXSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLmIuYWJyLm1hbmFnZXIuaW5pdCh0aGlzLkpiLmJpbmQodGhpcykpO3RoaXMuZz1uZXcgZmYodGhpcy5mLHRoaXMuYyx0aGlzLmIuc3RyZWFtaW5nLGJ8fG51bGwsdGhpcy5hZS5iaW5kKHRoaXMpLHRoaXMuZ2IuYmluZCh0aGlzKSk7dGhpcy52PW5ldyBvZih0aGlzLmYsdGhpcy5jLHRoaXMuYi5zdHJlYW1pbmcsdGhpcy54Yy5iaW5kKHRoaXMpLHRoaXMuZ2IuYmluZCh0aGlzKSx0aGlzLllkLmJpbmQodGhpcykpO3RoaXMuamE9bmV3IERiKHRoaXMuZix0aGlzLk4sdGhpcy5BKTt0aGlzLmE9bmV3IHNmKHRoaXMuYyx7T2E6dGhpcy5nLEs6dGhpcy5qYSxiZDp0aGlzLm8sJGI6dGhpcy5jZC5iaW5kKHRoaXMpLFxuWmI6dGhpcy5FYy5iaW5kKHRoaXMpLG9uRXJyb3I6dGhpcy54YS5iaW5kKHRoaXMpLG9uRXZlbnQ6dGhpcy5nYi5iaW5kKHRoaXMpLGhkOnRoaXMuamQuYmluZCh0aGlzKSx5Yjp0aGlzLnNkLmJpbmQodGhpcyl9KTt0aGlzLmEuY29uZmlndXJlKHRoaXMuYi5zdHJlYW1pbmcpO3RnKHRoaXMpO3JldHVybiB0aGlzLmEuaW5pdCgpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7aWYodGhpcy5iLnN0cmVhbWluZy5zdGFydEF0U2VnbWVudEJvdW5kYXJ5KXt2YXIgYT11Zyh0aGlzLGpmKHRoaXMuZykpO2dmKHRoaXMuZyxhKX10aGlzLmMucGVyaW9kcy5mb3JFYWNoKHRoaXMuZmIuYmluZCh0aGlzKSk7dmcodGhpcyk7d2codGhpcyk7dmFyIGE9Vih0aGlzLmEpLGI9ZGMoYSx0aGlzLmlhKTt0aGlzLmIuYWJyLm1hbmFnZXIuc2V0VmFyaWFudHMoYik7YS52YXJpYW50cy5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhLnByaW1hcnl9KTt0aGlzLlhhLmZvckVhY2godGhpcy52LnYuYmluZCh0aGlzLnYpKTtcbnRoaXMuWGE9W107TGEodGhpcy5sLHRoaXMuZixcImxvYWRlZGRhdGFcIixmdW5jdGlvbigpe3RoaXMuaS5sb2FkTGF0ZW5jeT0oRGF0ZS5ub3coKS1mKS8xRTN9LmJpbmQodGhpcykpO3RoaXMuRz1udWxsfS5iaW5kKHRoaXMpKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXt0aGlzLkc9PWUmJih0aGlzLkc9bnVsbCx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJ1bmxvYWRpbmdcIikpKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoYSl9LmJpbmQodGhpcykpfTtXLnByb3RvdHlwZS5sb2FkPVcucHJvdG90eXBlLmxvYWQ7XG5mdW5jdGlvbiB0ZyhhKXtmdW5jdGlvbiBiKGEpe3JldHVybihhLnZpZGVvP2EudmlkZW8uY29kZWNzLnNwbGl0KFwiLlwiKVswXTpcIlwiKStcIi1cIisoYS5hdWRpbz9hLmF1ZGlvLmNvZGVjcy5zcGxpdChcIi5cIilbMF06XCJcIil9dmFyIGM9e307YS5jLnBlcmlvZHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnZhcmlhbnRzLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGQ9YihhKTtkIGluIGN8fChjW2RdPVtdKTtjW2RdLnB1c2goYSl9KX0pO3ZhciBkPW51bGwsZT1JbmZpbml0eTtRYShjLGZ1bmN0aW9uKGEsYil7dmFyIGM9MCxmPTA7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2MrPWEuYmFuZHdpZHRoOysrZn0pO3ZhciBnPWMvZjtnPGUmJihkPWEsZT1nKX0pO2EuYy5wZXJpb2RzLmZvckVhY2goZnVuY3Rpb24oYSl7YS52YXJpYW50cz1hLnZhcmlhbnRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYihhKT09ZD8hMDohMX0pfSl9XG5mdW5jdGlvbiBxZyhhKXthLk49bmV3IE1lZGlhU291cmNlO3ZhciBiPW5ldyBBO0UoYS5sLGEuTixcInNvdXJjZW9wZW5cIixiLnJlc29sdmUpO2EuZi5zcmM9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYS5OKTtyZXR1cm4gYn1XLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oYSl7YS5hYnImJmEuYWJyLm1hbmFnZXImJmEuYWJyLm1hbmFnZXIhPXRoaXMuYi5hYnIubWFuYWdlciYmKHRoaXMuYi5hYnIubWFuYWdlci5zdG9wKCksYS5hYnIubWFuYWdlci5pbml0KHRoaXMuSmIuYmluZCh0aGlzKSkpO0NhKHRoaXMuYixhLG9nKHRoaXMpLHhnKCksXCJcIik7eWcodGhpcyl9O1cucHJvdG90eXBlLmNvbmZpZ3VyZT1XLnByb3RvdHlwZS5jb25maWd1cmU7XG5mdW5jdGlvbiB5ZyhhKXthLmgmJmEuaC5jb25maWd1cmUoYS5iLm1hbmlmZXN0KTthLmomJmEuai5jb25maWd1cmUoYS5iLmRybSk7aWYoYS5hKXthLmEuY29uZmlndXJlKGEuYi5zdHJlYW1pbmcpO3RyeXthLmMucGVyaW9kcy5mb3JFYWNoKGEuZmIuYmluZChhKSl9Y2F0Y2goYil7YS54YShiKX16ZyhhLFYoYS5hKSl9YS5iLmFici5lbmFibGVkJiYhYS5aYT9hLmIuYWJyLm1hbmFnZXIuZW5hYmxlKCk6YS5iLmFici5tYW5hZ2VyLmRpc2FibGUoKTthLmIuYWJyLm1hbmFnZXIuc2V0RGVmYXVsdEVzdGltYXRlKGEuYi5hYnIuZGVmYXVsdEJhbmR3aWR0aEVzdGltYXRlKTthLmIuYWJyLm1hbmFnZXIuc2V0UmVzdHJpY3Rpb25zKGEuYi5hYnIucmVzdHJpY3Rpb25zKX1XLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9b2codGhpcyk7Q2EoYSx0aGlzLmIsb2codGhpcykseGcoKSxcIlwiKTtyZXR1cm4gYX07XG5XLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPVcucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb247Vy5wcm90b3R5cGUuUGQ9ZnVuY3Rpb24oKXt2YXIgYT1vZyh0aGlzKTthLmFiciYmYS5hYnIubWFuYWdlciYmYS5hYnIubWFuYWdlciE9dGhpcy5iLmFici5tYW5hZ2VyJiYodGhpcy5iLmFici5tYW5hZ2VyLnN0b3AoKSxhLmFici5tYW5hZ2VyLmluaXQodGhpcy5KYi5iaW5kKHRoaXMpKSk7dGhpcy5iPW9nKHRoaXMpO3lnKHRoaXMpfTtXLnByb3RvdHlwZS5yZXNldENvbmZpZ3VyYXRpb249Vy5wcm90b3R5cGUuUGQ7Vy5wcm90b3R5cGUuUWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mfTtXLnByb3RvdHlwZS5nZXRNZWRpYUVsZW1lbnQ9Vy5wcm90b3R5cGUuUWM7Vy5wcm90b3R5cGUuVWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vfTtXLnByb3RvdHlwZS5nZXROZXR3b3JraW5nRW5naW5lPVcucHJvdG90eXBlLlViO1cucHJvdG90eXBlLlBjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWWF9O1xuVy5wcm90b3R5cGUuZ2V0TWFuaWZlc3RVcmk9Vy5wcm90b3R5cGUuUGM7Vy5wcm90b3R5cGUuJD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmM/dGhpcy5jLnByZXNlbnRhdGlvblRpbWVsaW5lLiQoKTohMX07Vy5wcm90b3R5cGUuaXNMaXZlPVcucHJvdG90eXBlLiQ7Vy5wcm90b3R5cGUudmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jP3RoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS52YSgpOiExfTtXLnByb3RvdHlwZS5pc0luUHJvZ3Jlc3M9Vy5wcm90b3R5cGUudmE7Vy5wcm90b3R5cGUuUmQ9ZnVuY3Rpb24oKXt2YXIgYT0wLGI9MDt0aGlzLmMmJihiPXRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZSxhPWIubWEoKSxiPWIuYmIoKSk7cmV0dXJue3N0YXJ0OmEsZW5kOmJ9fTtXLnByb3RvdHlwZS5zZWVrUmFuZ2U9Vy5wcm90b3R5cGUuUmQ7Vy5wcm90b3R5cGUua2V5U3lzdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaj90aGlzLmoua2V5U3lzdGVtKCk6XCJcIn07XG5XLnByb3RvdHlwZS5rZXlTeXN0ZW09Vy5wcm90b3R5cGUua2V5U3lzdGVtO1cucHJvdG90eXBlLmRybUluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qP3RoaXMuai5iOm51bGx9O1cucHJvdG90eXBlLmRybUluZm89Vy5wcm90b3R5cGUuZHJtSW5mbztXLnByb3RvdHlwZS5hYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmo/dGhpcy5qLmFiKCk6SW5maW5pdHl9O1cucHJvdG90eXBlLmdldEV4cGlyYXRpb249Vy5wcm90b3R5cGUuYWI7Vy5wcm90b3R5cGUuWWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rYX07Vy5wcm90b3R5cGUuaXNCdWZmZXJpbmc9Vy5wcm90b3R5cGUuWWM7XG5XLnByb3RvdHlwZS5oYj1mdW5jdGlvbigpe2lmKHRoaXMuSilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJKFwidW5sb2FkaW5nXCIpKTt2YXIgYT1Qcm9taXNlLnJlc29sdmUoKTt0aGlzLkcmJihhPXRoaXMuRy5jYW5jZWwobmV3IHQoMiw3LDdFMykpKTtyZXR1cm4gYS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5sYXx8KHRoaXMubGE9QWcodGhpcykudGhlbihmdW5jdGlvbigpe3RoaXMubGE9bnVsbH0uYmluZCh0aGlzKSkpO3JldHVybiB0aGlzLmxhfS5iaW5kKHRoaXMpKX07Vy5wcm90b3R5cGUudW5sb2FkPVcucHJvdG90eXBlLmhiO1cucHJvdG90eXBlLnBiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZz90aGlzLmcucGIoKTowfTtXLnByb3RvdHlwZS5nZXRQbGF5YmFja1JhdGU9Vy5wcm90b3R5cGUucGI7Vy5wcm90b3R5cGUubGU9ZnVuY3Rpb24oYSl7dGhpcy5nJiZsZih0aGlzLmcsYSk7dGhpcy5hJiZ4Zih0aGlzLmEsMSE9YSl9O1xuVy5wcm90b3R5cGUudHJpY2tQbGF5PVcucHJvdG90eXBlLmxlO1cucHJvdG90eXBlLkZjPWZ1bmN0aW9uKCl7dGhpcy5nJiZsZih0aGlzLmcsMSk7dGhpcy5hJiZ4Zih0aGlzLmEsITEpfTtXLnByb3RvdHlwZS5jYW5jZWxUcmlja1BsYXk9Vy5wcm90b3R5cGUuRmM7Vy5wcm90b3R5cGUuZ2V0VHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuV2IoKS5jb25jYXQodGhpcy5WYigpKX07Vy5wcm90b3R5cGUuZ2V0VHJhY2tzPVcucHJvdG90eXBlLmdldFRyYWNrcztXLnByb3RvdHlwZS5VZD1mdW5jdGlvbihhLGIpe1widGV4dFwiPT1hLnR5cGU/dGhpcy5yYyhhKToodGhpcy5jb25maWd1cmUoe2Ficjp7ZW5hYmxlZDohMX19KSx0aGlzLnNjKGEsYikpfTtXLnByb3RvdHlwZS5zZWxlY3RUcmFjaz1XLnByb3RvdHlwZS5VZDtcblcucHJvdG90eXBlLldiPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYylyZXR1cm5bXTt2YXIgYT1oYyh0aGlzLmMsamYodGhpcy5nKSksYj10aGlzLlBbYV18fHt9O3JldHVybiBaYih0aGlzLmMucGVyaW9kc1thXSxiLmF1ZGlvLGIudmlkZW8pfTtXLnByb3RvdHlwZS5nZXRWYXJpYW50VHJhY2tzPVcucHJvdG90eXBlLldiO1cucHJvdG90eXBlLlZiPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYylyZXR1cm5bXTt2YXIgYT1oYyh0aGlzLmMsamYodGhpcy5nKSk7cmV0dXJuIGFjKHRoaXMuYy5wZXJpb2RzW2FdLCh0aGlzLlBbYV18fHt9KS50ZXh0KS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIDA+dGhpcy5WYS5pbmRleE9mKGEuaWQpfS5iaW5kKHRoaXMpKX07Vy5wcm90b3R5cGUuZ2V0VGV4dFRyYWNrcz1XLnByb3RvdHlwZS5WYjtcblcucHJvdG90eXBlLnJjPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYSYmKGE9Y2MoVih0aGlzLmEpLGEpKSl7QmcodGhpcyxhLCExKTt2YXIgYj17fTtiLnRleHQ9YTtDZyh0aGlzLGIsITApfX07Vy5wcm90b3R5cGUuc2VsZWN0VGV4dFRyYWNrPVcucHJvdG90eXBlLnJjO1xuVy5wcm90b3R5cGUuc2M9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmEpe3ZhciBjPXt9LGQ9YmMoVih0aGlzLmEpLGEpLGU9dmYodGhpcy5hKTtpZihkKXtpZighZC5hbGxvd2VkQnlBcHBsaWNhdGlvbnx8IWQuYWxsb3dlZEJ5S2V5U3lzdGVtKXJldHVybjtkLmF1ZGlvJiYoRGcodGhpcyxkLmF1ZGlvKSxkLmF1ZGlvIT1lLmF1ZGlvJiYoYy5hdWRpbz1kLmF1ZGlvKSk7ZC52aWRlbyYmKERnKHRoaXMsZC52aWRlbyksZC52aWRlbyE9ZS52aWRlbyYmKGMudmlkZW89ZC52aWRlbykpfU5hKGMpLmZvckVhY2goZnVuY3Rpb24oYSl7QmcodGhpcyxhLCExKX0uYmluZCh0aGlzKSk7KGQ9ZS50ZXh0KSYmKGMudGV4dD1kKTtDZyh0aGlzLGMsYil9fTtXLnByb3RvdHlwZS5zZWxlY3RWYXJpYW50VHJhY2s9Vy5wcm90b3R5cGUuc2M7XG5XLnByb3RvdHlwZS5OYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/JGIoVih0aGlzLmEpLnZhcmlhbnRzKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEubGFuZ3VhZ2V9KS5maWx0ZXIoQWEpOltdfTtXLnByb3RvdHlwZS5nZXRBdWRpb0xhbmd1YWdlcz1XLnByb3RvdHlwZS5OYztXLnByb3RvdHlwZS5XYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmE/Vih0aGlzLmEpLnRleHRTdHJlYW1zLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5sYW5ndWFnZX0pLmZpbHRlcihBYSk6W119O1cucHJvdG90eXBlLmdldFRleHRMYW5ndWFnZXM9Vy5wcm90b3R5cGUuV2M7Vy5wcm90b3R5cGUuU2Q9ZnVuY3Rpb24oYSl7aWYodGhpcy5hKXt2YXIgYj1WKHRoaXMuYSk7dGhpcy5pYT1hO3pnKHRoaXMsYil9fTtXLnByb3RvdHlwZS5zZWxlY3RBdWRpb0xhbmd1YWdlPVcucHJvdG90eXBlLlNkO1xuVy5wcm90b3R5cGUuVGQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5hKXt2YXIgYj1WKHRoaXMuYSk7dGhpcy5CYT1hO3pnKHRoaXMsYil9fTtXLnByb3RvdHlwZS5zZWxlY3RUZXh0TGFuZ3VhZ2U9Vy5wcm90b3R5cGUuVGQ7Vy5wcm90b3R5cGUuJGM9ZnVuY3Rpb24oKXtyZXR1cm5cInNob3dpbmdcIj09dGhpcy5BLm1vZGV9O1cucHJvdG90eXBlLmlzVGV4dFRyYWNrVmlzaWJsZT1XLnByb3RvdHlwZS4kYztXLnByb3RvdHlwZS5XZD1mdW5jdGlvbihhKXt0aGlzLkEubW9kZT1hP1wic2hvd2luZ1wiOlwiaGlkZGVuXCI7RWcodGhpcyl9O1cucHJvdG90eXBlLnNldFRleHRUcmFja1Zpc2liaWxpdHk9Vy5wcm90b3R5cGUuV2Q7Vy5wcm90b3R5cGUuU2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jP25ldyBEYXRlKDFFMyp0aGlzLmMucHJlc2VudGF0aW9uVGltZWxpbmUuZisxRTMqdGhpcy5mLmN1cnJlbnRUaW1lKTpudWxsfTtXLnByb3RvdHlwZS5nZXRQbGF5aGVhZFRpbWVBc0RhdGU9Vy5wcm90b3R5cGUuU2M7XG5XLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe0ZnKHRoaXMpO3RoaXMuU2EoKTt2YXIgYT1udWxsLGI9bnVsbCxjPXRoaXMuZiYmdGhpcy5mLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5P3RoaXMuZi5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSgpOnt9O3RoaXMuZyYmdGhpcy5jJiYoYT1oYyh0aGlzLmMsamYodGhpcy5nKSksYj10aGlzLlBbYV0sYj1nYyhiLmF1ZGlvLGIudmlkZW8sdGhpcy5jLnBlcmlvZHNbYV0udmFyaWFudHMpLGE9Yi52aWRlb3x8e30pO2F8fChhPXt9KTtifHwoYj17fSk7cmV0dXJue3dpZHRoOmEud2lkdGh8fDAsaGVpZ2h0OmEuaGVpZ2h0fHwwLHN0cmVhbUJhbmR3aWR0aDpiLmJhbmR3aWR0aHx8MCxkZWNvZGVkRnJhbWVzOk51bWJlcihjLnRvdGFsVmlkZW9GcmFtZXMpLGRyb3BwZWRGcmFtZXM6TnVtYmVyKGMuZHJvcHBlZFZpZGVvRnJhbWVzKSxlc3RpbWF0ZWRCYW5kd2lkdGg6dGhpcy5iLmFici5tYW5hZ2VyLmdldEJhbmR3aWR0aEVzdGltYXRlKCksXG5sb2FkTGF0ZW5jeTp0aGlzLmkubG9hZExhdGVuY3kscGxheVRpbWU6dGhpcy5pLnBsYXlUaW1lLGJ1ZmZlcmluZ1RpbWU6dGhpcy5pLmJ1ZmZlcmluZ1RpbWUsc3dpdGNoSGlzdG9yeTpEYSh0aGlzLmkuc3dpdGNoSGlzdG9yeSksc3RhdGVIaXN0b3J5OkRhKHRoaXMuaS5zdGF0ZUhpc3RvcnkpfX07Vy5wcm90b3R5cGUuZ2V0U3RhdHM9Vy5wcm90b3R5cGUuZ2V0U3RhdHM7XG5XLnByb3RvdHlwZS5hZGRUZXh0VHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKCF0aGlzLmEpcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Zm9yKHZhciBnPVYodGhpcy5hKSxoLGw9MDtsPHRoaXMuYy5wZXJpb2RzLmxlbmd0aDtsKyspaWYodGhpcy5jLnBlcmlvZHNbbF09PWcpe2lmKGw9PXRoaXMuYy5wZXJpb2RzLmxlbmd0aC0xKXtpZihoPXRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS5ZKCktZy5zdGFydFRpbWUsSW5maW5pdHk9PWgpcmV0dXJuIFByb21pc2UucmVqZWN0KCl9ZWxzZSBoPXRoaXMuYy5wZXJpb2RzW2wrMV0uc3RhcnRUaW1lLWcuc3RhcnRUaW1lO2JyZWFrfXZhciBuPXtpZDp0aGlzLkJjKyssY3JlYXRlU2VnbWVudEluZGV4OlByb21pc2UucmVzb2x2ZS5iaW5kKFByb21pc2UpLGZpbmRTZWdtZW50UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZ2V0U2VnbWVudFJlZmVyZW5jZTpmdW5jdGlvbihiKXtyZXR1cm4gMSE9Yj9udWxsOm5ldyBPKDEsMCxcbmgsZnVuY3Rpb24oKXtyZXR1cm5bYV19LDAsbnVsbCl9LGluaXRTZWdtZW50UmVmZXJlbmNlOm51bGwscHJlc2VudGF0aW9uVGltZU9mZnNldDowLG1pbWVUeXBlOmQsY29kZWNzOmV8fFwiXCIsa2luZDpjLGVuY3J5cHRlZDohMSxrZXlJZDpudWxsLGxhbmd1YWdlOmIsbGFiZWw6Znx8bnVsbCx0eXBlOlwidGV4dFwiLHByaW1hcnk6ITEsdHJpY2tNb2RlVmlkZW86bnVsbCxjb250YWluc0Vtc2dCb3hlczohMSxyb2xlczpbXX07dGhpcy5WYS5wdXNoKG4uaWQpO2cudGV4dFN0cmVhbXMucHVzaChuKTtyZXR1cm4gd2YodGhpcy5hLG4pLnRoZW4oZnVuY3Rpb24oKXtpZighdGhpcy5KKXJldHVybiB0aGlzLlZhLnNwbGljZSh0aGlzLlZhLmluZGV4T2Yobi5pZCksMSksemcodGhpcyxnKSx2Zyh0aGlzKSx7aWQ6bi5pZCxhY3RpdmU6ITEsdHlwZTpcInRleHRcIixiYW5kd2lkdGg6MCxsYW5ndWFnZTpiLGxhYmVsOmZ8fG51bGwsa2luZDpjLHdpZHRoOm51bGwsaGVpZ2h0Om51bGx9fS5iaW5kKHRoaXMpKX07XG5XLnByb3RvdHlwZS5hZGRUZXh0VHJhY2s9Vy5wcm90b3R5cGUuYWRkVGV4dFRyYWNrO1cucHJvdG90eXBlLkhiPWZ1bmN0aW9uKGEsYil7dGhpcy5tYi53aWR0aD1hO3RoaXMubWIuaGVpZ2h0PWJ9O1cucHJvdG90eXBlLnNldE1heEhhcmR3YXJlUmVzb2x1dGlvbj1XLnByb3RvdHlwZS5IYjtmdW5jdGlvbiBCZyhhLGIsYyl7YS5pLnN3aXRjaEhpc3RvcnkucHVzaCh7dGltZXN0YW1wOkRhdGUubm93KCkvMUUzLGlkOmIuaWQsdHlwZTpiLnR5cGUsZnJvbUFkYXB0YXRpb246Y30pO0RnKGEsYil9ZnVuY3Rpb24gRGcoYSxiKXt2YXIgYz1pYyhhLmMsYik7YS5QW2NdfHwoYS5QW2NdPXt9KTthLlBbY11bYi50eXBlXT1iLmlkfVxuZnVuY3Rpb24gcmcoYSl7YS5sJiYoYS5sLmhhKGEuTixcInNvdXJjZW9wZW5cIiksYS5sLmhhKGEuZixcImxvYWRlZGRhdGFcIiksYS5sLmhhKGEuZixcInBsYXlpbmdcIiksYS5sLmhhKGEuZixcInBhdXNlXCIpLGEubC5oYShhLmYsXCJlbmRlZFwiKSk7YS5mJiYoYS5mLnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKSxhLmYubG9hZCgpKTt2YXIgYj1Qcm9taXNlLmFsbChbYS5iP2EuYi5hYnIubWFuYWdlci5zdG9wKCk6bnVsbCxhLmo/YS5qLm0oKTpudWxsLGEuamE/YS5qYS5tKCk6bnVsbCxhLmc/YS5nLm0oKTpudWxsLGEudj9hLnYubSgpOm51bGwsYS5hP2EuYS5tKCk6bnVsbCxhLmg/YS5oLnN0b3AoKTpudWxsXSk7YS5qPW51bGw7YS5qYT1udWxsO2EuZz1udWxsO2Eudj1udWxsO2EuYT1udWxsO2EuaD1udWxsO2EuYz1udWxsO2EuWWE9bnVsbDthLldhPW51bGw7YS5OPW51bGw7YS5YYT1bXTthLlA9e307YS5CPXt9O2EuaT1wZygpO3JldHVybiBifVxuZnVuY3Rpb24gQWcoYSl7cmV0dXJuIGEuaD9yZyhhKS50aGVuKGZ1bmN0aW9uKCl7dGhpcy5KfHwodGhpcy54YyghMSksdGhpcy5XYT1xZyh0aGlzKSl9LmJpbmQoYSkpOlByb21pc2UucmVzb2x2ZSgpfWZ1bmN0aW9uIHhnKCl7cmV0dXJue1wiLmRybS5zZXJ2ZXJzXCI6XCJcIixcIi5kcm0uY2xlYXJLZXlzXCI6XCJcIixcIi5kcm0uYWR2YW5jZWRcIjp7ZGlzdGluY3RpdmVJZGVudGlmaWVyUmVxdWlyZWQ6ITEscGVyc2lzdGVudFN0YXRlUmVxdWlyZWQ6ITEsdmlkZW9Sb2J1c3RuZXNzOlwiXCIsYXVkaW9Sb2J1c3RuZXNzOlwiXCIsc2VydmVyQ2VydGlmaWNhdGU6bnVsbH19fVxuZnVuY3Rpb24gb2coYSl7cmV0dXJue2RybTp7cmV0cnlQYXJhbWV0ZXJzOkZhKCksc2VydmVyczp7fSxjbGVhcktleXM6e30sYWR2YW5jZWQ6e30sZGVsYXlMaWNlbnNlUmVxdWVzdFVudGlsUGxheWVkOiExfSxtYW5pZmVzdDp7cmV0cnlQYXJhbWV0ZXJzOkZhKCksZGFzaDp7Y3VzdG9tU2NoZW1lOmZ1bmN0aW9uKGEpe2lmKGEpcmV0dXJuIG51bGx9LGNsb2NrU3luY1VyaTpcIlwiLGlnbm9yZURybUluZm86ITF9LGhsczp7ZGVmYXVsdFRpbWVPZmZzZXQ6MH19LHN0cmVhbWluZzp7cmV0cnlQYXJhbWV0ZXJzOkZhKCksaW5maW5pdGVSZXRyaWVzRm9yTGl2ZVN0cmVhbXM6ITAscmVidWZmZXJpbmdHb2FsOjIsYnVmZmVyaW5nR29hbDoxMCxidWZmZXJCZWhpbmQ6MzAsaWdub3JlVGV4dFN0cmVhbUZhaWx1cmVzOiExLHN0YXJ0QXRTZWdtZW50Qm91bmRhcnk6ITEsc21hbGxHYXBMaW1pdDouNSxqdW1wTGFyZ2VHYXBzOiExfSxhYnI6e21hbmFnZXI6YS5PYixlbmFibGVkOiEwLGRlZmF1bHRCYW5kd2lkdGhFc3RpbWF0ZTo1RTUsXG5yZXN0cmljdGlvbnM6e21pbldpZHRoOjAsbWF4V2lkdGg6SW5maW5pdHksbWluSGVpZ2h0OjAsbWF4SGVpZ2h0OkluZmluaXR5LG1pblBpeGVsczowLG1heFBpeGVsczpJbmZpbml0eSxtaW5CYW5kd2lkdGg6MCxtYXhCYW5kd2lkdGg6SW5maW5pdHl9fSxwcmVmZXJyZWRBdWRpb0xhbmd1YWdlOlwiXCIscHJlZmVycmVkVGV4dExhbmd1YWdlOlwiXCIscmVzdHJpY3Rpb25zOnttaW5XaWR0aDowLG1heFdpZHRoOkluZmluaXR5LG1pbkhlaWdodDowLG1heEhlaWdodDpJbmZpbml0eSxtaW5QaXhlbHM6MCxtYXhQaXhlbHM6SW5maW5pdHksbWluQmFuZHdpZHRoOjAsbWF4QmFuZHdpZHRoOkluZmluaXR5fX19XG5mdW5jdGlvbiBwZygpe3JldHVybnt3aWR0aDpOYU4saGVpZ2h0Ok5hTixzdHJlYW1CYW5kd2lkdGg6TmFOLGRlY29kZWRGcmFtZXM6TmFOLGRyb3BwZWRGcmFtZXM6TmFOLGVzdGltYXRlZEJhbmR3aWR0aDpOYU4sbG9hZExhdGVuY3k6TmFOLHBsYXlUaW1lOjAsYnVmZmVyaW5nVGltZTowLHN3aXRjaEhpc3Rvcnk6W10sc3RhdGVIaXN0b3J5OltdfX1rPVcucHJvdG90eXBlO2suZmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hP3ZmKHRoaXMuYSk6e307V2IodGhpcy5qLGIsYSk7Yj0wPCRiKGEudmFyaWFudHMpLmxlbmd0aDtWYihhLHRoaXMuYi5yZXN0cmljdGlvbnMsdGhpcy5tYikmJnRoaXMuYSYmVih0aGlzLmEpPT1hJiZ2Zyh0aGlzKTthPTE+JGIoYS52YXJpYW50cykubGVuZ3RoO2lmKCFiKXRocm93IG5ldyB0KDIsNCw0MDExKTtpZihhKXRocm93IG5ldyB0KDIsNCw0MDEyKTt9O1xuZnVuY3Rpb24gQ2coYSxiLGMpe2Zvcih2YXIgZCBpbiBiKXt2YXIgZT1iW2RdLGY9Y3x8ITE7XCJ0ZXh0XCI9PWQmJihmPSEwKTthLlphP2EuQltkXT17c3RyZWFtOmUsSWM6Zn06eWYoYS5hLGQsZSxmKX19ZnVuY3Rpb24gRmcoYSl7aWYoYS5jKXt2YXIgYj1EYXRlLm5vdygpLzFFMzthLmthP2EuaS5idWZmZXJpbmdUaW1lKz1iLWEuVWE6YS5pLnBsYXlUaW1lKz1iLWEuVWE7YS5VYT1ifX1cbmZ1bmN0aW9uIHVnKGEsYil7ZnVuY3Rpb24gYyhhLGIpe2lmKCFhKXJldHVybiBudWxsO3ZhciBjPWEuZmluZFNlZ21lbnRQb3NpdGlvbihiLWUuc3RhcnRUaW1lKTtyZXR1cm4gbnVsbD09Yz9udWxsOihjPWEuZ2V0U2VnbWVudFJlZmVyZW5jZShjKSk/Yy5zdGFydFRpbWUrZS5zdGFydFRpbWU6bnVsbH12YXIgZD12ZihhLmEpLGU9VihhLmEpLGY9YyhkLnZpZGVvLGIpLGQ9YyhkLmF1ZGlvLGIpO3JldHVybiBudWxsIT1mJiZudWxsIT1kP01hdGgubWF4KGYsZCk6bnVsbCE9Zj9mOm51bGwhPWQ/ZDpifWsuYmU9ZnVuY3Rpb24oYSxiKXt0aGlzLmIuYWJyLm1hbmFnZXIuc2VnbWVudERvd25sb2FkZWQoYSxiKX07ay54Yz1mdW5jdGlvbihhKXtGZyh0aGlzKTt0aGlzLmthPWE7dGhpcy5TYSgpO2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nO2EhPWIuaCYmKGIuaD1hLGxmKGIsYi5nKSl9dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJKFwiYnVmZmVyaW5nXCIse2J1ZmZlcmluZzphfSkpfTtcbmsuWWQ9ZnVuY3Rpb24oKXt2Zyh0aGlzKX07ay5TYT1mdW5jdGlvbigpe2lmKCF0aGlzLkope3ZhciBhPXRoaXMua2E/XCJidWZmZXJpbmdcIjp0aGlzLmYuZW5kZWQ/XCJlbmRlZFwiOnRoaXMuZi5wYXVzZWQ/XCJwYXVzZWRcIjpcInBsYXlpbmdcIjt2YXIgYj1EYXRlLm5vdygpLzFFMztpZih0aGlzLmkuc3RhdGVIaXN0b3J5Lmxlbmd0aCl7dmFyIGM9dGhpcy5pLnN0YXRlSGlzdG9yeVt0aGlzLmkuc3RhdGVIaXN0b3J5Lmxlbmd0aC0xXTtjLmR1cmF0aW9uPWItYy50aW1lc3RhbXA7aWYoYT09Yy5zdGF0ZSlyZXR1cm59dGhpcy5pLnN0YXRlSGlzdG9yeS5wdXNoKHt0aW1lc3RhbXA6YixzdGF0ZTphLGR1cmF0aW9uOjB9KX19O2suYWU9ZnVuY3Rpb24oKXtpZih0aGlzLnYpe3ZhciBhPXRoaXMudjthLmMuZm9yRWFjaChhLm8uYmluZChhLCEwKSl9dGhpcy5hJiZBZih0aGlzLmEpfTtcbmZ1bmN0aW9uIEdnKGEsYixjLGQsZSl7aWYoIWN8fDE+Yy5sZW5ndGgpcmV0dXJuIGEueGEobmV3IHQoMiw0LDQwMTIpKSx7fTthLmIuYWJyLm1hbmFnZXIuc2V0VmFyaWFudHMoYyk7YS5iLmFici5tYW5hZ2VyLnNldFRleHRTdHJlYW1zKGQpO3ZhciBmPVtdO2UmJihmPVtcInZpZGVvXCIsXCJhdWRpb1wiXSxiLnRleHRTdHJlYW1zLmxlbmd0aCYmZi5wdXNoKFwidGV4dFwiKSk7ZT12ZihhLmEpO2lmKGI9ZmMoZS5hdWRpbyxlLnZpZGVvLGIudmFyaWFudHMpKXtiLmFsbG93ZWRCeUFwcGxpY2F0aW9uJiZiLmFsbG93ZWRCeUtleVN5c3RlbXx8KGYucHVzaChcImF1ZGlvXCIpLGYucHVzaChcInZpZGVvXCIpKTtmb3IodmFyIGcgaW4gZSliPWVbZ10sXCJhdWRpb1wiPT1iLnR5cGUmJmIubGFuZ3VhZ2UhPWNbMF0ubGFuZ3VhZ2U/Zi5wdXNoKGcpOlwidGV4dFwiPT1iLnR5cGUmJjA8ZC5sZW5ndGgmJmIubGFuZ3VhZ2UhPWRbMF0ubGFuZ3VhZ2UmJmYucHVzaChnKX1mPWYuZmlsdGVyKEFhKTtpZigwPGYubGVuZ3RoKXtjPVxue307dHJ5e2M9YS5iLmFici5tYW5hZ2VyLmNob29zZVN0cmVhbXMoZil9Y2F0Y2goaCl7YS54YShoKX1yZXR1cm4gY31yZXR1cm57fX1mdW5jdGlvbiB6ZyhhLGIpe3ZhciBjPXthdWRpbzohMSx0ZXh0OiExfSxkPWRjKGIsYS5pYSxjKSxlPWVjKGIsYS5CYSxjKSxkPUdnKGEsYixkLGUpLGY7Zm9yKGYgaW4gZClCZyhhLGRbZl0sITApO0NnKGEsZCwhMCk7d2coYSk7ZC50ZXh0JiZkLmF1ZGlvJiZjLnRleHQmJmQudGV4dC5sYW5ndWFnZSE9ZC5hdWRpby5sYW5ndWFnZSYmKGEuQS5tb2RlPVwic2hvd2luZ1wiLEVnKGEpKX1rLmNkPWZ1bmN0aW9uKGEpe3RoaXMuWmE9ITA7dGhpcy5iLmFici5tYW5hZ2VyLmRpc2FibGUoKTt2YXIgYj1kYyhhLHRoaXMuaWEpLGM9ZWMoYSx0aGlzLkJhKTthPUdnKHRoaXMsYSxiLGMsITApO2Zvcih2YXIgZCBpbiB0aGlzLkIpYVtkXT10aGlzLkJbZF0uc3RyZWFtO3RoaXMuQj17fTtmb3IoZCBpbiBhKUJnKHRoaXMsYVtkXSwhMCk7cmV0dXJuIGF9O1xuay5FYz1mdW5jdGlvbigpe3RoaXMuWmE9ITE7dGhpcy5iLmFici5lbmFibGVkJiZ0aGlzLmIuYWJyLm1hbmFnZXIuZW5hYmxlKCk7Zm9yKHZhciBhIGluIHRoaXMuQil7dmFyIGI9dGhpcy5CW2FdO3lmKHRoaXMuYSxhLGIuc3RyZWFtLGIuSWMpfXRoaXMuQj17fX07ay5qZD1mdW5jdGlvbigpe3RoaXMuaCYmdGhpcy5oLnVwZGF0ZSYmdGhpcy5oLnVwZGF0ZSgpfTtrLnNkPWZ1bmN0aW9uKCl7dGhpcy5nJiZ0aGlzLmcueWIoKX07ay5KYj1mdW5jdGlvbihhLGIpe3ZhciBjPXZmKHRoaXMuYSksZDtmb3IoZCBpbiBhKXt2YXIgZT1hW2RdO2NbZF0hPWU/QmcodGhpcyxlLCEwKTpkZWxldGUgYVtkXX1pZighTWEoYSkmJnRoaXMuYSl7Zm9yKGQgaW4gYSl5Zih0aGlzLmEsZCxhW2RdLGJ8fCExKTt3Zyh0aGlzKX19O1xuZnVuY3Rpb24gd2coYSl7UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3RoaXMuSnx8dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJKFwiYWRhcHRhdGlvblwiKSl9LmJpbmQoYSkpfWZ1bmN0aW9uIHZnKGEpe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt0aGlzLkp8fHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgSShcInRyYWNrc2NoYW5nZWRcIikpfS5iaW5kKGEpKX1mdW5jdGlvbiBFZyhhKXthLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJ0ZXh0dHJhY2t2aXNpYmlsaXR5XCIpKX1rLnhhPWZ1bmN0aW9uKGEpe3RoaXMuSnx8dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJKFwiZXJyb3JcIix7ZGV0YWlsOmF9KSl9O2sudmQ9ZnVuY3Rpb24oYSl7dGhpcy52P3RoaXMudi52KGEpOnRoaXMuWGEucHVzaChhKX07ay5nYj1mdW5jdGlvbihhKXt0aGlzLmRpc3BhdGNoRXZlbnQoYSl9O1xuay53ZD1mdW5jdGlvbigpe2lmKHRoaXMuZi5lcnJvcil7dmFyIGE9dGhpcy5mLmVycm9yLmNvZGU7aWYoMSE9YSl7dmFyIGI9dGhpcy5mLmVycm9yLm1zRXh0ZW5kZWRDb2RlO2ImJigwPmImJihiKz1NYXRoLnBvdygyLDMyKSksYj1iLnRvU3RyaW5nKDE2KSk7dGhpcy54YShuZXcgdCgyLDMsMzAxNixhLGIpKX19fTtcbmsuJGQ9ZnVuY3Rpb24oYSl7dmFyIGI9W1wib3V0cHV0LXJlc3RyaWN0ZWRcIixcImludGVybmFsLWVycm9yXCJdLGM9Vih0aGlzLmEpLGQ9ITE7Yy52YXJpYW50cy5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBlPVtdO2MuYXVkaW8mJmUucHVzaChjLmF1ZGlvKTtjLnZpZGVvJiZlLnB1c2goYy52aWRlbyk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWMuYWxsb3dlZEJ5S2V5U3lzdGVtO2Uua2V5SWQmJihlPWFbZS5rZXlJZF0sYy5hbGxvd2VkQnlLZXlTeXN0ZW09ISFlJiYwPmIuaW5kZXhPZihlKSk7ZiE9Yy5hbGxvd2VkQnlLZXlTeXN0ZW0mJihkPSEwKX0pfSk7dmFyIGU9dmYodGhpcy5hKTsoZT1mYyhlLmF1ZGlvLGUudmlkZW8sYy52YXJpYW50cykpJiYhZS5hbGxvd2VkQnlLZXlTeXN0ZW0mJnpnKHRoaXMsYyk7ZCYmdmcodGhpcyl9O1xuay5aZD1mdW5jdGlvbihhLGIpe2lmKHRoaXMuaCYmdGhpcy5oLm9uRXhwaXJhdGlvblVwZGF0ZWQpdGhpcy5oLm9uRXhwaXJhdGlvblVwZGF0ZWQoYSxiKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJleHBpcmF0aW9udXBkYXRlZFwiKSl9O2Z1bmN0aW9uIFgoYSl7aWYoIWF8fGEuY29uc3RydWN0b3IhPVcpdGhyb3cgbmV3IHQoMiw5LDkwMDgpO3RoaXMuYT1lZygpO3RoaXMuZj1hO3RoaXMuaT1IZyh0aGlzKTt0aGlzLmI9bnVsbDt0aGlzLnY9ITE7dGhpcy5qPW51bGw7dGhpcy5nPS0xO3RoaXMubD0wO3RoaXMuYz1udWxsO3RoaXMuaD1uZXcgZmcodGhpcy5hLGEubyxhLmdldENvbmZpZ3VyYXRpb24oKS5zdHJlYW1pbmcucmV0cnlQYXJhbWV0ZXJzLHRoaXMuaSl9bShcInNoYWthLm9mZmxpbmUuU3RvcmFnZVwiLFgpO2Z1bmN0aW9uIElnKCl7cmV0dXJuISF3aW5kb3cuaW5kZXhlZERCfVguc3VwcG9ydD1JZztYLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hLGI9dGhpcy5oP3RoaXMuaC5tKClbXCJjYXRjaFwiXShmdW5jdGlvbigpe30pLnRoZW4oZnVuY3Rpb24oKXtpZihhKXJldHVybiBhLm0oKX0pOlByb21pc2UucmVzb2x2ZSgpO3RoaXMuaT10aGlzLmY9dGhpcy5oPXRoaXMuYT1udWxsO3JldHVybiBifTtcblgucHJvdG90eXBlLmRlc3Ryb3k9WC5wcm90b3R5cGUubTtYLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oYSl7Q2EodGhpcy5pLGEsSGcodGhpcykse30sXCJcIil9O1gucHJvdG90eXBlLmNvbmZpZ3VyZT1YLnByb3RvdHlwZS5jb25maWd1cmU7XG5YLnByb3RvdHlwZS5qZT1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmPWF9aWYodGhpcy52KXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgdCgyLDksOTAwNikpO3RoaXMudj0hMDt2YXIgZSxmPW51bGw7cmV0dXJuIEpnKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiBLZyh0aGlzLGEsZCxjKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihjKXtZKHRoaXMpO3RoaXMuYz1jLm1hbmlmZXN0O3RoaXMuYj1jLkpjO2lmKHRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS4kKCl8fHRoaXMuYy5wcmVzZW50YXRpb25UaW1lbGluZS52YSgpKXRocm93IG5ldyB0KDIsOSw5MDA1LGEpO3RoaXMuYy5wZXJpb2RzLmZvckVhY2godGhpcy5vLmJpbmQodGhpcykpO3RoaXMuZz10aGlzLmEuYy5tYW5pZmVzdCsrO3RoaXMubD0wO2M9dGhpcy5jLnBlcmlvZHMubWFwKHRoaXMuQi5iaW5kKHRoaXMpKTt2YXIgZD10aGlzLmIuYixmPWpiKHRoaXMuYik7aWYoZCl7aWYoIWYubGVuZ3RoKXRocm93IG5ldyB0KDIsXG45LDkwMDcsYSk7ZC5pbml0RGF0YT1bXX1lPXtrZXk6dGhpcy5nLG9yaWdpbmFsTWFuaWZlc3RVcmk6YSxkdXJhdGlvbjp0aGlzLmwsc2l6ZTowLGV4cGlyYXRpb246dGhpcy5iLmFiKCkscGVyaW9kczpjLHNlc3Npb25JZHM6Zixkcm1JbmZvOmQsYXBwTWV0YWRhdGE6Yn07cmV0dXJuIGhnKHRoaXMuaCxlKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe1kodGhpcyk7aWYoZil0aHJvdyBmO3JldHVybiBMZyh0aGlzKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBaZihlKX0uYmluZCh0aGlzKSlbXCJjYXRjaFwiXShmdW5jdGlvbihhKXtyZXR1cm4gTGcodGhpcylbXCJjYXRjaFwiXSh5KS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgYTt9KX0uYmluZCh0aGlzKSl9O1gucHJvdG90eXBlLnN0b3JlPVgucHJvdG90eXBlLmplO1xuWC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7NjAxMyE9YS5jb2RlJiYoZT1hKX12YXIgYz1hLm9mZmxpbmVVcmksZD0vXm9mZmxpbmU6KFswLTldKykkLy5leGVjKGMpO2lmKCFkKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgdCgyLDksOTAwNCxjKSk7dmFyIGU9bnVsbCxmLGcsaD1OdW1iZXIoZFsxXSk7cmV0dXJuIEpnKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybiB0aGlzLmEuZ2V0KFwibWFuaWZlc3RcIixoKX0uYmluZCh0aGlzKSkudGhlbihmdW5jdGlvbihhKXtZKHRoaXMpO2lmKCFhKXRocm93IG5ldyB0KDIsOSw5MDAzLGMpO2Y9YTthPWtnKGYpO2c9bmV3IGJiKHRoaXMuZi5vLGIsZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSk7Zy5jb25maWd1cmUodGhpcy5mLmdldENvbmZpZ3VyYXRpb24oKS5kcm0pO3JldHVybiBnLmluaXQoYSwhMCl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZ2IoZyxmLnNlc3Npb25JZHMpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGcubSgpfS5iaW5kKHRoaXMpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtcbmlmKGUpdGhyb3cgZTt2YXIgYj1mLnBlcmlvZHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0cmVhbXMubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWEuc2VnbWVudHMubWFwKGZ1bmN0aW9uKGEpe2E9L15vZmZsaW5lOlswLTldK1xcL1swLTldK1xcLyhbMC05XSspJC8uZXhlYyhhLnVyaSk7cmV0dXJuIE51bWJlcihhWzFdKX0pO2EuaW5pdFNlZ21lbnRVcmkmJihhPS9eb2ZmbGluZTpbMC05XStcXC9bMC05XStcXC8oWzAtOV0rKSQvLmV4ZWMoYS5pbml0U2VnbWVudFVyaSksYi5wdXNoKE51bWJlcihhWzFdKSkpO3JldHVybiBifSkucmVkdWNlKHgsW10pfSkucmVkdWNlKHgsW10pLGM9MCxkPWIubGVuZ3RoLGc9dGhpcy5pLnByb2dyZXNzQ2FsbGJhY2s7cmV0dXJuIFdmKHRoaXMuYSxiLGZ1bmN0aW9uKCl7YysrO2coYSxjL2QpfSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3RoaXMuaS5wcm9ncmVzc0NhbGxiYWNrKGEsMSk7cmV0dXJuIHRoaXMuYS5yZW1vdmUoXCJtYW5pZmVzdFwiLFxuaCl9LmJpbmQodGhpcykpfTtYLnByb3RvdHlwZS5yZW1vdmU9WC5wcm90b3R5cGUucmVtb3ZlO1gucHJvdG90eXBlLmxpc3Q9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSmcodGhpcykudGhlbihmdW5jdGlvbigpe1kodGhpcyk7cmV0dXJuIHRoaXMuYS5mb3JFYWNoKFwibWFuaWZlc3RcIixmdW5jdGlvbihiKXthLnB1c2goWmYoYikpfSl9LmJpbmQodGhpcykpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYX0pfTtYLnByb3RvdHlwZS5saXN0PVgucHJvdG90eXBlLmxpc3Q7XG5mdW5jdGlvbiBLZyhhLGIsYyxkKXtmdW5jdGlvbiBlKCl7fXZhciBmPWEuZi5vLGc9YS5mLmdldENvbmZpZ3VyYXRpb24oKSxoLGwsbjtyZXR1cm4gR2QoYixmLGcubWFuaWZlc3QucmV0cnlQYXJhbWV0ZXJzLGQpLnRoZW4oZnVuY3Rpb24oYSl7WSh0aGlzKTtuPW5ldyBhO24uY29uZmlndXJlKGcubWFuaWZlc3QpO3JldHVybiBuLnN0YXJ0KGIse25ldHdvcmtpbmdFbmdpbmU6ZixmaWx0ZXJQZXJpb2Q6dGhpcy5vLmJpbmQodGhpcyksb25UaW1lbGluZVJlZ2lvbkFkZGVkOmZ1bmN0aW9uKCl7fSxvbkV2ZW50OmZ1bmN0aW9uKCl7fSxvbkVycm9yOmN9KX0uYmluZChhKSkudGhlbihmdW5jdGlvbihhKXtZKHRoaXMpO2g9YTtsPW5ldyBiYihmLGMsZSxmdW5jdGlvbigpe30pO2wuY29uZmlndXJlKGcuZHJtKTtyZXR1cm4gbC5pbml0KGgsITApfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gTWcoaCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO1xucmV0dXJuIGZiKGwpfS5iaW5kKGEpKS50aGVuKGZ1bmN0aW9uKCl7WSh0aGlzKTtyZXR1cm4gbi5zdG9wKCl9LmJpbmQoYSkpLnRoZW4oZnVuY3Rpb24oKXtZKHRoaXMpO3JldHVybnttYW5pZmVzdDpoLEpjOmx9fS5iaW5kKGEpKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe2lmKG4pcmV0dXJuIG4uc3RvcCgpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBhO30pO3Rocm93IGE7fSl9XG5YLnByb3RvdHlwZS5BPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPVNiKHRoaXMuZi5nZXRDb25maWd1cmF0aW9uKCkucHJlZmVycmVkQXVkaW9MYW5ndWFnZSksZD1bMCxRYixSYl0sZT1hLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cInZhcmlhbnRcIj09YS50eXBlfSksZD1kLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24oYil7Yj1TYihiLmxhbmd1YWdlKTtyZXR1cm4gUGIoYSxjLGIpfSl9KSxmLGc9MDtnPGQubGVuZ3RoO2crKylpZihkW2ddLmxlbmd0aCl7Zj1kW2ddO2JyZWFrfWZ8fChkPWUuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLnByaW1hcnl9KSxkLmxlbmd0aCYmKGY9ZCkpO2Z8fChmPWUsZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEubGFuZ3VhZ2V9KS5maWx0ZXIoQWEpKTt2YXIgaD1mLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5oZWlnaHQmJjQ4MD49YS5oZWlnaHR9KTtoLmxlbmd0aCYmKGguc29ydChmdW5jdGlvbihhLFxuYil7cmV0dXJuIGIuaGVpZ2h0LWEuaGVpZ2h0fSksZj1oLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5oZWlnaHQ9PWhbMF0uaGVpZ2h0fSkpO2Yuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmJhbmR3aWR0aC1iLmJhbmR3aWR0aH0pO2YubGVuZ3RoJiZiLnB1c2goZltNYXRoLmZsb29yKGYubGVuZ3RoLzIpXSk7Yi5wdXNoLmFwcGx5KGIsYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJ0ZXh0XCI9PWEudHlwZX0pKTtyZXR1cm4gYn07ZnVuY3Rpb24gSGcoYSl7cmV0dXJue3RyYWNrU2VsZWN0aW9uQ2FsbGJhY2s6YS5BLmJpbmQoYSkscHJvZ3Jlc3NDYWxsYmFjazpmdW5jdGlvbihhLGMpe2lmKGF8fGMpcmV0dXJuIG51bGx9fX1mdW5jdGlvbiBKZyhhKXtyZXR1cm4gYS5hP2EuYS5hP1Byb21pc2UucmVzb2x2ZSgpOmEuYS5pbml0KFlmKTpQcm9taXNlLnJlamVjdChuZXcgdCgyLDksOUUzKSl9XG5YLnByb3RvdHlwZS5vPWZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKHRoaXMuail7dmFyIGM9dGhpcy5qLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cInZhcmlhbnRcIj09YS50eXBlfSksZD1udWxsO2MubGVuZ3RoJiYoZD1iYyhhLGNbMF0pKTtkJiYoZC52aWRlbyYmKGIudmlkZW89ZC52aWRlbyksZC5hdWRpbyYmKGIuYXVkaW89ZC5hdWRpbykpfVdiKHRoaXMuYixiLGEpO1ZiKGEsdGhpcy5mLmdldENvbmZpZ3VyYXRpb24oKS5yZXN0cmljdGlvbnMse3dpZHRoOkluZmluaXR5LGhlaWdodDpJbmZpbml0eX0pfTtmdW5jdGlvbiBMZyhhKXt2YXIgYj1hLmI/YS5iLm0oKTpQcm9taXNlLnJlc29sdmUoKTthLmI9bnVsbDthLmM9bnVsbDthLnY9ITE7YS5qPW51bGw7YS5nPS0xO3JldHVybiBifVxuZnVuY3Rpb24gTWcoYSl7dmFyIGI9YS5wZXJpb2RzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YXJpYW50c30pLnJlZHVjZSh4LFtdKS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9W107YS5hdWRpbyYmYi5wdXNoKGEuYXVkaW8pO2EudmlkZW8mJmIucHVzaChhLnZpZGVvKTtyZXR1cm4gYn0pLnJlZHVjZSh4LFtdKS5maWx0ZXIoQWEpO2E9YS5wZXJpb2RzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50ZXh0U3RyZWFtc30pLnJlZHVjZSh4LFtdKTtiLnB1c2guYXBwbHkoYixhKTtyZXR1cm4gUHJvbWlzZS5hbGwoYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlU2VnbWVudEluZGV4KCl9KSl9XG5YLnByb3RvdHlwZS5CPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1aYihhLG51bGwsbnVsbCksZT1hYyhhLG51bGwpLGQ9dGhpcy5pLnRyYWNrU2VsZWN0aW9uQ2FsbGJhY2soZC5jb25jYXQoZSkpO3RoaXMuanx8KHRoaXMuaj1kLHRoaXMuYy5wZXJpb2RzLmZvckVhY2godGhpcy5vLmJpbmQodGhpcykpKTtmb3IoZT1kLmxlbmd0aC0xOzA8ZTstLWUpe3ZhciBmPSExO2ZvcihjPWUtMTswPD1jOy0tYylpZihkW2VdLnR5cGU9PWRbY10udHlwZSYmZFtlXS5raW5kPT1kW2NdLmtpbmQmJmRbZV0ubGFuZ3VhZ2U9PWRbY10ubGFuZ3VhZ2Upe2Y9ITA7YnJlYWt9aWYoZilicmVha31mPVtdO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKyspKGI9YmMoYSxkW2VdKSk/KGIuYXVkaW8mJigoYz1mLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYS5pZD09Yi5hdWRpby5pZH0pWzBdKT9jLnZhcmlhbnRJZHMucHVzaChiLmlkKTooYz1iLnZpZGVvP2IuYmFuZHdpZHRoLzI6Yi5iYW5kd2lkdGgsZi5wdXNoKE5nKHRoaXMsXG5hLGIuYXVkaW8sYyxiLmlkKSkpKSxiLnZpZGVvJiYoKGM9Zi5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWQ9PWIudmlkZW8uaWR9KVswXSk/Yy52YXJpYW50SWRzLnB1c2goYi5pZCk6KGM9Yi5hdWRpbz9iLmJhbmR3aWR0aC8yOmIuYmFuZHdpZHRoLGYucHVzaChOZyh0aGlzLGEsYi52aWRlbyxjLGIuaWQpKSkpKTpmLnB1c2goTmcodGhpcyxhLGNjKGEsZFtlXSksMCkpO3JldHVybntzdGFydFRpbWU6YS5zdGFydFRpbWUsc3RyZWFtczpmfX07XG5mdW5jdGlvbiBOZyhhLGIsYyxkLGUpe3ZhciBmPVtdLGc9YS5jLnByZXNlbnRhdGlvblRpbWVsaW5lLm1hKCk7dmFyIGg9Zztmb3IodmFyIGw9Yy5maW5kU2VnbWVudFBvc2l0aW9uKGcpLG49bnVsbCE9bD9jLmdldFNlZ21lbnRSZWZlcmVuY2UobCk6bnVsbDtuOyloPWEuYS5jLnNlZ21lbnQrKyxnZyhhLmgsYy50eXBlLG4sKG4uZW5kVGltZS1uLnN0YXJ0VGltZSkqZC84LHtrZXk6aCxkYXRhOm51bGwsbWFuaWZlc3RLZXk6YS5nLHN0cmVhbU51bWJlcjpjLmlkLHNlZ21lbnROdW1iZXI6aH0pLGYucHVzaCh7c3RhcnRUaW1lOm4uc3RhcnRUaW1lLGVuZFRpbWU6bi5lbmRUaW1lLHVyaTpcIm9mZmxpbmU6XCIrYS5nK1wiL1wiK2MuaWQrXCIvXCIraH0pLGg9bi5lbmRUaW1lK2Iuc3RhcnRUaW1lLG49Yy5nZXRTZWdtZW50UmVmZXJlbmNlKCsrbCk7YS5sPU1hdGgubWF4KGEubCxoLWcpO2I9bnVsbDtjLmluaXRTZWdtZW50UmVmZXJlbmNlJiYoaD1hLmEuYy5zZWdtZW50KyssYj1cIm9mZmxpbmU6XCIrXG5hLmcrXCIvXCIrYy5pZCtcIi9cIitoLGdnKGEuaCxjLmNvbnRlbnRUeXBlLGMuaW5pdFNlZ21lbnRSZWZlcmVuY2UsMCx7a2V5OmgsZGF0YTpudWxsLG1hbmlmZXN0S2V5OmEuZyxzdHJlYW1OdW1iZXI6Yy5pZCxzZWdtZW50TnVtYmVyOi0xfSkpO2E9W107bnVsbCE9ZSYmYS5wdXNoKGUpO3JldHVybntpZDpjLmlkLHByaW1hcnk6Yy5wcmltYXJ5LHByZXNlbnRhdGlvblRpbWVPZmZzZXQ6Yy5wcmVzZW50YXRpb25UaW1lT2Zmc2V0fHwwLGNvbnRlbnRUeXBlOmMudHlwZSxtaW1lVHlwZTpjLm1pbWVUeXBlLGNvZGVjczpjLmNvZGVjcyxmcmFtZVJhdGU6Yy5mcmFtZVJhdGUsa2luZDpjLmtpbmQsbGFuZ3VhZ2U6Yy5sYW5ndWFnZSxsYWJlbDpjLmxhYmVsLHdpZHRoOmMud2lkdGh8fG51bGwsaGVpZ2h0OmMuaGVpZ2h0fHxudWxsLGluaXRTZWdtZW50VXJpOmIsZW5jcnlwdGVkOmMuZW5jcnlwdGVkLGtleUlkOmMua2V5SWQsc2VnbWVudHM6Zix2YXJpYW50SWRzOmF9fVxuZnVuY3Rpb24gWShhKXtpZighYS5mKXRocm93IG5ldyB0KDIsOSw5MDAyKTt9c2cub2ZmbGluZT1JZzttKFwic2hha2EucG9seWZpbGwuaW5zdGFsbEFsbFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxPZy5sZW5ndGg7KythKU9nW2FdKCl9KTt2YXIgT2c9W107ZnVuY3Rpb24gUGcoYSl7T2cucHVzaChhKX1tKFwic2hha2EucG9seWZpbGwucmVnaXN0ZXJcIixQZyk7ZnVuY3Rpb24gUWcoYSl7dmFyIGI9YS50eXBlLnJlcGxhY2UoL14od2Via2l0fG1venxNUykvLFwiXCIpLnRvTG93ZXJDYXNlKCk7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIEV2ZW50KXZhciBjPW5ldyBFdmVudChiLGEpO2Vsc2UgYz1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGMuaW5pdEV2ZW50KGIsYS5idWJibGVzLGEuY2FuY2VsYWJsZSk7YS50YXJnZXQuZGlzcGF0Y2hFdmVudChjKX1cblBnKGZ1bmN0aW9uKCl7aWYod2luZG93LkRvY3VtZW50KXt2YXIgYT1FbGVtZW50LnByb3RvdHlwZTthLnJlcXVlc3RGdWxsc2NyZWVuPWEucmVxdWVzdEZ1bGxzY3JlZW58fGEubW96UmVxdWVzdEZ1bGxTY3JlZW58fGEubXNSZXF1ZXN0RnVsbHNjcmVlbnx8YS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbjthPURvY3VtZW50LnByb3RvdHlwZTthLmV4aXRGdWxsc2NyZWVuPWEuZXhpdEZ1bGxzY3JlZW58fGEubW96Q2FuY2VsRnVsbFNjcmVlbnx8YS5tc0V4aXRGdWxsc2NyZWVufHxhLndlYmtpdEV4aXRGdWxsc2NyZWVuO1wiZnVsbHNjcmVlbkVsZW1lbnRcImluIGRvY3VtZW50fHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LFwiZnVsbHNjcmVlbkVsZW1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50fHxkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50fHxkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsXG5cImZ1bGxzY3JlZW5FbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVuYWJsZWR9fSkpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsUWcpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuZXJyb3JcIixRZyk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5jaGFuZ2VcIixRZyk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5lcnJvclwiLFFnKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiTVNGdWxsc2NyZWVuQ2hhbmdlXCIsUWcpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJNU0Z1bGxzY3JlZW5FcnJvclwiLFFnKX19KTtQZyhmdW5jdGlvbigpe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQ7YSYmMDw9YS5pbmRleE9mKFwiQ3JLZXlcIikmJmRlbGV0ZSB3aW5kb3cuaW5kZXhlZERCfSk7UGcoZnVuY3Rpb24oKXtpZig0NTAzNTk5NjI3MzcwNDk3IT1NYXRoLnJvdW5kKDQ1MDM1OTk2MjczNzA0OTcpKXt2YXIgYT1NYXRoLnJvdW5kO01hdGgucm91bmQ9ZnVuY3Rpb24oYil7dmFyIGM9Yjs0NTAzNTk5NjI3MzcwNDk2Pj1iJiYoYz1hKGIpKTtyZXR1cm4gY319fSk7ZnVuY3Rpb24gUmcoYSl7dGhpcy5mPVtdO3RoaXMuYj1bXTt0aGlzLmE9W107KG5ldyBRKS5kYShcInBzc2hcIix0aGlzLmMuYmluZCh0aGlzKSkucGFyc2UoYS5idWZmZXIpfVJnLnByb3RvdHlwZS5jPWZ1bmN0aW9uKGEpe2lmKCEoMTxhLnZlcnNpb24pKXt2YXIgYj0kYShhLnMuSmEoMTYpKSxjPVtdO2lmKDA8YS52ZXJzaW9uKWZvcih2YXIgZD1hLnMuRCgpLGU9MDtlPGQ7KytlKXt2YXIgZj0kYShhLnMuSmEoMTYpKTtjLnB1c2goZil9ZD1hLnMuRCgpO2Eucy5JKGQpO3RoaXMuYi5wdXNoLmFwcGx5KHRoaXMuYixjKTt0aGlzLmYucHVzaChiKTt0aGlzLmEucHVzaCh7c3RhcnQ6YS5zdGFydCxlbmQ6YS5zdGFydCthLnNpemUtMX0pfX07ZnVuY3Rpb24gU2coYSxiKXt0cnl7dmFyIGM9bmV3IFRnKGEsYik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjKX1jYXRjaChkKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZCl9fVxuZnVuY3Rpb24gVGcoYSxiKXt0aGlzLmtleVN5c3RlbT1hO2Zvcih2YXIgYz0hMSxkPTA7ZDxiLmxlbmd0aDsrK2Qpe3ZhciBlPWJbZF07dmFyIGY9e2F1ZGlvQ2FwYWJpbGl0aWVzOltdLHZpZGVvQ2FwYWJpbGl0aWVzOltdLHBlcnNpc3RlbnRTdGF0ZTpcIm9wdGlvbmFsXCIsZGlzdGluY3RpdmVJZGVudGlmaWVyOlwib3B0aW9uYWxcIixpbml0RGF0YVR5cGVzOmUuaW5pdERhdGFUeXBlcyxzZXNzaW9uVHlwZXM6W1widGVtcG9yYXJ5XCJdLGxhYmVsOmUubGFiZWx9LGc9ITE7aWYoZS5hdWRpb0NhcGFiaWxpdGllcylmb3IodmFyIGg9MDtoPGUuYXVkaW9DYXBhYmlsaXRpZXMubGVuZ3RoOysraCl7dmFyIGw9ZS5hdWRpb0NhcGFiaWxpdGllc1toXTtpZihsLmNvbnRlbnRUeXBlKXtnPSEwO3ZhciBuPWwuY29udGVudFR5cGUuc3BsaXQoXCI7XCIpWzBdO01TTWVkaWFLZXlzLmlzVHlwZVN1cHBvcnRlZCh0aGlzLmtleVN5c3RlbSxuKSYmKGYuYXVkaW9DYXBhYmlsaXRpZXMucHVzaChsKSxjPSEwKX19aWYoZS52aWRlb0NhcGFiaWxpdGllcylmb3IoaD1cbjA7aDxlLnZpZGVvQ2FwYWJpbGl0aWVzLmxlbmd0aDsrK2gpbD1lLnZpZGVvQ2FwYWJpbGl0aWVzW2hdLGwuY29udGVudFR5cGUmJihnPSEwLG49bC5jb250ZW50VHlwZS5zcGxpdChcIjtcIilbMF0sTVNNZWRpYUtleXMuaXNUeXBlU3VwcG9ydGVkKHRoaXMua2V5U3lzdGVtLG4pJiYoZi52aWRlb0NhcGFiaWxpdGllcy5wdXNoKGwpLGM9ITApKTtnfHwoYz1NU01lZGlhS2V5cy5pc1R5cGVTdXBwb3J0ZWQodGhpcy5rZXlTeXN0ZW0sXCJ2aWRlby9tcDRcIikpO1wicmVxdWlyZWRcIj09ZS5wZXJzaXN0ZW50U3RhdGUmJihmLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIsZi5zZXNzaW9uVHlwZXM9W1wicGVyc2lzdGVudC1saWNlbnNlXCJdKTtpZihjKXt0aGlzLmE9ZjtyZXR1cm59fWU9RXJyb3IoXCJVbnN1cHBvcnRlZCBrZXlTeXN0ZW1cIik7ZS5uYW1lPVwiTm90U3VwcG9ydGVkRXJyb3JcIjtlLmNvZGU9RE9NRXhjZXB0aW9uLk5PVF9TVVBQT1JURURfRVJSO3Rocm93IGU7fVxuVGcucHJvdG90eXBlLmNyZWF0ZU1lZGlhS2V5cz1mdW5jdGlvbigpe3ZhciBhPW5ldyBVZyh0aGlzLmtleVN5c3RlbSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShhKX07VGcucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtmdW5jdGlvbiBWZyhhKXt2YXIgYj10aGlzLm1lZGlhS2V5cztiJiZiIT1hJiZXZyhiLG51bGwpO2RlbGV0ZSB0aGlzLm1lZGlhS2V5cztyZXR1cm4odGhpcy5tZWRpYUtleXM9YSk/V2coYSx0aGlzKTpQcm9taXNlLnJlc29sdmUoKX1mdW5jdGlvbiBVZyhhKXt0aGlzLmE9bmV3IE1TTWVkaWFLZXlzKGEpO3RoaXMuYj1uZXcgRH1VZy5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbj1mdW5jdGlvbihhKXtpZihcInRlbXBvcmFyeVwiIT0oYXx8XCJ0ZW1wb3JhcnlcIikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNlc3Npb24gdHlwZSBcIithK1wiIGlzIHVuc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0uXCIpO3JldHVybiBuZXcgWGcodGhpcy5hKX07XG5VZy5wcm90b3R5cGUuc2V0U2VydmVyQ2VydGlmaWNhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCExKX07ZnVuY3Rpb24gV2coYSxiKXtmdW5jdGlvbiBjKCl7Yi5tc1NldE1lZGlhS2V5cyhkLmEpO2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsYyl9SmEoYS5iKTtpZighYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7RShhLmIsYixcIm1zbmVlZGtleVwiLFlnKTt2YXIgZD1hO3RyeXtyZXR1cm4gMTw9Yi5yZWFkeVN0YXRlP2IubXNTZXRNZWRpYUtleXMoYS5hKTpiLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLGMpLFByb21pc2UucmVzb2x2ZSgpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX19XG5mdW5jdGlvbiBYZyhhKXtwLmNhbGwodGhpcyk7dGhpcy5jPW51bGw7dGhpcy5nPWE7dGhpcy5iPXRoaXMuYT1udWxsO3RoaXMuZj1uZXcgRDt0aGlzLnNlc3Npb25JZD1cIlwiO3RoaXMuZXhwaXJhdGlvbj1OYU47dGhpcy5jbG9zZWQ9bmV3IEE7dGhpcy5rZXlTdGF0dXNlcz1uZXcgWmd9YmEoWGcpO2s9WGcucHJvdG90eXBlO2suZ2VuZXJhdGVSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7dGhpcy5hPW5ldyBBO3RyeXt0aGlzLmM9dGhpcy5nLmNyZWF0ZVNlc3Npb24oXCJ2aWRlby9tcDRcIixuZXcgVWludDhBcnJheShiKSxudWxsKSxFKHRoaXMuZix0aGlzLmMsXCJtc2tleW1lc3NhZ2VcIix0aGlzLm5kLmJpbmQodGhpcykpLEUodGhpcy5mLHRoaXMuYyxcIm1za2V5YWRkZWRcIix0aGlzLmxkLmJpbmQodGhpcykpLEUodGhpcy5mLHRoaXMuYyxcIm1za2V5ZXJyb3JcIix0aGlzLm1kLmJpbmQodGhpcykpLCRnKHRoaXMsXCJzdGF0dXMtcGVuZGluZ1wiKX1jYXRjaChjKXt0aGlzLmEucmVqZWN0KGMpfXJldHVybiB0aGlzLmF9O1xuay5sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KEVycm9yKFwiTWVkaWFLZXlTZXNzaW9uLmxvYWQgbm90IHlldCBzdXBwb3J0ZWRcIikpfTtrLnVwZGF0ZT1mdW5jdGlvbihhKXt0aGlzLmI9bmV3IEE7dHJ5e3RoaXMuYy51cGRhdGUobmV3IFVpbnQ4QXJyYXkoYSkpfWNhdGNoKGIpe3RoaXMuYi5yZWplY3QoYil9cmV0dXJuIHRoaXMuYn07ay5jbG9zZT1mdW5jdGlvbigpe3RyeXt0aGlzLmMuY2xvc2UoKSx0aGlzLmNsb3NlZC5yZXNvbHZlKCksSmEodGhpcy5mKX1jYXRjaChhKXt0aGlzLmNsb3NlZC5yZWplY3QoYSl9cmV0dXJuIHRoaXMuY2xvc2VkfTtrLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIk1lZGlhS2V5U2Vzc2lvbi5yZW1vdmUgaXMgb25seSBhcHBsaWNhYmxlIGZvciBwZXJzaXN0ZW50IGxpY2Vuc2VzLCB3aGljaCBhcmUgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtXCIpKX07XG5mdW5jdGlvbiBZZyhhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO2IuaW5pdEN1c3RvbUV2ZW50KFwiZW5jcnlwdGVkXCIsITEsITEsbnVsbCk7Yi5pbml0RGF0YVR5cGU9XCJjZW5jXCI7dmFyIGM9YS5pbml0RGF0YTtpZihjKXt2YXIgZD1uZXcgUmcoYyk7aWYoMT49ZC5hLmxlbmd0aClhPWM7ZWxzZXt2YXIgZT1bXTtmb3IoYT0wO2E8ZC5hLmxlbmd0aDthKyspZS5wdXNoKGMuc3ViYXJyYXkoZC5hW2FdLnN0YXJ0LGQuYVthXS5lbmQrMSkpO2M9R2EoZSxhaCk7Zm9yKGE9ZD0wO2E8Yy5sZW5ndGg7YSsrKWQrPWNbYV0ubGVuZ3RoO2Q9bmV3IFVpbnQ4QXJyYXkoZCk7Zm9yKGE9ZT0wO2E8Yy5sZW5ndGg7YSsrKWQuc2V0KGNbYV0sZSksZSs9Y1thXS5sZW5ndGg7YT1kfX1lbHNlIGE9YztiLmluaXREYXRhPWE7dGhpcy5kaXNwYXRjaEV2ZW50KGIpfWZ1bmN0aW9uIGFoKGEsYil7cmV0dXJuIGFiKGEsYil9XG5rLm5kPWZ1bmN0aW9uKGEpe3RoaXMuYSYmKHRoaXMuYS5yZXNvbHZlKCksdGhpcy5hPW51bGwpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgSShcIm1lc3NhZ2VcIix7bWVzc2FnZVR5cGU6dm9pZCAwPT10aGlzLmtleVN0YXR1c2VzLnFiKCk/XCJsaWNlbnNlcmVxdWVzdFwiOlwibGljZW5zZXJlbmV3YWxcIixtZXNzYWdlOmEubWVzc2FnZS5idWZmZXJ9KSl9O2subGQ9ZnVuY3Rpb24oKXt0aGlzLmE/KCRnKHRoaXMsXCJ1c2FibGVcIiksdGhpcy5hLnJlc29sdmUoKSx0aGlzLmE9bnVsbCk6dGhpcy5iJiYoJGcodGhpcyxcInVzYWJsZVwiKSx0aGlzLmIucmVzb2x2ZSgpLHRoaXMuYj1udWxsKX07XG5rLm1kPWZ1bmN0aW9uKCl7dmFyIGE9RXJyb3IoXCJFTUUgUGF0Y2hlZE1lZGlhS2V5c01zIGtleSBlcnJvclwiKTthLmVycm9yQ29kZT10aGlzLmMuZXJyb3I7aWYodGhpcy5hKXRoaXMuYS5yZWplY3QoYSksdGhpcy5hPW51bGw7ZWxzZSBpZih0aGlzLmIpdGhpcy5iLnJlamVjdChhKSx0aGlzLmI9bnVsbDtlbHNlIHN3aXRjaCh0aGlzLmMuZXJyb3IuY29kZSl7Y2FzZSBNU01lZGlhS2V5RXJyb3IuTVNfTUVESUFfS0VZRVJSX09VVFBVVDpjYXNlIE1TTWVkaWFLZXlFcnJvci5NU19NRURJQV9LRVlFUlJfSEFSRFdBUkVDSEFOR0U6JGcodGhpcyxcIm91dHB1dC1ub3QtYWxsb3dlZFwiKTtkZWZhdWx0OiRnKHRoaXMsXCJpbnRlcm5hbC1lcnJvclwiKX19O2Z1bmN0aW9uICRnKGEsYil7YS5rZXlTdGF0dXNlcy5JYihiKTthLmRpc3BhdGNoRXZlbnQobmV3IEkoXCJrZXlzdGF0dXNlc2NoYW5nZVwiKSl9ZnVuY3Rpb24gWmcoKXt0aGlzLnNpemU9MDt0aGlzLmE9dm9pZCAwfXZhciBiaDtrPVpnLnByb3RvdHlwZTtcbmsuSWI9ZnVuY3Rpb24oYSl7dGhpcy5zaXplPXZvaWQgMD09YT8wOjE7dGhpcy5hPWF9O2sucWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtrLmZvckVhY2g9ZnVuY3Rpb24oYSl7dGhpcy5hJiZhKHRoaXMuYSxiaCl9O2suZ2V0PWZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzKGEpKXJldHVybiB0aGlzLmF9O2suaGFzPWZ1bmN0aW9uKGEpe3ZhciBiPWJoO3JldHVybiB0aGlzLmEmJmFiKG5ldyBVaW50OEFycmF5KGEpLG5ldyBVaW50OEFycmF5KGIpKT8hMDohMX07ay5lbnRyaWVzPWZ1bmN0aW9uKCl7fTtrLmtleXM9ZnVuY3Rpb24oKXt9O2sudmFsdWVzPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBjaCgpe3JldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIlRoZSBrZXkgc3lzdGVtIHNwZWNpZmllZCBpcyBub3Qgc3VwcG9ydGVkLlwiKSl9ZnVuY3Rpb24gZGgoYSl7cmV0dXJuIGE/UHJvbWlzZS5yZWplY3QoRXJyb3IoXCJNZWRpYUtleXMgbm90IHN1cHBvcnRlZC5cIikpOlByb21pc2UucmVzb2x2ZSgpfWZ1bmN0aW9uIGVoKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgY29uc3RydWN0b3IuXCIpO31laC5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbj1mdW5jdGlvbigpe307ZWgucHJvdG90eXBlLnNldFNlcnZlckNlcnRpZmljYXRlPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBmaCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGNvbnN0cnVjdG9yLlwiKTt9ZmgucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXt9O2ZoLnByb3RvdHlwZS5jcmVhdGVNZWRpYUtleXM9ZnVuY3Rpb24oKXt9O3ZhciBnaD1cIlwiO2Z1bmN0aW9uIGhoKGEpe2doPWE7aWg9KG5ldyBVaW50OEFycmF5KFswXSkpLmJ1ZmZlcjtuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzPWpoO2RlbGV0ZSBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXM7SFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzPW51bGw7SFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0TWVkaWFLZXlzPWtoO3dpbmRvdy5NZWRpYUtleXM9bGg7d2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzPW1ofWZ1bmN0aW9uIG5oKGEpe3ZhciBiPWdoO3JldHVybiBiP2IrYS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpOmF9ZnVuY3Rpb24gamgoYSxiKXt0cnl7dmFyIGM9bmV3IG1oKGEsYik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjKX1jYXRjaChkKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZCl9fVxuZnVuY3Rpb24ga2goYSl7dmFyIGI9dGhpcy5tZWRpYUtleXM7YiYmYiE9YSYmb2goYixudWxsKTtkZWxldGUgdGhpcy5tZWRpYUtleXM7KHRoaXMubWVkaWFLZXlzPWEpJiZvaChhLHRoaXMpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1cbmZ1bmN0aW9uIG1oKGEsYil7dGhpcy5hPXRoaXMua2V5U3lzdGVtPWE7dmFyIGM9ITA7XCJvcmcudzMuY2xlYXJrZXlcIj09YSYmKHRoaXMuYT1cIndlYmtpdC1vcmcudzMuY2xlYXJrZXlcIixjPSExKTt2YXIgZD0hMTt2YXIgZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInZpZGVvXCIpO3ZhciBmPWUubGVuZ3RoP2VbMF06ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO2Zvcih2YXIgZz0wO2c8Yi5sZW5ndGg7KytnKXtlPWJbZ107dmFyIGg9e2F1ZGlvQ2FwYWJpbGl0aWVzOltdLHZpZGVvQ2FwYWJpbGl0aWVzOltdLHBlcnNpc3RlbnRTdGF0ZTpcIm9wdGlvbmFsXCIsZGlzdGluY3RpdmVJZGVudGlmaWVyOlwib3B0aW9uYWxcIixpbml0RGF0YVR5cGVzOmUuaW5pdERhdGFUeXBlcyxzZXNzaW9uVHlwZXM6W1widGVtcG9yYXJ5XCJdLGxhYmVsOmUubGFiZWx9LGw9ITE7aWYoZS5hdWRpb0NhcGFiaWxpdGllcylmb3IodmFyIG49MDtuPGUuYXVkaW9DYXBhYmlsaXRpZXMubGVuZ3RoOysrbil7dmFyIHE9XG5lLmF1ZGlvQ2FwYWJpbGl0aWVzW25dO2lmKHEuY29udGVudFR5cGUpe3ZhciBsPSEwLHI9cS5jb250ZW50VHlwZS5zcGxpdChcIjtcIilbMF07Zi5jYW5QbGF5VHlwZShyLHRoaXMuYSkmJihoLmF1ZGlvQ2FwYWJpbGl0aWVzLnB1c2gocSksZD0hMCl9fWlmKGUudmlkZW9DYXBhYmlsaXRpZXMpZm9yKG49MDtuPGUudmlkZW9DYXBhYmlsaXRpZXMubGVuZ3RoOysrbilxPWUudmlkZW9DYXBhYmlsaXRpZXNbbl0scS5jb250ZW50VHlwZSYmKGw9ITAsZi5jYW5QbGF5VHlwZShxLmNvbnRlbnRUeXBlLHRoaXMuYSkmJihoLnZpZGVvQ2FwYWJpbGl0aWVzLnB1c2gocSksZD0hMCkpO2x8fChkPWYuY2FuUGxheVR5cGUoXCJ2aWRlby9tcDRcIix0aGlzLmEpfHxmLmNhblBsYXlUeXBlKFwidmlkZW8vd2VibVwiLHRoaXMuYSkpO1wicmVxdWlyZWRcIj09ZS5wZXJzaXN0ZW50U3RhdGUmJihjPyhoLnBlcnNpc3RlbnRTdGF0ZT1cInJlcXVpcmVkXCIsaC5zZXNzaW9uVHlwZXM9W1wicGVyc2lzdGVudC1saWNlbnNlXCJdKTpcbmQ9ITEpO2lmKGQpe3RoaXMuYj1oO3JldHVybn19Yz1cIlVuc3VwcG9ydGVkIGtleVN5c3RlbVwiO2lmKFwib3JnLnczLmNsZWFya2V5XCI9PWF8fFwiY29tLndpZGV2aW5lLmFscGhhXCI9PWEpYz1cIk5vbmUgb2YgdGhlIHJlcXVlc3RlZCBjb25maWd1cmF0aW9ucyB3ZXJlIHN1cHBvcnRlZC5cIjtjPUVycm9yKGMpO2MubmFtZT1cIk5vdFN1cHBvcnRlZEVycm9yXCI7Yy5jb2RlPURPTUV4Y2VwdGlvbi5OT1RfU1VQUE9SVEVEX0VSUjt0aHJvdyBjO31taC5wcm90b3R5cGUuY3JlYXRlTWVkaWFLZXlzPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGxoKHRoaXMuYSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShhKX07bWgucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifTtmdW5jdGlvbiBsaChhKXt0aGlzLmc9YTt0aGlzLmI9bnVsbDt0aGlzLmE9bmV3IEQ7dGhpcy5jPVtdO3RoaXMuZj17fX1cbmZ1bmN0aW9uIG9oKGEsYil7YS5iPWI7SmEoYS5hKTt2YXIgYz1naDtiJiYoRShhLmEsYixjK1wibmVlZGtleVwiLGEuQWQuYmluZChhKSksRShhLmEsYixjK1wia2V5bWVzc2FnZVwiLGEuemQuYmluZChhKSksRShhLmEsYixjK1wia2V5YWRkZWRcIixhLnhkLmJpbmQoYSkpLEUoYS5hLGIsYytcImtleWVycm9yXCIsYS55ZC5iaW5kKGEpKSl9az1saC5wcm90b3R5cGU7ay5jcmVhdGVTZXNzaW9uPWZ1bmN0aW9uKGEpe3ZhciBiPWF8fFwidGVtcG9yYXJ5XCI7aWYoXCJ0ZW1wb3JhcnlcIiE9YiYmXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIiE9Yil0aHJvdyBuZXcgVHlwZUVycm9yKFwiU2Vzc2lvbiB0eXBlIFwiK2ErXCIgaXMgdW5zdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybS5cIik7YT10aGlzLmJ8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTthLnNyY3x8KGEuc3JjPVwiYWJvdXQ6YmxhbmtcIik7Yj1uZXcgcGgoYSx0aGlzLmcsYik7dGhpcy5jLnB1c2goYik7cmV0dXJuIGJ9O1xuay5zZXRTZXJ2ZXJDZXJ0aWZpY2F0ZT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoITEpfTtrLkFkPWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7Yi5pbml0Q3VzdG9tRXZlbnQoXCJlbmNyeXB0ZWRcIiwhMSwhMSxudWxsKTtiLmluaXREYXRhVHlwZT1cIndlYm1cIjtiLmluaXREYXRhPWEuaW5pdERhdGE7dGhpcy5iLmRpc3BhdGNoRXZlbnQoYil9O2suemQ9ZnVuY3Rpb24oYSl7dmFyIGI9cWgodGhpcyxhLnNlc3Npb25JZCk7YiYmKGE9bmV3IEkoXCJtZXNzYWdlXCIse21lc3NhZ2VUeXBlOnZvaWQgMD09Yi5rZXlTdGF0dXNlcy5xYigpP1wibGljZW5zZXJlcXVlc3RcIjpcImxpY2Vuc2VyZW5ld2FsXCIsbWVzc2FnZTphLm1lc3NhZ2V9KSxiLmImJihiLmIucmVzb2x2ZSgpLGIuYj1udWxsKSxiLmRpc3BhdGNoRXZlbnQoYSkpfTtcbmsueGQ9ZnVuY3Rpb24oYSl7aWYoYT1xaCh0aGlzLGEuc2Vzc2lvbklkKSlyaChhLFwidXNhYmxlXCIpLGEuYSYmYS5hLnJlc29sdmUoKSxhLmE9bnVsbH07XG5rLnlkPWZ1bmN0aW9uKGEpe3ZhciBiPXFoKHRoaXMsYS5zZXNzaW9uSWQpO2lmKGIpe3ZhciBjPUVycm9yKFwiRU1FIHYwLjFiIGtleSBlcnJvclwiKTtjLmVycm9yQ29kZT1hLmVycm9yQ29kZTtjLmVycm9yQ29kZS5zeXN0ZW1Db2RlPWEuc3lzdGVtQ29kZTshYS5zZXNzaW9uSWQmJmIuYj8oYy5tZXRob2Q9XCJnZW5lcmF0ZVJlcXVlc3RcIiw0NT09YS5zeXN0ZW1Db2RlJiYoYy5tZXNzYWdlPVwiVW5zdXBwb3J0ZWQgc2Vzc2lvbiB0eXBlLlwiKSxiLmIucmVqZWN0KGMpLGIuYj1udWxsKTphLnNlc3Npb25JZCYmYi5hPyhjLm1ldGhvZD1cInVwZGF0ZVwiLGIuYS5yZWplY3QoYyksYi5hPW51bGwpOihjPWEuc3lzdGVtQ29kZSxhLmVycm9yQ29kZS5jb2RlPT1NZWRpYUtleUVycm9yLk1FRElBX0tFWUVSUl9PVVRQVVQ/cmgoYixcIm91dHB1dC1yZXN0cmljdGVkXCIpOjE9PWM/cmgoYixcImV4cGlyZWRcIik6cmgoYixcImludGVybmFsLWVycm9yXCIpKX19O1xuZnVuY3Rpb24gcWgoYSxiKXt2YXIgYz1hLmZbYl07cmV0dXJuIGM/YzooYz1hLmMuc2hpZnQoKSk/KGMuc2Vzc2lvbklkPWIsYS5mW2JdPWMpOm51bGx9ZnVuY3Rpb24gcGgoYSxiLGMpe3AuY2FsbCh0aGlzKTt0aGlzLmY9YTt0aGlzLmg9ITE7dGhpcy5hPXRoaXMuYj1udWxsO3RoaXMuYz1iO3RoaXMuZz1jO3RoaXMuc2Vzc2lvbklkPVwiXCI7dGhpcy5leHBpcmF0aW9uPU5hTjt0aGlzLmNsb3NlZD1uZXcgQTt0aGlzLmtleVN0YXR1c2VzPW5ldyBzaH1iYShwaCk7XG5mdW5jdGlvbiB0aChhLGIsYyl7aWYoYS5oKXJldHVybiBQcm9taXNlLnJlamVjdChFcnJvcihcIlRoZSBzZXNzaW9uIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpKTthLmg9ITA7dHJ5e2lmKFwicGVyc2lzdGVudC1saWNlbnNlXCI9PWEuZylpZihjKXZhciBkPW5ldyBVaW50OEFycmF5KFVhKFwiTE9BRF9TRVNTSU9OfFwiK2MpKTtlbHNle3ZhciBlPVVhKFwiUEVSU0lTVEVOVHxcIiksZj1uZXcgVWludDhBcnJheShlLmJ5dGVMZW5ndGgrYi5ieXRlTGVuZ3RoKTtmLnNldChuZXcgVWludDhBcnJheShlKSwwKTtmLnNldChuZXcgVWludDhBcnJheShiKSxlLmJ5dGVMZW5ndGgpO2Q9Zn1lbHNlIGQ9bmV3IFVpbnQ4QXJyYXkoYil9Y2F0Y2goaCl7cmV0dXJuIFByb21pc2UucmVqZWN0KGgpfWEuYj1uZXcgQTt2YXIgZz1uaChcImdlbmVyYXRlS2V5UmVxdWVzdFwiKTt0cnl7YS5mW2ddKGEuYyxkKX1jYXRjaChoKXtpZihcIkludmFsaWRTdGF0ZUVycm9yXCIhPWgubmFtZSlyZXR1cm4gYS5iPW51bGwsUHJvbWlzZS5yZWplY3QoaCk7XG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e3RoaXMuZltnXSh0aGlzLmMsZCl9Y2F0Y2gobCl7dGhpcy5iLnJlamVjdChsKSx0aGlzLmI9bnVsbH19LmJpbmQoYSksMTApfXJldHVybiBhLmJ9az1waC5wcm90b3R5cGU7XG5rLktiPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5hKXRoaXMuYS50aGVuKHRoaXMuS2IuYmluZCh0aGlzLGEsYikpW1wiY2F0Y2hcIl0odGhpcy5LYi5iaW5kKHRoaXMsYSxiKSk7ZWxzZXt0aGlzLmE9YTtpZihcIndlYmtpdC1vcmcudzMuY2xlYXJrZXlcIj09dGhpcy5jKXt2YXIgYz1GKGIpO3ZhciBkPUpTT04ucGFyc2UoYyk7XCJvY3RcIiE9ZC5rZXlzWzBdLmt0eSYmKHRoaXMuYS5yZWplY3QoRXJyb3IoXCJSZXNwb25zZSBpcyBub3QgYSB2YWxpZCBKU09OIFdlYiBLZXkgU2V0LlwiKSksdGhpcy5hPW51bGwpO2M9WWEoZC5rZXlzWzBdLmspO2Q9WWEoZC5rZXlzWzBdLmtpZCl9ZWxzZSBjPW5ldyBVaW50OEFycmF5KGIpLGQ9bnVsbDt2YXIgZT1uaChcImFkZEtleVwiKTt0cnl7dGhpcy5mW2VdKHRoaXMuYyxjLGQsdGhpcy5zZXNzaW9uSWQpfWNhdGNoKGYpe3RoaXMuYS5yZWplY3QoZiksdGhpcy5hPW51bGx9fX07XG5mdW5jdGlvbiByaChhLGIpe2Eua2V5U3RhdHVzZXMuSWIoYik7YS5kaXNwYXRjaEV2ZW50KG5ldyBJKFwia2V5c3RhdHVzZXNjaGFuZ2VcIikpfWsuZ2VuZXJhdGVSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoKHRoaXMsYixudWxsKX07ay5sb2FkPWZ1bmN0aW9uKGEpe3JldHVyblwicGVyc2lzdGVudC1saWNlbnNlXCI9PXRoaXMuZz90aCh0aGlzLG51bGwsYSk6UHJvbWlzZS5yZWplY3QoRXJyb3IoXCJOb3QgYSBwZXJzaXN0ZW50IHNlc3Npb24uXCIpKX07ay51cGRhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEE7dGhpcy5LYihiLGEpO3JldHVybiBifTtcbmsuY2xvc2U9ZnVuY3Rpb24oKXtpZihcInBlcnNpc3RlbnQtbGljZW5zZVwiIT10aGlzLmcpe2lmKCF0aGlzLnNlc3Npb25JZClyZXR1cm4gdGhpcy5jbG9zZWQucmVqZWN0KEVycm9yKFwiVGhlIHNlc3Npb24gaXMgbm90IGNhbGxhYmxlLlwiKSksdGhpcy5jbG9zZWQ7dmFyIGE9bmgoXCJjYW5jZWxLZXlSZXF1ZXN0XCIpO3RyeXt0aGlzLmZbYV0odGhpcy5jLHRoaXMuc2Vzc2lvbklkKX1jYXRjaChiKXt9fXRoaXMuY2xvc2VkLnJlc29sdmUoKTtyZXR1cm4gdGhpcy5jbG9zZWR9O2sucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuXCJwZXJzaXN0ZW50LWxpY2Vuc2VcIiE9dGhpcy5nP1Byb21pc2UucmVqZWN0KEVycm9yKFwiTm90IGEgcGVyc2lzdGVudCBzZXNzaW9uLlwiKSk6dGhpcy5jbG9zZSgpfTtmdW5jdGlvbiBzaCgpe3RoaXMuc2l6ZT0wO3RoaXMuYT12b2lkIDB9dmFyIGloO2s9c2gucHJvdG90eXBlO2suSWI9ZnVuY3Rpb24oYSl7dGhpcy5zaXplPXZvaWQgMD09YT8wOjE7dGhpcy5hPWF9O1xuay5xYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2suZm9yRWFjaD1mdW5jdGlvbihhKXt0aGlzLmEmJmEodGhpcy5hLGloKX07ay5nZXQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5oYXMoYSkpcmV0dXJuIHRoaXMuYX07ay5oYXM9ZnVuY3Rpb24oYSl7dmFyIGI9aWg7cmV0dXJuIHRoaXMuYSYmYWIobmV3IFVpbnQ4QXJyYXkoYSksbmV3IFVpbnQ4QXJyYXkoYikpPyEwOiExfTtrLmVudHJpZXM9ZnVuY3Rpb24oKXt9O2sua2V5cz1mdW5jdGlvbigpe307ay52YWx1ZXM9ZnVuY3Rpb24oKXt9O1BnKGZ1bmN0aW9uKCl7IXdpbmRvdy5IVE1MVmlkZW9FbGVtZW50fHxuYXZpZ2F0b3IucmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzJiZNZWRpYUtleVN5c3RlbUFjY2Vzcy5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbnx8KEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLndlYmtpdEdlbmVyYXRlS2V5UmVxdWVzdD9oaChcIndlYmtpdFwiKTpIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5nZW5lcmF0ZUtleVJlcXVlc3Q/aGgoXCJcIik6d2luZG93Lk1TTWVkaWFLZXlzPyhiaD0obmV3IFVpbnQ4QXJyYXkoWzBdKSkuYnVmZmVyLGRlbGV0ZSBIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXMsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUubWVkaWFLZXlzPW51bGwsSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0TWVkaWFLZXlzPVZnLHdpbmRvdy5NZWRpYUtleXM9VWcsd2luZG93Lk1lZGlhS2V5U3lzdGVtQWNjZXNzPVRnLG5hdmlnYXRvci5yZXF1ZXN0TWVkaWFLZXlTeXN0ZW1BY2Nlc3M9XG5TZyk6KG5hdmlnYXRvci5yZXF1ZXN0TWVkaWFLZXlTeXN0ZW1BY2Nlc3M9Y2gsZGVsZXRlIEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLm1lZGlhS2V5cyxIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5tZWRpYUtleXM9bnVsbCxIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5zZXRNZWRpYUtleXM9ZGgsd2luZG93Lk1lZGlhS2V5cz1laCx3aW5kb3cuTWVkaWFLZXlTeXN0ZW1BY2Nlc3M9ZmgpKX0pO2Z1bmN0aW9uIHVoKCl7dmFyIGE9TWVkaWFTb3VyY2UucHJvdG90eXBlLmFkZFNvdXJjZUJ1ZmZlcjtNZWRpYVNvdXJjZS5wcm90b3R5cGUuYWRkU291cmNlQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGI9YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yi5hYm9ydD1mdW5jdGlvbigpe307cmV0dXJuIGJ9fVxuZnVuY3Rpb24gdmgoKXt2YXIgYT1NZWRpYVNvdXJjZS5wcm90b3R5cGUuZW5kT2ZTdHJlYW07TWVkaWFTb3VyY2UucHJvdG90eXBlLmVuZE9mU3RyZWFtPWZ1bmN0aW9uKCl7Zm9yKHZhciBiLGQ9MCxlPTA7ZTx0aGlzLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoOysrZSliPXRoaXMuc291cmNlQnVmZmVyc1tlXSxiPWIuYnVmZmVyZWQuZW5kKGIuYnVmZmVyZWQubGVuZ3RoLTEpLGQ9TWF0aC5tYXgoZCxiKTtpZighaXNOYU4odGhpcy5kdXJhdGlvbikmJmQ8dGhpcy5kdXJhdGlvbilmb3IodGhpcy5YYj0hMCxlPTA7ZTx0aGlzLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoOysrZSliPXRoaXMuc291cmNlQnVmZmVyc1tlXSxiLlJiPSExO3JldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dmFyIGI9TWVkaWFTb3VyY2UucHJvdG90eXBlLmFkZFNvdXJjZUJ1ZmZlcjtNZWRpYVNvdXJjZS5wcm90b3R5cGUuYWRkU291cmNlQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGE9Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5hLk49dGhpczthLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVlbmRcIix3aCwhMSk7dGhpcy5hfHwodGhpcy5hZGRFdmVudExpc3RlbmVyKFwic291cmNlY2xvc2VcIix4aCwhMSksdGhpcy5hPSEwKTtyZXR1cm4gYX19ZnVuY3Rpb24gd2goYSl7dmFyIGI9YS50YXJnZXQsYz1iLk47aWYoYy5YYil7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCk7YS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtiLlJiPSEwO2ZvcihhPTA7YTxjLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoOysrYSlpZigwPT1jLnNvdXJjZUJ1ZmZlcnNbYV0uUmIpcmV0dXJuO2MuWGI9ITF9fWZ1bmN0aW9uIHhoKGEpe2E9YS50YXJnZXQ7Zm9yKHZhciBiPTA7YjxhLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoOysrYilhLnNvdXJjZUJ1ZmZlcnNbYl0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWVuZFwiLHdoLCExKTthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzb3VyY2VjbG9zZVwiLHhoLCExKX1cblBnKGZ1bmN0aW9uKCl7aWYod2luZG93Lk1lZGlhU291cmNlKXt2YXIgYT1uYXZpZ2F0b3IudmVuZG9yLGI9bmF2aWdhdG9yLmFwcFZlcnNpb247IWF8fCFifHwwPmEuaW5kZXhPZihcIkFwcGxlXCIpfHwoMDw9Yi5pbmRleE9mKFwiVmVyc2lvbi84XCIpP3dpbmRvdy5NZWRpYVNvdXJjZT1udWxsOjA8PWIuaW5kZXhPZihcIlZlcnNpb24vOVwiKT91aCgpOjA8PWIuaW5kZXhPZihcIlZlcnNpb24vMTBcIikmJih1aCgpLHZoKCkpKX19KTtmdW5jdGlvbiBaKGEpe3RoaXMuYz1bXTt0aGlzLmI9W107dGhpcy56YT15aDtpZihhKXRyeXthKHRoaXMuZmEuYmluZCh0aGlzKSx0aGlzLmEuYmluZCh0aGlzKSl9Y2F0Y2goYil7dGhpcy5hKGIpfX12YXIgeWg9MDtmdW5jdGlvbiB6aChhKXt2YXIgYj1uZXcgWjtiLmZhKHZvaWQgMCk7cmV0dXJuIGIudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSl9ZnVuY3Rpb24gQWgoYSl7dmFyIGI9bmV3IFo7Yi5hKGEpO3JldHVybiBifWZ1bmN0aW9uIEJoKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2EuemE9PXloJiYoZVtiXT1jLGQrKyxkPT1lLmxlbmd0aCYmYS5mYShlKSl9dmFyIGM9bmV3IFo7aWYoIWEubGVuZ3RoKXJldHVybiBjLmZhKFtdKSxjO2Zvcih2YXIgZD0wLGU9QXJyYXkoYS5sZW5ndGgpLGY9Yy5hLmJpbmQoYyksZz0wO2c8YS5sZW5ndGg7KytnKWFbZ10mJmFbZ10udGhlbj9hW2ddLnRoZW4oYi5iaW5kKG51bGwsYyxnKSxmKTpiKGMsZyxhW2ddKTtyZXR1cm4gY31cbmZ1bmN0aW9uIENoKGEpe2Zvcih2YXIgYj1uZXcgWixjPWIuZmEuYmluZChiKSxkPWIuYS5iaW5kKGIpLGU9MDtlPGEubGVuZ3RoOysrZSlhW2VdJiZhW2VdLnRoZW4/YVtlXS50aGVuKGMsZCk6YyhhW2VdKTtyZXR1cm4gYn1aLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFo7c3dpdGNoKHRoaXMuemEpe2Nhc2UgMTpEaCh0aGlzLGMsYSk7YnJlYWs7Y2FzZSAyOkRoKHRoaXMsYyxiKTticmVhaztjYXNlIHloOnRoaXMuYy5wdXNoKHtMOmMsbmI6YX0pLHRoaXMuYi5wdXNoKHtMOmMsbmI6Yn0pfXJldHVybiBjfTtaLnByb3RvdHlwZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGEpfTtcbloucHJvdG90eXBlLmZhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuemE9PXloKXt0aGlzLmpiPWE7dGhpcy56YT0xO2ZvcihhPTA7YTx0aGlzLmMubGVuZ3RoOysrYSlEaCh0aGlzLHRoaXMuY1thXS5MLHRoaXMuY1thXS5uYik7dGhpcy5jPVtdO3RoaXMuYj1bXX19O1oucHJvdG90eXBlLmE9ZnVuY3Rpb24oYSl7aWYodGhpcy56YT09eWgpe3RoaXMuamI9YTt0aGlzLnphPTI7Zm9yKGE9MDthPHRoaXMuYi5sZW5ndGg7KythKURoKHRoaXMsdGhpcy5iW2FdLkwsdGhpcy5iW2FdLm5iKTt0aGlzLmM9W107dGhpcy5iPVtdfX07XG5mdW5jdGlvbiBEaChhLGIsYyl7RWgucHVzaChmdW5jdGlvbigpe2lmKGMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGMpe3RyeXt2YXIgYT1jKHRoaXMuamIpfWNhdGNoKGYpe2IuYShmKTtyZXR1cm59dHJ5e3ZhciBlPWEmJmEudGhlbn1jYXRjaChmKXtiLmEoZik7cmV0dXJufWEgaW5zdGFuY2VvZiBaP2E9PWI/Yi5hKG5ldyBUeXBlRXJyb3IoXCJDaGFpbmluZyBjeWNsZSBkZXRlY3RlZFwiKSk6YS50aGVuKGIuZmEuYmluZChiKSxiLmEuYmluZChiKSk6ZT9GaChhLGUsYik6Yi5mYShhKX1lbHNlIDE9PXRoaXMuemE/Yi5mYSh0aGlzLmpiKTpiLmEodGhpcy5qYil9LmJpbmQoYSkpO251bGw9PUdoJiYoR2g9SGgoSWgpKX1cbmZ1bmN0aW9uIEZoKGEsYixjKXt0cnl7dmFyIGQ9ITE7Yi5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoIWQpe2Q9ITA7dHJ5e3ZhciBiPWEmJmEudGhlbn1jYXRjaChnKXtjLmEoZyk7cmV0dXJufWI/RmgoYSxiLGMpOmMuZmEoYSl9fSxjLmEuYmluZChjKSl9Y2F0Y2goZSl7Yy5hKGUpfX1mdW5jdGlvbiBJaCgpe2Zvcig7RWgubGVuZ3RoOyl7bnVsbCE9R2gmJihKaChHaCksR2g9bnVsbCk7dmFyIGE9RWg7RWg9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpYVtiXSgpfX1mdW5jdGlvbiBIaCgpe3JldHVybiAwfWZ1bmN0aW9uIEpoKCl7fXZhciBHaD1udWxsLEVoPVtdO1xuUGcoZnVuY3Rpb24oYSl7d2luZG93LnNldEltbWVkaWF0ZT8oSGg9ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoYSl9LEpoPWZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuY2xlYXJJbW1lZGlhdGUoYSl9KTooSGg9ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMCl9LEpoPWZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuY2xlYXJUaW1lb3V0KGEpfSk7aWYoIXdpbmRvdy5Qcm9taXNlfHxhKXdpbmRvdy5Qcm9taXNlPVosd2luZG93LlByb21pc2UucmVzb2x2ZT16aCx3aW5kb3cuUHJvbWlzZS5yZWplY3Q9QWgsd2luZG93LlByb21pc2UuYWxsPUJoLHdpbmRvdy5Qcm9taXNlLnJhY2U9Q2gsd2luZG93LlByb21pc2UucHJvdG90eXBlLnRoZW49Wi5wcm90b3R5cGUudGhlbix3aW5kb3cuUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXT1aLnByb3RvdHlwZVtcImNhdGNoXCJdfSk7UGcoZnVuY3Rpb24oKXtpZih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCl7dmFyIGE9SFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUucGxheTtIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7dmFyIGI9YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YiYmYltcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGJ9fX0pO2Z1bmN0aW9uIEtoKCl7cmV0dXJue2Ryb3BwZWRWaWRlb0ZyYW1lczp0aGlzLndlYmtpdERyb3BwZWRGcmFtZUNvdW50LHRvdGFsVmlkZW9GcmFtZXM6dGhpcy53ZWJraXREZWNvZGVkRnJhbWVDb3VudCxjb3JydXB0ZWRWaWRlb0ZyYW1lczowLGNyZWF0aW9uVGltZTpOYU4sdG90YWxGcmFtZURlbGF5OjB9fVBnKGZ1bmN0aW9uKCl7aWYod2luZG93LkhUTUxWaWRlb0VsZW1lbnQpe3ZhciBhPUhUTUxWaWRlb0VsZW1lbnQucHJvdG90eXBlOyFhLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5JiZcIndlYmtpdERyb3BwZWRGcmFtZUNvdW50XCJpbiBhJiYoYS5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eT1LaCl9fSk7ZnVuY3Rpb24gTGgoYSxiLGMpe3JldHVybiBuZXcgd2luZG93LlRleHRUcmFja0N1ZShhLGIsYyl9ZnVuY3Rpb24gTWgoYSxiLGMpe3JldHVybiBuZXcgd2luZG93LlRleHRUcmFja0N1ZShhK1wiLVwiK2IrXCItXCIrYyxhLGIsYyl9UGcoZnVuY3Rpb24oKXtpZighd2luZG93LlZUVEN1ZSYmd2luZG93LlRleHRUcmFja0N1ZSl7dmFyIGE9VGV4dFRyYWNrQ3VlLmxlbmd0aDtpZigzPT1hKXdpbmRvdy5WVFRDdWU9TGg7ZWxzZSBpZig2PT1hKXdpbmRvdy5WVFRDdWU9TWg7ZWxzZXt0cnl7dmFyIGI9ISFMaCgxLDIsXCJcIil9Y2F0Y2goYyl7Yj0hMX1iJiYod2luZG93LlZUVEN1ZT1MaCl9fX0pO30uY2FsbChnLHRoaXMpKTtcbmlmICh0eXBlb2YobW9kdWxlKSE9XCJ1bmRlZmluZWRcIiYmbW9kdWxlLmV4cG9ydHMpbW9kdWxlLmV4cG9ydHM9Zy5zaGFrYTtcbmVsc2UgaWYgKHR5cGVvZihkZWZpbmUpIT1cInVuZGVmaW5lZFwiICYmIGRlZmluZS5hbWQpZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGcuc2hha2F9KTtcbmVsc2UgdGhpcy5zaGFrYT1nLnNoYWthO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hha2EtcGxheWVyLmNvbXBpbGVkLm1hcCIsImNsYXNzIFByZXNlbnRhdGlvblRpbWUge1xuICBjb25zdHJ1Y3RvcihzZWMpIHtcbiAgICB0aGlzLnNlY29uZHMgPSBzZWM7XG4gIH1cblxuICB0b0hITU1TUygpIHtcbiAgICBjb25zdCBwYWQgPSBmdW5jdGlvbihpbnB1dCkge3JldHVybiBpbnB1dCA8IDEwID8gXCIwXCIgKyBpbnB1dCA6IGlucHV0O307XG4gICAgcmV0dXJuIFtcbiAgICAgICAgcGFkKE1hdGguZmxvb3IodGhpcy5zZWNvbmRzIC8gMzYwMCkpLFxuICAgICAgICBwYWQoTWF0aC5mbG9vcih0aGlzLnNlY29uZHMgJSAzNjAwIC8gNjApKSxcbiAgICAgICAgcGFkKE1hdGguZmxvb3IodGhpcy5zZWNvbmRzICUgNjApKSxcbiAgICBdLmpvaW4oJzonKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcmVzZW50YXRpb25UaW1lOyJdfQ==
